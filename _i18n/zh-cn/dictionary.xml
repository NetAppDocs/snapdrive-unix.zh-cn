<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="131f4d9d432b01213a4787b8b99d6140" category="summary">安装 SnapDrive for UNIX 的主机必须满足特定的软件，硬件，浏览器，数据库和操作系统要求。有关这些要求的详细信息，请参见互操作性表工具。</block>
  <block id="6a6bb2fcebc6acd4649aee3d098f191a" category="doc">准备部署</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="daabe2636884b9009d422fb4835b6826" category="list-text">验证您是否具有所需的许可证。</block>
  <block id="d29768a8804b8142def2b3a1627c90ed" category="list-text">验证您的配置是否支持 SnapDrive 。</block>
  <block id="d4b4a167a756c00552c7e39bed515b3a" category="list-text">验证 Linux 主机是否满足 SnapDrive 要求。</block>
  <block id="d33f2a600ba4fe43084a26e95e4908c0" category="paragraph">* 相关信息 *</block>
  <block id="bad452f6b69ffca305c3947427cd5f08" category="inline-xref-macro">SnapDrive for UNIX 许可证要求</block>
  <block id="b5f2cde2fe0918e3b7334b4ab55c4b53" category="paragraph"><block ref="b5f2cde2fe0918e3b7334b4ab55c4b53" category="inline-xref-macro-rx"></block></block>
  <block id="1f0b82560627b660c6c6958a1df834b8" category="inline-xref-macro">支持的配置</block>
  <block id="f897815c16caa4effb5a41c1cd0ec0b9" category="paragraph"><block ref="f897815c16caa4effb5a41c1cd0ec0b9" category="inline-xref-macro-rx"></block></block>
  <block id="ace028fe1c5dc8fb39091440d89fd9fd" category="inline-xref-macro">Linux 主机要求</block>
  <block id="dabdeb6bfdd363a186b3beae4ae962c1" category="paragraph"><block ref="dabdeb6bfdd363a186b3beae4ae962c1" category="inline-xref-macro-rx"></block></block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="inline-link">NetApp 互操作性表工具</block>
  <block id="d38df2295bfe768071dcfe28649a9438" category="paragraph"><block ref="d38df2295bfe768071dcfe28649a9438" category="inline-link-rx"></block></block>
  <block id="d1ca82ba9ab697f9fb827125456363c1" category="summary">在网络连接存储 \ （ NAS\ ）中使用存储区域网络 \ （ SAN\ ）和 NFS 卷时，您可以使用一个命令创建多个文件系统，主机卷， LUN 或磁盘组的 Snapshot 副本。</block>
  <block id="24c6ab5875a6be16466787e829180bff" category="doc">创建 Snapshot 副本</block>
  <block id="43b8f5d9eaff84f614f3a0d7c9bab56b" category="paragraph">在网络连接存储（ NAS ）中使用存储区域网络（ Storage Area Network ， SAN ）和 NFS 卷时，您可以使用一个命令为多个文件系统，主机卷， LUN 或磁盘组创建 Snapshot 副本。</block>
  <block id="17206bf2465252ec6f1f44a96d7f32d6" category="list-text">创建 Snapshot 副本：</block>
  <block id="dbb8172deb9820ef4db6699945c16714" category="paragraph">` * SnapDrive snap create -fs _file_spec_ -snapname _snapshot_copy_name_*`</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="summary"></block>
  <block id="6016a2b341113bf496b719905398ecd2" category="doc">版权</block>
  <block id="8e66a74a57f068f2fa65959d8460f25d" category="paragraph">版权所有 © 2019 NetApp ， Inc. 。保留所有权利。Printed in the U.S.</block>
  <block id="2275e007ee598cef266c877f9c52ee25" category="paragraph">版权所涵盖的本文档的任何部分不得以任何形式或任何方式复制，包括图像，电子或机械，包括影印，录制， 在未经版权所有者事先书面许可的情况下，在电子检索系统中粘贴或存储。</block>
  <block id="ce4ad2236c56cc11a838f29c8c261bf7" category="paragraph">Software derived from copyrighted NetApp material is subject to the following license and disclaimer:</block>
  <block id="b110bc9db113b3149cb9e2ed905d4c6c" category="paragraph">THIS SOFTWARE IS PROVIDED BY NETAPP "AS IS" AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, WHICH ARE HEREBY DISCLAIMED.IN NO EVENT SHALL NETAPP BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</block>
  <block id="4fc9b260d15698bbd988f76ca839c5b6" category="paragraph">NetApp reserves the right to change any products described herein at any time, and without notice.NetApp assumes no responsibility or liability arising from the use of products described herein, except as expressly agreed to in writing by NetApp.The use or purchase of this product does not convey a license under any patent rights, trademark rights, or any other intellectual property rights of NetApp.</block>
  <block id="87bfcb691f34a9e3fdda83480f0acf78" category="paragraph">The product described in this manual may be protected by one or more U.S.patents, foreign patents, or pending applications.</block>
  <block id="464821ce353b86f770de0d09b5f5aabe" category="paragraph">本文所含数据与商用项目（定义见 FAR 2.101 ）相关，属于 NetApp ， Inc. 的专有信息政府拥有非独占，不可转让，不可再许可，全球有限且不可撤销的许可，仅可在与美国相关并为美国提供支持时使用此数据交付数据所依据的政府合同。除非本协议另有规定，否则不得使用，披露，复制，修改，执行， 或在未经 NetApp ， Inc. 事先书面批准的情况下显示。美国国防部的政府许可权利仅限于 DFARS 第 252.227-7015 （ b ）条中确定的权利。</block>
  <block id="31ef2fcb5f4c55099772450f1c4df4c4" category="summary">要成功执行 SnapDrive for UNIX 操作，必须先设置存储系统，然后再将其连接到 Linux 主机。</block>
  <block id="0329c2655eaf5f4c57b9c57897b1186b" category="doc">将 Linux 主机连接到存储系统</block>
  <block id="6072642cef1a103027cb81b1c80027bf" category="paragraph">存储系统名称必须注册到网络中的域名服务（ Domain Name Service ， DNS ）服务器或 ` /etc/hosts` 文件中。</block>
  <block id="35246e15bf801b1866a155ed05729b66" category="list-text">在存储系统上创建用户：</block>
  <block id="0c5743722792ac3b3106ef6ad5acac0c" category="paragraph">` * SnapDrive 配置集 _user_name storage_system_name_*`</block>
  <block id="90a0707726444da58cf9baf4c4572d5a" category="list-text">查看与存储系统关联的用户并获取用户名或存储系统对详细信息：</block>
  <block id="438fba983b1b082b57344eeb2e0639bc" category="paragraph">` * SnapDrive 配置列表 *`</block>
  <block id="86bb64ec31c35405309365491b7fa696" category="paragraph">命令将显示在 SnapDrive for UNIX 中指定了用户的所有系统的用户名或存储系统对。</block>
  <block id="a5178c4b5e91c8f13b1be80acfeb5295" category="list-text">如果存储系统具有多个数据接口，请为新管理接口配置数据接口：</block>
  <block id="7c164c54161b9e7dfe955085796d8d3d" category="paragraph">` * SnapDrive 配置集 -mgmtpath _management_interface_path data_interface_path_*`</block>
  <block id="646ce722596c5a3754adcbab1d00a484" category="list-text">验证是否已正确配置所有数据和管理接口：</block>
  <block id="2cb370822e205a7dc84a961bfbd366b1" category="paragraph">` * SnapDrive 配置列表 -mgmtpath*`</block>
  <block id="11fdd43137cfc836a71e2c84f0134b65" category="summary">You can help us to improve the quality of our documentation by sending us your feedback.首次发布生产级 \ （ GA/FCS\ ）文档或对现有生产级文档进行重要更改时，您可以收到自动通知。</block>
  <block id="6ab85e747e0c76cd7c95b5eb2dd03018" category="doc">How to send comments about documentation and receive update notifications</block>
  <block id="7a5f2d68b34e39986049259c8de51697" category="paragraph">You can help us to improve the quality of our documentation by sending us your feedback.You can receive automatic notification when production-level (GA/FCS) documentation is initially released or important changes are made to existing production-level documents.</block>
  <block id="4a96c5d8a864b88062cd4340e436c54f" category="paragraph">If you have suggestions for improving this document, send us your comments by email.</block>
  <block id="6cb472d15e6581c6a1685914826fe23d" category="inline-link-macro">doccomments@netapp.com</block>
  <block id="bf25194d33ec7a97201c744c76650d65" category="paragraph"><block ref="bf25194d33ec7a97201c744c76650d65" category="inline-link-macro-rx"></block></block>
  <block id="fa51a4c50cc86e32101d91538461e431" category="paragraph">To help us direct your comments to the correct division, include in the subject line the product name, version, and operating system.</block>
  <block id="6be364524b60c8ce2362d8a248ae8458" category="paragraph">If you want to be notified automatically when production-level documentation is released or important changes are made to existing production-level documents, follow Twitter account @NetAppDoc.</block>
  <block id="0f6432546c71f0bad51899d7b12115f5" category="paragraph">You can also contact us in the following ways:</block>
  <block id="e68f7617fa50fa1a945d21a5a517d9ef" category="list-text">NetApp ， Inc. ， 1395 Crossman Ave. ， Sunnyvale ， CA 94089 U.S.</block>
  <block id="b320d449aa2877c850203a437a00d03f" category="list-text">电话： +1 （ 408 ） 822-6000</block>
  <block id="5270356a4b7661efe9b3919cc932dba1" category="list-text">传真： +1 （ 408 ） 822-4501</block>
  <block id="7683c0133a46ee9967259368f60e4024" category="list-text">支持电话： +1 （ 888 ） 463-8277</block>
  <block id="e034b2da9949f766b1c563456e005661" category="summary">您可以从命令行界面在 Linux 主机上安装 SnapDrive for UNIX 。</block>
  <block id="a4a680426f5b631362e4726e1aed82a6" category="doc">安装适用于 UNIX 的 SnapDrive</block>
  <block id="9b6264644a9d32de9ff17e80d65635fe" category="inline-link">NetApp 下载：软件</block>
  <block id="46fe4ebd60a14f37c79c5f6ed20de4ae" category="list-text">从 NetApp 支持站点下载适用于 UNIX 的 SnapDrive for Linux 安装程序<block ref="ac5c00b5c5b7a2f25415fe4e9576f140" category="inline-link-rx"></block> 并将文件复制到 Linux 主机。</block>
  <block id="30ebd780248b2248f5f8c91590763409" category="list-text">以 root 用户身份登录到主机系统。</block>
  <block id="228571371d502c637f615bffa8544343" category="paragraph">如果您远程运行安装程序文件，并且系统配置不允许以 root 用户身份登录，请使用 `su` 命令以 root 用户身份登录。</block>
  <block id="8fd57ae256456e881c0a8d998f9b4852" category="list-text">导航到 Linux 主机上已将安装程序复制到的目录。</block>
  <block id="8eda4e7668f64e35cfea69dd2b539a7b" category="list-text">安装 SnapDrive for UNIX ：</block>
  <block id="278a13072f1d070d5c90720ae2c6024e" category="paragraph">` * rpm-ivh _installer_file_name_*`</block>
  <block id="cf3645f3f4a80e438a3f419f7ab9de9d" category="paragraph">SnapDrive 守护进程会在安装后自动启动。</block>
  <block id="8fce2f9bac05a02d0c112d38adcef81f" category="summary">通过 SnapDrive for UNIX ，您可以在 VMware 虚拟环境中的子操作系统上使用启用的 FC 协议创建和配置 RDM LUN 。您也可以使用 ONTAP 配置 RDM LUN 。</block>
  <block id="7d59312f2c2f78b6debbfa49059d87f4" category="doc">配置 RDM LUN</block>
  <block id="6de6a723ea32c7871b6cdfd81fea2cc4" category="list-text">必须安装 NetApp Virtual Storage Console （ VSC ）并使用 VMware vCenter ® 进行配置。</block>
  <block id="db152d35d9f5c1ea04a361193bed47c8" category="list-text">必须在已向 vCenter ® 注册的 Windows 操作系统中安装适用于 VMware vSphere TM 的 NetApp Virtual Storage Console 的备份和恢复功能。</block>
  <block id="b693904261a0c4132a05699dc512518d" category="list-text">必须在 `snapdrive.conf` 文件中将 `default-transport` 设置为 fcp ，并且必须重新启动 SnapDrive for UNIX 守护进程。</block>
  <block id="7d686659a0cd482c137752a8a7a33c94" category="list-text">配置子操作系统以创建 RDM LUN ：</block>
  <block id="ef9b1109828e4ffa37462e6050dd67dc" category="paragraph">` * SnapDrive config set-viadmin _user viadmin_name_*`</block>
  <block id="78d196de9bf61148e606fb947d57641b" category="list-text">` _user_` 是虚拟接口系统的名称。</block>
  <block id="9a1b6f408c57d5368bddaf94129bf7c8" category="list-text">` _viadmin_name_` 是虚拟接口系统的 IP 地址名称。</block>
  <block id="ade6c8252c38f9f7e9499359e3ee900d" category="list-text">验证 Virtual Storage Console 的登录信息：</block>
  <block id="1eca4c72b95f85edd8cee169c7c77bd8" category="paragraph">此命令显示在 SnapDrive for UNIX 中指定的用户名或虚拟接口。</block>
  <block id="40ededd60c4dbe37a2e4f81b0ad92aed" category="list-text">验证子操作系统是否可以与存储系统通信：</block>
  <block id="6736dbebd79d97e9342a80c188b4bd22" category="paragraph">` * storage show -all _command_*`</block>
  <block id="a7e3b309dddfef0462a49ae93b9f63ca" category="list-text">在存储系统上创建 RDM LUN ：</block>
  <block id="e19bfccdc7f99905c18193e6b7c65bb8" category="paragraph">` * SnapDrive storage create -lun _long_lun_name_ -lunsize _size_of_the_lun_*`</block>
  <block id="6515b180637bca11fbaf611996718819" category="list-text">将 RDM LUN 连接到主机：</block>
  <block id="b8e1d55ff73078f986b4b836fc1dd0a9" category="paragraph">` * SnapDrive storage connect -lun _long_lun_name_*`</block>
  <block id="af1e326884725fbc5066894640971277" category="inline-link">适用于 VMware vSphere 的 Virtual Storage Console ， VASA Provider 和 Storage Replication Adapter 7.2 版管理指南</block>
  <block id="1949abc8cb3a0338f824e19f9b47251e" category="paragraph"><block ref="1949abc8cb3a0338f824e19f9b47251e" category="inline-link-rx"></block></block>
  <block id="25253afb20178012e025c46d720e471f" category="inline-link">《 Data ONTAP 8.2 7- 模式存储管理指南》</block>
  <block id="e8a89c3cec7c87bcdac57254a07b70fb" category="paragraph"><block ref="e8a89c3cec7c87bcdac57254a07b70fb" category="inline-link-rx"></block></block>
  <block id="1dca65bc21b9c7ac5b42b2bffc13c9a8" category="summary">必须先准备 Linux 主机，然后才能安装适用于 UNIX 的 SnapDrive 。</block>
  <block id="c385a3a2bb72e1155789e45273b6c1a7" category="list-text">如果您使用的是 FC 或 iSCSI 协议，则必须从 NetApp 支持站点下载并安装 Linux Host Utilities 。</block>
  <block id="2b8201fc1e941a82155657e0495559fd" category="paragraph"><block ref="2b8201fc1e941a82155657e0495559fd" category="inline-link-rx"></block></block>
  <block id="a93e15dac2a46ba56b293945f0243866" category="paragraph">您必须使用 `sanlun version` 命令验证是否已成功安装 Linux Host Utilities 。</block>
  <block id="2220c70d48bfd06e878b68e9871b1344" category="list-text">您必须在所有 Linux 系统中安装 `sg3_utils` 软件包，以使 SnapDrive for UNIX 命令正常运行。</block>
  <block id="376a46a2a60d411ef75d5b122f7ece7d" category="admonition">您必须确保 `sg3_utils` 和 `sg3_utils-libs` 库可用于 Red Hat Enterprise Linux （ RHEL ）和 Oracle Enterprise Linux （ OEL ）。在适用于 SUSE Linux Enterprise Server （ SLES ） 10 及更早版本的 `sCSI *` 软件包以及适用于 SLES 11 及更高版本的 `sG3_utils*` 软件包中提供了 `sg3_utils` 库。</block>
  <block id="f447055a3047046f4edd2560bbdab491" category="list-text">如果您的主机是 64 位 Linux 操作系统，并且您正在尝试安装 32 位 SnapDrive for UNIX ，则必须下载并安装这些库或二进制软件包。</block>
  <block id="b67fafd9ce9fa73b03192bebf59e1b95" category="list-text">32 位版本的 `glibc` ， `libnl` ， `libhba` ， `libgcc` 来自 _Red Hat Enterprise Linux site_ 的软件包。</block>
  <block id="67778c7c89d71566c0c76811b65dde1d" category="inline-link">Red Hat Enterprise Linux 站点</block>
  <block id="d8970f99258826cbde60194122d05d68" category="paragraph"><block ref="d8970f99258826cbde60194122d05d68" category="inline-link-rx"></block></block>
  <block id="00ac9218cb90926c613d780f6bd7f9de" category="paragraph">如果主机系统中缺少 32 位版本的``glibc`` 软件包，则 SnapDrive for UNIX 安装将失败。</block>
  <block id="02a6ae012fa235d13e7f247f4bfcee8f" category="list-text">QLogic site_ 中 `QConvergeConsoleCLI` 软件包的 32 位二进制文件。如果您的主机是 64 位 Linux 操作系统，并且安装适用于 Emulex HBA 的 Emulex OnCommand Manager 软件包的 32 位二进制文件，则还必须在 QLogic HBA 的 ` etc/HBA.conf` 文件中将 `qla2xxx64 /usr/lib64/libqlsdm.so` 更改为 `qla2xxx /usr/lib/libqlsdm.so` 。</block>
  <block id="9ef3e27f731650b4b762e777fc83a65a" category="inline-link">QLogic 站点</block>
  <block id="9ba322f8f321e2703c1e60aac641fbf6" category="paragraph"><block ref="9ba322f8f321e2703c1e60aac641fbf6" category="inline-link-rx"></block></block>
  <block id="a5a72672a2ae4d467267e0f89ede3aef" category="list-text">如果传输协议为 `FC` ，则必须安装 `libHBAAPI` 软件包或供应商专用的软件包，以便 SnapDrive for UNIX 能够在主机上运行。</block>
  <block id="59b3fde3a647cb952d8a0945e2a6a5d1" category="list-text">在安装 SnapDrive for UNIX 之前，必须在主机上安装受支持的主机服务包。</block>
  <block id="e99acaf54da4a273335d077dab1919d8" category="paragraph">互操作性表工具 _ 提供了有关受支持服务包的详细信息。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp 支持</block>
  <block id="a854791fa3c105c2b6262ad2d7e36297" category="paragraph"><block ref="a854791fa3c105c2b6262ad2d7e36297" category="inline-link-rx"></block></block>
  <block id="838cc8ab1454bd7f8f1150dacfe96313" category="inline-link">《 Linux Unified Host Utilities 7.1 安装指南》</block>
  <block id="e3f5c07215b51fd55784f81590d8176b" category="paragraph"><block ref="e3f5c07215b51fd55784f81590d8176b" category="inline-link-rx"></block></block>
  <block id="8cad04012cd365105618fc5239c16e5a" category="summary">通过 Data ONTAP ，您可以通过在存储系统上创建卷并将卷挂载到启用了 NFS 协议的主机来配置存储。</block>
  <block id="99ba31d9a0c654894af5b2f34b0cb3be" category="doc">配置卷</block>
  <block id="0d41efe4b888fd9d37a489f8aa82a50c" category="summary">SnapDrive for UNIX 是一种基于主机的存储和数据管理解决方案，适用于 UNIX 环境。SnapDrive for UNIX 可简化数据管理，提高数据可用性，并通过简化的存储配置和文件系统一致的 Snapshot 副本提高应用程序数据的可靠性。</block>
  <block id="4b983fff716674f120176e09551dd445" category="doc">产品概述</block>
  <block id="980043ebdfa329729b9a14c79093503a" category="paragraph">您可以将 SnapDrive for UNIX 用作独立产品，也可以与在 UNIX 上运行的其他 SnapManager 产品结合使用。通过与 SnapManager 一起部署的 SnapDrive for UNIX ，您可以创建应用程序一致的数据备份。</block>
  <block id="815e26b163a54cd30265bf6e48f65f85" category="section-title">SnapDrive 亮点</block>
  <block id="f1b8fada5239d977fa6603519d5ca0b6" category="paragraph">通过适用于 UNIX 的 SnapDrive ，您可以简化存储管理任务。使用 SnapDrive for UNIX 可以执行的部分任务包括：</block>
  <block id="d9f9d36f4c7c14fec6bbff4bec0c7542" category="list-text">使用 NetApp Snapshot 技术创建 Snapshot 副本。</block>
  <block id="e8419d83f08968db3aac6c652fdf0eef" category="paragraph">通过 SnapDrive for UNIX ，您可以创建和删除文件系统，卷组，主机卷或 LUN 的 Snapshot 副本，并从 Snapshot 副本克隆存储实体。</block>
  <block id="84645aefbdcf0d39ccefadb5fdcd946e" category="list-text">在应用程序或主机停机时间极少或根本不需要停机的情况下配置和管理存储。</block>
  <block id="98ce83d5272714b5bf3ee8a74585e0aa" category="paragraph">通过 SnapDrive for UNIX ，您可以在主机集群环境中创建和删除存储组件，包括磁盘组，主机卷，文件系统和 LUN 。此外，您还可以通过 SnapDrive for UNIX 扩展存储，将存储连接到主机以及断开存储与主机的连接。</block>
  <block id="6546bb1d80f033782e47910a2b588868" category="list-text">提供基于角色的访问控制，存储管理员可以根据分配的角色限制 SnapDrive 用户可以执行的操作。</block>
  <block id="c69b7ea18bcd2279217a7941f8cb896e" category="paragraph">除了这些主要功能之外， SnapDrive 还具有以下优势：</block>
  <block id="6bab7f7bfab9271a8b810aecbad8a827" category="list-text">增强的克隆拆分操作</block>
  <block id="c17d3e2878bbd05bc6c4e5e1bb119412" category="list-text">基于卷的 SnapRestore （ VBSR ）</block>
  <block id="f58d5b8c186f9cae333bf4795c56c36d" category="list-text">命令行界面（ CLI ）选项</block>
  <block id="70fcb2679a4bdfcaa28c1024e8595b70" category="list-text">数据收集实用程序</block>
  <block id="e979302164722723ba4019db779d565c" category="list-text">支持存储系统重命名</block>
  <block id="776d009e9f15647b43085afdfe6d9fef" category="list-text">支持在 Linux 子操作系统中使用光纤通道 RDM LUN</block>
  <block id="445d42ff29d6302f371d83e9f6b2d27a" category="summary">在安装 SnapDrive for SnapDrive 之前，您应使用 NetApp 互操作性表工具 \ （ UNIX\ ）验证 IMT 是否支持您的配置。</block>
  <block id="8e00234bcf24e9a845b6fc55b1a9bae8" category="paragraph">在安装 SnapDrive for UNIX 之前，您应使用 NetApp 互操作性表工具（ IMT ）验证对您的配置的 SnapDrive 支持。</block>
  <block id="b940259b0c3f087bbf8a26970b964b97" category="summary">在使用 SnapDrive 创建 Snapshot 副本之前，您必须先安装 Linux 主机实用程序 \ （如果使用 FC 或 iSCSI 协议 \ ），安装 SnapDrive for UNIX ，检查支持的 SnapDrive 配置，配置存储，然后设置从 Linux 主机到 NetApp 存储系统的连接。</block>
  <block id="ab3ccb0be518e752d20f706d36d252c9" category="doc">部署工作流</block>
  <block id="874dcda2970d7820711b6f2cb8a6299e" category="paragraph">在使用 SnapDrive 创建 Snapshot 副本之前，您必须先安装 Linux Host Utilities （如果使用的是 FC 或 iSCSI 协议），安装 SnapDrive for UNIX ，检查支持的 SnapDrive 配置，配置存储，然后设置从 Linux 主机到 NetApp 存储系统的连接。</block>
  <block id="9a319c0b4d09992f4494895eb7b4af27" category="image-alt">SDU 部署工作流 7 模式</block>
  <block id="ea527f73c15572058b954cf9101ce1a2" category="summary">您可以在运行此工具之前下载最新的支持列表数据并更新配置检查程序工具，以便此工具列出 SnapDrive for UNIX 支持的最新配置。包含更新数据文件的配置检查程序工具可检查 SnapDrive for UNIX 支持的配置，并列出系统中所有受支持的组件。</block>
  <block id="8d87e2cc50f64ec1b09e78611e055be0" category="doc">导入数据文件</block>
  <block id="746f955f065d1edd50194ce8cd2422a3" category="list-text">从 ToolChest 下载最新数据文件。</block>
  <block id="cde1891da83ce32b6b1a8f6a84b93847" category="list-text">导入最新数据文件：</block>
  <block id="c411dab5448d50d3caf8c6f0ab0b591f" category="paragraph">` * sdconfcheck import -file ./confcheck_data.tar.gz*`</block>
  <block id="a219e91652f478f99bbc26df0bfce849" category="inline-link">NetApp 下载：适用于 UNIX 的 SnapDrive 配置检查程序</block>
  <block id="a3293d2a9204b41b559cc8297a7420a8" category="paragraph"><block ref="a3293d2a9204b41b559cc8297a7420a8" category="inline-link-rx"></block></block>
  <block id="07324feee2676ce2381bcdd1b6bdce2e" category="summary">介绍在 Linux 环境中使用 7- 模式 Data ONTAP 部署 SnapDrive for UNIX 所需执行的初始任务。</block>
  <block id="2a2294e5a25a8268c2fe9c43745537a1" category="doc">《 7- 模式 Linux ® for Data ONTAP 安装和设置指南》</block>
  <block id="84547b72fd0604d7f712a69addd8c432" category="paragraph">本指南介绍在 Linux 环境中使用 7- 模式 Data ONTAP 部署适用于 UNIX 的 SnapDrive 5.3.2 的初始任务。</block>
  <block id="6248da62cdb940e266d263295e623ffc" category="paragraph">主题包括如何安装和配置产品以及如何备份数据库。</block>
  <block id="7320377e446a69c14595e7f176767b4f" category="summary">使用 SnapDrive for UNIX 之前，配置检查程序工具可帮助您确认 Linux 主机中是否提供了所有必要的组件和正确的版本。</block>
  <block id="67c1f4d3ea49f3ed3bac045ecb894b13" category="doc">使用配置检查程序工具验证 Linux 主机配置</block>
  <block id="692d9589a75351fb1f384ea03087b171" category="summary">安装 SnapDrive for UNIX 后，您必须验证安装是否成功。SnapDrive for UNIX 会在主机上安装多个文件，例如可执行文件，配置文件，卸载文件，诊断文件， 和手册页。</block>
  <block id="2441ab3d5f95273ddb1c23f27801bd96" category="doc">验证安装</block>
  <block id="203a47a9a586b4a29facd3bcf333fbba" category="list-text">验证 `snapdrive.conf` 文件是否位于 ` /opt/NetApp/SnapDrive/` 文件夹中。</block>
  <block id="def5d1ceb156af34cd189981220473d1" category="list-text">验证 Linux 操作系统的 SnapDrive for UNIX 可执行文件是否已安装在以下位置：</block>
  <block id="bae079488a2e20cafea425ea5cbdd208" category="list-text">` /opt/NetApp/SnapDrive/bin/SnapDrive`</block>
  <block id="95b92cc7cd9e65b43d63c36283a41eb2" category="list-text">` /opt/NetApp/SnapDrive/bin/snapdrived`</block>
  <block id="f712542bf0e5f01ed49936b2436afbf5" category="list-text">验证 SnapDrive for UNIX 诊断文件是否已安装在 ` /opt/NetApp/SnapDrive/diag` 文件夹中。</block>
  <block id="07ef3eec5e4ca46b84228d7a23a0f09b" category="list-text">验证 SnapDrive for UNIX 手册页是否已安装在 ` /opt/NetApp/SnapDrive/docs` 文件夹中。</block>
  <block id="b60b56b3e90e2a4a60bb5b86e86c6b4b" category="list-text">在 ` /var/log/sdconfcheck.out` 文件中验证已安装配置组件的详细信息。</block>
  <block id="a01448915332fffc0054f7174a01e29d" category="summary">通过 SnapDrive for UNIX ，您可以使用主机中的命令行选项配置存储并连接到现有存储系统。您也可以使用 Data ONTAP 配置存储。</block>
  <block id="6a96ae6638f329db8a871b7b77807d1a" category="doc">配置存储</block>
  <block id="2cff16a38c65546361ff5c25f0f1602b" category="summary">安装完成后，您必须配置其他特性和功能。您必须安装服务器证书并将 SnapDrive for UNIX 配置为使用与存储系统和守护进程服务的安全连接。</block>
  <block id="7ced7c0bc2b6ef08542023b70bf0fe63" category="doc">执行安装后任务</block>
  <block id="d70100f39c561716d8a4e6b024b7c9e6" category="list-text">如果您使用的是与存储系统和守护进程服务的安全连接，请将 SnapDrive for UNIX 使用的服务器证书安装在 `sdu-unemoncertificate -path=/opt/NetApp/SnapDrive/SnapDrive.pem` 位置。</block>
  <block id="b85e1e840d8282be8812bbe322776050" category="paragraph">证书路径在 s`napdrive.conf` 文件的 `sdu-demoncertificate-path` 配置变量中定义。</block>
  <block id="6d3c742abddbf4aa29f1b2974ff0f2d6" category="list-text">在 `snapdrive.conf` 文件中设置 ` use-https-to_sdU-daemon=on_` ，以使用 HTTPS 与存储系统和守护进程服务建立安全连接。</block>
  <block id="253e2cae6c362ae4483a4f61d5b43fe6" category="admonition">SnapDrive 5.0 for UNIX 及更高版本支持 HTTPS 用于守护进程通信。默认情况下，此可选参数处于禁用状态。</block>
  <block id="c269e68b28fa0ea5ed4ddf4a40dcab0b" category="list-text">重新启动 SnapDrive 守护进程服务：</block>
  <block id="deef17a833322f78ff9e431f0fdc2478" category="paragraph">` * 快照启动 *`</block>
  <block id="987f93f19b34ccc17cab35701442b3c9" category="admonition">每次手动更改配置文件时，都必须重新启动 SnapDrive 守护进程。</block>
  <block id="6c6fb8a80054bfe77470c87c6ec65db8" category="summary">您可以通过还原数据来验证 Snapshot 副本。</block>
  <block id="3036e5250387e8ea6e46817e9be5796f" category="doc">验证 Snapshot 副本</block>
  <block id="ecd38f8d89e944d1523f487776fed519" category="inline-link">《适用于 Linux 的 SnapDrive 5.3.2 for UNIX 管理指南》</block>
  <block id="9d295d92ad5d61a5bd7889de95bce928" category="paragraph">有关详细信息，请参见<block ref="0a0fc0695b5a84e02eb7bff0ce06a700" category="inline-link-rx"></block>。</block>
  <block id="9f66ecc2f6c04dfca572d9286673b08f" category="summary">配置 SnapDrive for UNIX 并创建 Snapshot 副本后，您可以执行还原操作，连接 Snapshot 副本并创建克隆。您还可以了解其他重要的 SnapDrive 功能，例如基于角色的访问控制 \ （ RBAC ），增强型克隆拆分和基于卷的 SnapRestore 。</block>
  <block id="3163b3d4dc92f42d04ad4c79906dcdc3" category="doc">下一步行动</block>
  <block id="c70d450a7282aa5bd9acb7fee52ccf00" category="paragraph">配置 SnapDrive for UNIX 并创建 Snapshot 副本后，您可以执行还原操作，连接 Snapshot 副本并创建克隆。您还可以了解其他重要的 SnapDrive 功能，例如基于角色的访问控制（ Role-Based Access Control ， RBAC ），增强型克隆拆分和基于卷的 SnapRestore 。</block>
  <block id="bfeb6e539ca7e77e8dd613644e40b9c4" category="paragraph">您可以在以下文档中找到有关这些功能的详细信息，以及有关 SnapDrive for UNIX 的特定版本信息，这些文档可从 NetApp 支持站点获得：</block>
  <block id="4963b0540ce5d085106a3bed027d2556" category="list-text"><block ref="4963b0540ce5d085106a3bed027d2556" category="inline-link-macro-rx"></block></block>
  <block id="6b30c4a9298baa19f975d2adfe01aadd" category="paragraph">介绍部署完成后如何在 SnapDrive for UNIX 上配置各种功能。主题包括如何配置 igroup ，配置适用于 UNIX 的 SnapDrive ，配置 RBAC 以及使用数据收集实用程序诊断 SnapDrive for UNIX 的问题。</block>
  <block id="d404cae5d321602c8e7c7bb800c4b96b" category="inline-link">《 SnapDrive 5.3.2 for UNIX 发行说明》（ AIX ， Linux 和 Solaris ）</block>
  <block id="b89b06292e00ea2b35b69cb9e575f37b" category="list-text"><block ref="b89b06292e00ea2b35b69cb9e575f37b" category="inline-link-rx"></block></block>
  <block id="a37dd51739a8273d546813fc2015b759" category="paragraph">介绍适用于 UNIX 的 SnapDrive 5.3.2 的新增功能，重要注意事项，已知问题和限制。</block>
  <block id="dd644c4b662b5eec11863e7b7403c8be" category="inline-link">《适用于 UNIX 的 SnapManager 3.4 for Oracle 安装和设置指南》，适用于在 7- 模式下运行的 Data ONTAP</block>
  <block id="7808939880b5d0ecdaf547bfabcb7ce0" category="list-text"><block ref="7808939880b5d0ecdaf547bfabcb7ce0" category="inline-link-rx"></block></block>
  <block id="dcf6fd6cac99e0ff09221c466d711738" category="paragraph">介绍在 UNIX 环境中使用 7- 模式部署 SnapManager for Oracle 时必须执行的初始任务。主题包括如何安装和配置产品以及如何备份数据库。</block>
  <block id="b5a59c733c25221074e62370141253b2" category="inline-link-macro">NetApp 技术报告 4212 ：《适用于 UNIX 的 SnapDrive 5.3 最佳实践指南》</block>
  <block id="faa2bf9f334d952410dc1be6a90be261" category="list-text"><block ref="faa2bf9f334d952410dc1be6a90be261" category="inline-link-macro-rx"></block></block>
  <block id="945a8171ea665d7709586f39119ecc4e" category="paragraph">介绍 SnapDrive for UNIX 最佳实践。</block>
  <block id="b1ff5704b48e42d700d43961dd415064" category="doc">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="a93bc0a57623c2facaa010825c808507" category="paragraph"><block ref="a93bc0a57623c2facaa010825c808507" category="inline-link-rx"></block></block>
  <block id="12857432450e75f9a32375ea0fc4fd52" category="summary">在安装 SnapDrive for UNIX 之前，您必须确保已为所需软件和协议获得适当的许可证。</block>
  <block id="aa8457adc8707fce69667da236092a4d" category="paragraph">SnapDrive for UNIX 许可证要求如下：</block>
  <block id="794df3791a8c800841516007427a2aa3" category="cell">许可证</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="329887344457e9cdff181e43e862b115" category="cell">安装位置</block>
  <block id="82ef718f4ebe0c276814ee3d51e33361" category="paragraph">SnapRestore</block>
  <block id="7594f117daf6629e0a9187f3fcf6819c" category="paragraph">SnapDrive for UNIX 还原 Snapshot 副本所需的许可证。</block>
  <block id="c8e8491512edcb74b31e1cb4883cf67f" category="paragraph">在 NetApp 存储系统上</block>
  <block id="a701f5d044348085ee4f97fef6636845" category="paragraph">FlexClone</block>
  <block id="011bad9e45d415621119faab3e7d33a4" category="paragraph">用于克隆 Snapshot 副本的可选许可证。</block>
  <block id="9985b4390c40137573e6da05caf85874" category="paragraph">协议</block>
  <block id="57e899c5f805febd5b57a12b50e03cb2" category="paragraph">LUN 需要 iSCSI 或 FC 许可证。</block>
  <block id="794cb725c5631ad99b5b7c000307f0df" category="paragraph">SnapMirror</block>
  <block id="fdec9603f6416d767128f18cbd4e551a" category="paragraph">用于将备份镜像到存储系统的可选许可证。</block>
  <block id="5bc075cee240a70af54270621d93765c" category="paragraph">SnapVault</block>
  <block id="aa5a77d2ace7d929a94de6f93f1ad65c" category="paragraph">用于将备份归档到存储系统的可选许可证。</block>
  <block id="a5f128f741dfc0c902057f7419d4534c" category="summary">您可以通过检查主机系统中的组件（例如，操作系统，主机上安装的软件版本，协议，主机上的文件系统等）以及为 SnapDrive.conf 文件中的每个配置参数指定的值来验证 SnapDrive for UNIX 中支持的配置。</block>
  <block id="e96a1fed8c706709927005ca7c727814" category="doc">验证支持的配置</block>
  <block id="e5c6e9fa9bff554fca89c7d90ee40414" category="paragraph">您可以通过检查主机系统中的组件（例如，操作系统，主机上安装的软件版本，协议，主机上的文件系统等）以及为 `snapdrive.conf` 文件中的每个配置参数指定的值来验证 SnapDrive for UNIX 中支持的配置。</block>
  <block id="2a92aa151937450287b8473add93d087" category="list-text">验证支持的配置。</block>
  <block id="38654e800b360ba9d48f85b26fe7a442" category="paragraph">` * sdconfcheck check*`</block>
  <block id="6a00e52325e2ae87db81f8db1f8a25e0" category="paragraph">检查输出中列出的组件，然后安装或配置缺少的组件。</block>
  <block id="42e462c2f4459b56d6ee42950c76d0f3" category="summary">作为独立产品部署的 SnapDrive for UNIX 使用 NetApp Snapshot 技术，可用于创建和管理主机数据的 Snapshot 副本。您可以使用 Snapshot 副本还原数据。</block>
  <block id="cf893df3a6b6b3147518f375553d5a2a" category="doc">正在创建 Snapshot 副本</block>
  <block id="6d191338d2b76fa6bc83a71773a95f7a" category="paragraph"><block ref="6d191338d2b76fa6bc83a71773a95f7a" category="inline-xref-macro-rx"></block></block>
  <block id="cb78a6c2751b04cade44f048071a24cd" category="paragraph"><block ref="cb78a6c2751b04cade44f048071a24cd" category="inline-xref-macro-rx"></block></block>
  <block id="a3100bf3334206028c894a5568ddcf09" category="summary">介绍新增功能，升级说明，已修复的问题，已知限制和已知问题。</block>
  <block id="51c13129931de393e8024a3139915595" category="doc">《 SnapDrive for Unix 5.3.2 发行说明》</block>
  <block id="2337541d92ff571c169c8765ec152c03" category="paragraph">。 <block ref="4af9589fa8c29155ec50511a0ef1e2dc" category="inline-link-macro-rx"></block> 描述新功能，升级说明，已修复的问题，已知限制和已知问题。您需要登录到 NetApp 支持站点才能访问发行说明。</block>
  <block id="6ca1f8d09cab7fd27d5b3448600c2aac" category="summary">一致性组 Snapshot 是一组卷的 Snapshot 副本，该卷跨越集群中的不同 Vserver 或节点，并作为一个实体进行管理。</block>
  <block id="46029fd45c4f5b213a874aaf499ed4d7" category="doc">SnapDrive for UNIX 中的一致性组 Snapshot 副本</block>
  <block id="7c35ef57379010eef89332b9c3b0c648" category="paragraph">SnapDrive for UNIX 可捕获跨集群中不同 SVM 或节点的所有卷的崩溃状态一致的 Snapshot 副本。您还可以配置捕获 Snapshot 副本的时间段。</block>
  <block id="a1cd7e31267e3685436722988b67dd1e" category="paragraph">默认情况下， SnapDrive for UNIX 会捕获一致性组 Snapshot 副本。您可以禁用此功能并还原为在尽力服务模式下捕获 Snapshot 副本。</block>
  <block id="3c3b9b413cf8a2cf577c3bf397e96ef8" category="admonition">SnapDrive for UNIX 5.2 仅在 Data ONTAP 8.2 或更高版本中支持集群模式 Data ONTAP 的一致性组 Snapshot 副本。</block>
  <block id="af8f96a378e02bd7273bc3de7c39290e" category="summary">您可以使用 SnapDrive snap disconnect 命令断开包含无存储实体的 LUN 的 Snapshot 副本的连接。</block>
  <block id="bdc5f4dfe07568b372e8b66dc9b6ed45" category="doc">断开 Snapshot 副本与 LUN 的连接，而不断开存储实体的连接</block>
  <block id="89e032c720999abd443aadb6289cca4a" category="paragraph">您可以使用 SnapDrive snap disconnect` 命令断开包含无存储实体的 LUN 的 Snapshot 副本的连接。</block>
  <block id="40a3b577d8914890e03ea3802d852d1a" category="list-text">输入以下命令语法：</block>
  <block id="48eba73e378c769ef888e9a68959ba05" category="paragraph">` * SnapDrive snap disconnect -lun _long_lun_name_ [_lun_name..._]*`</block>
  <block id="331e6004eaaec367c3674232f978a3bf" category="paragraph">SnapDrive for UNIX 将删除命令行中指定的存储实体的映射。</block>
  <block id="608f8bd8a9c14f716691180abefed601" category="paragraph">以下命令将删除存储系统面包机上的 luna 和 lunb 映射：</block>
  <block id="048fcb2f60fe0a5da736776a32037a81" category="summary">您可以在卷迁移期间执行 SnapDrive 操作。</block>
  <block id="e49d71e4cde795b2e03e6eb8ed94a4a8" category="doc">SnapDrive for UNIX 中的卷迁移</block>
  <block id="c590a7a46423d489b93402b03656a239" category="paragraph">卷迁移包括以下三个阶段：</block>
  <block id="ad2376beebecdcf7846ba973fa1a005b" category="list-text">设置</block>
  <block id="6bc362dbf494c61ea117fe3c71ca48a5" category="list-text">移动</block>
  <block id="4ea2a6c39b10b3e3076f976f58a861d1" category="list-text">转换</block>
  <block id="10a35632fa663c935ab34113c9fc4125" category="paragraph">SnapDrive for UNIX 操作可在设置和移动阶段平稳运行。</block>
  <block id="3abb46dcc6d14b480fb29d67f27517a0" category="paragraph">在转换阶段执行任何 SnapDrive 命令时， SnapDrive for UNIX 可以按照 `snapdrive.conf` 文件中的变量 `volmove-cutover-retry` 和 `volmove-cutover-retry-休眠` 中的定义重试此操作。</block>
  <block id="655e37f318541ca6a81a327bfe81f208" category="admonition">如果在卷迁移期间 SnapDrive for UNIX 操作失败，则必须在卷迁移操作完成后执行 SnapDrive for UNIX 操作。</block>
  <block id="c10839194e57b7298a93d31722c5ad37" category="summary">创建 Snapshot 副本时，应确定要捕获的存储实体并指定 Snapshot 副本的名称。</block>
  <block id="2acd214fe60ab6bd06d797e8ba4e2547" category="doc">使用 SnapDrive snap create 命令所需的信息</block>
  <block id="c2d3a85faec556ad8930d2f43e20b023" category="paragraph">下表提供了使用 SnapDrive snap create` 命令时所需的信息：</block>
  <block id="1ebdf84a351db63722f2bb218973be13" category="cell">要求 / 选项</block>
  <block id="1853680a6d666b9fea2d789dd00bc7eb" category="cell">参数</block>
  <block id="ec228f1aed3c1719438415000d73f27b" category="paragraph">确定要在 Snapshot 副本中捕获的存储实体的类型。您可以通过一个命令行指定直接在 LUN 上创建的 NFS 实体， LUN ，文件系统以及 LVM 实体。</block>
  <block id="19944867d885dc2d80b4557341733e24" category="paragraph">请使用相应的参数提供该实体的名称。这是 `file_specs` 参数的值。</block>
  <block id="1a719320e52bde38c8672b842cb0efd3" category="list-text">如果您指定的磁盘组具有主机卷或文件规范，则参数将转换为存储系统上的一组磁盘组。SnapDrive for UNIX 会创建包含此实体的整个磁盘组，即使此实体是主机卷或文件系统也是如此。</block>
  <block id="e215796376b4d10a753f32228540bd68" category="list-text">如果指定的文件规范是 NFS 挂载点，则参数将转换为存储系统卷上的目录树。</block>
  <block id="6b2cead25a11a5fc7effbadf158e5abe" category="list-text">如果指定 LUN 或具有文件系统的 LUN ，则参数将转换为 LUN 或具有文件系统的 LUN 。</block>
  <block id="a22f7c8394537adb4c297cb157192bb1" category="admonition">您不能使用存储实体指定特殊字符，例如 ` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 和 ` - hostvol` 。但是， ` -FS` ， ` -lvol` 和 ` -hostvol` 等存储实体允许使用斜线（ / ）。</block>
  <block id="23cec77c106d40bb252b1dd02dd13f37" category="paragraph">LUN （` -lun file_specs` ）</block>
  <block id="cc7424f010e4e188083c8cb1c4b232dd" category="paragraph">LUN 的名称</block>
  <block id="a349ec2d31472ffef981e4583d602c78" category="paragraph">您必须包含存储系统，卷和 LUN 的名称。</block>
  <block id="644f7da61c7596311193b6c5290a818d" category="paragraph">磁盘组（` -dgfile_specs` ）或卷组（` -vg file_specs` ）</block>
  <block id="c05431574d819a2c5da76c0432667f4b" category="paragraph">磁盘或卷组的名称</block>
  <block id="bba82dac2002a4bedac2f43b34b1244f" category="paragraph">文件系统（` -fs file_specs` ）</block>
  <block id="ed4cdbf1543419d0c267e0235c4bd071" category="paragraph">文件系统名称</block>
  <block id="88f4665eac0236b5211e5bf62e45815b" category="paragraph">主机卷（` -hostvolfile_specs` ）或逻辑卷（` -lvolfile_specs` ）</block>
  <block id="3c88e307994c6c5143d67c3c09e5cf27" category="paragraph">主机或逻辑卷的名称</block>
  <block id="1a84df7ef6f22dd453b389006f4345e0" category="admonition">您必须同时提供请求的卷及其所在的磁盘组；例如， ` -hostvol dg3/Acct_volume` 。</block>
  <block id="e7aac00a0d6c627f1c1cc15a3cf78fd6" category="paragraph">Snapshot 副本名称（` -snapnamesnap_name` ）</block>
  <block id="02ea0c6253f08d16c80ec520bddea6f9" category="paragraph">Snapshot copy_name</block>
  <block id="9d7e8851e04d26d0ded719797d5de237" category="paragraph">指定 Snapshot 副本的名称。此名称可以是名称的较长版本，其中包含具有 Snapshot 副本名称的存储系统和卷，也可以是 Snapshot 副本名称的较短版本。</block>
  <block id="bf71f063f28a9ecf1e182583e2917e69" category="admonition">您必须确保为 `snapname` 指定的值不超过 200 个字符。</block>
  <block id="5c0c34f48fa8d56f431d076f9caf70f0" category="paragraph">` 无关`</block>
  <block id="4c761f170e016836ff84498202b99827" category="paragraph">~</block>
  <block id="0156d6b68eed0c0207d7043ca57c32bb" category="paragraph">可选：要在创建 Snapshot 副本时为不具有依赖写入的存储实体创建 Snapshot 副本， SnapDrive for UNIX 会为各个存储实体创建崩溃状态一致的 Snapshot 副本，但不会尝试使这些实体彼此保持一致。</block>
  <block id="945ef5938aca7f82df3cf391801f975f" category="paragraph">` 强制`</block>
  <block id="46404a850b9af73db1ac8cb919295da1" category="paragraph">` -noprop`</block>
  <block id="d38dc83777888998c71cf4e771da9e41" category="paragraph">可选：确定是否要覆盖现有 Snapshot 副本。如果没有此选项，则如果您提供现有 Snapshot 副本的名称，此操作将暂停。提供此选项并指定现有 Snapshot 副本的名称时，此命令将提示您确认是否要覆盖此 Snapshot 副本。要防止 SnapDrive for UNIX 显示提示符，请同时包含 ` -noprop` 选项。（如果要使用 ` -noprop` 选项，则必须始终包含 ` -force` 选项。）</block>
  <block id="e27e12fafd2841e001773c6d6a4a12a8" category="paragraph">` - fstype`</block>
  <block id="897a816068b448aad2fd2c3d27ebd2d1" category="paragraph">` _ 类型 _`</block>
  <block id="9ca8ec4d11e3a540e1fc0207fd7e85fe" category="paragraph">` -vmtype`</block>
  <block id="8ae91e82bba1e16e954c2b19f6c0bdbd" category="paragraph">可选：指定用于 SnapDrive for UNIX 操作的文件系统和卷管理器的类型。</block>
  <block id="c6a25672d2f6d7be62b2e5e379cf7b74" category="summary">SnapDrive for UNIX 需要 Operations Manager 控制台来执行访问检查。有时， Operations Manager 控制台服务器可能由于各种原因而不可用。</block>
  <block id="cf6569b02e95805d863ed813e3b94601" category="doc">Operations Manager 控制台不可用</block>
  <block id="c5a5e3690477cc9bd741ff5e54e230de" category="paragraph">如果设置了 RBAC 方法 `RBAC 方法 = DFM` 且 Operations Manager 控制台不可用，则 SnapDrive for UNIX 将显示以下错误消息：</block>
  <block id="8c00c6e38afe3221c9721969eb38b607" category="paragraph">SnapDrive for UNIX 还可以为 Operations Manager 控制台返回的用户访问检查结果保留一个缓存。此缓存有效期为 24 小时，不可配置。如果 Operations Manager 控制台不可用，则 SnapDrive for UNIX 将使用缓存来确定访问权限。只有在所有已配置的 Operations Manager 控制台服务器均无响应时，才会使用此缓存。</block>
  <block id="a1dfa70ab237fb37e871a5bd348f623e" category="paragraph">要使 SnapDrive for UNIX 使用缓存进行访问检查，您必须打开 ` RBAC cache_` 配置变量，以保持访问结果的缓存。默认情况下， ` RBAC 缓存 _` 配置变量处于关闭状态。</block>
  <block id="5de125119e912e51ae3933d79b7828fd" category="paragraph">要在 Operations Manager 控制台不可用原生的情况下使用 SnapDrive for UNIX ，服务器管理员必须在 SnapDrive.conf 文件中将基于角色的访问控制（ Role-Based Access Control ， RBAC ）方法重置为 ` RBAC 方法 = SnapDrive_` 。更改 SnapDrive.conf 文件后，必须重新启动 SnapDrive for UNIX 守护进程。如果设置了 ` RBAC 方法 = UNIX_` ，则只有 root 用户可以使用 SnapDrive for 原生。</block>
  <block id="8128b29a8cb63f7eced4bfe6001fd013" category="summary">使用命令 SnapDrive snap restore 还原 Snapshot 副本。</block>
  <block id="46f9bd98efe02f0565a09d43d3a92a1d" category="doc">用于还原 Snapshot 副本的命令</block>
  <block id="b544951479791f99243f97b1a71b5f70" category="paragraph">使用命令 SnapDrive snap restore` 还原 Snapshot 副本。</block>
  <block id="c03323ec08d3a3fd0b6e68fdf0dc9224" category="paragraph">SnapDrive snap restore` 命令可将您在命令提示符处指定的 Snapshot 副本中的数据还原到存储系统。此操作会将您在 SnapDrive snap restore` 命令中指定的 `file_specs` 参数（例如，磁盘组， NFS 文件， NFS 目录树，直接在 LUN 上创建的文件系统）的内容替换为指定 Snapshot 副本中的 `file_specs` 参数的内容。</block>
  <block id="315db856b771a9705f8e4b4f2936c3f5" category="paragraph">您还可以为不存在的 `file_specs` 参数还原 Snapshot 副本。如果指定的值不再存在于主机上，而是在创建 Snapshot 副本时存在，则会发生这种情况。例如，可能是您现在已卸载的文件系统或已删除的磁盘组。</block>
  <block id="5ac3e3e38050d81cebeb6bb043722e87" category="paragraph">通常，您可以从创建 Snapshot 副本的主机（即发起主机）还原 Snapshot 副本。</block>
  <block id="1204abc7ba6a82c16056a4d5e539735c" category="list-text">在 NFS 实体中，如果同一个卷挂载到两个不同的 IP 上，则一次只能对这些卷的一个文件规范执行快照还原操作。</block>
  <block id="bb912be32a1435a4d67c8a26b8a2ebdf" category="list-text">如果您不是 root 用户，则在适用于 UNIX 的 SnapDrive 4.1 中，除了使用 GlobalSDSnapshot 功能可以执行 Snapshot 还原之外，您还应具有全局存储写入功能。</block>
  <block id="d2bbcaacc75f468c4c389aa8272af382" category="summary">在某些情况下， snapdrived start 命令可能会失败。可通过几个故障排除步骤来解决此问题。</block>
  <block id="3238a63dcaf2b6e98e8cb4f5039c4720" category="doc">snapdrived start 命令失败</block>
  <block id="17c8cb9b8040e71a02786e29addad7aa" category="paragraph">在某些情况下， `snapdrived start` 命令可能会失败。可通过几个故障排除步骤来解决此问题。</block>
  <block id="e57ef7cf638c9e36187b618e8efe38f0" category="list-text">检查 `snapdrive.conf` 文件中指定的守护进程端口是否已被其他应用程序使用。</block>
  <block id="87fda8fe4e3312f768b3345876926503" category="list-text">检查先前的守护进程实例是否已正确停止。</block>
  <block id="73bc611046cea4352f594ff553872013" category="list-text">检查是否已达到系统范围的信号量限制，在这种情况下，守护进程启动将不起作用。</block>
  <block id="065eb0282e26ad88073c53028ae53b11" category="list-text">检查是否有任何服务（如 iSCSI ， VxVM ）未在计算机上运行。</block>
  <block id="23c5136c5e9164c964d44aecfb9b5a9b" category="list-text">如果 HTTPS 设置为 `on` ，请检查是否已在指定目录中安装自签名证书。</block>
  <block id="0f325ebd104f1fb9b93e9b77d4d12d2c" category="summary">技术支持使用跟踪日志文件对问题进行故障排除。</block>
  <block id="9afb765bdb67cd5d7c72dda8f1f0fcdb" category="doc">什么是跟踪日志文件</block>
  <block id="8b5a19235a99fb2fff1419311ea4f8cc" category="paragraph">启用跟踪日志文件不会影响系统性能。默认情况下，此文件处于启用状态。您可以通过将 `snapdrive.conftrace-enabled` 变量设置为 `off` 来禁用。</block>
  <block id="21af69075dd9fa6d309d1b0a70c3fb6d" category="summary">如果 SnapDrive for UNIX 配置文件发生更改，则必须停止守护进程，配置文件更改才能生效。停止并重新启动守护进程后，配置文件中的更改将生效。如果不强制停止守护进程，则所有排队的命令都可以完成执行。收到停止请求后，不会执行任何新命令。</block>
  <block id="7b90189853c9d77936d392c520d42f4f" category="doc">不强制停止守护进程</block>
  <block id="e749ea586027d2f8d36ca427358edf22" category="paragraph">您必须以 root 用户身份登录。</block>
  <block id="3d1def0d45fc746004fe42f18db2bedb" category="list-text">输入以下命令以非强制停止守护进程：</block>
  <block id="e82ffb65f9b597391fe8089f01eec6da" category="paragraph">` * 快照停止 *`</block>
  <block id="09007662e21739aadc97eb5c0fff3302" category="summary">要创建 Snapshot 副本，请运行 SnapDrive snap create 命令。</block>
  <block id="0f729467d9ceb958bd0e2c6a7a782675" category="paragraph">要创建 Snapshot 副本，请运行 SnapDrive snap create` 命令。</block>
  <block id="b2f07ab850d83be67706958f791430fc" category="paragraph">在执行此语法之前，您必须了解此命令中提及的选项，关键字和参数。</block>
  <block id="41d3087cc078ad3705944ecbcaeab1f1" category="list-text">输入以下命令语法以创建 Snapshot 副本：</block>
  <block id="6078b908fbe25a5a220ba2de638feb9e" category="paragraph">` * SnapDrive snap create ｛ -lun _ -dg _ -fs | -hostvol ｝ _file_spec[file_spec...]_ （ ｛ -lun _dg _ -fs _ -hostvol ｝ file_spec[file_spec...]] -snapname _snap_name_ [ -force [-noprompt]]-unrelated ] [-nodfilerfencet] [-fstype _type_][-vmtype _type_]*`</block>
  <block id="f1fb366e7ef8b7a72616bb25592b9bfe" category="paragraph">`file_specs` 参数表示一个或多个存储系统上的一组存储实体。Snapshot 创建操作会为包含这些实体的存储系统卷创建一个 Snapshot 副本，并为其提供在 `snap_name` 参数中指定的名称。</block>
  <block id="9fb7f8ec4ab53b6a97e6645229b29e67" category="paragraph">此示例将为 Linux 主机创建多卷 Snapshot 副本。Snapshot 副本包含磁盘组 vgmultivol ，其中包括主机卷 lvol1 和 lvol2 ：</block>
  <block id="8b96d677fb1ae79f2ae30a93bceb915b" category="inline-xref-macro">创建不相关实体的 Snapshot 副本</block>
  <block id="c095e90ee33345b42e0abc1e8b2aa0da" category="paragraph"><block ref="c095e90ee33345b42e0abc1e8b2aa0da" category="inline-xref-macro-rx"></block></block>
  <block id="3ed518cd9a2e72ad9eb83a4283dda15d" category="summary">您必须在主机系统中配置新的存储系统名称，才能使用新的存储系统执行 SnapDrive 操作。</block>
  <block id="24265f6f0a98942c082a47fe60785426" category="doc">在主机系统中配置新的存储系统名称</block>
  <block id="a08766a0e4799029c0c968669356a82a" category="list-text">此名称必须注册到网络中的域名系统（ Domain Name System ， DNS ）服务器或 ` /etc/hosts` 文件中。</block>
  <block id="1505b64f578eff3dba4aaffe325e61fa" category="list-text">必须使用 SnapDrive config delete` 命令从主机系统中删除旧存储系统名称。</block>
  <block id="6dcd1ebf4390170868ab9bcdfd967581" category="list-text">输入以下命令：</block>
  <block id="f861bb2ad04a166dd40fd3b15aa6e54c" category="paragraph">` * SnapDrive 配置集 _username storage_system_name_*`</block>
  <block id="c3f1141106e234aad541fe2c24e36e1c" category="paragraph">如果不输入实际的存储系统名称，适用于 Oracle 的 SnapManager POST 脚本可能无法建立 SnapMirror 和 SnapVault 关系。例如，如果存储系统的实际名称是 "hostname-3" ，而您输入了联盟名称 "hostname-3-mgmt" ，则可能无法建立 SnapMirror 和 SnapVault 关系。</block>
  <block id="27b23f35cc8fd5cc5c821a690b370a32" category="paragraph">新存储系统已准备好在主机系统中执行 SnapDrive 操作。</block>
  <block id="cdcdbaab7c57111e7d7b0598bfef22d5" category="summary">由于使用了 umount 命令的问题描述， RHEL/OEL 5.x 中的快照管理操作失败。要解决此问题，请确保在命令行界面中使用 -o vers=3 挂载 NFS 实体。</block>
  <block id="1d99b2c471d7dac8d66bb03918aab3af" category="doc">由于使用了 umount 命令的问题描述， RHEL/OEL 5.x 中的快照管理操作失败</block>
  <block id="84cdad215fe30872bb92c1dbbf6c9074" category="paragraph">由于问题描述使用 `umount` 命令， RHEL/OEL 5.x 中的快照管理操作失败。要克服此问题，请确保在命令行界面中使用 ` -o vers=3` 挂载 NFS 实体。</block>
  <block id="a624477769906c294be9045cdcebb5c3" category="summary">您必须在 SnapDrive.conf 文件中设置与基于角色的访问控制相关的各种配置变量。</block>
  <block id="183997b20685550f3fe1c698d9205599" category="doc">基于角色的访问控制的配置变量</block>
  <block id="9d8f585ff4fb34da679af318190d83f2" category="paragraph">您必须在 `snapdrive.conf` 文件中设置与基于角色的访问控制相关的各种配置变量。</block>
  <block id="47c14840d8e15331fa420b9b2f757cd9" category="cell">变量</block>
  <block id="7da657fe9f179348d58fed5a02d4a4cd" category="paragraph">` contact-http-dfm_port = 8088_`</block>
  <block id="59e79389046dd74672e4c58b3312e7be" category="paragraph">指定用于与 Operations Manager 控制台服务器通信的 HTTP 端口。默认值为 8088. 。</block>
  <block id="ae32a80e9fa7f9561662a20dfa0a5061" category="paragraph">` contact-ssl-dfm_port = 8488_`</block>
  <block id="e669f013b2a158fce5c036521407d86a" category="paragraph">指定用于与 Operations Manager 控制台服务器通信的 SSL 端口。默认值为 8488. 。</block>
  <block id="2cde2ca1e6e3e8d5ece09ce0ada487bb" category="paragraph">` rbac 方法 =dfm_`</block>
  <block id="c122800df54e4571b93afdff5b572584" category="paragraph">指定访问控制方法。可能值为 `原生` 和 `dFM` 。</block>
  <block id="5fa8612b5d9111dbe0e3bf0e30e5df54" category="paragraph">如果值为 `原生` ，则访问检查将使用存储在 `` /vol/vol0/sdprbac/sdhost-name.prbac` 中的访问控制文件。</block>
  <block id="3cf2f73ec181cd7ea3bc053f3c1e95fa" category="paragraph">如果将此值设置为 `dFM` ，则前提条件是 Operations Manager 控制台。在这种情况下， SnapDrive for UNIX 会将访问检查发送到 Operations Manager 控制台。</block>
  <block id="0b3856a4b7dcee3ebce659a96bf7fdcd" category="paragraph">` rbac - cache=on_`</block>
  <block id="0390da2c81b4b67182f363345ce8e36c" category="paragraph">SnapDrive for UNIX 会保留一个访问检查查询以及相应结果的缓存。只有当所有已配置的 Operations Manager 控制台服务器均已关闭时， SnapDrive for UNIX 才会使用此缓存。</block>
  <block id="7cbc8ed8b9209daa169629e3b481df94" category="paragraph">您可以将此值设置为 `on` 来启用缓存，也可以将其设置为 `off` 来禁用。默认值为 off ，因此您可以将 SnapDrive for UNIX 配置为使用 Operations Manager 控制台，并将 `RBAC 方法` 配置变量设置为 `dFM` 。</block>
  <block id="817ab04b0d45dbad2744f22f0e1de1a5" category="paragraph">` RBAC 缓存超时 _`</block>
  <block id="f85216e1272c9e4fc53d2cc2c9f8a97a" category="paragraph">指定 RBAC 缓存超时期限，并且仅在启用 `RBAC 缓存` 时才适用。默认值为 `24` 小时。</block>
  <block id="d1a98fc2e4b3588088a60a6605627a38" category="paragraph">只有当所有已配置的 Operations Manager 控制台服务器均已关闭时， SnapDrive for UNIX 才会使用此缓存。</block>
  <block id="82d24004decedb09a03af8232272027e" category="paragraph">` 使用 https 到 dfm=on_`</block>
  <block id="b34e0fc2314b310d17a66dfd2798d7f2" category="paragraph">通过此变量，您可以将适用于 UNIX 的 SnapDrive 设置为在与 Operations Manager 控制台通信时使用 SSL 加密（ HTTPS ）。</block>
  <block id="a7bcdf1d0791daf953046905542c2bd6" category="paragraph">默认值为 `on` 。</block>
  <block id="dd6da86dee3471af62b5768fd184450c" category="summary">SnapDrive for UNIX 支持基于 Data ONTAP FlexClone 技术的 FlexClone 卷。FlexClone 卷是父灵活卷的时间点副本。FlexClone 卷比 LUN 克隆速度更快，它们可以让您灵活地创建多个数据副本。</block>
  <block id="f907a5d5009ccb6d2f07460e879915b9" category="doc">SnapDrive for UNIX 中的 FlexClone 卷</block>
  <block id="a464624a2404b71b405b495b18937b71" category="summary">基于角色的访问控制 \ （ RBAC ）用于用户登录和角色权限。管理员可以通过 RBAC 定义角色来管理用户组。如果需要将数据库的访问权限限制为特定管理员，则必须为其设置管理员帐户。此外，如果要限制这些信息，这些管理员可以查看这些信息以及可以执行的操作，则必须将角色应用于您创建的管理员帐户。</block>
  <block id="3f9ad5554974e41d76a6a748568f2ff1" category="doc">SnapDrive for UNIX 中基于角色的访问控制</block>
  <block id="bfb2edbe1021bba782007988f235e5ca" category="paragraph">基于角色的访问控制（ Role-Based Access Control ， RBAC ）用于用户登录和角色权限。管理员可以通过 RBAC 定义角色来管理用户组。如果需要将数据库的访问权限限制为特定管理员，则必须为其设置管理员帐户。此外，如果要限制这些信息，这些管理员可以查看这些信息以及可以执行的操作，则必须将角色应用于您创建的管理员帐户。</block>
  <block id="34b4343612d9bbb18fbffb6563a0358f" category="paragraph">在 SnapDrive for UNIX 中，可借助 Operations Manager 控制台使用 RBAC 。通过 Operations Manager 控制台，可以精细地访问存储对象，例如 LUN ， qtree ，卷，聚合和 vFiler 单元。</block>
  <block id="20178aa41a5836aa2f7bd168a78b0077" category="inline-xref-macro">基于卷的 SnapRestore 的强制检查</block>
  <block id="079e4223ad3decc724b5797040b5bb34" category="paragraph"><block ref="079e4223ad3decc724b5797040b5bb34" category="inline-xref-macro-rx"></block></block>
  <block id="d6dcc1aeb2eb7b6a51da9832a2257e18" category="inline-xref-macro">在目标存储系统上还原 Snapshot 副本</block>
  <block id="9ec61605d671ff73e1e421c5ae17205e" category="paragraph"><block ref="9ec61605d671ff73e1e421c5ae17205e" category="inline-xref-macro-rx"></block></block>
  <block id="456217942df8f8c033bb7e893904d2eb" category="inline-xref-macro">Snap disconnect 操作步骤</block>
  <block id="d00facc0f204c86d9cb29868b23a2a4d" category="paragraph"><block ref="d00facc0f204c86d9cb29868b23a2a4d" category="inline-xref-macro-rx"></block></block>
  <block id="e6cc6fd8e2bbd047c2e87c8d822ddcf7" category="summary">您可以对受限和不受限类型的 FlexClone 卷执行空间预留操作。默认情况下， FlexClone 卷没有写入预留。</block>
  <block id="ed4eb8dc49a281f888732209691eb917" category="doc">FlexClone 卷的空间预留</block>
  <block id="633cc6fb0924ceb78c9905e8e2608591" category="paragraph">以下是适用于无限制和受限 FlexClone 卷的 FlexClone 的空间预留设置：</block>
  <block id="e2c4317748d43686976b83fd44e5aea2" category="paragraph">* 不受限制的 FlexClone 卷： * 如果在命令行界面中提供了 ` -reserve` 选项，或者在 `snapdrive.conf` 中提供了 `flexclon-writeereserve-enabled = on` ，则空间预留将设置为 FlexClone 上的卷，否则为 none 。如果聚合上的可用空间不足以遵循此设置，则 SnapDrive for UNIX 将显示一条错误消息。</block>
  <block id="72dc851c5fc1015ad66462a025343e8f" category="paragraph">* 受限 FlexClone 卷： *</block>
  <block id="3af0be64a4040579f171d8f117c5a282" category="list-text">卷级别的空间预留设置始终处于禁用状态，即空间预留设置为 none 。</block>
  <block id="909a2c02bb13f4365789f5738cbdf5d6" category="list-text">如果在命令行界面中提供了 ` -reserve` 或 ` -noreserve` 选项，则属于主机文件规范的 LUN 会分别启用或禁用空间预留。否则， FlexClone 中与主机文件规范相关的 LUN 将从父卷 LUN 继承空间预留。</block>
  <block id="47ec6537c65d2bea8210426d982e3742" category="summary">SnapDrive for UNIX 命令采用一种格式，并具有关联的关键字。这些命令具有选项和参数，需要用户输入值。</block>
  <block id="c5b232e81dbd81f9249259989749203f" category="doc">收集命令所需的信息</block>
  <block id="5625da5861f77c9b20f2a493af7b7d8d" category="paragraph">这些检查清单可帮助用户快速执行 SnapDrive for UNIX 。对于每个命令，它提供以下内容：</block>
  <block id="80e4a55d81795074256eb611bee15a68" category="list-text">建议的格式</block>
  <block id="7ec34df2a2bd29e1ef2c1bf52f74b8d2" category="list-text">有关命令可用的关键字，选项和参数以及应提供的值的信息</block>
  <block id="d3ad5e8479c74c699121a0c41f2f354f" category="list-text">命令示例</block>
  <block id="0de38db1ae560abfa3f83311848e86d9" category="summary">您可以使用 SnapDrive snap connect 命令连接到包含 LUN 的 Snapshot 副本。</block>
  <block id="83b2fb16df4a7b3bbb3f9883cb40e2be" category="doc">连接到包含 LUN 的 Snapshot 副本</block>
  <block id="20d012c355eb5ff3a18235ec89346f16" category="paragraph">您可以使用 SnapDrive snap connect` 命令连接到包含 LUN 的 Snapshot 副本。</block>
  <block id="3daf987f69adcf104432328524c91534" category="list-text">输入以下命令语法以连接到包含 LUN 的 Snapshot 副本：</block>
  <block id="aaee7a512716eafcae4c7b8174023cf2" category="paragraph">` * SnapDrive snap connect -lun _s_lun_named_lun_name_ [-lun] _s_lun_named_lun_name..._ -snapname _long_snap_snap_name_ [-igroup _ig_name_ [_ig_name..._]]]*``</block>
  <block id="5c54e93a37f9deff62b5dd2ddcac8f3c" category="admonition">` _s_lun_name_` 和 ` d_d_lun_name_` 的格式应为 lun_name 或 qtree_name/lun_name 。</block>
  <block id="0681867230a157e9593b90f8047ff468" category="paragraph">SnapDrive for UNIX 会克隆您指定的 LUN 并将其连接到新位置。</block>
  <block id="12be26997cf538d80c20235a891792c2" category="paragraph">以下示例将 hornet/vol/vol1/tuesdaysnapshot 中的 LUN mylun1 连接到 mylun1copy ：</block>
  <block id="dd37d72e6e9d48191cfd15c6106cae17" category="paragraph">以下示例将两个 LUN （ mylun1 和 mylun2 ）分别连接到 mylun1copy 和 mylun2copy ：</block>
  <block id="79bf93d6f650a2cb0ae22ec82ffdc644" category="paragraph">以下示例将 LUN lun1_0 连接到 snapshot Lech ： /vol/vol1 ： rt ：</block>
  <block id="36bd1a7302b2e5c190785c3f435cd84c" category="summary">您可以使用适用于 UNIX 的 SnapDrive 创建 LUN ， LUN 上直接创建的文件系统，磁盘组，主机卷以及 LUN 上创建的文件系统。</block>
  <block id="51d17a975afc015886bb4fb6372f9ef1" category="doc">使用 SnapDrive for UNIX 创建存储</block>
  <block id="719b374fb769f8e6ca98f8a768abd2f0" category="paragraph">SnapDrive for UNIX 会自动处理设置与这些实体关联的 LUN 所需的所有任务，包括准备主机，执行发现映射，创建实体以及连接到您创建的实体。您还可以指定 SnapDrive for UNIX 使用哪些 LUN 为您请求的实体提供存储。</block>
  <block id="b12b8d40b931e6625efe458de00a4613" category="paragraph">您无需同时创建 LUN 和存储实体。如果单独创建 LUN ，则可以稍后使用现有 LUN 创建存储实体。</block>
  <block id="ab9310225616b461f471141447547812" category="summary">对于使用基于卷的快照预留空间的空间预留，您需要在 SnapDrive.conf 文件中设置 space-reservations-volume-enabled 选项。</block>
  <block id="04fd6f898a5542ce4aae0ea7f9105d54" category="doc">用于空间预留的基于卷的 SnapRestore</block>
  <block id="cfad57b5ad4523bcd98a85c5dd4a51a8" category="paragraph">要使用基于卷的快照预留预留空间，您需要在` `snapdrive.conf` 文件中设置 ` _space-reservations-volume-enabled_sn 选项。</block>
  <block id="dbee4a16880540bda2447135d5141352" category="paragraph">` _space-reservations volume-enabled_sn` 选项用于在卷上设置空间保证策略，并且可以采用以下三个值。</block>
  <block id="a0acede249f15eb0f4e6bbb8a86b3ee5" category="list-text">* 快照 * ：这是默认值。卷上的空间保证不变。</block>
  <block id="345080586a2783e27cecd9a45141bc22" category="list-text">* 卷 * ：卷上的空间保证处于卷级别。</block>
  <block id="28f35e0cc8ae8d455c1f53c82c4acd9f" category="list-text">* 无 * ：空间保证设置为无。</block>
  <block id="5cd56d442283cf82ad944524f67a1d74" category="paragraph">下表介绍了基于卷的快照预留在空间预留中的行为。</block>
  <block id="d2b8d59574098dfcfef3bd2a39b5af4a" category="cell">未使用空间预留 CLI 选项；指定了 ` -vbsr execute`</block>
  <block id="7c9aec0e02203e7e68dbd54ab9c2cb53" category="cell">space-reservations-volume-enable=</block>
  <block id="8eea62084ca7e541d918e823422bd82e" category="cell">结果</block>
  <block id="334c4a4c42fdb79d7ebc3e73b517e6f8" category="paragraph">无</block>
  <block id="c322d3de29d2b0c5e2e011dad5e77df2" category="paragraph">Snapshot</block>
  <block id="e00e6827b9c3b4d825ad12d0719a4acc" category="paragraph">卷上的空间保证不变。</block>
  <block id="2e903c279edccf843f7479b65891b484" category="paragraph">尝试将卷的空间保证设置为 "`none` " 。</block>
  <block id="aed386a5b7d08ce62af4f56f67a4664c" category="paragraph">` 预留`</block>
  <block id="9adc5c78b0c1d2e96cd5aa4a1ca9fdc0" category="paragraph">配置值已被覆盖</block>
  <block id="632264dc2b04781c9143e4b405ea7dfb" category="paragraph">尝试将卷的空间保证设置为 " 卷 "</block>
  <block id="44467cf9b6e20c3fc0640dfb8c807758" category="paragraph">` -noreserve`</block>
  <block id="1847e78b783d26c790c9a714713d5289" category="paragraph">尝试将卷的空间保证设置为 " 无 "</block>
  <block id="210ab9e731c9c36c2c38db15c28a8d1c" category="paragraph">volume</block>
  <block id="28b70ea7e619b4c6a7703c247ff9b1c1" category="admonition">` -vbsr preview` 不会检查任何空间预留选项。</block>
  <block id="18f16a75cf85eca8efbbd5f71d80e329" category="summary">Operations Manager 控制台管理员可以创建 SD-admin 用户。</block>
  <block id="b819cf3a1cb9d150dc29c753bf743e65" category="doc">在 Operations Manager 控制台中配置 SD-admin</block>
  <block id="7fa4227b5491177971c138824b67cb0e" category="inline-link-macro">Operations Manager 控制台管理指南</block>
  <block id="42650b3322b591d0a8787d79ff269a75" category="paragraph">Operations Manager 控制台管理员创建一个名为 sd-admin 的用户，该用户能够对全局组（全局 `Dfm.core.AccessCheck` ）执行核心访问检查。在 Operations Manager 控制台管理员配置了 SD-admin 用户后，您必须手动将凭据信息发送给 SnapDrive for UNIX 管理员。有关使用 Operations Manager 控制台配置用户和角色的详细信息，请参见 <block ref="b5b3bf729329f1dc4bf280c2d0a5cfb7" category="inline-link-macro-rx"></block> 和联机帮助。</block>
  <block id="1fa632bdf99fbfdb435aad3315429f8b" category="admonition">您可以使用任何名称来代替 SD-admin ；但是，最好使用 SD-admin 。</block>
  <block id="65ca7193704ffb98e83c70c83922dbfe" category="paragraph">要在 Operations Manager 控制台中创建角色，请选择 * 设置 * &gt; * 角色 * 。在 SD-admin 配置页面中， Operations Manager 控制台管理员必须将全局组上的 `Dfm.Database.Write` 功能分配给 sd-admin-role ，以便 SnapDrive for UNIX 可以在 Operations Manager 控制台中刷新存储实体。</block>
  <block id="cd74f45fe16366d526215097df7770d4" category="summary">使用 SnapDrive snap delete 命令删除 Snapshot 副本。</block>
  <block id="bf67c1fb199c41fd479c970c88204314" category="doc">用于删除 Snapshot 副本的命令</block>
  <block id="d926818df995efd5839c68bb0464320c" category="paragraph">使用 SnapDrive snap delete` 命令删除 Snapshot 副本。</block>
  <block id="922138a5756b4ef4cc3d942811ab033b" category="paragraph">SnapDrive snap delete` 命令可从存储系统中删除您指定的 Snapshot 副本。此命令不会对主机执行任何操作。只有当您有权从存储系统中删除 Snapshot 副本时，它才会删除此副本。（如果要保留 LUN 和映射。）</block>
  <block id="dc5d074cd7a89a98c1c1404ef3c8f27c" category="summary">您必须先启动并运行 SnapDrive for UNIX 守护进程，然后才能使用任何 SnapDrive for UNIX 命令。</block>
  <block id="3adf2c769cd6900b4e935a17103c04fb" category="doc">启动 SnapDrive for UNIX 守护进程</block>
  <block id="b9ba688eea91d7b73bb644e76d8cae49" category="list-text">启动守护进程：</block>
  <block id="9fe6038c7eacfd03cba7e258a16155c3" category="summary">您可以在 NFS 环境中为单个管理接口配置多个数据接口，以便将管理流量与存储系统上的数据流量分开。</block>
  <block id="7a366383c1bf61b3a86af4eb7d738ce9" category="doc">为存储系统配置管理和数据接口</block>
  <block id="28699cd3f63523d83f213666275c979e" category="list-text">设置新管理接口的配置：</block>
  <block id="2496502fb58a45470841aa679bce5c5b" category="paragraph">` * SnapDrive 配置集 root*`</block>
  <block id="037605bf6b5e60648172bea0e0e87d3a" category="paragraph">以下是 Storage Virtual Machine （ SVM ，以前称为 Vserver ）的示例。</block>
  <block id="44d9dbf1f3162abb5ca57ce8e6e70e6c" category="list-text">为新管理接口配置数据接口：</block>
  <block id="25d72b461e3683f9ab10d775fcdcff58" category="paragraph">` * SnapDrive 配置集 *`</block>
  <block id="92dea700d63f986697dd3e7e8367a7fc" category="paragraph">在上述命令中， `f3050-197-191` 是管理接口， `f3050-220-91` 是数据接口。</block>
  <block id="def738967cf1eff80ad3c6125167f968" category="paragraph">以下是 SVM 的示例。</block>
  <block id="7f2befd19c5538353a1e2131c7998a96" category="paragraph">在输出中， `10.72.220.203` 为管理接口， `10.72.221.155` 为数据接口。</block>
  <block id="7f1414dfd519f6624c8e5c40687861ea" category="summary">SnapDrive for UNIX 提供了一些功能，可让您更安全地使用它。通过这些功能，您可以更好地控制哪些用户可以在存储系统上执行操作以及从哪个主机执行操作。</block>
  <block id="a9bbd3520bf095df54f9119e14093558" category="doc">什么是安全功能</block>
  <block id="8e041d04350f4edc19ebe3580f816047" category="paragraph">通过安全功能，您可以执行以下任务：</block>
  <block id="dbeba176b4a867f9627a4a05e788fe7e" category="list-text">设置访问控制权限</block>
  <block id="8add8a9d02ec5ab9b38e29eb99890d3d" category="list-text">指定存储系统的登录信息</block>
  <block id="68d28781385c2509f60596721891752c" category="list-text">指定适用于 UNIX 的 SnapDrive 使用 HTTPS</block>
  <block id="b784644b98ffc02157d4892c1fc14013" category="paragraph">通过访问控制功能，您可以指定运行 SnapDrive for UNIX 的主机可以在存储系统上执行的操作。您可以为每个主机单独设置这些权限。此外，要允许 SnapDrive for UNIX 访问存储系统，您必须提供该存储系统的登录名和密码。</block>
  <block id="a3e63bc7ad2ef4d336e9e5b78c71f59f" category="paragraph">通过 HTTPS 功能，您可以通过管理 ONTAP 界面为与存储系统的所有交互指定 SSL 加密，包括发送密码。此行为是适用于 UNIX 的 SnapDrive 4.1 以及更高版本中适用于 Linux 主机的默认行为；但是，您可以通过将 `use-https-to-filer` 配置变量的值更改为 `off` 来禁用 SSL 加密。</block>
  <block id="21f77b7ab19f72d16f832db8fed94f86" category="summary">您可以使用存储删除向导执行某些删除操作。</block>
  <block id="4b344aa45303f7cbcb8ffd4cd7d43733" category="doc">使用向导删除存储</block>
  <block id="8baad43f5caceda7ca254056464d3692" category="paragraph">您可以使用 SnapDrive storage wizard delete` 命令启动此向导。</block>
  <block id="ac27c807e32a1a2334a83f990fd4e8d2" category="paragraph">您可以删除以下实体：</block>
  <block id="15c855555a1f8c2275469c4fcfe02111" category="list-text">LUN</block>
  <block id="d509741200f42050576c2506723f6394" category="list-text">磁盘组</block>
  <block id="c08e871b4da0fee9b1ac13faa23a180b" category="list-text">一个逻辑卷</block>
  <block id="5bb4533906adab10a9dff0d97edae276" category="list-text">一种文件系统</block>
  <block id="37f66c780ed49e1455afa51898db7640" category="summary">您可以使用 SnapDrive snap restore 命令还原 Snapshot 副本。还原操作可能需要几分钟时间，具体取决于还原的类型和数据量。</block>
  <block id="b08407f68ed33b6a1c04bbf54e5de0ee" category="doc">还原 Snapshot 副本</block>
  <block id="0ccd7260ca629fbbc70e011e84ee98db" category="paragraph">您可以使用 SnapDrive snap restore` 命令还原 Snapshot 副本。还原操作可能需要几分钟时间，具体取决于还原的类型和数据量。</block>
  <block id="6e10d2d589bfba6ad119399f10f66638" category="list-text">输入以下命令以还原 Snapshot 副本：</block>
  <block id="1dbefeec4b821129e2b049b6ef9e3f80" category="paragraph">` * SnapDrive snap restore -snapname _snap_name_ ｛ -lun _dg _-fs | - hostvol _-file ｝ _file_spec_ [_file_spec..._] （ ｛ -lun | -dg _ -fs _hostvol _-file ｝ _file_spec_ [_file_spec_...] （ -force [-noprompt]_opts_options]_netts_options]_options_ ）`</block>
  <block id="077376bc2425815cf1dbb58bc05ace0b" category="paragraph">SnapDrive for UNIX 会将您在 SnapDrive snap restore` 命令行中指定的 LUN 内容替换为您指定的 Snapshot 副本中的 LUN 内容。此操作可能需要几分钟时间。操作完成后， SnapDrive for UNIX 将显示一条类似以下内容的消息： `snap restore &lt;fil显示器 列表 &gt; succeeded`</block>
  <block id="7d2f5672ff6b147105ad2747b12b5ec5" category="paragraph">在以下示例中，文件系统 1 （ fs1 ）位于存储系统 1 上，文件系统 2 （ fs2 ）位于存储系统 1 上，同时也位于存储系统 2 上，该存储系统是配对存储系统。文件系统 3 （ FS3 ）位于存储系统 1 ，配对存储系统 2 和存储系统 3 上，这不是 HA 对的一部分。另一个文件系统 FS4 完全驻留在存储系统 4 上。</block>
  <block id="321059b57f6240bd3e1f46ef8d6027d6" category="paragraph">以下命令将创建 `fs1` ， `fs2` ， `FS3` 和 `FS4` 的 Snapshot 副本：</block>
  <block id="25ceaa0c04139aca92efcbd6309bcbc3" category="paragraph">下一个命令将还原目标存储系统上的 fs1 和 fs2 。fs1 和 fs2 都驻留在 HA 对上，因此您可以使用一个命令还原它们：</block>
  <block id="92989aff99a83d81341ea41175da4d67" category="paragraph">以下命令将还原 FS4 ：</block>
  <block id="7a722ddece9e25b7ce0ab491a812e755" category="paragraph">SnapDrive for UNIX 无法在目标存储系统上还原 FS3 ，因为此文件系统位于存储系统 1 ，存储系统 2 和存储系统 3 上。</block>
  <block id="1aaf6668074f31a305c1a93bad7fd455" category="summary">如果您不是在指定卷上创建文件规范的授权用户，则 SnapDrive for UNIX 将显示一条错误消息。</block>
  <block id="9f7e94399bcb6a2fdb68a513ec90fb96" category="doc">对单个存储对象执行单个文件规范操作</block>
  <block id="77975dea925644e880608cad9c4d10c1" category="paragraph">` 文件规范：文件规范可以是文件系统，主机卷，磁盘组或 lun._`</block>
  <block id="5417510ba0d133314c845053ba26a2f6" category="paragraph">在此示例中， John 是非 root 用户，无权在指定卷上创建文件规范。John 必须要求 Operations Manager 控制台管理员对卷 `storage_array1 ： /vol/vol1` 授予 `s .D.Storage.Write` 访问权限。</block>
  <block id="c040912a6ea56207504f4eefe8360d6d" category="summary">FlexClone 卷可提供数据管理和性能优势。</block>
  <block id="2628d56c254aa3db9de949914e25c8e4" category="doc">FlexClone 卷的优势</block>
  <block id="4ca70b788f30455e4318bbbcdfff6804" category="list-text">简化数据管理并降低风险。</block>
  <block id="472363d649e94943b14a36ae24fe6d53" category="list-text">灵活性和更高的利用率。</block>
  <block id="390c1c61bf3e0369d50c3e89f0a54cd2" category="paragraph">您可以使用 FlexClone 卷为其他用户创建多个数据副本，而无需授予他们对原始数据的访问权限。</block>
  <block id="f9ff8d86e137bb0ea786a04c2e5ad9be" category="list-text">比 LUN 克隆速度更快。</block>
  <block id="fb9bc000c8139cd13468f9ecb0fcad33" category="summary">某些 SnapDrive for UNIX 命令可以挂载或卸载发生原因文件系统。当命令执行挂载文件系统的操作时， SnapDrive for UNIX 会将文件系统的名称添加到主机平台的标准系统文件中。如果卸载文件系统的操作， SnapDrive for UNIX 将从系统文件中删除此名称。这不会造成问题；但是，了解系统文件何时修改会很有用。</block>
  <block id="b021fd6e2807d1f49d572114190e5b82" category="doc">SnapDrive 命令有时会导致挂载或卸载文件系统以及修改系统文件</block>
  <block id="17bdceb65aca8ae1a33a43767e23a151" category="paragraph">某些 SnapDrive for UNIX 命令可以挂载或卸载发生原因文件系统。当命令执行挂载文件系统的操作时， SnapDrive for UNIX 会将文件系统的名称添加到主机平台的标准系统文件中。如果卸载文件系统的操作， SnapDrive for UNIX 将从系统文件中删除此名称。这不会造成问题；但是，了解系统文件何时修改会很有用。</block>
  <block id="97ced946b8f6a8194a4a2b5aa7a9a17d" category="paragraph">系统文件的名称因主机平台而异。下表列出了主机平台及其系统文件。</block>
  <block id="34a7588e855afcffbec3ec292d335369" category="cell">* 主机 *</block>
  <block id="f4a6f1cb2aaf7c289a711e3e4a65e21b" category="cell">* 系统文件 *</block>
  <block id="edc9f0a5a5d57797bf68e37364743831" category="paragraph">Linux</block>
  <block id="2838685bf15cec438c2d257b167bc6d7" category="paragraph">`etc/fstab`</block>
  <block id="ee62d19443b0b3ef1aa29793f35cdaf0" category="paragraph">以下任一命令均可挂载文件系统：</block>
  <block id="f217448feb7992cd8ae649d4edbe18eb" category="list-text">SnapDrive snap restore`</block>
  <block id="76361750d905c8cadbddb1f02af9eef6" category="list-text">SnapDrive snap connect`</block>
  <block id="ce649b248d3254e69340b504e7ee9c43" category="list-text">SnapDrive storage create`</block>
  <block id="c5de1c6ee1b6b5861ba3dd4b316965c5" category="list-text">SnapDrive 主机连接`</block>
  <block id="400961541508aa0f0524d34e27df3930" category="list-text">SnapDrive 存储连接`</block>
  <block id="e7577053fdbfb782bcfa250cfeac35ff" category="paragraph">以下命令执行可卸载文件系统的操作：</block>
  <block id="e9d27b0deba307272b2fe9da84094155" category="list-text">SnapDrive snap disconnect`</block>
  <block id="71d7c58c306187bdea7a040770c02b23" category="list-text">SnapDrive storage disconnect`</block>
  <block id="874a6438d88482186daf64f87d18dfca" category="list-text">SnapDrive storage delete`</block>
  <block id="dff9597076877c3fb4dfb890a71201da" category="list-text">SnapDrive 主机断开连接`</block>
  <block id="4b9f12c3370b87228a8c006964ca7f31" category="summary">连接到 Snapshot 副本时，请遵循相关准则。</block>
  <block id="1fe13870a7ba2b230fe1520f3d0daa91" category="doc">连接 Snapshot 副本的准则</block>
  <block id="067f22c76940db379bbb2c2097c0cda5" category="list-text">SnapDrive snap connect` 命令仅适用于在适用于 UNIX 的 SnapDrive 4.2 中创建的 Snapshot 副本。</block>
  <block id="062af009f42ca55de035f14d690ce41d" category="list-text">在非源主机上， SnapDrive 4.1 for UNIX 支持使用 Linux LVM1 或 LVM2 执行 Snapshot 连接操作。但是，如果 LUN 是 Linux LVM1 卷管理器的一部分，则不支持在发起主机上执行 Snapshot 连接操作。</block>
  <block id="dc7c5b1e5768f4fe5b409f5bc37fec1d" category="list-text">在源主机上， SnapDrive for UNIX 支持连接和还原由先前版本的 SnapDrive for UNIX 创建的 Snapshot 副本。</block>
  <block id="8f53f9058a40a324e7423a560ce9f5f6" category="admonition">在 Linux 发起主机上， Snapshot 连接操作仅适用于 Linux LVM2 以及 SnapDrive for UNIX 创建的 Snapshot 副本。</block>
  <block id="ad8b94787175e62eaeac687d1a705616" category="list-text">在 Linux 主机上，如果所连接的 SnapDrive 副本包含 LUN 或具有文件系统的 LUN ，则支持 lun snap connect` 命令，该文件系统是在未激活 Linux LVM1 的情况下创建的。SnapDrive for UNIX 不支持对使用 Linux LVM1 创建的 SnapDrive 实体使用 snap connect` 命令。</block>
  <block id="57382b0658b3747466813ba61ec8f34d" category="paragraph">SnapDrive snap connect` 命令不允许重命名 Linux 主机上的磁盘组。例如，不支持以下命令： SnapDrive snap connect -dg dg1 dg1copy -snapname daster: /vol/vol1 ： dg1snapshot`</block>
  <block id="dcdb393d8f4dc18fac81e08a9e56020c" category="list-text">要对 NFS 目录树进行读写访问， SnapDrive snap connect` 命令使用 Data ONTAP FlexVol 卷功能，因此需要 Data ONTAP 7.3 或更高版本。使用 Data ONTAP 7.1 的配置可以连接 NFS 文件或目录树，但提供只读访问权限。</block>
  <block id="e5edc17d8d1fdf574e8b58fd1f21b3bb" category="list-text">如果在 Snapshot 连接操作期间将 `enable-split-clone` 配置变量值设置为 "`on` " 或 " `sync` " ，并在 Snapshot 断开操作期间将 "`off` " ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="2214f6a177e6cf2f527ea0ccd118b4ff" category="list-text">您必须将 Data ONTAP 7.2.2 配置选项 `vfiler.vol_clone_zapi_allow` 的值设置为 "`on` " ，才能连接到 vFiler 单元中卷或 LUN 的 Snapshot 副本。</block>
  <block id="b0c5d8b958b3a39da36d085d0ab94317" category="list-text">具有不同主机配置的主机不支持 Snapshot 连接操作。</block>
  <block id="6b8684823e8f8f7a7e884b1e8278bfc1" category="list-text">用于连接到物理存储系统或 vFiler 单元的根卷的 SnapDrive snap connect` 命令失败，因为 Data ONTAP 不允许克隆根卷。</block>
  <block id="ec77ea600eebf2dc872d0762f6246c0b" category="summary">您可以使用作业 ID 或文件规范查询克隆拆分状态。SnapDrive for UNIX 将克隆拆分的当前状态指示为 in-progress ， failed 或 complete 。</block>
  <block id="93b6baa3fe49c1d67726b7d981bbc3fc" category="doc">查看卷克隆或 LUN 克隆拆分的状态</block>
  <block id="9e6ff96484c0afb207407b89c6909c2a" category="list-text">输入以下命令，使用作业 ID 或文件规范查询克隆拆分状态。</block>
  <block id="67198fcbc57bba7e276c042ccf583a10" category="paragraph">` * SnapDrive 克隆拆分状态（ -lun ） _lun_name_ [_lon_lun_name..._] （ ｛ -dg _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]]]-job _&lt;jobid&gt;_ ] 【 -all]*`</block>
  <block id="2a8b7879ce2e83fb039b0b10ff136f4e" category="paragraph">以下示例显示了使用作业 ID 的克隆拆分状态。</block>
  <block id="a35628104b0b49fc641f7c2be4e77342" category="paragraph">您可以通过以下任一方式检查克隆拆分进度的状态：</block>
  <block id="18e2c4d166484aaa8db6a9ef1967b208" category="list-text">您可以使用验证克隆</block>
  <block id="6d004bac63be82d2ddd27ba7f5a568c6" category="paragraph">` * SnapDrive storage show -fs /mnt/my_mn*``</block>
  <block id="e81c4e4f2b7b93b481e13a8553c2ae1b" category="paragraph">或</block>
  <block id="fb385a6fa1c5e192f3f2fc0187cd0760" category="paragraph">` * SnapDrive storage show -lun _long_lun_pathname_*`</block>
  <block id="405668ab70cece0aa006c506a9e55fc1" category="paragraph">命令无论哪种情况，如果未完成拆分，克隆类型都会显示为 FlexClone 或 LUN 克隆。</block>
  <block id="cacfe167061c1fa3c9b9db31a172af6e" category="list-text">您可以通过登录到存储系统并在存储系统命令行界面中使用以下命令来验证克隆拆分进度状态：</block>
  <block id="0c560c154fe5145dae343791a688d682" category="paragraph">` * 卷克隆拆分状态 _vol_name_*`</block>
  <block id="35c0b868f57550741e31df4863f01ae6" category="paragraph">` * LUN 克隆拆分状态 _lun_name_*`</block>
  <block id="395f7302af1ad6c525c82034d1046bde" category="paragraph">以下示例显示了使用文件规范进行的克隆拆分状态查询：</block>
  <block id="c8b460d1ac48bbf5d1ce15d8861a9777" category="paragraph">以下示例显示了正在运行的克隆拆分状态查询：</block>
  <block id="8582e03bf8b02216ebcfce96182a289c" category="list-text">从作业集中删除作业后，如果您使用文件规范查询克隆拆分状态，则 SnapDrive for UNIX 将错误消息显示为</block>
  <block id="963ef9d88d0c6580849f1947b692ac7f" category="paragraph">`当前未对给定资源执行拆分。`</block>
  <block id="eb892ce647df4da0515f533cadac004e" category="list-text">从作业集中删除作业后，如果您使用作业 ID 查询克隆拆分的状态，则 SnapDrive for UNIX 会将错误消息显示为</block>
  <block id="a8dfcd3cc9c3011d63d8151bf4d74a74" category="paragraph">`作业 ID 无效。`</block>
  <block id="da7613a8f036a3d9d1123939096d95c6" category="list-text">从作业中删除所有文件规范后，如果您使用作业 ID 查询克隆拆分的状态，则 SnapDrive for UNIX 将显示为</block>
  <block id="0b00a58e887bb57821a3e254e37ac234" category="paragraph">`作业 ID 无效`</block>
  <block id="316c55fd03690e8a189c6f304787b9da" category="paragraph">因为作业已从作业集中删除。</block>
  <block id="c71c538f020493b7c2cfb06d64f14063" category="list-text">如果由于存储系统中的空间不足而导致任何文件规范失败，则作业仍会继续拆分以满足其余文件规范。这意味着不会从作业队列中删除作业，并且作业状态会一直保留，直到您查询整个作业结果为止。</block>
  <block id="f30d3c871cd731cc0c016fd3eed41243" category="summary">通过适用于 UNIX 的 SnapDrive ，您可以配置存储系统上的 igroup 。配置的 igroup 用于映射存储系统上的 LUN 。</block>
  <block id="e4f6ae98cb5f8b3896239920b476398f" category="doc">配置 igroup</block>
  <block id="d9339946906727e964dd9d03d244805d" category="admonition">igroup 必须包含源启动程序和目标启动程序。</block>
  <block id="a410ba5f90a38da149c0117184cf97d4" category="summary">SnapDrive for UNIX 支持使用标准多路径软件解决方案对存储系统进行 FC 多路径访问。通过使用多路径，您可以在主机和存储系统之间配置多个网络路径。</block>
  <block id="0c2c9ddf42bc554d212105455f0b85e6" category="doc">在 SnapDrive for UNIX 中支持多路径访问</block>
  <block id="419f3742e6de8e0ec4b22cce005e7630" category="cell">平台</block>
  <block id="443850ea088fb370a17cacb94a7f7dd5" category="cell">多路径解决方案</block>
  <block id="fd5178bf9200d1f377faca0948e743f6" category="paragraph">NativeMPIO 【 DM 多路径】</block>
  <block id="00c301c636473bfd654e5b89b56851c5" category="paragraph">如果一个路径发生故障，则 FC 流量将继续在其余路径上传输。如果主机具有多个 LUN 路径，则需要多路径，并且它可以使底层路径对用户透明。如果配置并支持 SnapDrive for UNIX 操作配置文件中指定的多路径解决方案，则 SnapDrive for UNIX 将使用指定的多路径解决方案。</block>
  <block id="70caebf9603ff5050548606354615130" category="summary">SnapDrive for UNIX 在命令输出和各种日志文件中提供了有关错误消息的信息。</block>
  <block id="33396ca62afb11167a140e28d5084f1a" category="doc">错误消息位置</block>
  <block id="5f287c68f5ec5c0a2e3ff3b79149b951" category="paragraph">SnapDrive for UNIX 可在以下位置提供有关错误消息的信息：</block>
  <block id="8ae48e1bda977a7d53e385376a852565" category="list-text">命令输出</block>
  <block id="bc284dd9751ab1b76b527a7d2a908c05" category="paragraph">它会显示 SnapDrive for UNIX 命令的标准错误输出的所有消息。</block>
  <block id="7d541078d8459ceb49916c30adc177eb" category="list-text">系统日志</block>
  <block id="41c3090ba8dea21bdaa4ea4376c13962" category="paragraph">SnapDrive for UNIX 会使用 syslog（ 3 ）机制将严重性级别为 " 致命 " 和 " 管理员 " 错误的所有错误记录到系统日志中。</block>
  <block id="92bbc5c559d879fdb6367f7239d3540a" category="list-text">审核日志文件</block>
  <block id="933022ac089b5340630837624bcc8a46" category="paragraph">审核日志会记录每个 SnapDrive for UNIX 命令的以下信息：</block>
  <block id="20125a62e7f443a809552089f40cdb0e" category="list-text">发布者</block>
  <block id="2de46aa378cb3864ac5f218079728b89" category="list-text">发布时间</block>
  <block id="b765e4eb659f3b1e82335fb6300a2b46" category="list-text">其退出状态是什么。</block>
  <block id="70faf194361c74c9d89a3fd96c0c9bbb" category="paragraph">这对于确定系统上实际发生的情况非常有用。</block>
  <block id="d43032fcaaa8a798488a030d6ad6d541" category="list-text">跟踪日志文件</block>
  <block id="96caa8e2357c196c3ead0da2c8359c07" category="paragraph">跟踪日志可记录有关发生的任何错误的更详细信息。NetApp 技术支持在诊断问题时使用此日志。</block>
  <block id="1366c1db8a07a0a88fe0c297243ba79f" category="summary">通过 SnapDrive for UNIX ，您可以使用 Data ONTAP Snapshot 技术为存储系统上存储的主机数据创建映像（ Snapshot 副本）。</block>
  <block id="d046b8e9a067f5aa8f1abc7919b427fd" category="doc">SnapDrive for UNIX 中的 Snapshot 操作是什么</block>
  <block id="ce95d9e929e690e1582af94c59582b14" category="paragraph">通过 SnapDrive for UNIX ，您可以使用 Data ONTAP Snapshot 技术为存储系统上存储的主机数据创建映像（ Snapshot 副本）。</block>
  <block id="b6b65e8d9ed7c91213c29e96fe424921" category="paragraph">此 Snapshot 副本可为您提供一份数据副本，您可以稍后还原这些数据。Snapshot 副本中的数据可以位于一个存储系统上，也可以跨越多个存储系统及其卷。这些存储系统可以位于 HA 对或节点本地文件系统中，也可以位于主机集群环境中的磁盘组或 LUN 中。在安装了 SnapDrive for UNIX 的非集群模式 UNIX 主机上，您可以为存储系统上的一个或多个卷组创建 Snapshot 副本。</block>
  <block id="b5221c0f4edce2991ff6f887b5f7e58e" category="paragraph">Snapshot 副本可以包含文件系统，逻辑卷，磁盘组， LUN 和 NFS 目录树。创建 Snapshot 副本后，您可以对其进行重命名，还原或删除。您也可以连接到同一主机上的其他位置或其他主机。连接后，您可以查看和修改 Snapshot 副本的内容，也可以断开 Snapshot 副本的连接。此外，您还可以通过 SnapDrive for UNIX 显示有关已创建的 Snapshot 副本的信息。在安装了 SnapDrive for UNIX 的集群模式 UNIX 主机上，您可以对包含磁盘组和文件系统的主机集群节点执行 Snapshot 操作。Snapshot 操作包括创建，重命名，还原，连接，断开连接， 显示和删除。</block>
  <block id="0b586ab95fff0089053af96c3814ffb5" category="summary">在 Linux 上，卷管理器为原生 LVM2 。</block>
  <block id="93fc6c558cc9a80a5f9cdce8e5c685a5" category="doc">SnapDrive for UNIX 上的卷管理器</block>
  <block id="b053700a6a8ca615844df987587efab8" category="paragraph">下表介绍了主机平台上的卷管理器：</block>
  <block id="c2ca16d048ec66e04bca283eab048ec2" category="cell">主机</block>
  <block id="94eb489adef0236d96eeb0c6a2ab5248" category="cell">卷管理器</block>
  <block id="b83424eb14d71f89d8f527b5088b5d83" category="cell">卷或磁盘组</block>
  <block id="f9ff03905c3dccf53b332d6840e4d914" category="cell">逻辑卷的位置</block>
  <block id="bc7ff98f39465b8e942ceb682422f7db" category="cell">多路径设备的位置</block>
  <block id="78b31a4c2fa7be79e426c56622b6cf0a" category="paragraph">RHEL 4 和 RHEL 5</block>
  <block id="c9fac92e963f802c51ee17c21f6af1a1" category="paragraph">原生 LVM2</block>
  <block id="a5a2589f4f2d8b20ad843f2d562f583a" category="paragraph">卷组 ` _vg_`</block>
  <block id="0e3e18009be38d58b992a926334821ae" category="paragraph">` /dev/mapper/dgname-lvolname`</block>
  <block id="1fbd35181f095d86597d9bae0b742ab3" category="paragraph">` /dev/mpath /dev/mapper /dev/dm`</block>
  <block id="bf3e0fdab36bb430e7fb32be5ece1f81" category="paragraph">RHEL 6</block>
  <block id="9c7f0a0ea325811a1b443b70c285359e" category="paragraph">卷组 `vg`</block>
  <block id="0a6437f4805be7aa4e5140f9c73fcda1" category="paragraph">` /dev/mapper /dev/dm`</block>
  <block id="2238ff6a20f7e74fbc5f4669ba907a96" category="paragraph">SLES 10 和 SLES 11</block>
  <block id="db35b153809b4f1ceefec50238a6b5e5" category="paragraph">` /dev/mapper/dgname-volname`</block>
  <block id="9607ddb0de0ba3d2ef8ccb762d24c4ac" category="summary">要执行 SnapDrive 操作，您必须在 SnapDrive for UNIX 中配置 Vserver 。</block>
  <block id="4eb66a4856fa6fcbb1720a97935be60f" category="doc">SVM 的配置信息</block>
  <block id="fb9539ad5a4ed0316ae7cd18ee263229" category="paragraph">要使用适用于 UNIX 的 SnapDrive 配置 SVM ，请在集群模式 Data ONTAP 中，确保 SVM 的管理逻辑接口（ LIF ）的 IP 地址已与 SVM 名称映射，可以在域名服务（ DNS ）或 ` /etc/hosts` 文件中进行映射。此外，还必须使用以下命令确保已在适用于 UNIX 的 SnapDrive 中配置 Vserver 名称：</block>
  <block id="1a9f93bdaa34e1a2e5caf7545be8c6c4" category="paragraph">` * SnapDrive 配置集 &lt;vsadmin&gt; &lt;vserver name&gt;*`</block>
  <block id="f0cff2e671cdbf0555c15bd5b136773f" category="inline-link-macro">支持 SVM</block>
  <block id="feaa490ae18d6fa319130d8128c636a6" category="paragraph"><block ref="feaa490ae18d6fa319130d8128c636a6" category="inline-link-macro-rx"></block></block>
  <block id="9e4c85969443185bc594f742330c2ba9" category="summary">您可以使用向导管理 Snapshot 副本。此向导将引导您完成一系列问题，并帮助您执行 snap connect ， snap restore 和 snap disconnect 操作。</block>
  <block id="11e4e02cd119bfda743c0fbe4e76a511" category="doc">使用向导管理 Snapshot 副本</block>
  <block id="3fe79af3531831a791cc6147cb63e179" category="paragraph">您可以使用 SnapDrive snap wizard` 命令运行此向导。</block>
  <block id="ed42feccf7d5d55631cb890453f2c650" category="paragraph">下表列出了运行此向导所需的不同操作和相应命令。启动向导后，按照应用程序窗口中的步骤进行操作。</block>
  <block id="2a78ed76450c3cb42320882b3e055b31" category="cell">操作</block>
  <block id="ee97be03cb04119af45014d815621ce1" category="cell">命令</block>
  <block id="d1158f918bfc635ca0021a666f9446fd" category="paragraph">Snapshot 还原</block>
  <block id="080c89a6d45b4f61882fdbe363169495" category="paragraph">SnapDrive 快照向导还原`</block>
  <block id="84ba3b12ee2ad4a9b01014aa564bd40a" category="paragraph">Snapshot 连接</block>
  <block id="f4d00fc5369a5120ab950980415b02cd" category="paragraph">SnapDrive Snap 向导连接`</block>
  <block id="ef87db193f8fc179ea9264d8c8d26f2f" category="paragraph">包含存储系统卷的文件系统的快照连接操作</block>
  <block id="75113f56d977716897eb44a55301ff0b" category="paragraph">磁盘组的 Snapshot 连接</block>
  <block id="5d9e18cb26f724276a43745c3b2eec34" category="paragraph">LUN 的 Snapshot 断开连接</block>
  <block id="d61837e026b4514b1efa938270c3630c" category="paragraph">SnapDrive 快照向导断开连接`</block>
  <block id="9c0ec0cc505e9b3a56441abb426d6ea6" category="paragraph">磁盘组的 Snapshot 断开连接</block>
  <block id="e6395f239ae5e9835c7c6a02da47f71d" category="paragraph">主机卷的 Snapshot 断开连接</block>
  <block id="577c07a736e33e8ae01d9d535e06833a" category="paragraph">文件系统的 Snapshot 断开连接</block>
  <block id="b6dd578e8f1cc451c37be5f8284c7484" category="paragraph">* 限制： * 在 SnapDrive for UNIX 4.1 及更高版本中， SnapDrive snap wizard` 命令具有以下限制：</block>
  <block id="a2032a64341ed259c7dd7728badfc7ee" category="list-text">`snap wizard restore` 命令不支持基于卷的 SnapRestore 。</block>
  <block id="505622e7a3412dca4a5f8caaef0e8698" category="list-text">`snap wizard connect` 命令不支持 FlexClone ® 卷。</block>
  <block id="74358c2e2eb2b34a1acd9821776f8da3" category="list-text">不支持使用 `snap 向导` 命令对无响应的文件规范执行操作。</block>
  <block id="da518895d291cc5fcc6b75320eda8bac" category="summary">通过配置向导，您可以在 NFS ， SAN 或混合环境中进行配置。</block>
  <block id="b51d8a2ecacfc85300abc0009846e712" category="doc">使用 SnapDrive 配置向导</block>
  <block id="f4b532e3e77062c05ad83141395a6db4" category="section-title">在 NFS 环境中配置的步骤</block>
  <block id="0ba6b37eed46044060cdba6cabbc35b8" category="paragraph">以下是在 NFS 环境中配置的步骤。</block>
  <block id="920e3d0f8c694628785141f5f7fa3d24" category="list-text">选择 * NFS * 配置文件。</block>
  <block id="41b5aa2694c3b2787a93dafbac3de3e7" category="list-text">启用 Protection Manager 集成。</block>
  <block id="a0dcb68b84cc86f958b83094f4ecb3ee" category="list-text">选择 `Yes` 以使用 DataFabric Manager 启用访问权限检查。</block>
  <block id="eb8f1395dfb432e51db8ffdeb706a20d" category="list-text">输入 DataFabric Manager 服务器名称或 IP 地址，后跟用户名和密码。</block>
  <block id="0bf8bfd6580404cb47d83244588d0cbb" category="list-text">输入 `http/https` 端口以与 DataFabric Manager 进行通信。默认值为 `8088` 。</block>
  <block id="5c3ffc02e975bae22d05d6dde53ef946" category="list-text">输入 SSL 服务器端口以访问 DataFabric Manager 。默认值为 `8488` 。</block>
  <block id="e5293276058e8625843fcd458b190af7" category="list-text">启用 HTTPS 以与 DataFabric Manager 进行通信。</block>
  <block id="505347bdc163c63bf6d3a59f8f79a533" category="list-text">选择 `No` 可使用 RBAC 启用访问权限检查。</block>
  <block id="3a20ca928796a941e177198e739397e2" category="list-text">指定基于角色的访问控制方法。可能值为 `原生` 和 `dFM` 。</block>
  <block id="546ed954e6180e1759d9c746909d339c" category="list-text">选择 `原生` 以使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac` 或 ` /vol/vol0/sdprbac/sdgenergicname.prbac` 中的控制文件检查主机的访问权限。</block>
  <block id="4850c17715523f2c837d98500bd11f23" category="list-text">选择 `dFM` 可使用 Operations Manager 控制台检查访问权限。</block>
  <block id="e5ead92704799e0608e27fbc75ee502f" category="admonition">如果在未配置 DataFabric Manager 的情况下选择 `dFM` as `RBAC 方法` ，则会显示一条警告消息，指出在未启用 Protection Manager 集成的情况下， RBAC 方法已选择为 `dFM` 。</block>
  <block id="ef2a36620104d4b1835e3bb98cb5718c" category="list-text">指定 `https` 或 `http` 以与存储系统进行通信。</block>
  <block id="09a9c7475acfd5b5337d6b8c20849a1b" category="list-text">最后一步是将配置更改保存在 `snapdrive.conf` 文件中，然后重新启动守护进程。</block>
  <block id="6864dde5ca01711930bbdadcee8d6614" category="list-text">如果选择 `是` ，则 SnapDrive 守护进程将重新启动，并反映配置更改。</block>
  <block id="959c2f4818bbf1c1679f3fd2a6061e47" category="list-text">如果选择 `No` ，则 `snapdrive.conf` 文件中的变量值会发生更改，但不会反映这些更改。</block>
  <block id="260c36f84403cfcbc619c49526ac82c6" category="section-title">在 SAN 环境中配置的步骤</block>
  <block id="8fde492f70fec3dae6985f9a8fd831b0" category="paragraph">以下是在 SAN 环境中配置的步骤。</block>
  <block id="a1abe3f0d4be31de07dc577322fba757" category="list-text">选择 SAN 配置文件。</block>
  <block id="1b304f0c923d43747d21d6a26a6d7ca9" category="list-text">选择所需的传输协议。</block>
  <block id="01415e37843ba28e98a406109d2ce8a2" category="list-text">选择 `FCP` 以设置 default-transport 。</block>
  <block id="e4c56ccea3d7cf363f47d5d16d440c33" category="list-text">选择 `iscsi` 以设置 default-transport 。</block>
  <block id="fb0696791cd96e3964bcfe3a96c9d227" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器和文件系统的组合）。选项包括 `原生` 和 `none` 。</block>
  <block id="ace460605e91b06e9417c255b5b4d024" category="list-text">启用 HTTPS 以与 DataFabric Manager 进行通信</block>
  <block id="c9774323de6ff8c0074e23cc470f7bde" category="list-text">选择 `dFM` 可使用 Operations Manager 检查访问权限。</block>
  <block id="1d72000e6013875db62d5fd39663b98f" category="list-text">启用 SMVI 集成以在子操作系统中创建 RDM LUN 。</block>
  <block id="6ddf4cd6e822c5a23fd2eb765452af01" category="list-text">选择 `yes` 在子操作系统中创建 RDM LUN 。然后输入 SMVI 服务器的 IP 地址，用户名和密码。</block>
  <block id="fcce34786ed59fb9485dd7224079a0c8" category="list-text">选择 `no` 可跳过此选项。</block>
  <block id="92449291118b7aa7382d7a18c3555598" category="admonition">SVMI 集成仅适用于 FCP 协议。</block>
  <block id="1669bbf8ca4afaa638be5e550a49465f" category="section-title">在混合 SAN 和 NFS 环境中配置的步骤</block>
  <block id="f6ebee4376b32254441055561109764e" category="paragraph">以下是在混合 SAN 和 NFS 环境中配置的步骤。</block>
  <block id="a15f76d41e37da0cc90c780a6a848b1e" category="list-text">选择混合配置文件。</block>
  <block id="a0b8e722cb191754e0e1e24f7ab0a53b" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器，文件系统的组合）。选项包括 `原生` 和 `none` 。</block>
  <block id="05fe0a365aaece05b195667f0f38248a" category="list-text">选择 `Yes` 以使用 DataFabric Manager 启用访问权限检查</block>
  <block id="4c1a15a9148922413e19a20cef1cd807" category="list-text">选择原生以使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac` 或 ` /vol/vol0/sdprbac/sdgenergicname.prbac` 中的控制文件检查主机的访问权限</block>
  <block id="ea2eb97135e8d1b35a94b1dd5266348f" category="list-text">选择 DFM 以使用 Operations Manager 控制台检查访问权限。</block>
  <block id="a06d520e4478757eb62109f436f2c71f" category="paragraph">SnapDrive 会修改 `snapdrive.conf` 文件中的以下变量。</block>
  <block id="a3e4680c2986e23a039738b07b59c8b4" category="list-text">` contact-http-dfm_port_`</block>
  <block id="622df03d41086a8ed731f333c821c42a" category="list-text">` 联系人 -ssl-dfm_port_`</block>
  <block id="e53f5b33d7567fa6afff7565c4d13b6b" category="list-text">` 使用 https 到 dfm_`</block>
  <block id="84b7f38872acb781f47e62d3ed4a45c7" category="list-text">`` default-transport_</block>
  <block id="ac0620bcb92a1387690ddfbf4d759481" category="list-text">` 使用 https 到存储器 _`</block>
  <block id="68949918397edea08e6dd3fcdb80abe9" category="list-text">` fsttype_`</block>
  <block id="f53816132e3233dd919410ecaf124d9e" category="list-text">` 多路径类型 _`</block>
  <block id="d93f8ae8f3b886fda7eb8b192059b15f" category="list-text">` vmtype_`</block>
  <block id="1e32088ddb8e3722e8279d9fce6312d0" category="list-text">` RBAC 方法 _`</block>
  <block id="c39d1ee8cc0e2b61f0c8670066ff2dc0" category="list-text">` RBAC 缓存 _`</block>
  <block id="4c29bd1136aff457668bc77a1fde69a9" category="summary">在 SnapDrive for UNIX 操作期间，当 Linux 主机重新启动时， SnapDrive for UNIX 无法连接到 Snapshot 副本。</block>
  <block id="01225ce76b2db21f0c13f0795c95664e" category="doc">连接到 Snapshot 副本失败</block>
  <block id="7e190c0fd8baf195f96c30bca9a46363" category="paragraph">在 SnapDrive for UNIX 操作期间重新启动的源主机上执行快照连接操作期间， Linux LVM2 会发生这种情况。</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="section-title">临时解决策</block>
  <block id="0161ce4cdf5d5af82caff006e6e84e70" category="list-text">确保与磁盘组关联的设备的 LUN 克隆未映射到主机。如果它们已映射到主机，则取消映射并删除它们。它们可能是由于先前失败的 SnapDrive 操作而出现的。</block>
  <block id="7a1ba38435672231d5ba56fd61bd1bef" category="list-text">按以下方式编辑 `lvm.configfile` （位于 ` /etc/lvm/` ）：</block>
  <block id="c400fbb256281563253ecf7313e08e9f" category="list-text">删除后缀为 ` ###SDUTEMP` 的所有行。</block>
  <block id="7019441facb852404efcb317e4420139" category="list-text">还原注释标记 ` #SDUEXISTING` 前面的所有行。</block>
  <block id="1896f4d2e0f382f003c21d8b32478094" category="paragraph">如果上述任何一项不起作用，请联系 NetApp 技术支持。</block>
  <block id="15e3e1e6e0c2b1517deb81acb55599c1" category="summary">您可以使用 SnapDrive.conf 文件更改审核日志文件的日志记录参数，例如审核日志文件的最大大小和旧审核文件的最大数量。</block>
  <block id="df38a0e1955f3b9a2e931151ea780e48" category="doc">更改审核日志的默认值</block>
  <block id="ed50bd8b945ba1903a69a1f63812c200" category="paragraph">使用 SnapDrive.conf 文件可以为审核日志记录设置以下值：</block>
  <block id="21196b92da28f431a0599d176ba70dea" category="list-text">审核日志文件的最大大小。默认大小为 20K 。文件大小达到 SnapDrive.conf 文件中指定的值后， SnapDrive for UNIX 将通过在名称中添加任意数字来重命名当前审核日志文件。然后，将使用由 audit-log-file 值指定的名称启动新的审核文件。</block>
  <block id="0351f957a647cdb537c75358bfc7e75a" category="list-text">SnapDrive for UNIX 保存的最大旧审核文件数。默认值为 2. 。</block>
  <block id="b487abe62337e717ac368ce28a7e4e75" category="paragraph">* 审核日志文件示例： *</block>
  <block id="5fe028602119eb8ff2f0f6bd6eda42de" category="paragraph">此示例中的第一对行显示了一个成功的操作，如 "Status=0" 行所示。</block>
  <block id="5e0c726b939a97b39f6179cb6dcb77fe" category="paragraph">第二对线表示操作失败。返回代码 "4" 表示 "`已存在。` 如果您查看这两个命令行，则可以看到第一个创建了一个名为 snap_rdg1 的 Snapshot 副本。第二行尝试执行相同操作，但名称已存在，因此操作失败。</block>
  <block id="bca19b3ee78ec58205371d40510e6c68" category="summary">端口集是一组 SAN 数据端口或接口，用于通过对 SAN 数据端口或接口集进行分组来控制可供主机使用的路径。</block>
  <block id="ac684dd9e59d73277e2ca41d4ae15b81" category="doc">使用 SnapDrive for UNIX 中的端口集</block>
  <block id="65f78837acac1de54365a869e3853fc2" category="paragraph">端口集配置由存储系统上的存储管理员创建，这是一项可选任务。如果主机上未配置端口集，则主机可以查看所有路径，具体取决于主机 SCSI 配置限制。SnapDrive for UNIX 允许存储管理员为每个 SVM 指定一个端口集。因此，主机可以通过 Vserver 查看的路径数存在限制。</block>
  <block id="8342a6b65a0eb084eeb82610e02d9a17" category="summary">您可以使用 SnapDrive snap create 命令创建 Snapshot 副本。</block>
  <block id="2289b4e9edb6133740283de69b68180a" category="doc">Snapshot 副本操作</block>
  <block id="ec4e1141fe6aac49d42a35ee8a512bfb" category="paragraph">您可以使用 SnapDrive snap create 命令` 创建 Snapshot 副本。</block>
  <block id="fa3dd0dca1788118d6d07ff2253fb1f4" category="summary">此错误消息的格式可帮助您确定此错误的发生原因。</block>
  <block id="45b473056ef2228ec68a0e4b2cc03ec8" category="doc">错误消息格式</block>
  <block id="e7dcccec72ee50db6c7809a01d8bc9a4" category="paragraph">SnapDrive for UNIX 将返回标准错误代码信息，从而提供导致初始错误情况的更具体的问题描述。SnapDrive for UNIX 错误消息遵循以下格式：</block>
  <block id="106a0b46c17ff50d442a0d8b74847604" category="paragraph">`reTurn code message-ID 错误类型： message text`</block>
  <block id="8de284b73b465ee0317ade341f5960de" category="list-text">` 返回代码 _` - SnapDrive for UNIX 错误消息 ID ，链接到指示错误情况的基本发生原因的退出状态值。</block>
  <block id="24449a2d44903a455a8282d53c0af591" category="list-text">` _message-ID_` - NetApp 技术支持用来查找生成错误的特定代码的唯一标识符。如果您需要致电 NetApp 技术支持， NetApp 建议您记录随错误消息一起提供的消息 ID 。</block>
  <block id="88b96154c590cc008e1865a547bddbf2" category="list-text">` _error type_` - 指定 SnapDrive for UNIX 遇到的错误类型。返回值包括以下内容：</block>
  <block id="66c52ea6ec1558bd25aeee7d997d4c8b" category="list-text">` _Warning_` - SnapDrive for UNIX 已执行命令，但发出警告，指出可能需要您注意的情况。</block>
  <block id="882785eaea0b9d1bb6225009b85c1a59" category="list-text">` _Command_` - 由于命令行中的错误， SnapDrive for UNIX 无法执行命令。检查命令行格式和变量以确保其正确无误。</block>
  <block id="341399830ef606429dc51627d38f2387" category="list-text">` _Admin_` - 由于系统配置不兼容， SnapDrive for UNIX 无法执行命令。请联系您的系统管理员以查看您的配置参数。</block>
  <block id="f8525ff5b1a3c990babed975e9aaf303" category="list-text">` _fatal_` - 由于出现意外情况， SnapDrive for UNIX 无法执行命令。极少发生致命错误。如果发生致命错误且您在解决该错误时遇到问题，请联系 NetApp 技术支持以获得帮助。</block>
  <block id="cc8f17c57bf10939ec7b041f0a6834a0" category="list-text">` _message text_` —用于解释错误的信息。此文本可能包含来自另一个组件的信息，以提供有关错误的更多详细信息。例如，如果缺少命令行参数，例如磁盘组，则错误消息会告知您缺少哪些内容。或者， SnapDrive for UNIX 用于控制存储系统的管理 ONTAP API 可能会提供其他文本来帮助解释此错误。在这种情况下，文本将显示基本的 SnapDrive for UNIX 错误消息。</block>
  <block id="c7cb4b4180ff53e04c01648ade3bb76f" category="summary">SnapDrive for UNIX 支持主机集群和 HA 对拓扑。FC 或 iSCSI 配置支持与 FC Host Utilities 或 iSCSI Host Utilities 支持的相同主机集群和 HA 对配置。</block>
  <block id="0264cef6d681242607d09e3761cb683b" category="doc">支持的 FC ， iSCSI 或 NFS 配置</block>
  <block id="38a5c529448a44a21c2820b8dd353bdd" category="paragraph">SnapDrive for UNIX 支持以下主机集群和 HA 对拓扑：</block>
  <block id="2e14e6022db8d70bc87bc36d53629fc8" category="list-text">一种独立配置，其中一个主机连接到一个存储系统</block>
  <block id="a0efc2e697331de195bb32a38789954d" category="list-text">涉及存储系统 HA 对故障转移的任何拓扑</block>
  <block id="31275c0e10f1cc16c9c5b3f767c4a95c" category="list-text">包含 NetApp 支持的主机集群的任何拓扑</block>
  <block id="d493ac2ef3572d2e963db08e06fea7b0" category="paragraph">有关为您的主机和所使用的存储系统建议配置的详细信息，请参见 Linux Host Utilities 文档。</block>
  <block id="25db649957c4d341b08503d4d7beca53" category="admonition">如果您需要实用程序文档中未提及的适用于 UNIX 的 SnapDrive 配置，请联系技术支持。</block>
  <block id="c9fcc9bb60065c80097b7b60419948d5" category="summary">要创建应用程序一致的 Snapshot 副本，应在执行 Snapshot 操作之前暂停应用程序。</block>
  <block id="ae97aa8afbc54f8788161361656855d1" category="doc">应用程序一致的 Snapshot 副本</block>
  <block id="7f9d3f24c819dbdeac3ab229bd9f65eb" category="paragraph">要确保 Snapshot 副本与应用程序一致，您可能需要在创建 Snapshot 副本之前停止应用程序或执行必要的步骤以使其暂停。请注意，数据库热备份工具取决于 DBMS 使用的方法，并不总是暂停数据库文件的 I/O 。</block>
  <block id="6cfa951747207e6751deb1f21bc66b82" category="paragraph">如果应用程序尚未完成其事务并将数据写入存储系统，则生成的 Snapshot 副本可能与应用程序不一致。</block>
  <block id="88c06d02b2a2eccb5c6c9ab40c816bda" category="admonition">如果应用程序可以从崩溃状态一致的 Snapshot 副本中恢复，则无需停止它。请参考适用于您的应用程序的文档。有关创建应用程序一致的 Snapshot 副本的详细信息，请参见。</block>
  <block id="deda2953db495fbd7067b5636bd72b7d" category="paragraph">无论何时添加或删除主机卷， LUN 或 NFS 目录树，或者调整主机卷或文件系统的大小，都应创建新的 Snapshot 副本。这样可以确保新配置的磁盘组具有一致的副本，您可以在需要还原磁盘组时使用该副本。</block>
  <block id="16902eba17a39f9e7142f6c8b92cf309" category="summary">如果在 FC 和 iSCSI 服务均已启动或关闭时执行 SnapDrive storage delete 命令，则 SnapDrive for UNIX 将显示错误消息。</block>
  <block id="81cccac2ac9e56e76284e4ad7864a23b" category="doc">错误代码消息存在差异</block>
  <block id="fc37ef719d9d18316d5d7fd32d5f2ff0" category="paragraph">如果在 FC 和 iSCSI 服务均已启动或关闭时执行 SnapDrive storage delete` 命令，则 SnapDrive for UNIX 将显示错误消息。</block>
  <block id="91328d81db8fac5e42941f3f4d37d5cc" category="cell">* 传输协议 *</block>
  <block id="d7ce2faa1b931b25fc11702883ea5c07" category="cell">* 显示的消息（不正确的消息） *</block>
  <block id="7998a9914de89ce84586ed468b9ceb0e" category="cell">* 应改为显示的消息（正确的消息） *</block>
  <block id="321fc1a0b0052f1ba32a8eec0ecbaa06" category="paragraph">已配置 FC 和 iSCSI</block>
  <block id="bfc5f6ba4519ff98b35c5d1d203a272c" category="paragraph">`0002-143 管理员错误：不支持 Linuxiscsi linuxfcp 驱动程序共存。`</block>
  <block id="7825061a55073cc8818c7e718ec7607f" category="paragraph">`确保主机中仅加载了一个驱动程序，然后重试。`</block>
  <block id="f9e8d442176616b05e196c20c206da28" category="paragraph">未配置 FC 和 iSCSI</block>
  <block id="37e859e471b04451618c53c8637a8536" category="paragraph">`0001-877 管理员错误：未找到 HBA 助手。涉及 LUN 的命令应失败。`</block>
  <block id="3612ad7068bd16f73df7e3ab66da7237" category="summary">您可以使用 SnapDrive snap connect 命令连接到包含 LUN 以外存储实体的 Snapshot 副本。如果您提供的目标名称当前正在使用中，或者存在用作挂载点的文件系统名称，则无法使用此命令。</block>
  <block id="d882d545dc7e55f4460bd02d65136ba8" category="doc">连接到 LUN 以外存储实体的 Snapshot 副本</block>
  <block id="c677d1a4b08af4ef406d48f9b17d736c" category="paragraph">您可以使用 SnapDrive snap connect` 命令连接到包含 LUN 以外存储实体的 Snapshot 副本。如果您提供的目标名称当前正在使用中，或者存在用作挂载点的文件系统名称，则无法使用此命令。</block>
  <block id="7618c73955d4ae29a2c0c9ca74121547" category="paragraph">` * SnapDrive snap connect -snapname fspec_set [_fspec_set..._] -snapname _long_snap_name_ "-igroup _ig_name_ [ig_name...]] [-AutoExpand] [-autosename] [-noperesit] [ ｛ -reserve | -noreserve ｝ ] [-readonly] [-splone]*`</block>
  <block id="7e2e790d17d8cee71f11854f67b39c26" category="paragraph">在上述用法中， ` fspec_set_` 的格式如下：</block>
  <block id="31684943e42804948e1b736039146eaf" category="paragraph">` * ｛ -dg _ -fs _ -hostvol ｝ _src_file_spec_ [_dest_file_spec_] （ ｛ -destdg _ -destvg ｝ _dgname_] （ ｛ -destlv _ -desthv ｝ lvname]*`</block>
  <block id="a350511cb4ab77a05cdc690cc25da707" category="paragraph">此命令必须始终以要连接的存储实体的名称开头（例如， ` -dg` ， ` -hostvol` 或 ` -fs` ）。如果指定 NFS 挂载点，则不能在同一命令行上指定非 NFS 实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` -hostvol` ）。</block>
  <block id="5d6f0fa4ec945998607e0e9e1a0a4c9c" category="admonition">在 Linux 主机上， SnapDrive for UNIX 支持在发起主机上执行 Snapshot 连接操作，除非 LUN 是 Linux LVM1 卷管理器的一部分。</block>
  <block id="2f03dc12634dad5f110c636634130f14" category="paragraph">以下命令行将连接一个磁盘组，并使用默认名称作为目标名称（即，从源名称创建这些名称）：</block>
  <block id="26f29a86adf0bd22c3a2fa3dbc71f259" category="paragraph">以下命令行将磁盘组与单个主机卷连接起来。它还会指定目标主机卷和磁盘组的名称：</block>
  <block id="c34d9fe15bd981e1f7ec5835ded46cf3" category="paragraph">以下命令行会将一个磁盘组连接到两个 LUN 和两个文件系统。它指定每个文件系统的目标名称，其中一个文件系统的主机卷以及两个文件系统的磁盘组：</block>
  <block id="63f597eb5bbf3a95fe68240aabe6c57f" category="paragraph">以下命令行包括 -AutoExpand 选项，因为它会将一个磁盘组连接到两个文件系统。它使用默认名称作为目标名称（即，从源名称创建目标名称）：</block>
  <block id="fb92e8e95304bcc3d70c43e1ba8fad54" category="paragraph">以下命令行包括 ` -auturename` 选项，因为它会将一个磁盘组连接到两个文件系统和两个 LUN ：</block>
  <block id="12d6835b8c26324365ad9a17232ee7d1" category="paragraph">在以下示例中，文件系统 1 （ fs1 ）位于存储系统 1 上，文件系统 2 （ fs2 ）位于存储系统 1 上，同时也位于存储系统 2 上，该存储系统是配对存储系统。文件系统 3 （ FS3 ）位于存储系统 1 ，配对存储系统 2 和存储系统 3 上，这不是 HA 对的一部分。另一个文件系统 FS4 完全驻留在存储系统 4 上。</block>
  <block id="f0c191fece2428e72f736f5f75bc0250" category="paragraph">以下命令将创建 fs1 ， fs2 ， FS3 和 FS4 的 Snapshot 副本：</block>
  <block id="c1fc1661f109d23855a76b010ede0007" category="paragraph">下一个命令用于连接目标存储系统上的 fs1 和 fs2 。fs1 和 fs2 都驻留在 HA 对上，因此您可以使用一个命令还原它们：</block>
  <block id="59c63b49549cf6977a70bfc7679af43e" category="paragraph">SnapDrive for UNIX 无法在目标存储系统上连接 FS3 ，因为此文件系统位于存储系统 1 ，存储系统 2 和存储系统 3 上。</block>
  <block id="dec7be8f47c200f6e844b076f994a0f0" category="summary">您必须牢记与各种存储命令相关的一些注意事项。</block>
  <block id="ffed9553826c359fc8665f3f88d47485" category="doc">存储操作注意事项</block>
  <block id="342b3f7b155d5077928614bbbdcb8070" category="list-text">仅支持跨多个存储系统卷或多个存储系统的卷组。您不能使用 SnapDrive storage create` 命令创建跨存储系统的卷组。</block>
  <block id="b3ac45a38fe613dbcaed099b30370d6d" category="paragraph">在这种情况下， SnapDrive for UNIX 支持以下关键命令：</block>
  <block id="324f2991d8099ad3061eddb07c1145b1" category="list-text">SnapDrive snap create`</block>
  <block id="fa4a0f84070a08ad1cd15ee51aba5782" category="list-text">SnapDrive storage resize` 命令不适用于直接映射到主机的 LUN 或 LUN 所包含的文件系统。</block>
  <block id="0abf43e4e5debe0bcb9e5b5ea3eee623" category="list-text">SnapDrive for UNIX 不提供任何选项来控制其创建的主机卷的格式化。SnapDrive for UNIX 仅创建串联的主机卷。它可以在使用其他应用程序创建的其他格式的主机卷（例如条带化卷）上正常运行。</block>
  <block id="3776cc31c5bc7473cee187386bf36d8b" category="list-text">您不能还原磁盘组的一部分。SnapDrive for UNIX 仅备份和还原整个磁盘组。</block>
  <block id="fe584b6d58fa1a6142b782921aa29f8f" category="admonition">在除 Red Hat Enterprise Linux 6 之前的所有版本中，即使使用 `` -mntets` 命令对 NFS 从非 Linux 操作系统执行的 SnapDrive 操作也会失败。</block>
  <block id="118e0f7d0f606bd17e4106741b5871ca" category="summary">重命名 Snapshot 副本时，请确保两个 Snapshot 副本的名称不相同。</block>
  <block id="f448493081229a8c541dd898c3a8fdae" category="doc">重命名 Snapshot 副本的准则</block>
  <block id="8e8f83b94bfea3374209efea1648853a" category="paragraph">使用 SnapDrive snap rename` 命令时，请遵循以下准则：</block>
  <block id="e39b2d95428f1fd6dec56ea3e554d5e7" category="list-text">如果您尝试将 Snapshot 副本重命名为其他存储系统卷，则会出现一条错误消息。</block>
  <block id="8a086ace7e1ed7cb788e6c87de7b193c" category="list-text">如果 Snapshot 副本的新名称已存在，则会出现错误消息。您可以使用 ` -force` 选项强制 SnapDrive for UNIX 更改名称而不生成错误消息。</block>
  <block id="a77143a9e323e205b14c01c8c579e630" category="summary">SnapDrive storage show 或 SnapDrive NFS 存储列表显示了一个或多个存储实体的底层 LUN 或 NFS 目录树。您可以使用 SnapDrive storage show 命令了解并了解磁盘组，主机卷，文件系统或 NFS 目录树的 Snapshot 副本中的内容。</block>
  <block id="501ac12bd43f62671c848f5a07095bd0" category="doc">用于显示可用存储的命令</block>
  <block id="0b00cb4bbbca333d32b500de190f8c75" category="paragraph">SnapDrive storage show` 或 SnapDrive storage list` 显示一个或多个存储实体的底层 LUN 或 NFS 目录树。您可以使用 SnapDrive storage show` 命令了解并了解磁盘组，主机卷，文件系统或 NFS 目录树的 Snapshot 副本中的内容。</block>
  <block id="a024b731a7f02f0af6905656a8145569" category="paragraph">您可以使用这些命令显示以下信息：</block>
  <block id="8d9d63b7fc9cc751fae5693de84584ef" category="list-text">可用于特定存储系统或存储系统卷的 LUN</block>
  <block id="68e82aee5a340196d4e887501454b876" category="list-text">与文件系统，主机卷或磁盘组关联的 LUN</block>
  <block id="f97bbdb429d32075bf15d2fddd830dbd" category="list-text">NFS 挂载点和目录树</block>
  <block id="56f39334981ff4fcf9556d77f648fb19" category="list-text">特定主机已知的 LUN 以及这些 LUN 包括的任何 LVM 实体</block>
  <block id="9de167238b53afaa6f6025b39bac65cd" category="list-text">特定主机已知的设备</block>
  <block id="faf7e9c0a4d11a4e96e6c17a77703083" category="list-text">共享主机和专用主机上的资源</block>
  <block id="c72c9be2616befd703f280b96fb68961" category="admonition">您可以在命令行中使用 SnapDrive storage show` 或 SnapDrive storage list` 。</block>
  <block id="3d085fc39b624e64303f16f800961064" category="summary">SnapDrive for UNIX 通过维护各个崩溃状态一致的 Snapshot 副本来创建不相关实体的 Snapshot 副本。</block>
  <block id="0b679b43a99ee4c481b0ec43561ac715" category="paragraph">除非您另有指定，否则 SnapDrive for UNIX 会假定您在特定 SnapDrive snap create 命令行上指定的所有实体都是相关的；换言之，对一个实体的更新是否有效取决于对指定的其他实体的更新。如果存储实体以这种方式进行依赖写入，则 SnapDrive for UNIX 将采取步骤为所有存储实体创建一个组中崩溃状态一致的 Snapshot 副本。</block>
  <block id="5f54368ae8ea8c5ca9f32f2460dc00c4" category="paragraph">以下示例显示了 SnapDrive for UNIX 如何为可能具有依赖写入的存储实体创建 Snapshot 副本。在以下示例中， SnapDrive snap create 命令用于指定 LUN 上的文件系统以及磁盘组。磁盘组由驻留在单个存储系统上的 LUN 组成（请参见创建 Snapshot 副本）。LUN 上的文件系统位于不同的存储系统和存储系统卷上。作为一个组，文件系统和磁盘组跨越多个存储系统卷，而每个卷不会跨越多个存储系统卷。</block>
  <block id="3b4a2a72c4b4d6166c651e6396a08116" category="paragraph">以下命令指定同时包含文件系统 /mnt/fs1 和磁盘组 dg1 的 Snapshot 副本： SnapDrive snap create -fs /mnt/fs1 -dg dg1 -snapname fs1_dg1`</block>
  <block id="a4ebd43b336c4d3edbb4e6f43457a54a" category="paragraph">由于这些存储实体可能具有依赖写入，因此 SnapDrive for UNIX 会尝试创建崩溃状态一致的 Snapshot 副本，并将文件系统 /mnt/fs1 和磁盘组 dg1 视为一个组。这意味着，在创建 Snapshot 副本之前，需要使用 SnapDrive for UNIX 冻结对存储系统卷的 I/O 操作。</block>
  <block id="2b2969e42ede25f3eec671bf54b59ef0" category="paragraph">为卷中的多个存储实体创建崩溃状态一致的 Snapshot 副本需要额外的时间，如果 SnapDrive for UNIX 无法冻结 I/O 操作，则此操作并非始终可行。因此， SnapDrive for UNIX 允许您为不相关的存储实体创建 Snapshot 副本。不相关的存储实体是指在创建 Snapshot 副本时您可以指定的不具有依赖写入的实体。由于这些实体没有依赖写入，因此 SnapDrive for UNIX 不会采取措施使这些实体作为一个组保持一致。相反， SnapDrive for UNIX 会创建一个 Snapshot 副本，其中每个存储实体的崩溃状态一致。</block>
  <block id="1867ca7ef8a9886769abb98960f65653" category="paragraph">以下命令用于指定 LUN 上文件系统的 Snapshot 副本以及前面所述的磁盘组。由于指定了 -unrelated 选项，因此 SnapDrive for UNIX 会创建一个 Snapshot 副本，其中文件系统 /mnt/fs1 和磁盘组 dg1 作为单个存储实体崩溃状态一致，但不会被视为组。以下命令不要求 SnapDrive for UNIX 冻结存储系统卷上的 I/O 操作： SnapDrive snap create -fs /mnt/fs1 -dg dg1 -unrelated -snapname fs1_dg1`</block>
  <block id="2f0526ff65c29b4f80ac01e2e2b96e56" category="paragraph"><block ref="2f0526ff65c29b4f80ac01e2e2b96e56" category="inline-xref-macro-rx"></block></block>
  <block id="480b766396c2bbe2364ca71a8f01aeb4" category="summary">在混合 SAN 和 NFS 环境中，必须映射管理和数据接口，以便第一个数据接口与管理接口相同。</block>
  <block id="cc4b2146bf0953922b847e88beed3fef" category="doc">混合 SAN 和 NFS 环境</block>
  <block id="5e16eca644829c288b42cd4410bfc42c" category="paragraph">在以下示例中，管理接口为 `10.72.197.91` ，数据接口为 `10.72.220.91` 。</block>
  <block id="c4b135f10ded7d9d8d668a8416a61c9f" category="summary">SnapDrive for UNIX 守护进程服务要求您生成 CA 签名的证书，才能成功进行守护进程通信。您必须在 SnapDrive.conf 文件中指定的路径处提供 CA 签名的证书。</block>
  <block id="6d91b0147ad0a9370dea508f88e7622c" category="doc">生成 CA 签名的证书</block>
  <block id="c36e5e9cab3e94cff99248d7eaa5771f" category="paragraph">SnapDrive for UNIX 守护进程服务要求您生成 CA 签名的证书，才能成功进行守护进程通信。您必须在 `snapdrive.conf` 文件中指定的路径处提供 CA 签名证书。</block>
  <block id="ace63ae34c1b7c52492a388df44b73ad" category="list-text">您必须已在 `snapdrive.conf` 文件中设置以下参数，才能使用 HTTPS 进行通信：</block>
  <block id="fe5e5d22709c59c51d1199c651d28dc1" category="list-text">use-https-to-sdU-daemon=on</block>
  <block id="91ec4884b99353aa3a50e98bb6598d80" category="list-text">contact-https-port-sdU-daemon = 4095</block>
  <block id="aa2ac9529ef7ccb54c92901eec0b8c68" category="list-text">sdU-daemon-certificate-path=` /opt/NetApp/SnapDrive/SnapDrive.pem`</block>
  <block id="9bac3f1ce1a32c184fad545a0f0f77c4" category="list-text">以 pem 格式生成新的未加密 RSA 私钥：</block>
  <block id="e9c077df9b02cdcb599f891b4c12a40b" category="paragraph">` * $ openssl genrsa -out privkey.pem 1024*`</block>
  <block id="76fe766234f2ca73c701525bbf01fb26" category="list-text">配置 ` /etc/ssl/openssl.cnf` 以创建 CA 私钥和证书 `vi /etc/ssl/openssl.cnf` 。</block>
  <block id="c9261ce5bd75e924289816bc8d0c0dfa" category="list-text">使用 RSA 私钥创建未签名的证书：</block>
  <block id="28c1ac73ff768288c3f84c33ff78dda8" category="paragraph">` * $ openssl req -new -x509 -key privkey.pem -out cert.pem*`</block>
  <block id="eb21e7e29a91d8a935d34e99fa6719ef" category="list-text">使用私钥和证书创建 CSR ：</block>
  <block id="8479e2983c48ed19eadfed2fa58e8dba" category="paragraph">` * cat cert.pem privkey.pem | openssl x509 -x509 tor均衡 器 -signkey privkey.pem -out certreq.csd*`</block>
  <block id="7039988a0c16cfd7feed2139770726c7" category="list-text">使用刚刚创建的 CSR 使用 CA 专用密钥对证书进行签名：</block>
  <block id="7db958ef871b9182c8edc42a5f9f69a6" category="paragraph">` * $ openssl ca -in certreq.csr -out newcert.pem*`</block>
  <block id="e4f1f8e68fa4f092be154fab701a34f7" category="list-text">安装 SSL 服务器要使用的签名证书和专用密钥。</block>
  <block id="5a4cbf92cdbf67ebca13c3fe6fbece38" category="summary">使用 SnapDrive snap disconnect 命令断开多个存储系统或存储系统卷上的 Snapshot 副本的连接。</block>
  <block id="824153be1513fb1824263dbe0864d4ea" category="doc">使用 Snapshot 断开连接操作</block>
  <block id="d525f8ef0ab713411e56558d20a3da0a" category="paragraph">使用 SnapDrive snap disconnect` 命令断开多个存储系统或存储系统卷上的 Snapshot 副本的连接。</block>
  <block id="55db55656ab8d2e9d5a2725d430040a1" category="paragraph">您可以使用 SnapDrive snap disconnect` 命令删除 副本中 LUN ，存储实体和底层 LUN 或 NFS 目录的映射。</block>
  <block id="2833f3aada1b2f1d40fa888191214cca" category="paragraph">您可以使用此命令断开跨多个存储系统卷或多个存储系统的 Snapshot 副本的连接。存储实体和卷可以位于同一存储系统或不同存储系统上。</block>
  <block id="badb20fdbbfbad2f2aecd974636ff1bb" category="paragraph">使用此命令可断开以下任何连接：</block>
  <block id="7b3c6a2d089eb1b6f8959e7e61a50c07" category="list-text">LUN</block>
  <block id="1b3f263a47d4fefff06ea3c950d4da67" category="list-text">直接在 LUN 上创建的文件系统</block>
  <block id="6c6edaa4e1a5550f3fdc55c32fcc28b8" category="list-text">在 LUN 上创建的磁盘组，主机卷和文件系统</block>
  <block id="1e2c24ad907475cc864a3f422e449024" category="list-text">NFS 目录树</block>
  <block id="770f44366608f25db09d6f1d7ec809ed" category="list-text">在 LUN 上创建的共享磁盘组，主机卷和文件系统</block>
  <block id="12f2c6eb2fc8e37e9434ff19757c6786" category="paragraph">断开连接操作不会修改已连接的 Snapshot 副本。但是，默认情况下，此操作会删除由相应连接操作创建的任何临时 LUN 或克隆。</block>
  <block id="cde4989a8e6a1e70a0fde385931303fb" category="admonition">对于 LUN ， LUN 上的文件系统和 LVM 实体，此命令相当于 SnapDrive storage delete` 。</block>
  <block id="62d8f2beaf3c4d44ab5afc434b9790fa" category="summary">如果存在自定义的 LD_library_path 以及 snapcreate-check-nonpersistent-nfs 设置为 off ，则 SnapDrive for UNIX 命令将失败。</block>
  <block id="9577f84beee5eed2a9b190d1e20436bb" category="doc">使用自定义的 LD_library_path 时， SnapDrive for UNIX 命令失败</block>
  <block id="403fb58861aba1eef6a30a4a934c7851" category="paragraph">如果存在自定义的 `LD_library_path` 以及 `snapcreate-check-nonpersistent-nfs` 设置为 off ，则 SnapDrive for UNIX 命令将失败。</block>
  <block id="d39193e02ebb5e5ece686af03956daec" category="paragraph">在 wrapper 脚本中设置 `env` 变量，以确保此变量仅对 SnapDrive 二进制文件可见。</block>
  <block id="10dde39a09bce823a2a0c6d6032c303e" category="summary">SnapDrive for UNIX 支持 DataMotion for vFiler 。在执行 DataMotion for vFiler 时，转换阶段 SnapDrive for UNIX 操作可能会失败的情况很少。</block>
  <block id="9faec5ca9a617b8daffc5e2bca7f7a4c" category="doc">支持 NetApp DataMotion for vFiler</block>
  <block id="807ea3cc19273865dfe5ccbf49f6bb59" category="admonition">如果 SnapDrive for UNIX 操作在 vFiler 迁移的转换阶段失败，则必须在完成 DataMotion for vFiler 操作后执行 SnapDrive for UNIX 操作。</block>
  <block id="e03fc1f5b298e08459a1094ca9e8eb2c" category="paragraph">您必须在 `snapdrive.conf` 文件中设置 ` _datamotion-cutover-wait _` 变量，才能执行 SnapDrive for UNIX 操作。</block>
  <block id="7a83afce2fa3b77c4f29c95c0770cd21" category="admonition">如果在 vFiler 迁移的转换阶段运行基于卷的 `snap restore` 命令，则快照还原操作可能会失败。迁移完成后，如果 vFiler 在目标上可用，则运行基于卷的快照还原操作会使 LUN 脱机。您必须手动将 LUN 重新联机。</block>
  <block id="11f49dc35fa233b13d490dac68ec5ce4" category="summary">您可以使用适用于 UNIX 的 SnapDrive 对 FlexClone 卷执行各种操作。</block>
  <block id="a1046950247724ad813293c83350dc36" category="doc">FlexClone 卷上的 SnapDrive for UNIX 操作</block>
  <block id="df7da1db3c033a6bbd1449b8c0df81c8" category="summary">SnapDrive for UNIX 需要主机操作系统，主机文件系统， NFS ，卷管理器， FC 或 iSCSI 主机实用程序，存储系统许可证， ONTAP 软件， MultiStore 软件和 Internet 协议 \ （ IP\ ）访问。SnapDrive for UNIX 还具有某些堆栈要求，必须满足这些要求。</block>
  <block id="322ed4a66ad1b6e7d8778ff6e926fef2" category="doc">堆栈要求</block>
  <block id="1ac89d4e2fe7b810ad8cea75dcf09c09" category="paragraph">SnapDrive for UNIX 需要主机操作系统，主机文件系统， NFS ，卷管理器， FC 或 iSCSI 主机实用程序，存储系统许可证， ONTAP 软件， MultiStore 软件和 Internet 协议（ IP ）访问。SnapDrive for UNIX 还具有某些堆栈要求，必须满足这些要求。</block>
  <block id="a3eb6879bb8eff8e8a94054092df2481" category="section-title">主机端实体</block>
  <block id="222d7f07a0b77261c639690096e1d8c4" category="paragraph">下面列出了主机端实体：</block>
  <block id="f80a3d4155b0bf5b4874c51033cca27d" category="list-text">主机操作系统</block>
  <block id="3d0407e73fa2eb6663252e01737b4690" category="list-text">卷管理器</block>
  <block id="53b936091a984a22f4042eeb94499891" category="list-text">文件系统</block>
  <block id="4af7de28e46de160af72750bd5e59348" category="list-text">Linux Host Utilities</block>
  <block id="87308a4895440c2998518c3f8ece7d0b" category="section-title">用于支持 RDM LUN 的子系统端实体</block>
  <block id="821467e9f194f75dbb587d0036f1330a" category="paragraph">下面列出了子系统端实体：</block>
  <block id="9a620ab73ae7e020e0938a5986c796cf" category="list-text">子操作系统</block>
  <block id="0975d35e7df8961c24696c50918718c7" category="list-text">如果协议为 iSCSI ，则仅使用 Linux iSCSI 主机实用程序即可满足要求</block>
  <block id="dd9cdd294d6fc487e1d77b832f66c103" category="section-title">适用于 UNIX 的 SnapDrive 堆栈</block>
  <block id="df44e99e754e04ddf7dc8288a1669310" category="paragraph">您必须在` napdrive.conf `s文件中为 ` napdrive.conf` ， ` fsttype_` ， ` default-transport_` 和 ` vmtype_` 变量输入可接受的值。您必须验证输入的值是否已安装并在主机系统中运行。</block>
  <block id="cbbe76970afe44e8741d696ee95f5f68" category="cell">主机平台</block>
  <block id="0ca80234443e9315f04088f82057877a" category="cell">默认传输类型</block>
  <block id="48e7bdc2a6e65b790bd44da712c0b881" category="cell">多路径类型</block>
  <block id="8da9b296683a7538d85fc38fcb987292" category="cell">FSType</block>
  <block id="1553b8be2eccd3e17a8856286eeaff91" category="cell">vmtype</block>
  <block id="a7c815fafe60ae637d38216fa6300395" category="paragraph">FCP</block>
  <block id="40d1d2ce03569076bd0dc1e0ff90aa4c" category="paragraph">ext4</block>
  <block id="eba0b38f08261bb774b05a5e2819b0b2" category="paragraph">LVM</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="paragraph">iSCSI</block>
  <block id="9dcb144f9223e7ac67cbbc15215a01b5" category="paragraph">nativempio</block>
  <block id="66f137c5dc684da2a6a65917c86edd67" category="paragraph">ext3</block>
  <block id="55283f488ac89fe85f1447f1252dae58" category="admonition">SnapDrive for UNIX 不支持 Ext2 文件系统。</block>
  <block id="a8460999d25da47be47af15ca2ca8b82" category="list-text">如果您使用的是 FCP 和 iSCSI 存储堆栈，则 SnapDrive 将仅支持 FCP 存储堆栈。</block>
  <block id="59fc153caf6350002425d1d27e65f0ad" category="paragraph">对于 AIX ， SnapDrive 不支持 iSCSI 存储堆栈。</block>
  <block id="d50fd21d235349e48b6496b631f84c9b" category="list-text">已安装主机操作系统以及适用于 Linux 的相应修补程序。</block>
  <block id="93803e44164c4840d9eb64f345479532" category="list-text">适用于 Linux 的卷管理器为 LVM2 。</block>
  <block id="555b5f77e9c0e8f7dde8aa2d48ecb82e" category="list-text">Host Utilities 安装在 Linux 中</block>
  <block id="4055a7186bf94202cb8f48bef4d23c2a" category="list-text">存储系统上已安装 ONTAP 软件。</block>
  <block id="e0a4282b2e3423f88967ddc91debc80a" category="list-text">存储系统上安装了 MultiStore 软件，用于安装 vFiler 单元。</block>
  <block id="2b0de24c8850c79679c19a3e87d00833" category="list-text">主机和存储系统之间可以使用 Internet 协议（ IP ）访问。</block>
  <block id="146fccb04582d7d6c276d64b35bc37da" category="paragraph">NetApp 会不断修改主机实用程序和组件。您可以使用互操作性表跟踪此更改，其中包含在 SAN 环境中使用 NetApp 产品的最新信息。</block>
  <block id="f6bd8bbb0124f2bf801311f17ab81397" category="paragraph">存储系统许可证和 MultiStore 许可证构成存储系统实体。</block>
  <block id="c7b238d015dada50031bc51985526ed0" category="section-title">存储系统许可要求</block>
  <block id="156985f859d7e423cb680927230a8393" category="list-text">FC ， iSCSI 或 NFS 许可证，具体取决于您的配置</block>
  <block id="6d4635b39cccc1ab5f1f803240c43f37" category="list-text">FlexClone 许可证</block>
  <block id="e978195ba40db8edb887a1c4aab50ce2" category="list-text">存储系统上的 SnapRestore 许可证</block>
  <block id="2ec80fc8f5dba355563613d1dba7686b" category="inline-xref-macro">无法选择存储堆栈</block>
  <block id="c9576fc69adff8d26465539e6686b15c" category="paragraph"><block ref="c9576fc69adff8d26465539e6686b15c" category="inline-xref-macro-rx"></block></block>
  <block id="6c3186379e4e08a72cc7bf7b4c831c9e" category="inline-xref-macro">SnapDrive 配置向导</block>
  <block id="9ea7a64253b57cc5c3c4f81e466c04d0" category="paragraph"><block ref="9ea7a64253b57cc5c3c4f81e466c04d0" category="inline-xref-macro-rx"></block></block>
  <block id="10f02f59043b28fac9ff50a9e24e6044" category="inline-link">NetApp 互操作性</block>
  <block id="8ae1a8b6dc4a3df150f27ca419fb9a6c" category="paragraph"><block ref="8ae1a8b6dc4a3df150f27ca419fb9a6c" category="inline-link-rx"></block></block>
  <block id="7c953ebbeced6b6881ffdef853b6cfef" category="summary">通过用户名或密码， SnapDrive for UNIX 可以访问每个存储系统。它还提供了安全性，因为除了以 root 身份登录之外，运行 SnapDrive for UNIX 的用户还必须在系统提示时提供正确的用户名或密码。如果登录受到影响，您可以将其删除并设置新的用户登录。</block>
  <block id="9bff14a5b531f69a62668b54f98fd2e4" category="doc">存储系统的登录信息</block>
  <block id="04e810de297ff81e36a50e4627cb8439" category="paragraph">您在设置每个存储系统时为其创建了用户登录名。要使 SnapDrive for UNIX 能够与存储系统配合使用，您必须为其提供此登录信息。根据您在设置存储系统时指定的内容，每个存储系统可以使用相同的登录名或唯一的登录名。</block>
  <block id="8093f29cf4425756d332d36387139101" category="paragraph">SnapDrive for UNIX 会将这些登录和密码以加密形式存储在每个主机上。您可以通过设置 ` _SnapDrive.conf_` 配置变量 ` _use-https-to_filer=on_` 来指定 SnapDrive for UNIX 在与存储系统通信时对此信息进行加密。</block>
  <block id="c7b1aa7a5c1c84c1b213ad271d529af9" category="summary">为了便于断开存储连接， SnapDrive for UNIX 为 SnapDrive storage disconnect 命令提供了多种格式。</block>
  <block id="c81b2a3e6b81d6e2c7f4d3a013f6a6f1" category="doc">断开存储连接的方法</block>
  <block id="6f4a2d1e315a331dff87978f44d44afa" category="paragraph">为了便于断开存储连接， SnapDrive for UNIX 为 SnapDrive storage disconnect` 命令提供了多种格式。</block>
  <block id="001f8a3e992ddafe32c3f9a3d8e1c16e" category="paragraph">这是因为断开连接操作属于以下常规类别：</block>
  <block id="4a1770bca95b4be84eaff85361dfece3" category="list-text">指定要与主机断开连接的 LUN 。</block>
  <block id="2391726d39d8111dc933d4cc1d8347bf" category="list-text">指定直接在要与主机断开连接的 LUN 上创建的文件系统。</block>
  <block id="9bcb05f05cd0846e3f096cd26c0658d8" category="paragraph">SnapDrive for UNIX 会断开文件系统和 LUN 的连接。</block>
  <block id="8b113bb74a8ee481cbac98c42070adc7" category="list-text">指定位于要与主机断开连接的 LUN 上的磁盘组，主机卷或文件系统。</block>
  <block id="252877ee9dc11ff51c2d38c496482db0" category="paragraph">SnapDrive for UNIX 会断开与该实体关联的所有 LUN ，并删除包含已断开连接的实体的文件系统，主机卷和磁盘组的映射。</block>
  <block id="d33109b2aae2e93843ca981af36765f4" category="summary">如果禁用了 Internet 控制消息协议 \ （ ICMP ）访问，或者主机和存储系统网络之间的 ICMP 数据包丢失，则 SnapDrive 操作在多个子网配置中失败。</block>
  <block id="d8d77183b6ec573bd32ac3b3e8be2f6e" category="doc">在多个子网配置中， SnapDrive 操作失败</block>
  <block id="8f171fa846f589b18348803dd456243c" category="paragraph">如果禁用了互联网控制消息协议（ Internet Control Message Protocol ， ICMP ）访问，或者在主机和存储系统网络之间丢弃了 ICMP 数据包，则 SnapDrive 操作在多个子网配置中失败。</block>
  <block id="cb381769e0ee323aa9eebefed851a9ea" category="paragraph">确保将 ` enable-ping-to_check-filer-reachaity_` 设置为 `off` 。</block>
  <block id="645c3a798dd431dc93a0d952170ba3ce" category="summary">您可以使用通配符显示 Snapshot 副本。您可以显示特定对象中的所有 Snapshot 副本。</block>
  <block id="2e9b5ff5659a2666fa22c04537ac95ce" category="doc">显示 Snapshot 副本的准则</block>
  <block id="37d19ffa1f37dac8530a2ad8a015e0c5" category="paragraph">在使用 Snapshot 副本之前，请记住以下几点：</block>
  <block id="44f4f8c38b7f310dbc82369e6061a5a9" category="list-text">您可以在 Snapshot 副本名称中使用通配符（ * ）。使用 Snapshot show 操作可以使用通配符显示与特定模式匹配的所有 Snapshot 副本名称或特定卷上的所有 Snapshot 副本名称。在 Snapshot 副本名称中使用通配符时，以下规则适用：</block>
  <block id="a03abeceaaa59fce16c747475a46d12e" category="list-text">您只能在名称末尾使用通配符。不能在 Snapshot 副本名称的开头或中间使用通配符。</block>
  <block id="ec65a3066fa9ffd29fa1afe384acf412" category="list-text">您不能在 Snapshot 副本名称的存储系统或存储系统卷字段中使用通配符。</block>
  <block id="4d11def731d811c15e60fa23bd28d667" category="list-text">您也可以使用此命令列出特定对象上的所有 Snapshot 副本，包括存储系统及其卷，磁盘组，主机卷组，文件系统，主机卷， 和逻辑卷。</block>
  <block id="76db372bd56e08804787e0969f9e87cf" category="list-text">如果输入 SnapDrive snap show` 命令，而 SnapDrive for UNIX 未找到任何 Snapshot 副本，则会显示消息 "`no matching Snapshot copies 。` " 如果您在命令行上指定了参数，但其中某些部分不存在，则 SnapDrive for UNIX 将返回部分 Snapshot 副本列表。它还会列出无效的参数。</block>
  <block id="33a063674cd409f4e41c2e50e8176d94" category="list-text">如果 SnapDrive snap create` 命令突然中止，则存储系统上的卷会存储一个不完整的 ` .stoc.xml` 文件。因此，存储系统创建的所有计划 Snapshot 副本都将具有不完整的 ` .stoc.xml` 文件的副本。要使 SnapDrive snap list` 命令成功运行，请完成以下步骤：</block>
  <block id="e95267d018e3366b27fcd8ca1ac48188" category="list-text">删除卷中不完整的 ` .stoc.xml` 文件。</block>
  <block id="241e998268f623cc14044dac147f9e71" category="list-text">删除存储系统创建的计划 Snapshot 副本，其中包含不完整的 ` .stoc.xml` 文件。</block>
  <block id="b22a0454faa9e0477c796f1a92ef94b8" category="summary">使用 SnapDrive snap restore 命令从其他主机还原 Snapshot 副本。</block>
  <block id="92f486afe2c09aab4ed58aa95035dd7c" category="doc">从其他主机还原 Snapshot 副本</block>
  <block id="bda2cb80e28d92e650135356fc53b560" category="paragraph">使用 SnapDrive snap restore` 命令从其他主机还原 Snapshot 副本。</block>
  <block id="78cb2e20418ba00be3ffbdc7b63c67ea" category="paragraph">通常，您可以从创建 Snapshot 副本的主机还原 Snapshot 副本。有时，您可能需要使用其他主机或非源主机还原 Snapshot 副本。要使用非源主机还原 Snapshot 副本，请使用通常使用的相同 SnapDrive snap restore` 命令。如果您还原的 Snapshot 副本包含 NFS 实体，则非源主机必须具有访问 NFS 目录的权限。</block>
  <block id="75476b20e334cb97b7bd873db817210b" category="summary">SnapDrive for UNIX 可提供端到端存储管理。您可以使用主机逻辑卷管理器（ Logical Volume Manager ， LVM ）或不使用主机逻辑卷管理器（ Logical Volume Manager ， LVM ）来配置主机到存储系统的存储，并对该存储进行管理。</block>
  <block id="98cd6c25e15e1e5c38beb7793427ff22" category="doc">SnapDrive for UNIX 中的存储操作</block>
  <block id="232862c8233214c5bb4a814b52f1902f" category="paragraph">SnapDrive for UNIX 可提供端到端存储管理。您可以使用主机逻辑卷管理器（ LVM ）配置主机到存储系统的存储，并管理该存储，无论是否使用主机逻辑卷管理器（ Logical Volume Manager ， LVM ）。</block>
  <block id="52b609149d7e442c7681b8a10d32e549" category="paragraph">SnapDrive for UNIX 可用于执行以下存储操作：</block>
  <block id="d7ca4125e393fa3a1d7b578ed6acbc26" category="list-text">通过创建 LUN ，文件系统，逻辑卷和磁盘组来创建存储。</block>
  <block id="e4557c97c0f5976bae8413e030df7abf" category="list-text">显示有关存储的信息。</block>
  <block id="0670d30da3946f99213b06fd6f20923e" category="list-text">连接到存储。</block>
  <block id="6ebee04b41a85fd59fbbb27fc6615f74" category="list-text">调整存储大小。</block>
  <block id="36dd8acec72afd2acc8ce415ba869825" category="list-text">断开与存储的连接。</block>
  <block id="58325ec90dac48abec57f2156d807b27" category="list-text">删除存储。</block>
  <block id="1f8e4f01c9e66a3bdc5cd56457d4497a" category="paragraph">使用 SnapDrive storage create` 命令创建存储时， SnapDrive for UNIX 会自动执行设置 LUN 所需的所有任务，包括准备主机，执行发现映射以及连接到您创建的每个 LUN 。您可以使用 SnapDrive storage show` 命令显示有关您创建的 LUN ，磁盘组，主机卷，文件系统或 NFS 目录树的信息。</block>
  <block id="3519ed4897d62669de78baf84e904fbf" category="paragraph">您可以使用 SnapDrive storage connect` 命令将存储映射到新位置。使用此命令，您可以从与创建现有存储时使用的主机不同的主机访问现有存储。使用 SnapDrive storage connect` 命令可以使现有 LUN ，文件系统，磁盘组和逻辑卷可在新主机上访问。如果要将存储实体从新主机备份到另一主机，则此操作可能会很有用。</block>
  <block id="c401a4e911c2d13b45274ab17c72931f" category="paragraph">使用 SnapDrive storage resize` 命令，您可以通过以下方式增加存储大小：</block>
  <block id="c508df43bfdae07109b72ef0a55602be" category="list-text">指定希望主机实体达到的目标大小</block>
  <block id="31ce501dcb2d495c4ee326c33a703470" category="list-text">输入要用于增加存储的设置字节数</block>
  <block id="69c1567a44736785ad5e5ad32085a018" category="paragraph">如果您不再希望存储映射到其当前位置，可以使用 SnapDrive storage disconnect` 命令。此命令将删除从一个或多个主机位置到为该位置创建存储的 LUN 的映射。</block>
  <block id="587cd1744bd663ae311ccd0db5c84c0a" category="paragraph">如果要删除存储，可以使用 SnapDrive storage delete` 命令。SnapDrive for UNIX 将删除您指定的所有主机端实体及其所有底层实体以及与其关联的 LUN 。</block>
  <block id="5791158581f8b7ebe09892bc5ce9ab87" category="summary">您可以通过在存储系统的根卷中创建特殊目录和文件来在 SnapDrive for UNIX 中设置访问控制权限。</block>
  <block id="962b5d7ad436da738c934829f2700abf" category="doc">设置访问控制权限</block>
  <block id="be9ae963d8858c9a723f270fbf432846" category="paragraph">确保以 root 用户身份登录。</block>
  <block id="612befb62324bf502352c04890ca72ae" category="list-text">在目标存储系统的根卷中创建目录 `sdprbac` 。</block>
  <block id="b028f0474c7612d67aa5f4f68700619d" category="paragraph">要使根卷可访问，一种方法是使用 NFS 挂载此卷。</block>
  <block id="b5e729871d092aad5db35a6c9c15e0f1" category="list-text">在 `sdprbac` 目录中创建权限文件。确保以下陈述正确无误：</block>
  <block id="7a605d39b515069f467b23e24eda08e3" category="list-text">此文件必须名为 `sDHost-name.prbac` ，其中 host-name 是要为其指定访问权限的主机的名称。</block>
  <block id="eadf923f92acda072f8772fd01bea405" category="list-text">此文件必须为只读文件，以确保 SnapDrive for UNIX 可以读取它，但无法修改它。</block>
  <block id="03270d5e7eb6bf1ab6b03ebb86b0b65f" category="paragraph">要为名为 dev-sund1 的主机授予访问权限，您应在存储系统上创建以下文件： ` /vol/vol1/sdprbac/sddev-sund1.prbac`</block>
  <block id="712d5995d3ef9c1a9c9369725c4cfb1b" category="list-text">在文件中设置该主机的权限。</block>
  <block id="88bbf1da323fa241b89fd93f25ac5812" category="paragraph">您必须对文件使用以下格式：</block>
  <block id="4b71756f7efde5617c4f2f02f0478ef1" category="list-text">您只能指定一个权限级别。要为主机授予对所有操作的完全访问权限，请输入字符串 all access 。</block>
  <block id="be49e29c6293426e3fdf895f9c1b756f" category="list-text">权限字符串必须是文件中的第一项。如果权限字符串不在第一行中，则文件格式无效。</block>
  <block id="134bd76e7d99bd2c48fc6670b961b6f6" category="list-text">权限字符串不区分大小写。</block>
  <block id="9e65976d3a7ae8b0d9ad25f195fe330b" category="list-text">权限字符串前面不能有空格。</block>
  <block id="ae7390e4ff7674b125ba0ec47c135ceb" category="list-text">不允许添加任何注释。</block>
  <block id="d18f6edf19a006a83394f1be3fc3dd17" category="paragraph">这些有效权限字符串允许以下访问级别：</block>
  <block id="eb373836a23d9b8a98f16f8161480685" category="list-text">无—主机无法访问存储系统。</block>
  <block id="4ebb9f0d070547e3b2b784f0e69cba6a" category="list-text">snap create —主机可以创建 Snapshot 副本。</block>
  <block id="1fa1efc2cb55ea0feb029beb5a97e7e3" category="list-text">snap use —主机可以删除和重命名 Snapshot 副本。</block>
  <block id="143f00c97bcd27ac585bd7e056df78b0" category="list-text">snap all —主机可以创建，还原，删除和重命名 Snapshot 副本。</block>
  <block id="25851264386ee9ec60ab37f64cd639bd" category="list-text">storage create delete —主机可以创建存储，调整存储大小和删除存储。</block>
  <block id="10609a8de3f4dec465a71f30054e317d" category="list-text">存储使用—主机可以连接和断开存储连接，还可以在存储上执行克隆拆分估计和克隆拆分开始。</block>
  <block id="3b288dbe02b48be4fca6736ed4e6c80f" category="list-text">存储全部—主机可以创建，删除，连接和断开存储连接，还可以在存储上执行克隆拆分估计和克隆拆分启动。</block>
  <block id="edf58462d8654f7d6f69cf0dfe1befd5" category="list-text">所有访问—主机可以访问上述所有 SnapDrive for UNIX 操作。</block>
  <block id="085dc7bfe76df13af4f789394c577ec9" category="paragraph">其中每个权限字符串都是离散的。如果指定快照使用，则主机可以删除或重命名 Snapshot 副本，但不能创建 Snapshot 副本，还原或执行任何存储配置操作。</block>
  <block id="0cff4b80c9749f3fd99a91a304b35b83" category="paragraph">无论您设置的权限如何，主机都可以执行 show 和 list 操作。</block>
  <block id="b112e8b01cfc1b2cc5d0d693031c359b" category="list-text">输入以下命令以验证访问权限：</block>
  <block id="3e7477885bf042b47229eb4fd558a5fe" category="paragraph">` * SnapDrive 配置访问 show filer_name*`</block>
  <block id="36d3768e2f82cb45e29f148dcfa9f90e" category="summary">以下是使用退出状态值的脚本示例。</block>
  <block id="7941198aa6aed10edf778ed0d043940c" category="doc">脚本示例</block>
  <block id="4e88f7db0f833e0c9d80bc6c08f206f9" category="paragraph">以下脚本使用 SnapDrive for UNIX 退出状态值：</block>
  <block id="7b394b6d4e793200f0a7e5ff9198523b" category="paragraph">如果 RET=0 ，则命令已成功执行，并且脚本输出以下内容：</block>
  <block id="2e5511eb91d59a2cf970b172d26732d0" category="paragraph">如果 RET = 非零值，则命令未成功执行。以下示例显示了典型输出：</block>
  <block id="eabc846a5577ccaa1d3d9292fb907164" category="summary">适用于 UNIX 的 SnapDrive 采用特定格式进行参数设置。</block>
  <block id="6086baa20ba2d135b1182639f6a00ef4" category="doc">命令行参数</block>
  <block id="119e4d707d2848afcc7cb2ded5bb7b5f" category="paragraph">下表介绍了可使用关键字指定的参数。</block>
  <block id="ae0c4e778ac33ba8e75af2ba4d8f3224" category="paragraph">使用格式 SnapDrive type_name operation_name &lt;&lt; keyword/option&gt; &lt;switches&gt;&gt;` ；例如，如果要从主机文件系统 ` /mnt/dir` 创建名为 `snap_hr` 的 Snapshot 副本，应输入以下命令行：</block>
  <block id="5f2a7ff5054dcc11b057f44be70e84d9" category="paragraph">` * SnapDrive snap create -fs/mnt/dir -snapname _snap_hr*` 。</block>
  <block id="7fca2836fc9823d78757c5143d6bd703" category="paragraph">dest_fspec</block>
  <block id="bdbff0b576070ed22965e169dc4832be" category="paragraph">目标实体在连接其磁盘组或 LUN 后可访问的名称。</block>
  <block id="74ca4f37a8b95f44179f1a001e0765e5" category="paragraph">域名</block>
  <block id="862905aabe72d29e4f52fe29b4f136f7" category="paragraph">磁盘组或卷组的名称。</block>
  <block id="a311f090e27ec2e567803c9c6299fb19" category="paragraph">d_lun_name</block>
  <block id="b516a650362ecce9608eb1459896bcd9" category="paragraph">用于指定 SnapDrive for UNIX 用于使 LUN 在新连接的 Snapshot 副本中可用的目标名称。</block>
  <block id="7eaa28a78ad189c1131cd276189dcfd1" category="paragraph">文件名</block>
  <block id="8a5c4f3b59de1f66a6a5e0ed87b3bf76" category="paragraph">存储系统的名称。</block>
  <block id="910d14f4efb1b4662f3147a6a5ec74fd" category="paragraph">filer_path</block>
  <block id="d482ce38d0e7e6ce5ef9ce184cba89e9" category="paragraph">存储系统对象的路径名称。此名称可以包含存储系统名称和卷，但 SnapDrive for UNIX 不必根据先前参数中提供的值对缺少的组件使用默认值。以下是路径名称示例：</block>
  <block id="97d5f5e6a1548d8ba0256e01e63599d1" category="list-text">`test_filer ： /vol/vol3/qtree_2`</block>
  <block id="0b64311f770df37baf803405c15115ed" category="list-text">` /vol/vol3/qtree_2`</block>
  <block id="91dad430d8df9cf244d6e0d0121430dc" category="list-text">`qtree_2`</block>
  <block id="15a887a7fa8fda84373cd46bc6d831b6" category="paragraph">file_spec</block>
  <block id="6a89d0d19d918ae4f793ba2d6fcd646f" category="paragraph">存储实体的名称，例如主机卷， LUN ，磁盘或卷组，文件系统或 NFS 目录树。</block>
  <block id="ff5fdb7b32a5cd6190aaed7194421c77" category="paragraph">通常，您可以使用 file_Spec 参数作为以下参数之一：</block>
  <block id="a5c2cff745ae42ba6ca3f43d91f2e23c" category="list-text">希望 SnapDrive for UNIX 创建 Snapshot 副本或从 Snapshot 副本还原的对象</block>
  <block id="17b7d7bebfb4ef470eeb5a1506b317c4" category="list-text">要在配置存储时创建或使用的对象</block>
  <block id="e0be606b8ae680b6cb6c9a2d5bd2fda0" category="paragraph">这些对象不必都是相同类型的对象。如果您提供多个主机卷，它们都必须属于同一个卷管理器。</block>
  <block id="e33971a271aff65594c46435b00d3d4f" category="paragraph">如果为此参数提供的值用于解析为冗余磁盘组或主机卷，则此命令将失败。</block>
  <block id="b6c599a3bd0c0b2b80c74be4df932830" category="paragraph">错误用法示例：此示例假设 dg1 包含主机卷 HV1 和 hv2 ，文件系统为 fs1 和 fs2 。因此，以下参数可能会失败，因为它们涉及冗余磁盘组或主机卷。</block>
  <block id="5cb3ebb07237948e595a8c43aaecf868" category="paragraph">` -dg _dg1_ -hostvoldg1/HV1`</block>
  <block id="2ae04ed97d3349ad8f8735e706546f0d" category="paragraph">` -dg _dg1_`</block>
  <block id="b832978c62e5ac5e2e31c8ee6f8adef3" category="paragraph">` FS/fs1`</block>
  <block id="01b176704e7db8416d2e86437ec1adc4" category="paragraph">` -hostvol dg1/HV1 -fs /fs1`</block>
  <block id="f4c12573f445a1d2b4c863b9e238cafb" category="paragraph">正确用法示例：此示例显示了此参数的正确用法。</block>
  <block id="7b568b98f15731caa4303f8f61d5711f" category="paragraph">` -hostvoldg1/hv1dg1/hv2`</block>
  <block id="eb1875014d14c7c338ff26436163c476" category="paragraph">` FS/fs1/fs2`</block>
  <block id="e8bc4f0c10486a387b369ea939701cca" category="paragraph">` -hostvoldg1/HV1 -fs/fs2`</block>
  <block id="89be45425bb29c9127c0723cd5d45ddb" category="paragraph">fspec_set</block>
  <block id="8a1d78fe2976e284327a9b904c8826b8" category="paragraph">与 snap connect 命令结合使用以确定：</block>
  <block id="d057d0cf5bb5b195d526fcf9bfa826ae" category="list-text">主机 LVM 实体</block>
  <block id="fbebe53373907c94c6dad2539c885f65" category="list-text">LUN 上包含的文件系统</block>
  <block id="11cd07d6b40f177cb4bfb8cc1db68994" category="paragraph">此外，您还可以使用参数指定 SnapDrive for UNIX 在 Snapshot 副本的新连接副本中提供实体时所使用的一组目标名称。</block>
  <block id="2176247d9521412b88ac39817ef9d573" category="paragraph">fspec_set 的格式为： ` ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _src_fspec_ [_dest_fspec_] [ ｛ -destdg _ destvg ｝ _dg_name_] [ ｛ - destlv _ -desthv ｝ _lv_name_]`</block>
  <block id="0dd9013f917b107d427d6edf21949fa0" category="paragraph">host_lvm_fspec</block>
  <block id="b63b93638cf22f9c1181074011f6e8aa" category="paragraph">用于指定在执行 storage create 命令时是要创建文件系统，逻辑卷还是磁盘组。此参数可能采用以下三种格式中的任何一种。使用的格式取决于要创建的实体。</block>
  <block id="dfff131f42916cf515db22370653ebc4" category="admonition">` -dg` 和 ` -vg` 选项是同义词，反映了以下事实：某些操作系统引用磁盘组，而其他操作系统引用卷组。此外， ` lvol` 和 ` -hostvol` 也是同义词。本指南使用 -dg 同时引用磁盘组和卷组，使用 ` -hostvol` 同时引用逻辑卷和主机卷。</block>
  <block id="dbf77210861598662e1f690fed5e8d3b" category="paragraph">要创建文件系统，请使用以下格式： -fs file_specs `` -fstype _type_] （ -ffsopts _options_） （ -hostvol _file_spec_） （ -dg _dG_name_） 要创建逻辑卷或主机卷，请使用以下格式： "-hostdg _file_spec_] （ -dg ）` _vol_file_name_s_ ``</block>
  <block id="c5a6db230d803476614d8e041d7f4b54" category="paragraph">您必须为要创建的顶级实体命名。您无需提供任何底层实体的名称。如果不提供底层实体的名称，则 SnapDrive for UNIX 将使用内部生成的名称创建这些实体。</block>
  <block id="44d04b964bebade293bdf05dd6c07199" category="paragraph">如果指定 SnapDrive for UNIX 创建文件系统，则必须指定 SnapDrive for UNIX 在主机 LVM 中支持的类型。这些类型包括 `ext4` 或 `ext3`</block>
  <block id="d7fee08e92a715fc99a8b9f5f6f6717e" category="paragraph">选项 ` -fsopts` 用于指定要传递给创建新文件系统的主机操作的选项；例如， `mKFS` 。</block>
  <block id="2587abbc0ca526c3a0d4fb7c0990c487" category="paragraph">IG_name</block>
  <block id="943aaf5a20572dff5db5b890e08e590f" category="paragraph">启动程序组的名称。</block>
  <block id="ec8dcaf526253592b4685cb51d818e6e" category="paragraph">lor_filer_path</block>
  <block id="19708f5a6d20318beb7351bd588df944" category="paragraph">一种路径名称，其中包括存储系统名称，卷名称以及该卷中可能包含的其他目录和文件元素。以下是长路径名称的示例：</block>
  <block id="1cf8a2fdca0e82f9159e99fd95305cec" category="paragraph">`10.10.10.1 ： /vol/vol4/lun_21`</block>
  <block id="227555ee511b5ec14d350952755a4e25" category="paragraph">lun_name</block>
  <block id="2f9467f264e868004b3dc25c0dbbc1ff" category="paragraph">包含存储系统名称，卷和 LUN 名称的名称。以下是长 LUN 名称的示例：</block>
  <block id="5899db5f26a68f6f6fa45816b19aeac4" category="paragraph">`test_filer ： /vol/vol1/luna`</block>
  <block id="4655df5e503894c0e505aed943a4b343" category="paragraph">Long_snap_name</block>
  <block id="d8442c60f92e7fed8c547b6122fcd1af" category="paragraph">包含存储系统名称，卷和 Snapshot 副本名称的名称。以下是一个长 Snapshot 副本名称示例： `test_filer ： /vol/account_vol ： snap_20040202`</block>
  <block id="5a193363edaa28290e625cc4a2c92566" category="paragraph">使用 SnapDrive snap show` 和 SnapDrive snap delete` 命令，您可以使用星号（ * ）字符作为通配符，以匹配 Snapshot 副本名称的任何部分。如果使用通配符，则必须将其放在 Snapshot 副本名称的末尾。如果您在名称中的任何其他点使用通配符，则 SnapDrive for UNIX 将显示一条错误消息。</block>
  <block id="3ceba5aaf83f3810946f10e49bfc7b82" category="paragraph">示例：此示例将通配符与 `snap show` 命令和 `snap delete` 命令结合使用： `snap show myfiler ： /vol/vol2 ： mysnap*`</block>
  <block id="705e7092f51304ccaacc4dd9333a8354" category="paragraph">`myfiler ： /vol/vol2 ： /yoursnap* snap show myfiler ： /vol/vol1/qtree1 ： qtree_snap* snap delete 10.10.10.10 ： /vol/vol2 ： mysnap* 10.10.10.11 ： /vol/vol3 ： yoursnap* hersnap`</block>
  <block id="7338fe819a6a1fa26e44f351c11e7043" category="paragraph">通配符限制：不能在 Snapshot 副本名称中间输入通配符。例如，以下命令行会生成一条错误消息，因为通配符位于 Snapshot 副本名称的中间： `Banana ： /vol/vol1 ： my* snap`</block>
  <block id="c1ed05c77562ddfc349a2bd6c25b0f4e" category="paragraph">lun_name</block>
  <block id="d838f96e9df4eb997f7827cbdda34539" category="paragraph">LUN 的名称。此名称不包括 LUN 所在的存储系统和卷。以下是 LUN 名称的示例： luna</block>
  <block id="d6fe1d0be6347b8ef2427fa629c04485" category="paragraph">path</block>
  <block id="5f5ce811edc5a5b6087c2fc84b3257a6" category="paragraph">任何路径名称。</block>
  <block id="b1f8a0f2209802b1da33fe0d5cb76771" category="paragraph">prefix_string</block>
  <block id="b8581c4d9fcb7d60daba6a17b608dfb8" category="paragraph">卷克隆名称生成中使用的前缀</block>
  <block id="59745892f6a119294d92cf74338c334a" category="paragraph">S_LUN_name</block>
  <block id="d3e3563afed783ffc30528dc98ee0544" category="paragraph">表示在由 ` lor_snap_name_` 指定的 Snapshot 副本中捕获的 LUN 实体。</block>
  <block id="57ba1749ddb59e8a45ab99a53b2e7811" category="inline-xref-macro">存储配置命令行</block>
  <block id="ecfda278443d62e644b7c3df91a09c05" category="paragraph"><block ref="ecfda278443d62e644b7c3df91a09c05" category="inline-xref-macro-rx"></block></block>
  <block id="36bbafcdf905e3d1d182a35117bb8497" category="summary">SnapDrive for UNIX 会自动检测某些命令的主机实体配置。一些 snap storage 命令只需要主机实体的名称。在这些情况下，您无需指定主机实体的类型。</block>
  <block id="bb3dc9c9da0e9fd6d1ee7a10c5f0d8ec" category="doc">自动检测主机实体</block>
  <block id="bfd447051686f9a41ff093b6f7cf179c" category="paragraph">SnapDrive for UNIX 会自动检测某些命令的主机实体配置。一些 `snap storage` 命令只需要主机实体的名称。在这些情况下，您无需指定主机实体的类型。</block>
  <block id="597ba1da6df914b5038e882e28ba8648" category="paragraph">以下命令已启用自动检测：</block>
  <block id="e7da512727f43aed7c88f25a8e322df5" category="list-text">`s存储删除`</block>
  <block id="2989ae664186a2922dfb0aa0078e4195" category="list-text">`s存储调整大小`</block>
  <block id="27db0ea41e93a04a33a45c24444cfc98" category="list-text">`snap create`</block>
  <block id="e96bc4a60aeeda6e47b1a1630e22057a" category="list-text">`snap restore`</block>
  <block id="ec7969635c38ed9625d4a1b2ff566410" category="list-text">`snap connect`</block>
  <block id="de94770fc1aab61c1a4633eb172b6050" category="list-text">`snap list`</block>
  <block id="3518964c9e589ceeaed8ab4d640d5f57" category="paragraph">存在主机实体时， SnapDrive for UNIX 会自动检测主机实体的类型。在这种情况下，您只需要提供主机实体的名称，而不必指定类型。SnapDrive `snap` 命令和某些 `storage` 命令也只需要主机实体的名称；您不必指定类型。</block>
  <block id="259dc480f555faf71ec0b7ed24a662d7" category="paragraph">对于 SnapDrive 4.1 及更高版本，自动检测命令需要额外的时间，因为它会收集所有存储资源的详细信息。如果要加快响应速度，请使用 SnapDrive for UNIX 命令指定文件规范。</block>
  <block id="aa6486bfa53362bb3a3ca86111b56261" category="paragraph">您可以通过运行 SnapDrive storage delete` 命令为存储删除操作启用自动检测。</block>
  <block id="8e90fa9e64a3af47601a84cdd2b32f3c" category="paragraph">* 示例 1 ： *</block>
  <block id="adf8007c707e3c80f259840458636102" category="paragraph">在此示例中，系统会自动检测到 `host_dg` 和 `my_fs` 。</block>
  <block id="fc8047f4cef294efda35dad71e4b9b64" category="paragraph">* 示例 2 ： *</block>
  <block id="9e1124f4f72c6ae3a85bf7cea0a9b1d8" category="paragraph">在此示例中，系统会自动检测到 `mydg` 磁盘组。</block>
  <block id="695f22e48926a8e370133c97be45a688" category="paragraph">您可以通过运行 SnapDrive storage resize` 命令为存储调整大小操作启用自动检测。</block>
  <block id="2aa9adcab8ff5bed0c1c8cfd32d8cdf1" category="paragraph">* 例如 * ：</block>
  <block id="a76b1e8f417687817c3d7335e6acd5be" category="paragraph">您可以通过运行 SnapDrive snap create` 命令来为 snap create 操作启用自动检测。</block>
  <block id="0af953472a4a2e985742ea87535813d0" category="paragraph">您可以通过运行 SnapDrive snap connect` 命令为 snap connect 操作启用自动检测。</block>
  <block id="4785bea6cae4c50e1944a1e5d384fdaf" category="paragraph">您可以通过运行 SnapDrive snap restore` 命令来为快照还原操作启用自动检测。</block>
  <block id="369019f296b4206ea58c1b283e4ef0f1" category="paragraph">对于不正确的文件规范， SnapDrive 不支持自动检测 Snap 连接和 Snap 还原操作。</block>
  <block id="bbc22a48b5f3ea3016d400b1144753a6" category="paragraph">您可以通过运行 SnapDrive snap list` 命令来为快照列表操作启用自动检测。</block>
  <block id="e3de044a841126a9d008479e99a2a896" category="summary">使用 SnapDrive storage connect 命令时，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="0fcae715cd1fd2fa5962e65f6ce2211d" category="doc">使用 SnapDrive storage connect 命令所需的信息</block>
  <block id="59472762c03ddf9e9ee05aaabca82ffc" category="paragraph">使用 SnapDrive storage connect` 命令时，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="9b97b7bd5e0a87be7bf218224ada83cf" category="cell">要求</block>
  <block id="ce67aaff0cf7071771bc6c57ec65fae8" category="paragraph">指定 LUN ，直接在 LUN 上创建的文件系统或要连接到主机的 LVM 实体。</block>
  <block id="260ca19a53e66cf25bb1ad43612184c7" category="list-text">如果连接一个或多个 LUN ，则第一个参数必须使用长形式的 LUN 名称，此名称用于指定存储系统名称，卷名称以及卷中 LUN 的名称。</block>
  <block id="083112d32329c772e5ec1548210c9145" category="paragraph">要指定其他 LUN ，如果新 LUN 与上一个 LUN 位于同一存储系统和卷上，则可以单独使用 LUN 名称。否则，您可以指定新的存储系统名称和卷名称（或仅指定卷名称）来替换先前的值。</block>
  <block id="b4096d3d57eb4ccfb60f52712847d2a6" category="list-text">如果您连接的是直接在 LUN 上创建的文件系统，则必须包含 LUN 名称的长格式以及 ` -nolvm` 选项。</block>
  <block id="0caf536407cb68f4f24c69bd67d426e3" category="list-text">如果将 LUN 连接到磁盘组，主机卷和文件系统，则必须使用 ` -FS` 和 ` -hostvol` 选项指定文件系统和主机卷。主机卷必须包含磁盘组的名称。</block>
  <block id="5d7ef3f173665816caa9caef2ecd88e9" category="paragraph">LUN （` -lun` ）</block>
  <block id="c7a0a63740ad02e2863158c960fc3f22" category="paragraph">` lun_name_`</block>
  <block id="e80f7f3acedb7a2eb8a50dd7ff1b1883" category="paragraph">为 ` -lun` 选项提供的第一个值必须包括存储系统名称，卷和 LUN 名称。要连接同一卷上的多个 LUN ，您可以在第一个路径名称中提供完整信息后，对 ` -LUN` 选项使用相对路径名称。当 SnapDrive for UNIX 遇到相对路径名称时，它会查找与上一个 LUN 位于同一卷上的 LUN 。要连接不在同一卷上的其他 LUN ，请输入每个 LUN 的完整路径名称。</block>
  <block id="44820b79d74d8697a73cc69f7c7afa15" category="paragraph">其他 LUN</block>
  <block id="9b4ce91deaa081aa36a74fb45b615f72" category="paragraph">` lun_name_` （长或短格式）</block>
  <block id="dbe03a2831f542497253207d652afbc0" category="paragraph">为 ` -FS` 指定的 `file_spect` 是连接直接在 LUN 上创建的文件系统时文件系统挂载点的名称。</block>
  <block id="8025deac17572ea1f19c64663f15ce7e" category="paragraph">文件系统（` -fs file-specs` ）</block>
  <block id="0680ac4004bfbed3e0f3ecaedd8f60d5" category="paragraph">` 文件系统名称 _`</block>
  <block id="34a0a7a3a0dec727a9d7568c3fc6399c" category="paragraph">在不激活主机 LVM 的情况下连接在 LUN 上创建的文件系统。</block>
  <block id="55e338ea00b6aa1080c7d88eeb051769" category="paragraph">` -nolvm`</block>
  <block id="9f13b8b5e88b3e59aae92a4c8f516d7d" category="paragraph">要连接主机卷上的文件系统： ` -fs _file_spec_` 和 ` -hostvol _file_spec_` 您提供的标识要连接到新主机的 LVM 文件系统，磁盘组和主机卷。</block>
  <block id="cc083e155450de51117a303ac5d937bf" category="paragraph">您连接的存储层次结构必须包含磁盘组，主机卷和文件系统。您必须为 ` -fs` 和 ` -hostvol` 指定一个值。` -hostvol` 值必须包含磁盘组的名称。</block>
  <block id="cab90f8c4faaf81de1e97217003a4271" category="paragraph">主机卷（` -hostvol file-spect` ）</block>
  <block id="c9b559eeebacf2800b883e3fbd5d25db" category="paragraph">` _disk_group_name_` 和 ` 主机 _volume_name_`</block>
  <block id="ba7130b4e618071a422dc1b01fb9ee88" category="paragraph">可选：使用 ` -nd操作` 选项将存储连接到新位置，而不在主机文件系统表（例如， Linux 上的 fstab ）中创建条目。默认情况下， storage connect 命令会创建永久性挂载。这意味着，在 Linux 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。</block>
  <block id="96a2ee275ace39ca543161ce6981681f" category="paragraph">` - noperit`</block>
  <block id="7a6f8147b2494ecd94cbdae1ec80844c" category="paragraph">* 可选： * 建议对主机使用默认 igroup ，而不是提供 igroup 名称。</block>
  <block id="aeb5b2301ed7f726ecc94dde13dbbea8" category="paragraph">igroup 名称（` -igroup` ）</block>
  <block id="e4a75a3816870836ab014de7fe0905c7" category="paragraph">` ig_name_`</block>
  <block id="8e134afdc79dfa330d96405b65121fa5" category="paragraph">`vmtype`</block>
  <block id="12111c850a51ba748e6148830a202ddb" category="paragraph">* 可选： * 指定用于 SnapDrive for UNIX 操作的文件系统和卷管理器的类型。</block>
  <block id="972744af01a6c422f176a62299a9e9a5" category="paragraph">` - mntopts`</block>
  <block id="42293ea01a07ecd66092fbecb36d83af" category="paragraph">* 可选： * 如果要创建文件系统，可以指定以下选项：</block>
  <block id="ec75e32f48d0a1071d0a431375196c60" category="list-text">使用 ` -mntopts` 指定要传递到主机挂载命令的选项（例如，指定主机系统日志记录行为）。指定的选项存储在主机文件系统表文件中。允许的选项取决于主机文件系统类型。</block>
  <block id="b23fe01402f273250837f9202a67849a" category="list-text">` -mntopts_` 参数是一个文件系统 ` 类型` 选项，使用 `mount` command ` -o` 标志指定。请勿在 ` -mntopts` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -otmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="bcfab83f51b33653e76858ee8aa7f5f8" category="admonition">如果为存储和快照操作传递任何无效的 ` _-mntopts_` 选项，则 SnapDrive for UNIX 不会验证这些无效的挂载选项。</block>
  <block id="eaad6ed7d6ff9e2eea0c8784a63cf953" category="summary">如果存储系统中没有可用于 Snapshot 副本的克隆，则克隆拆分估计有助于使用 Snapshot 副本估算所需存储空间 \ （以 MB 为单位）。</block>
  <block id="0e4dc6d4fbf599817a923abfb78149de" category="doc">使用 Snapshot 副本估算存储空间</block>
  <block id="c5c3fed383795531b01ef47deea53414" category="paragraph">如果存储系统中没有可用于 Snapshot 副本的克隆，则克隆拆分估计有助于使用 Snapshot 副本估计所需的存储空间（以 MB 为单位）。</block>
  <block id="a9ce0fef24224dbdecbea0776af19ef0" category="list-text">输入以下命令以估计所需的存储空间。</block>
  <block id="694a56931f504a30f51b667363ac5c80" category="paragraph">` * SnapDrive 克隆拆分估计值 -snapname [_long_snap_name_] ｛ -volclone]-v` -verbose *</block>
  <block id="12aecda816ff110c4460a471b2e3007c" category="paragraph">以下示例估计了使用 Snapshot 副本拆分 LUN 克隆所需的存储空间。</block>
  <block id="98ffd9e54a4b8427dc7ee1a6e12919d5" category="paragraph">以下示例使用带有 ` -FS` 选项的 Snapshot 副本估算用于拆分 LUN 克隆的存储空间。</block>
  <block id="ff34b29e5130e40ee0e34a53242e9c8b" category="paragraph">以下示例使用带有 ` -FS` 选项的 Snapshot 副本估算用于拆分卷克隆的存储空间。</block>
  <block id="dcffad2116537f43f8f815a8645529f8" category="paragraph">以下示例估计了使用 Snapshot 副本拆分卷克隆所需的存储空间。</block>
  <block id="fe26cacaacde73549f0c09e1e25fc41a" category="list-text">如果对 Snapshot 副本执行克隆拆分估计，则 "Resource" 字段包含 Snapshot 副本名称。</block>
  <block id="18c916eeca4391464c900b2338cbc941" category="list-text">如果您提供任何失效文件规范以及带有 ` -lunclone` 选项的 Snapshot 副本，则 " 所需空间 " 将显示为 0 。</block>
  <block id="8b8b57b11ec905cf2e57180c648be8c9" category="list-text">只有从适用于 UNIX 的 SnapDrive 4.2 及更高版本创建的 Snapshot 副本才可以使用 Snapshot 进行 LUN 克隆拆分评估。</block>
  <block id="0706afbed87bfb5a3859a8f8aa962a94" category="summary">重新启动主机后， Snap 连接操作失败，并且原始卷组不会加载。</block>
  <block id="3ebe67f87352e299b4bf43adc527f4cd" category="doc">Snap 连接操作失败</block>
  <block id="90c2f00dd28267bebcef88ae16b06a19" category="paragraph">在 Linux 主机上，如果 SnapDrive for UNIX 因重新启动主机或使用 `Ctrl-C` 而中断，则在发起主机上执行 Snapshot 连接操作将失败。中断会导致向 ` /etc/lvm/lvm.conf` 文件添加 ` #sdupm` 标记；任何后续的 SnapDrive for UNIX 操作均会失败，并显示以下错误消息：</block>
  <block id="97b37c4ece565ee24111b21c6a3e724d" category="list-text">从存储系统中删除先前失败或中断的 Snapshot 连接操作可能存在的任何克隆 LUN 。</block>
  <block id="0ed7964a74ba9075fd81eedf479f0bac" category="admonition">您可以使用带有 -alloption 的 SnapDrive storage show` 命令进行验证。</block>
  <block id="b571324c7a23e476b74f0201e3149bda" category="list-text">输入以下命令，检查是否已从主机中删除 LUN ：</block>
  <block id="8871f8da9a81f0e79b241a0700ce78c6" category="list-text">对于 iSCSI ，输入命令 ` /etc/init.d/iscsi` reload</block>
  <block id="6df2e2b9d12011eefb8e2f7f6336355c" category="admonition">` /etc/init.d/iscsi reload` 选项适用于 RHEL 4 update 6 及更早版本。</block>
  <block id="4a1477a2918ccee6ac7baa3360cbc09c" category="list-text">对于 RHEL 5 及更高版本，如果使用的是 iSCSI ，则必须手动删除 LUN 。此外，您还必须手动执行主机重新扫描。</block>
  <block id="346e53055c122c14d54a19a2a87c0a80" category="paragraph">如果您使用的是多路径解决方案，则也可以手动对多路径执行重新扫描。您可以通过运行命令 `multipath` 来执行此操作</block>
  <block id="c07bac8de547ac3a7d2cdbde2d3f12df" category="admonition">如果您使用的是 FC ，则上述过程将对 RHEL 4 update 6 和 RHEL 5 及更高版本之前的所有版本进行适用场景处理。</block>
  <block id="d7720cb18b7c8119f1b0723d6a1e8bf0" category="list-text">从 ` /etc/lvm/lvm.conf` 文件中删除卷组。</block>
  <block id="b8a8388e94254a647bfe7a5b9a413008" category="paragraph">从 ` /etc/lvm/lvm.conf` 文件中删除克隆的 LUN 后，该文件可能如下所示：</block>
  <block id="a34248a0c5a6da7a4644c579ab050249" category="paragraph">` #SDUEXISTING volume_list = [ "vgx" ， "vgY" ] volume_list = [ vgx" ] #SDUTEMP`</block>
  <block id="1aeec5a2f700f55483649cde1f81c794" category="list-text">删除末尾包含 ` #SDUTEMP` 标记的整行如果存在以 ` #SDUEXISTING` 标记开头的行，请仅删除此标记并保留此行。</block>
  <block id="1aac9f5c3a5941e2bcf364400aee981c" category="list-text">运行 `vgscan` 命令以保留在配置文件中所做的更改。</block>
  <block id="bcdd77fc6672e94ee78e9d13bababb6d" category="list-text">输入 `vgchange -a y` 命令以保留原始卷组。</block>
  <block id="c7e36227f29f9c4362508522d1f6ca00" category="list-text">在主机中查看 ` /etc/fstab` 文件以重新挂载文件系统后，执行相应的 mount 命令挂载逻辑卷组。</block>
  <block id="0943e97c797e5cfb380d8974c63091a6" category="summary">您必须指定 SVM 的用户登录信息。根据您在设置 Vserver 时指定的内容，每个 Vserver 都必须使用配置的 Vserver 用户名。如果您的 Vserver 名称发生更改，则必须确保已在适用于 UNIX 的 SnapDrive 中配置新的 Vserver 名称。</block>
  <block id="f9f44b9452cdfe3dee45188e19b08bf8" category="doc">指定 SVM 的登录信息</block>
  <block id="73a2919f6ab0fb4aeab49d6cc186b9fd" category="paragraph">` * SnapDrive 配置集 _user_name filername_ [_filername..._]*`</block>
  <block id="f9c092f936b8ae3ae78d7c6226360c9b" category="list-text">` _user_name_` 是首次设置 SVM 时为 SVM 指定的用户名。默认用户为 vsadmin 。` _filername_` 是 SVM 名称。</block>
  <block id="16aa7e82775488370bb955c226afd1dd" category="list-text">` filer_name_` 允许您在一个命令行中输入多个 SVM ，前提是它们都具有相同的用户登录名或密码。必须至少输入一个 Vserver 名称。</block>
  <block id="c79ddbc29533b4a48c98c8a6647d918c" category="summary">您可以启用 SnapDrive for UNIX 来访问连接到主机的存储系统，并且必须将主机配置为使用分配给存储系统的登录名和密码。如果不提供此信息，则 SnapDrive for UNIX 将无法与存储系统进行通信。</block>
  <block id="e267da5d3ce594aee233daa50baa6853" category="doc">安全注意事项</block>
  <block id="7f779711825272d6c1ad2f7c70c12853" category="paragraph">根用户可以允许其他用户运行特定命令，具体取决于为其分配的角色。您不必是 root 用户即可执行存储和快照管理操作。</block>
  <block id="d8cfe8c420b56bd9d567c8c67136916e" category="paragraph">SnapDrive for UNIX 会将有关主机的用户身份验证信息存储在一个加密文件中。默认情况下，在 Linux 主机上， SnapDrive 会对密码信息进行加密并通过网络发送。SnapDrive for UNIX 通过标准 IP 连接使用 HTTPS 进行通信。</block>
  <block id="ba573d5454fd462d70c069a71586fedd" category="summary">本节将介绍 Snap disconnect 所遵循的操作步骤。</block>
  <block id="09fc333dc074da67c124d888a4ae2306" category="paragraph">以下步骤说明了 `snap disconnect 操作步骤` ：</block>
  <block id="052c2e64f6241476a49b4fb562a32cb1" category="list-text">SnapDrive for UNIX 从 `snap disconnect` 命令行界面获取主机文件规格，并找出存储系统卷。</block>
  <block id="6b662d9c64ae711a1642eb6aafd580a5" category="list-text">删除主机文件规范并取消 LUN 映射后， SnapDrive for UNIX 将检查当前卷是否为 SnapDrive 创建的克隆。</block>
  <block id="6bf916a24945f0992b7bd957f582b783" category="list-text">如果 FlexClone 是由 SnapDrive 创建的，则 SnapDrive for UNIX 将检查以下项是否：</block>
  <block id="800deeaec01adb022fdc0e5d4f34ee57" category="list-text">克隆卷中存在任何映射的 LUN</block>
  <block id="8d54e8b179c46c6ff292b1ff2dc9aad4" category="list-text">克隆的卷中存在任何新的 LUN</block>
  <block id="4aad559f62510c2ab2d63f507ec38fc0" category="list-text">存在任何新的 Snapshot 副本</block>
  <block id="acb78ba590acae8438b276c68b726b05" category="paragraph">如果满足所有条件， SnapDrive for UNIX 将删除克隆的卷。对于不受限制的 FlexClone ，如果配置了 RBAC ，则 SnapDrive for UNIX 不会执行子步骤 1 和子步骤 2 检查。</block>
  <block id="4173b4c277da245218ec1a1bd07daaba" category="paragraph">在 Data ONTAP 7.2 之前的存储系统上， SnapDrive for UNIX 不会删除受限的 FlexClone 卷。应使用存储系统命令删除它们。但是，在为用户提供适当的 RBAC 功能时，不受限制的 FlexClone 卷将被删除。</block>
  <block id="b195ea00205827a8b2a9e560e9663046" category="paragraph"><block ref="b195ea00205827a8b2a9e560e9663046" category="inline-xref-macro-rx"></block></block>
  <block id="6b2f8f14794f3bd81147501793749976" category="summary">如果主机和存储系统中启用了 NFSv3 和 NFSv4 版本，则快照还原操作将失败。</block>
  <block id="3fec98f6b16aeb56c4d804be84758d86" category="doc">如果在主机和存储系统中启用了 NFSv3 和 NFSv4 版本，则快照还原操作将失败</block>
  <block id="553ec7796f629f2c9b3b5ae948a88fe2" category="paragraph">如果在主机和存储系统中启用了 NFSv3 和 NFSv4 版本，并在主机上挂载卷而不使用 ` -o vers` 选项，则会为文件和目录设置 `nobody ： nobody` ownership 。</block>
  <block id="a08f77f723b4261418d837835176daa8" category="paragraph">建议在挂载 NFS 卷时使用 ` -o vers` 选项，或者将 NFS 默认选项检查为主机上的相应值。</block>
  <block id="b20900f6819bb12050cfc284b00320f8" category="summary">您可以启动卷克隆或 LUN 克隆拆分操作。</block>
  <block id="2b02dac8bbda6131aea9dee9d34b7963" category="doc">启动卷克隆或 LUN 克隆拆分</block>
  <block id="f4237c04f50c3619687aa7fe3de507ee" category="list-text">输入以下命令以启动卷克隆或 LUN 克隆拆分。</block>
  <block id="76ca666cae82447dc0b9148285bd8b2a" category="paragraph">` * # SnapDrive 克隆拆分起始项为： "-LUN] _lun_name_ __lun_name___] ； [ ｛ -DG _ -vg _ -FS _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec____]] 【 -force][-noprompt] 【 -dump &gt; -dumpall]*`</block>
  <block id="b079574b8e34eb6e38a55d9bfa810761" category="paragraph">当存储状态显示为不可用时，可以使用以下选项。</block>
  <block id="de061dc9ae637f01b632e63ade88e94b" category="list-text">您可以使用 ` -force` 选项强制启动克隆拆分操作，并收到确认消息，指出操作已启动。</block>
  <block id="71348461a8b102dffbc38c434a4e65d8" category="list-text">您可以使用 ` -noprop` 以及 ` -force` 选项启动克隆拆分启动操作，而不会收到任何确认消息。</block>
  <block id="d42835b5b71d13ed5f0c8e0f73782d9c" category="admonition">如果在停止正在进行的克隆拆分操作后不久再启动另一个克隆拆分操作，则该操作可能会失败。如果启动和停止克隆拆分操作之间的延迟不足以使存储系统同步停止操作，则可能会出现此问题描述。</block>
  <block id="b2995d792b35ad147071f0e742028e01" category="paragraph">以下示例显示了如何拆分卷克隆：</block>
  <block id="0ad3fea9e0e3b1fcfade3e1364dadde5" category="paragraph">以下示例显示了如何使用 ` -force` 选项拆分克隆：</block>
  <block id="0d4d073d6c4e30fc5e536a8d2ca0daeb" category="paragraph">以下示例显示了如何使用 ` -noprop` 选项直接启动克隆，这意味着没有确认消息：</block>
  <block id="44fc2027199873f680d882fe06abd430" category="summary">SnapDrive 5.3.2 for UNIX 仅包含错误修复。此版本没有新功能。</block>
  <block id="928c1baab03e0230f3715e3de77b083f" category="doc">此版本中的新增功能</block>
  <block id="5a6924e2880332e7e38c15f3e2f532f7" category="summary">SnapDrive for UNIX 使用关键字指定主机磁盘组，目标组，卷或 FlexClone 的名称， NFS 文件， 存储系统等。</block>
  <block id="faf64e6d943539c7aa7196a28db74f7c" category="doc">命令行关键字</block>
  <block id="b7c9c5bd7516379d22b879b963e6bb70" category="paragraph">以下是可用于 SnapDrive for UNIX 命令的关键字。您可以使用它们指定 SnapDrive for UNIX 操作的目标。这些关键字可以使用一个或多个参数。</block>
  <block id="213e3b3589ac6c6357100f6acb9e7760" category="admonition">某些 LVM 指的是磁盘组，而另一些 LVM 则指的是卷组。在 SnapDrive for UNIX 中，这些术语被视为同义词。此外，某些 LVM 指的是逻辑卷，而某些 LVM 指的是卷。SnapDrive for UNIX 将术语主机卷（创建此术语是为了避免将主机逻辑卷与存储系统卷混淆）和术语逻辑卷视为同义词。</block>
  <block id="220f3d3750583b9db48568a0b5b9a5f1" category="cell">关键字</block>
  <block id="2c95c194c1c4a59605292531af4a67c7" category="cell">与此关键字结合使用的参数</block>
  <block id="6a80a4a1f4e51fa257d7a128bc03298a" category="paragraph">` -dg` （与 ` -vg` 同义）</block>
  <block id="b02a073448f447d61275b0d3d1e87272" category="paragraph">主机磁盘组的名称。您可以使用此选项输入磁盘组或卷组的名称。</block>
  <block id="b5edc237eb10db7cfe9afe9da8bb3882" category="paragraph">` - destdg`</block>
  <block id="c427dfa0e161fa73d272773fbbf4f6c4" category="paragraph">` -desthv`</block>
  <block id="1d16480442b175f5df2c6961dd1de816" category="paragraph">` destlv`</block>
  <block id="0fd4f93485707ac055adb2d2b95070fc" category="paragraph">` destvg`</block>
  <block id="558680061fe54d0e2d6e4fa278908d85" category="paragraph">目标组或卷。</block>
  <block id="a4425fa935cfae5c8188c3e0ac83ff11" category="paragraph">` destfv`</block>
  <block id="5d05521c2ee30df0bdcfc4caf4298112" category="paragraph">在 NFS Snapshot 连接操作期间由 SnapDrive for UNIX 创建的卷克隆的命令行上指定的 FlexClone 卷的名称。</block>
  <block id="8cb968a2615a10aff9ac8b76590c0921" category="admonition">此参数仅支持 NFS 卷，而不支持 NFS 目录。</block>
  <block id="4a5edf1510748158fb932703f00bc813" category="paragraph">` 文件`</block>
  <block id="b96f8d9d206baec2fb492549cf6b5d16" category="paragraph">NFS 文件的名称。</block>
  <block id="54b6e318bac5cd79683d0b3b9b440432" category="paragraph">` 存储器`</block>
  <block id="b295864104f24c5d26bfe211f769c51a" category="paragraph">` -filervol`</block>
  <block id="f63e8d4e8f158c278d3879d67af741d6" category="paragraph">存储系统及其卷的名称。</block>
  <block id="0f965f23539c1c160db60d5d6f6d64c3" category="paragraph">` -FS`</block>
  <block id="27ffc58843cf8683558bcc2252bf0336" category="paragraph">主机上文件系统的名称。使用的名称是文件系统当前挂载或要挂载的目录（挂载点）。</block>
  <block id="de370df2aecdb9020523d5ff8c96b0d7" category="paragraph">` -hostvol` 或 ` -lvol`</block>
  <block id="0b81e905af3a659d95d367861fc2e911" category="paragraph">主机卷名称，包括其中的磁盘组。例如，您可以输入 `large_vg/Accounting _lvol` 。</block>
  <block id="a3428016a8f877c87f93f901ad0964a3" category="paragraph">` -igroup`</block>
  <block id="b51aeff283b1d31e008cf6d526404e45" category="paragraph">启动程序组（ igroup ）的名称。</block>
  <block id="8fb3f3b707bdbc4c7ae3ea5e3a6f3519" category="paragraph">NetApp 强烈建议您使用 SnapDrive for UNIX 创建的默认 igroup ，而不是在目标存储系统上指定 igroup 。默认 igroup 为 hostname_protocol_SdIg 。</block>
  <block id="164aea3adc93231f28e72a9c48d31181" category="list-text">` 主机名 _` 是当前主机的本地（非域限定）名称。</block>
  <block id="f91a9e1f04de4a30f9e28ab9056bab2e" category="list-text">` protocol_` 是 ` _fcp_` 或 ` _iscsi_` ，具体取决于主机使用的协议。</block>
  <block id="c16acc5ea221a369fc0bae14c21ffaaf" category="paragraph">如果 igroup hostname_protocol_SdIg 不存在，则 SnapDrive for UNIX 将创建它并将主机的所有启动程序放置在其中。</block>
  <block id="bf77832c88015f9360bd337ef8f9f4af" category="paragraph">如果 SnapDrive for UNIX 存在且启动程序正确，则它将使用现有的 igroup 。</block>
  <block id="77aedcccd1b07ab8a583002386cc7900" category="paragraph">如果 igroup 已存在，但不包含此主机的启动程序，则 SnapDrive for UNIX 将使用其他名称创建一个新的 igroup ，并在当前操作中使用该 igroup 。为了避免使用相同的名称， SnapDrive for UNIX 会在创建新名称时包含一个唯一的数字。在这种情况下，名称格式为 hostname-number_protocol_SdIg 。</block>
  <block id="28243f108533f289100c504ae0fe8204" category="paragraph">如果您提供自己的 igroup 名称，则 SnapDrive for UNIX 不会验证 igroup 的内容。这是因为它无法始终确定存储系统上存在与主机对应的 igroup 。</block>
  <block id="fd6314e036e3bbe4d7c05153d9abfb79" category="paragraph">使用此选项指定启动程序组的所有命令在共享磁盘组和文件系统中都不能接受此选项。只有本地资源才允许使用此选项。</block>
  <block id="c0200ceec26bfefb39c375b2e06a44a4" category="paragraph">如果命令行中涉及任何外部 igroup ，则 SnapDrive for UNIX 命令将失败。确保命令行中指定的所有 igroup 都包含本地主机中的启动程序。</block>
  <block id="ef1796750407e558d9f278de4e799e40" category="paragraph">` LUN`</block>
  <block id="f46c49b5c53148665147d9b65e589995" category="paragraph">存储系统上 LUN 的名称。对于随此关键字提供的第一个 LUN 名称，必须提供完整路径名称（存储系统名称，卷名称和 LUN 名称）。对于其他 LUN 名称，您可以仅指定其卷中的名称（如果卷保持不变），也可以指定一个路径来指示新的存储系统名称或新的卷名称（如果只想切换卷）。</block>
  <block id="46439bbd3443044da9b2bf0907822f4a" category="admonition">在 SnapDrive snap connect` 命令中， ` lun_name_` 的格式应为 `lun_name` 或 `tree_name/lun_name` 。</block>
  <block id="e3c3beaf46e6e01f38c87ddebb7ade6c" category="paragraph">` lvol` 或 ` -hostvol`</block>
  <block id="a242ef8ae70f0f2fadae57603a8933ca" category="paragraph">逻辑卷名称，包括其中的卷组。例如，您可以输入 `large_vg/Accounting _lvol` 作为逻辑卷名称。</block>
  <block id="46a14f9ec4203f6899a31e0c35e3021f" category="paragraph">` -snapname`</block>
  <block id="9f4e2339124220ed9a79e821f53758c0" category="paragraph">Snapshot 副本的名称。</block>
  <block id="72d6cede08fca7d398d6fdfc048ccc58" category="paragraph">` -vg` 或 ` -DG`</block>
  <block id="d00cc6036b99cc182133eeeaf24c5178" category="paragraph">卷组的名称。您可以使用此选项输入磁盘组或卷组的名称。</block>
  <block id="66426912c72d592bd7a5f3419dd316de" category="summary">SnapDrive for UNIX 守护进程服务要求您生成用于身份验证的自签名证书。与命令行界面通信时需要进行此身份验证。</block>
  <block id="2ee6d0709852e4c96a11a349de0c657a" category="doc">生成自签名证书</block>
  <block id="d44800a17ee4c2901d389ad191df30a6" category="list-text">生成 RSA 密钥：</block>
  <block id="e94551b68f04d90b9cc727f1149540b1" category="paragraph">` * $ openssl genrsa 1024 &gt; host.key $ chmod 400 host.key*`</block>
  <block id="ac071ec39e90dac8cb0a59e74383786a" category="list-text">创建证书：</block>
  <block id="fcb209508bce525aca61cc2381f0479c" category="paragraph">` * $ openssl req -new -x509 -nodes -SHA1 -days 365 -key host.key &gt; host.cert*`</block>
  <block id="dca363559d7b8e007e491d4570fe5e82" category="paragraph">使用 ` -new` ， ` -x509` 和 ` -nodes` 选项创建未加密证书。` - 天` 选项指定证书保持有效的天数。</block>
  <block id="3318ea7246a74e650bba6b9482fdf871" category="list-text">当系统要求您填写证书的 x509 数据时，请输入您的本地数据：</block>
  <block id="23afd5951c7a997def9e0afbd75d001c" category="admonition">`Common Name` 值必须为 _localhost_ 。</block>
  <block id="1d926bdb750952a4677df21e0edc654e" category="list-text">提取元数据（可选）。</block>
  <block id="7a96596474c34bd8547655dead8807bb" category="paragraph">您可以保存证书元数据以供日后快速参考。</block>
  <block id="7af5352c5825c273e5bacb6b6048c61f" category="list-text">将密钥和证书数据结合使用。</block>
  <block id="b8901370274a88c60e3b4e5c731519bc" category="paragraph">SnapDrive for UNIX 要求密钥和证书数据位于同一文件中。组合文件必须作为密钥文件进行保护。</block>
  <block id="5f54525763ead75852b677de39a63db1" category="paragraph">` * $ cat host.cert host.key &gt; host.pem \*`</block>
  <block id="c527e6b30b5b81c010708dee73747c3f" category="paragraph">` * 和 rm host.key*`</block>
  <block id="30553a2ef834d322f997ab8ee9e42b55" category="paragraph">` * $ chmod 400 host.pem*`</block>
  <block id="d0cb6c1aee0b318c41404f7e6ab7318c" category="list-text">将守护进程证书的完整路径添加到 `snapdrive.conf` 文件的 ` _sdU-daemon-certificate-path_` 变量。</block>
  <block id="0acc0d62dc01d19f2b27e1482fc7c65c" category="summary">SnapDrive.conf 文件为 SnapDrive for UNIX 用于运行的每个可配置变量提供了一个名称 - 值对。SnapDrive for UNIX 会在每次启动时自动检查此文件中的信息。您可以使用文本编辑器修改此文件。</block>
  <block id="c4a5dda2ea2eb08203180fe95a93a8c2" category="doc">什么是 SnapDrive.conf 文件</block>
  <block id="daa725338ea5b466508d1a5bdf726122" category="paragraph">`snapdrive.conf` 文件为 SnapDrive for UNIX 用于运行的每个可配置变量包含一个名称 - 值对。SnapDrive for UNIX 会在每次启动时自动检查此文件中的信息。您可以使用文本编辑器修改此文件。</block>
  <block id="d0311d82c738486a34dd7ca14a3babc3" category="paragraph">`snapdrive.conf` 文件位于 SnapDrive 安装目录中。SnapDrive config show` 命令可显示 `snapdrive.conf` 文件的当前和活动内容。</block>
  <block id="deb8bc49b2fc3a16197997a19b0862ac" category="summary">SnapDrive for UNIX 命令具有 -dg ， -vg ， -lvol 和 -hostvol 等选项。</block>
  <block id="e9dbc1ab8baf82ae6e42b3000cd609c0" category="doc">有关命令的一般注意事项</block>
  <block id="2ca1e581ca195a8a0f136769b2a2e12c" category="paragraph">SnapDrive for UNIX 命令具有 ` -DG` ， ` -vg` ， ` -lvol` 和 ` -hostvol` 等选项。</block>
  <block id="4a0beea5d86679d2620a661269a03947" category="paragraph">下面是有关该命令的一些常规注释：</block>
  <block id="365b38ccd33c8c4129c5841129a79ec3" category="list-text">` -dg` 和 ` -vg` 选项是同义词，反映了以下事实：某些操作系统引用磁盘组，而其他操作系统引用卷组。本指南使用 -dg 来指代磁盘组和卷组。</block>
  <block id="8b01c91d22622b3c0e1ea9cc2cdc6a6c" category="list-text">` -lvol` 和 ` -hostvol` 选项是同义词，反映了以下事实：某些操作系统引用逻辑卷，而其他操作系统引用主机卷。本指南使用 ` -hostvol` 来指代逻辑卷和主机卷。</block>
  <block id="cef7204a23644ab5f1f75a870e4054ca" category="list-text">最好使用默认的 igroup ，而不要通过包含 ` -igroup` 选项来明确指定 igroup 。</block>
  <block id="cdeed28a9deb10ed3e8fe948f8ac2c9d" category="summary">您可以运行 SnapDrive config access show 命令来查看访问控制权限。</block>
  <block id="34fc61400b55cbd21fab0d306843b103" category="doc">查看访问控制权限</block>
  <block id="38a5e1dfcff410b08144385a09098e99" category="paragraph">您可以运行 SnapDrive config access show` 命令来查看访问控制权限。</block>
  <block id="1fb07f26a189be720e9a89b569f4844a" category="list-text">运行 SnapDrive config access show` 命令。</block>
  <block id="8ffba6baa9b84761be1432ed93007dff" category="paragraph">此命令的格式如下： SnapDrive config access ｛ show | list ｝ filername`</block>
  <block id="b461e42ec41889b0e1507037a0be7daa" category="paragraph">无论输入的是 `show` 还是 `list` version 命令，都可以使用相同的参数。</block>
  <block id="ab0cedad7521d04c1558061728eabeec" category="paragraph">此命令行会检查存储系统面面面包机，以确定主机具有哪些权限。根据输出，此存储系统上主机的权限为 snap all 。</block>
  <block id="c3f8975ae01a95b0c5f99cb3c41efcfa" category="paragraph">在此示例中，权限文件不在存储系统上，因此 SnapDrive for UNIX 会检查 `snapdrive.conf` 文件中的变量 ` _all-access-if-rbac unspecified _` 以确定主机具有哪些权限。此变量设置为 `on` ，相当于创建一个权限文件，并将访问级别设置为 all access 。</block>
  <block id="a729536fb151aedd7586e7b212483816" category="paragraph">此示例显示了存储系统面板上没有权限文件时您会收到的消息类型，并且 `snapdrive.conf` 文件中的变量 ` _all-access-if-rbac unspecified _` 设置为 `off` 。</block>
  <block id="23fcbaa759f1417d25c164151dc66bc5" category="summary">以下是断开 LUN ，存储实体或 NFS 目录的 Snapshot 副本连接的准则。</block>
  <block id="d83c851d8aa0aab59cfbadfd83503e60" category="doc">断开 Snapshot 副本连接的准则</block>
  <block id="cbebacf1dc89d29d58f113c2f9aa14d3" category="list-text">断开文件系统连接时， SnapDrive for UNIX 始终会删除挂载点。</block>
  <block id="21bc79d8bfa87beea40b94b0dd8bfece" category="list-text">通过 Linux 主机，您可以将多个文件系统连接到一个挂载点。但是， SnapDrive for UNIX 要求每个文件系统都有一个唯一的挂载点。如果使用 SnapDrive snap disconnect` 命令断开连接到单个挂载点的文件系统，则该命令将失败。</block>
  <block id="122cee28f4646a673a1da3e37b79fd40" category="list-text">要撤消 Snapshot 连接操作的影响，请使用 Snapshot disconnect 命令。</block>
  <block id="8fc174dfeb11ef635d21b472863079bb" category="list-text">如果在 Snapshot 连接操作期间将 `enable-split -clone` 配置变量值设置为 `on` 或 `sync` ，并在 Snapshot 断开操作期间将其设置为 `off` ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="cca5f761665079122529eb3b805b07ab" category="summary">在 Linux 主机上运行的 SnapDrive for UNIX 返回错误消息 "HBA assistant not found" 。</block>
  <block id="a8189adf4c02ad2d2248176c8c434f69" category="doc">如果 iSCSI 未运行，则 SnapDrive for UNIX 报告错误</block>
  <block id="bc67ed2df630dd6957271b42821be452" category="paragraph">在 Linux 主机上运行的 SnapDrive for UNIX 返回错误消息 "`HBA assistant not found` " 。</block>
  <block id="1e1f2573bae4e5e382fc95ab163b5f2e" category="paragraph">发生以下情况之一后会发生这种情况：</block>
  <block id="a16973a9cce2c2ba3aeabd2857fcdd06" category="list-text">已发出 iSCSI 停止命令。</block>
  <block id="6aee0fb1df9b9481181cef13ca10818b" category="list-text">发生接管， iSCSI 服务尚未启动。</block>
  <block id="2be3b867b8613a422b34b125e0d23662" category="list-text">正在进行交还，并且 iSCSI 服务尚未启动。</block>
  <block id="f20d2eed60ed619b5751acd3af91da6f" category="paragraph">要执行 SnapDrive for UNIX ， iSCSI 服务必须正在运行。如果此服务暂停，则 SnapDrive for UNIX 将返回错误消息。例如，如果您在 iSCSI 服务未运行时执行 SnapDrive storage show 命令，则可能会查看类似于以下内容的输出： ` # HBA storage show -dg toaster1 0001-877 管理错误：未找到 SnapDrive 助手。涉及 LUN 的命令应失败。`</block>
  <block id="5a584aa157e1d6cdb9069170218a2273" category="paragraph">确保 iSCSI 服务正在运行。如果存储系统正在进行接管或交还，请等待它启动 iSCSI 服务。如果存储系统处于正常运行模式，请重新启动 iSCSI 服务，然后运行 `snapdrived restart` 命令重新启动 SnapDrive for UNIX 守护进程。运行此服务后，重新发出 SnapDrive storage show` 命令。此时，您将看到类似于以下内容的输出：</block>
  <block id="917112fcea8a992dc20d0762147b30f2" category="summary">您可以使用 SnapDrive snap disconnect 命令断开包含存储实体的 Snapshot 副本的连接。</block>
  <block id="44a67595467cf7744aa51a62f2c8df3a" category="doc">断开 Snapshot 副本与存储实体的连接</block>
  <block id="b8f7503b8603b190989c83668677ae9b" category="paragraph">您可以使用 SnapDrive snap disconnect` 命令断开包含存储实体的 Snapshot 副本的连接。</block>
  <block id="2d6447ac5b0d91a8336d43a6cf37ef28" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._] ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [file_spec...]] 【 -full】 【 -fstype type】 【 -vmtype 类型】【 -ssplit 】</block>
  <block id="14462e0c853eed1176fea677d1b7c927" category="paragraph">此命令必须始终以存储实体开头，例如， ` -lun` ， ` -dg` ， ` -hostvol` ， 或 ` -FS` 。</block>
  <block id="9e98be08c8ee777a2bdfc0adb4ab8ec7" category="list-text">如果指定 LUN （` -lun` ），则必须输入长 LUN 名称。您不能在与其他存储实体（` -vg` ，` -dg` ，` -fs` ，` -lvol` 或 ` -hostvol` options ）相同的命令行上使用 ` -lun` 选项指定 LUN 。</block>
  <block id="b2701ceed8da9a4df0911913b7748384" category="list-text">如果指定 RDM LUN （` -lun` ），则必须输入长 RDM LUN 名称。您不能在与其他存储实体（` -vg` ，` -dg` ，` -fs` ，` -lvol` 或 ` -hostvol` options ）相同的命令行上使用 ` -lun` 选项指定 RDM LUN 。</block>
  <block id="a262df4bc0a9fab30e3c39237d892b43" category="list-text">如果指定 NFS 挂载点，则不能在同一命令行上指定非 NFS 实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` -hostvol` ）。您必须使用单独的命令来指定 NFS 挂载点。</block>
  <block id="80fbfe64517a9f7ce18425ed71ba59a6" category="admonition">如果主机实体使用的 LUN 不属于 Snapshot 副本，则会出现错误消息。如果指定每个目标磁盘组中包含的一个子集主机卷和 / 或文件系统，则也会发生错误。</block>
  <block id="4504a99b73bff26dae4e75064027393b" category="paragraph">此命令行会删除与主机卷 dg5/myvolume 下的所有 LUN 的映射。它会删除通过 Snapshot 连接操作创建的任何临时 LUN ：</block>
  <block id="82f05ebe63b9dacc545b8edfd5d104b7" category="paragraph">此命令将断开与磁盘组 1 （ dg1 ）和底层 LUN 的映射。它还会删除通过 Snapshot 连接操作创建的任何临时 LUN ：</block>
  <block id="3f1ebca867a4468eafd2d97688112772" category="paragraph">此命令行将删除与文件系统 fs1 及其下的 RDM LUN 的映射。它还会删除通过 Snapshot 连接操作创建的任何临时 RDM LUN ：</block>
  <block id="d5cbc60b85f1b3cec6bb1928b4929543" category="paragraph">此命令行将删除与文件系统 fs1 及其所在 LUN 的映射。它还会删除通过 Snapshot 连接操作创建的任何临时 LUN ：</block>
  <block id="5bbab8635cb763970d53ff9d30cb5711" category="paragraph">此命令行将删除磁盘组 dg1 ， dG2 和 dg3 的映射。它会删除通过 Snapshot 连接操作创建的任何临时 LUN ：</block>
  <block id="7ea915a80d796eb53fe594ff28f2152b" category="paragraph">以下示例将断开 LVM 堆栈上文件系统磁盘组的 Snapshot 副本的连接：</block>
  <block id="f0baed585c6b0800b705c7cbca8ef79d" category="paragraph">此示例将断开 Snapshot 副本与文件系统的连接：</block>
  <block id="a1b14c167cf906ab41f31dd7324d7ae1" category="summary">对于跨多个存储系统或存储系统卷的 Snapshot 副本，请重命名所有相关的 Snapshot 副本。</block>
  <block id="8535d1a16eca1c715e5c04d106703799" category="doc">重命名跨存储系统或卷的 Snapshot 副本</block>
  <block id="d2d245dcd9270373cc186f0ff4b6a5c2" category="paragraph">您也可以使用此命令重命名跨多个存储系统或多个存储系统卷的 Snapshot 副本。</block>
  <block id="4bc3339ae307ad7019b9311f3d948d8f" category="paragraph">如果重命名其中一个 Snapshot 副本，则还必须使用相同名称重命名所有相关的 Snapshot 副本。这是因为 SnapDrive for UNIX 在创建 Snapshot 副本时会使用短名称，即使它跨越多个存储系统或卷也是如此。rename 命令会更改当前 Snapshot 副本的名称，但不会更改其他位置的相关 Snapshot 副本的名称。</block>
  <block id="605a2cab9ce78475e6f119e6ee7c9597" category="summary">如果您为一个系统配置了多个子网，并且通过管理界面挂载了一个或多个 NFS 卷，则应始终将第一个数据接口配置为管理接口。</block>
  <block id="9a1646b7d8d5a215f54d313dfd7934fe" category="doc">纯 NFS 环境</block>
  <block id="e7ab62005e4f93ba2d4f4953c0f00d19" category="paragraph">在以下示例中，管理接口为 `10.72.221.19` ，数据接口为 `10.72.220.45` 。</block>
  <block id="41063d31dc4f1c06dceec94538310043" category="summary">您必须指定存储系统的用户登录信息。根据您在设置存储系统时指定的内容，每个存储系统可以使用相同的用户名或密码，也可以使用唯一的用户名或密码。如果所有存储系统都使用相同的用户名或密码信息，则必须执行以下步骤一次。如果存储系统使用唯一的用户名或密码，则必须对每个存储系统重复以下步骤。</block>
  <block id="86127d3c40991d19e2b4f7d41d768d08" category="doc">指定登录信息</block>
  <block id="0199981a3f994e455f003f9f5dc9ca33" category="paragraph">` user_name_` 是首次设置存储系统时为该存储系统指定的用户名。</block>
  <block id="788e8e1a075e98ae82221b6341c09bc7" category="paragraph">` _filername_` 是存储系统的名称。</block>
  <block id="83f712f9359cae3173a53cc3f2aa7b3b" category="paragraph">` _[filername...]_` 定义，如果所有存储系统名称都具有相同的用户登录名或密码，则可以在一个命令行中输入多个存储系统名称。必须至少输入一个存储系统的名称。</block>
  <block id="5dbaa119745f0cf2a6842e829677f3e9" category="list-text">在提示符处，输入密码（如果有）。</block>
  <block id="80d0b3706d57bed8b64824130beb1232" category="admonition">如果未设置密码，请在系统提示输入密码时按 Enter 键（空值）。</block>
  <block id="38d01e1c778157c4cc40fa75f2c5218a" category="paragraph">此示例为名为 toasters 的存储系统设置一个名为 `root` 的用户：</block>
  <block id="8d6218fe9e9c5ece8a3feb1b85d28882" category="paragraph">此示例为三个存储系统设置了一个名为 `root` 的用户：</block>
  <block id="d3becea57578adc6ad3909604382de89" category="list-text">如果您的另一个存储系统使用不同的用户名或密码，请重复这些步骤。</block>
  <block id="da0dafe227be813bd8fec99565b9fb8a" category="summary">您可以使用 SnapDrive for UNIX 命令通过在存储系统上创建 LUN 来配置存储。</block>
  <block id="6b5c5fa322390b231b0b5525f267c732" category="doc">创建不具有主机实体的 LUN</block>
  <block id="4a49a514f5967a83c5965437dec5ae5a" category="list-text">在命令行界面中，输入以下命令：</block>
  <block id="5897745f36f39331e4c100d03f15e768" category="paragraph">` * SnapDrive storage create -lun _long_lun_name_ -lunsize _[lun_name ...]_ -lunsize_size_ _ [ ｛ -reserve _ -noreserve ｝ ] -igroup 名称 [ig_name ...]_ig_name [ig_name ...]_ig_name ...]_*``</block>
  <block id="80d69f41c6c73d95926d18266cb6f92c" category="paragraph">SnapDrive for UNIX 将创建您指定的 LUN 。</block>
  <block id="9e30e239f9e7bc7062397c563d03880c" category="section-title">示例：在存储系统上创建三个 10 GB LUN</block>
  <block id="254cea30bef238c88d7fa331611d433b" category="paragraph">SnapDrive storage create -lun Acctfiler ： /vol/vol1/luna lunB lunc - lunsize 10g`</block>
  <block id="a0bdc6713cdf707c8c2a12055fedba07" category="summary">SnapDrive 不会为 NFS 文件或目录树提供存储配置命令。只有在使用 Data ONTAP 7.3.5 及更高版本时， SnapDrive 才支持 SnapDrive snap create 和 SnapDrive snap restore 命令。</block>
  <block id="c3026ec8cb5ea3145bbaeb53933cadc6" category="doc">NFS 文件或目录树的限制</block>
  <block id="2db0ae1e37104ec62ee2ef9cdd9edf14" category="paragraph">SnapDrive 不会为 NFS 文件或目录树提供存储配置命令。只有在使用 Data ONTAP 7.3.5 及更高版本时， SnapDrive 才支持 SnapDrive snap create` 和 SnapDrive snap restore` 命令。</block>
  <block id="477db85804a188b7ab7ba33f475a810f" category="paragraph">SnapDrive snap connect` 和 SnapDrive snap disconnect` 命令涉及 NFS 并使用 Data ONTAP FlexVol 卷功能进行读写访问。因此，只有在使用 Data ONTAP 7.3.5 或更高版本时，才能运行这些命令。使用 Data ONTAP 7.3.5 或更高版本以及传统卷的配置，您可以创建和还原 Snapshot 副本，但 Snapshot 连接操作仅限于只读访问。</block>
  <block id="1e8724a82acba628ea0bc57c53a55b17" category="summary">您可以断开文件规范的连接。以下示例介绍了如何完成此操作。</block>
  <block id="d43d8f6b388f5bb8ca8228de9b154254" category="doc">正在断开文件规范的连接</block>
  <block id="f2e1422c194d63b6248384de718f9695" category="paragraph">/mnt/fs1_0 的布局如下所示。</block>
  <block id="70d7d557b2f26996311c445be6470f71" category="paragraph">以下输出显示了如何断开文件系统 /mnt/fs_1_0 的连接：</block>
  <block id="1d978c673863271cb08fbb77ee1a6cce" category="paragraph">断开文件系统 /mnt/fs_1_0 的连接后，如果满足以下条件， SnapDrive for UNIX 还会删除克隆的卷 SnapDrive_vol1_0_volume_clone_from_snap2_snapshot ：</block>
  <block id="9385c3323d2a876ddf8dff1fe0eab26c" category="list-text">卷中不存在映射的 LUN</block>
  <block id="94527fec380d942a2f3d9a20cc84e3f2" category="list-text">不存在新 LUN</block>
  <block id="934845db4b81c10a48de8ec9c5ef0bae" category="list-text">不存在新的 Snapshot 副本</block>
  <block id="8e57913ee2c8767e80375a3ee89711ca" category="paragraph">* 删除 SnapDrive for UNIX* 未创建的 FlexClone ： SnapDrive for UNIX 不允许删除不由其创建的 FlexClone 。</block>
  <block id="fa1fbe70eeea413597bc283336cc8405" category="summary">您可以使用适用于 UNIX 的 SnapDrive 向导以交互方式高效地创建存储。该向导将引导您完成一系列问题，以帮助您创建存储。</block>
  <block id="2db54a105e7ba701d43950351a5db837" category="doc">使用向导管理存储</block>
  <block id="283523a2ff7ab364e857e44adcb5e6b6" category="paragraph">您可以使用 SnapDrive storage wizard create` 命令启动此向导。</block>
  <block id="a0805e52bcec57e0afabd0fefb9bca49" category="paragraph">可以执行以下存储管理操作：</block>
  <block id="87101a8948019b68800f1e2e82772de8" category="list-text">创建 LUN</block>
  <block id="f0fdba2cd06ef8e45d2175290abba3ee" category="list-text">创建磁盘组并自动设置 LUN</block>
  <block id="13d95bdf9489cbaae03d5719607e9985" category="list-text">创建磁盘组并指定 LUN 。</block>
  <block id="0857a382804ed19769f5f8ad1905bcfd" category="list-text">创建主机卷并自动设置 LUN</block>
  <block id="592303e4c791893b9a20a74b7d74fa38" category="list-text">创建主机卷并指定 LUN</block>
  <block id="ccd186bde440f95d06e9dd7e8675864f" category="list-text">在 LUN 上创建文件系统并自动设置 LUN</block>
  <block id="b2e0431af6881e01091c75a0d74e7d31" category="list-text">在 LUN 上创建文件系统并指定 LUN 。</block>
  <block id="ab67207864106ee2e0c4e60943a0b561" category="list-text">在 LUN 上创建文件系统，并使用指定的逻辑卷管理器（ LVM ）和磁盘组自动设置 LUN</block>
  <block id="30c01d786cf9ca6351a39a1d34efcf76" category="list-text">在 LUN 上创建文件系统，并使用指定的 LVM 和磁盘组指定 LUN</block>
  <block id="19075d571b1e81fb3c86897f6acb0ced" category="list-text">在 LUN 上创建文件系统，并使用指定的 LVM 和主机卷自动设置 LUN</block>
  <block id="9e588a6c12a5fa7367f47d20931b96bb" category="list-text">在 LUN 上创建文件系统，并使用指定的 LVM 和主机卷指定 LUN</block>
  <block id="2c96e612a24a40fb103e4e733ef198b3" category="summary">如果为 Operations Manager 配置了系统，则 Operations Manager 管理员必须授予您在 FlexClone 卷上执行存储操作所需的权限。</block>
  <block id="97038ce15aaef5eced5ceb32ceb9908f" category="doc">对 FlexClone 卷操作进行基于角色的访问控制</block>
  <block id="a4d8c499ebe11636af92e500a25b525f" category="paragraph">* 不受限制的 FlexClone 卷 * ：要在不受限制的 FlexClone 卷上执行存储操作，您必须具有以下功能：</block>
  <block id="288bb160dd42d5f63ef942d2f07d5998" category="list-text">对于 `snap connect` ，您必须在父卷上具有 `s .D.snapshot.UnrestrictedClone` 功能。</block>
  <block id="7861fbb813bcbdbd44463c02808583d9" category="list-text">对于 `snap disconnect` ，您必须在 FlexClone 卷上具有 `s .D.snapshot.DestroyUnrestrictedClone` 功能。</block>
  <block id="42c56a034068858bf66b2c122cfdbee3" category="paragraph">* 受限 FlexClone 卷 * ：在受限 FlexClone 卷上执行存储操作时，必须具有以下功能：</block>
  <block id="294920c642adb06db36f5d9e2ecf7b72" category="list-text">对于 `snap connect` ，您必须在父卷上具有 `s .D.snapshot.Clone` 功能。</block>
  <block id="15e229e7398ad73b186254cd0d4e338e" category="list-text">对于 `snap disconnect` ，您必须在父卷上具有 `s .D.snapshot.Clone` 功能。</block>
  <block id="508b9a5434535c0cc64c19d208a8d054" category="paragraph">要在 `snap connect` 操作期间拆分 FlexClone 卷，请在父卷上使用 `s D Storage.Write` 访问功能。</block>
  <block id="27be2c244ec38853e161e0a0852ba975" category="paragraph">要在 `snap disconnect` 期间对拆分的 FlexClone 卷执行存储操作，对于拆分的 FlexClone 卷，您必须对拆分的卷克隆具有 `s .d 存储 .Delete` 功能。</block>
  <block id="3378daacede5a615451714c81c0e2611" category="summary">如果使用 SnapDrive for UNIX 创建直接驻留在 LUN 上的文件系统，则 SnapDrive for UNIX 将创建并映射 LUN ，然后创建并挂载文件系统，而不涉及主机 LVM 。</block>
  <block id="d02994a83ff6eccabe093e9541cc00a4" category="doc">为 LUN 上的文件系统创建存储</block>
  <block id="58fca10ab616ef367ffacba7f0c665a2" category="admonition">如果主机的根文件系统具有只读权限，则不支持 SnapDrive for UNIX 操作。</block>
  <block id="ad15c5a085f93b2a4e0c2173476087fc" category="summary">通过 SnapDrive for UNIX ，您可以拆分卷克隆或 LUN 克隆。克隆拆分完成后，父卷与克隆之间的关系将被销毁，两个实体彼此独立，并具有各自的存储空间。</block>
  <block id="576df05c41338fcfcda29c46989a70d9" category="doc">拆分卷克隆或 LUN 克隆</block>
  <block id="d78d4cb8274447228ad1f47762348106" category="paragraph">以下是克隆拆分操作：</block>
  <block id="b169128165b5226e2a7c180cc556416d" category="list-text">估算卷克隆或 LUN 克隆的磁盘空间（以 MB 为单位）。</block>
  <block id="8a6a6cee64604d5bbaa6ae1148802153" category="list-text">拆分卷克隆或 LUN 克隆。</block>
  <block id="a147c9d6b45d36b37170ac5fffa2ce54" category="list-text">停止卷克隆或 LUN 克隆拆分。</block>
  <block id="28f58734f2fcd6ca1a18dcb4dd901e96" category="list-text">查看正在进行，已完成或失败的克隆拆分的状态。</block>
  <block id="6c0cd5f011d09a0449025b97c6d1804f" category="list-text">如果拆分卷克隆，则克隆卷中的所有 Snapshot 副本都将被删除。</block>
  <block id="897f9eff792b37cdf3cd352e05a7f4f9" category="list-text">在拆分文件规范之前，必须运行 clone split estimate 命令，以确定克隆的卷中是否已创建任何 Snapshot 副本。</block>
  <block id="e650a8eed03a769aab4d04f5a796688d" category="list-text">对于所有克隆拆分命令，只能使用 ` -lun` 选项指定长 LUN 名称。您不能在同一命令行上指定 ` -lun` 选项以及其他存储实体（ -vg ， -dg ， -fs ， - lvol 或 -hostvol 选项）。</block>
  <block id="e3e0f1bbce48bc029409df09cbd954f0" category="list-text">在 clone split 命令中，始终必须使用文件规范的绝对路径名。</block>
  <block id="e8d36378ad2503eec9fe58c5eb4990c8" category="summary">灵活卷克隆 FlexClone 是父灵活卷的时间点副本。创建克隆后， FlexClone 卷不会继承对父灵活卷所做的更改。</block>
  <block id="8260b5d68ef4462234223a878ab32684" category="doc">什么是 FlexClone 卷</block>
  <block id="dbe631699db658775e6dc998aa569a60" category="paragraph">Data ONTAP FlexClone 技术支持即时复制数据卷，而在创建时不需要额外的存储空间。每个克隆卷都是一个透明的虚拟副本，可用于各种操作，例如产品或系统开发测试，错误修复，升级检查等。</block>
  <block id="e6e9c11261210341d7d4613b6c8257df" category="paragraph">FlexClone 技术可节省大量空间，并将开销降至最低。使用此技术，您可以在更短的时间内以更低的风险管理更多的数据集组合。默认情况下， FlexClone 卷没有写入预留。适用于 UNIX 的 SnapDrive 4.1 在 NFS 和 SAN 环境中使用 FlexClone 技术。</block>
  <block id="754af5e053beb42db55ff63fbb32c76a" category="admonition">Data ONTAP 7.0.x 及更高版本支持 FlexClone 卷，但运行 Data ONTAP 7.2 或更早版本的存储系统上的 vFiler 单元不支持这些卷。</block>
  <block id="a82777c40b32e62fb3e217bce6d3f1ef" category="summary">SnapDrive for UNIX 可为 LUN 等原始实体或可直接在 LUN 上创建的文件系统启用存储操作，并在不使用主机系统 LVM 的情况下执行存储操作。</block>
  <block id="c934740d84cfce6aa3e7a4cc55fb88fb" category="doc">适用于 UNIX 和原始实体的 SnapDrive</block>
  <block id="d95fda3d152f60bf29d99fb5df2e37bb" category="paragraph">SnapDrive for UNIX 存储命令用于管理 LUN 等原始实体，而无需激活 LVM 。 SnapDrive for UNIX 可用于创建，删除，连接和断开 LUN 及其所含文件系统的连接，而无需激活 LVM 。</block>
  <block id="2fa70c1328103926c0bb80809202d1ab" category="summary">如果在 SnapDrive.conf 文件中将 autosupport-enabled 选项设置为 on ，则 AutoSupport 消息将记录在存储系统的 EMS 日志视图中。默认情况下，此选项在 SnapDrive.conf 文件中设置为 on 。SnapDrive for UNIX 会将 AutoSupport 消息发送到存储系统，而这些消息会记录在事件管理系统（ EMS\ ）中。</block>
  <block id="605b1005d25244eb9b14c0be7ef83f92" category="doc">SnapDrive for UNIX 如何使用 AutoSupport</block>
  <block id="f500eda7ea3b62da3ff275dc33c5f419" category="paragraph">如果在 `snapdrive.conf` 文件中将 `autosupport-enabled` 选项设置为 on ，则 AutoSupport 消息将记录在存储系统的 EMS 日志视图中。默认情况下，在 `snapdrive.conf` 文件中，此选项设置为 `on` 。SnapDrive for UNIX 会将 AutoSupport 消息发送到存储系统，而这些消息会记录在事件管理系统（ EMS ）中。</block>
  <block id="e8156d588c938829324c32417effe607" category="paragraph">在以下任一情况下都会发送 AutoSupport 消息：</block>
  <block id="2ab8a939555c8e79df727f515e5db566" category="list-text">如果操作因操作失败而停止，则会向操作失败的存储系统发送 AutoSupport 消息。</block>
  <block id="3fa62b4a3b570f98b85824ae8666ba3f" category="list-text">如果将多个存储系统连接到主机，并且多个存储系统发生操作故障，则 SnapDrive for UNIX 会将 AutoSupport 消息发送到操作失败的特定存储系统。</block>
  <block id="abf14975c99b74130cee322194463e91" category="list-text">使用 ` UNIX 配置集 &lt; 用户名 &gt; &lt; 文件名 &gt;_` 添加新存储控制器时， SnapDrive for AutoSupport 会向指定的存储系统发送 SnapDrive 消息。</block>
  <block id="50c4777f5a647f9f114d781d017a240d" category="list-text">重新启动或启动 SnapDrive 守护进程后， AutoSupport 消息将发送到配置的存储系统。</block>
  <block id="db65b85c0461ae4d028ef3ef980c8d6b" category="list-text">执行 SnapDrive storage show` -all 命令后， AutoSupport 消息将发送到所有已配置的存储系统。</block>
  <block id="6fa6b1e2e0539625b71b86b79770be27" category="list-text">成功执行快照创建操作后， AutoSupport 消息将发送到存储系统。</block>
  <block id="55aa51113aa694871dabbf7318d81e08" category="summary">存储系统管理员可以使用 useradmin 命令创建和配置 sd-hostname 用户。</block>
  <block id="1d658617ac4cfbaf94922daac4881176" category="doc">使用 CLI 将 SD- 主机名添加到存储系统</block>
  <block id="5265ea57ec48d0259cc881d6a67819d4" category="list-text">添加存储</block>
  <block id="771582a67520a47860000dbb25f1238c" category="list-text">设置主机的密码。</block>
  <block id="eb4b52408362541a406cd17b77c09f89" category="list-text">在主机上创建角色。</block>
  <block id="3b2140ac623553ce5e29c788cf457c3c" category="list-text">创建用户组。</block>
  <block id="20bed401ab47e301bdd566f0be400011" category="list-text">创建本地用户。</block>
  <block id="50ec1d1c01e06f8f19d07cb0c14a408b" category="summary">SnapDrive storage connect 命令可将存储实体连接到主机。使用此命令可以将 LUN 和存储实体连接到主机</block>
  <block id="9d05f4cbb0913d3b8b54c7480dbece97" category="doc">storage connect 命令</block>
  <block id="e99c7a5f8f74c7a3c5706fce3c5fe252" category="paragraph">SnapDrive storage connect` 命令可将存储实体连接到主机。使用此命令可以将 LUN 和存储实体连接到主机</block>
  <block id="e5d7fb6f6cf5c95c01eed6370e33e5e2" category="paragraph">使用 SnapDrive storage connect` 命令连接到：</block>
  <block id="6f694a9b25381a70e68a96b81cb5d547" category="paragraph">输入 SnapDrive storage connect` 命令将 LUN 连接到主机时， SnapDrive for UNIX 将执行必要的发现和映射。它不会修改 LUN 内容。</block>
  <block id="a9bb9a3bb6d765151d06c44caf42e796" category="summary">使用 SnapDrive snap list 命令显示 Snapshot 副本名称。</block>
  <block id="2f54f8d17a0c9374a1c92bd3a3b581a2" category="doc">获取 Snapshot 副本名称的其他方法</block>
  <block id="a6d0952cfd6108195b8224b38067cc0c" category="paragraph">使用 SnapDrive snap list` 命令显示 Snapshot 副本名称。</block>
  <block id="dfb1fd871f886a5f2589fad3316b7158" category="paragraph">另一种获取 Snapshot 副本名称的方法是，登录到存储系统并在其中使用 SnapDrive snap list` 命令。此命令显示 Snapshot 副本的名称。</block>
  <block id="03a61b9bfffb034d9c93ebcefb715d42" category="admonition">SnapDrive snap show` 命令相当于 storage system SnapDrive snap list` 命令。</block>
  <block id="b68f7e83efaf4286c59be7bce27439c3" category="summary">您可以显示存储系统，存储系统卷， LUN 和其他存储实体的 Snapshot 副本。使用命令 SnapDrive snap show \ （或 list\ ）显示 Snapshot 副本。</block>
  <block id="19a1651e0b1a78e999149686fb42ec05" category="doc">此时将显示 Snapshot 副本信息</block>
  <block id="5ba0f36d77eea27ff1a1a0282f636e64" category="paragraph">您可以显示存储系统，存储系统卷， LUN 和其他存储实体的 Snapshot 副本。使用命令 SnapDrive snap show` （或 list ）显示 Snapshot 副本。</block>
  <block id="58fb2232c424434e1c40245579e37663" category="summary">在 Red Hat Enterprise Linux 4 和 Oracle Enterprise Linux 4 主机上，每次重新启动后， Snapshot 连接和存储创建操作都会遇到错误消息。</block>
  <block id="fafedfe1e1bf3a3495d348e9cb305deb" category="doc">每次重新启动后， snap 连接都会生成 "0001-680 Admin error ： Host OS requires an update to internal data"</block>
  <block id="59c1aa630fdecbf814206b770170ddc7" category="paragraph">出现以下错误消息的原因是， `sg 驱动程序` 会在重新启动后删除 ` /dev/sgXX` 文件中的所有非活动设备。</block>
  <block id="5a687157010e232bd7538a2df1bf6010" category="list-text">检查 `` /opt/NetApp/SnapDrive/SnapDrive.conf` 文件中配置变量 ` _enable-implicithost- preparation_` 的值。应将其设置为 on 。</block>
  <block id="29584c1b1233d6f171cdb42b4791d341" category="paragraph">重新启动主机后，在使用 SnapDrive for UNIX 之前，请完成以下步骤。</block>
  <block id="f2e9321df9bb29333a37020810697262" category="list-text">输入以下命令，验证是否已加载 SG 和 iSCSI 服务：</block>
  <block id="20e21f3c8af56361dc2030de2a471440" category="paragraph">`lsmod`</block>
  <block id="98fd8c8247f58303f387863fb889dd02" category="list-text">如果未加载 SG 和 iSCSI （如果使用 iSCSI 设置）服务，请输入以下命令：</block>
  <block id="e3b4b9fa337e4a7d5a82363f62daf9e7" category="list-text">`modprobe sg`</block>
  <block id="cb3ffd89f1bedb66f727925cce0eecff" category="list-text">`s服务 iSCSI 启动`</block>
  <block id="1649c7d3b2ef8fb601b2e28274c08c00" category="admonition">如果不想手动执行步骤 2 和 3 ，请在主机启动脚本中添加 `modprobe sg` 和 `sservice iscsi start` 命令。</block>
  <block id="b3209967f4d1d0d7230e07c4130e6a81" category="summary">您可以使用作业 ID 或文件规范停止卷克隆或 LUN 克隆的克隆拆分。</block>
  <block id="d3e76573e3877a5ebfc96ffebcaa9351" category="doc">停止卷克隆或 LUN 克隆拆分操作</block>
  <block id="c78821b56ad2fe56ebdcf1a63f7ddc73" category="paragraph">` * SnapDrive 克隆拆分停止符（ -lun ） _lun_name_ （ _lon_lun_name..._） _[ ｛ -dg _ -vg _ -fs _ hostvol _ -lvol ｝ _file_spec_ 【 file_spec...]] 我们提供了一个或` 一个或一个或一个或一个或一个或一个或一个或两个</block>
  <block id="3ea80925c250ff13867ccd1879b65d44" category="paragraph">SnapDrive for UNIX 将停止正在进行的克隆拆分停止操作。</block>
  <block id="2ca15b7186bd8c05c2dfaea4559210c1" category="paragraph">以下示例显示了使用文件规范停止的克隆拆分操作。</block>
  <block id="436b5ecf41655bc63736b54d12b194f7" category="paragraph">以下示例显示了使用作业 ID 停止的克隆拆分操作。</block>
  <block id="47f7e6cc8ff59647a3c75d832c8ab97f" category="paragraph">以下示例是一个典型输出，其中显示了已停止的文件规范的克隆拆分停止操作。</block>
  <block id="cd5da709fdee3e5f1aa989ab93aef882" category="list-text">如果由于作业 ID 中的特定文件规范而停止克隆拆分，并且克隆拆分停止成功，则会从作业中删除文件规范。</block>
  <block id="0cb36c4ffe9d199ed5c9e0b7ee8aa8e9" category="list-text">如果作业的克隆拆分停止，而作业中所有文件规范的克隆拆分停止成功，则该作业将从作业集中删除。</block>
  <block id="76251431c9f4d36fe7e2f11638d5f8cc" category="summary">SnapDrive for UNIX 支持各种命令。这些命令参考有助于您了解命令，其选项，关键字和参数。</block>
  <block id="6e8602d76e9fef34df4842cd3e73e25b" category="doc">命令参考</block>
  <block id="d09e312cc7f5f1bb5879e91525d2ffb0" category="summary">您可以使用不同的向导高效地创建存储实体并操作 SnapDrive for UNIX 。</block>
  <block id="2842045ad64dc0911d3e1cad34ee38e8" category="doc">使用向导执行的操作</block>
  <block id="b0c56a7cdec1241c6ed73fa917865d3a" category="paragraph">以下 SnapDrive for UNIX 命令具有一个等效的向导来执行操作：</block>
  <block id="a5d9f5bcab793a0f31c511dcfcf235b3" category="list-text">`s存储创建`</block>
  <block id="4fca7c955e84660c18aa62698144ae2c" category="list-text">`snap disconnect`</block>
  <block id="c455385cb2c18cedeb0837a7001b7c08" category="summary">通过 SnapDrive for UNIX ，您可以将存储系统的特定 igroup 添加到主机中，并使用配置的 igroup 执行 SnapDrive 操作。您必须确保 igroup 在存储系统中可用。</block>
  <block id="c50ab1a110338051b3224d932eacf335" category="doc">添加 igroup</block>
  <block id="e100c81b596ee608fbc0fef6ad5efea1" category="list-text">在主机上输入以下命令：</block>
  <block id="fa1e6970ed226e39ed7dbe3d88f970f1" category="paragraph">` * SnapDrive igroup add _igroup_name filer_name_ [_filer_name..._]*`</block>
  <block id="e79109d00f6e24e32aba2857c6ef42b2" category="paragraph">已成功为存储系统面包机添加 `igroup` 。</block>
  <block id="934bf84f217827a9cc71a2a9dddb09f8" category="summary">如果在未将卷卸载到主机系统的情况下在 SVM 上删除卷，并且在执行 SnapDrive storage show -v 命令时，实际路径不正确。</block>
  <block id="2489ff62561b7aa4170c84d4f700077c" category="doc">如果在未将卷卸载到主机系统的情况下删除了 SVM 上的卷，则 SnapDrive storage show 命令会显示不正确的实际路径</block>
  <block id="48486757f7048a7c1e6a71f5777185d3" category="paragraph">如果在未将卷卸载到主机系统的情况下在 SVM 上删除卷，并且在执行 SnapDrive storage show -v` 命令时，实际路径不正确。</block>
  <block id="57624adb0939ed194fb2f4bef7935715" category="paragraph">如果卷未在 SVM 上接合，则也可能会遇到相同的情况。以下示例显示的实际路径不正确：</block>
  <block id="aadd53a3009b665cad6af0a962865f83" category="summary">在 RHEL 上， SnapDrive for UNIX 会对磁盘进行分区，以配置主机存储实体。但是， SnapDrive for UNIX 允许为 SLES 11 上的分区和非分区设备以及仅为 SLES 10 上的非分区设备配置和管理 SnapDrive 操作。</block>
  <block id="ac38313f8b0aa1217d007366b39702e6" category="doc">Red Hat Enterprise Linux （ RHEL ）和 SUSE Linux Enterprise Server （ SLES ）中的存储分区方案</block>
  <block id="8c8e47e32d577c1bb5cfdc4a924b8cc2" category="paragraph">Linux 2.2 和 2.4 内核版本不能使用原始磁盘创建文件系统，因为以往所有 Microsoft x86 系统架构都使用 Windows 操作系统，并且始终对硬盘进行分区。由于初始内核是在 Windows 操作系统上写入的，因此，内核的写入方式也会使硬盘上存在分区。为了在原始设备上创建文件系统，始终会进行进一步的分区。对于磁盘组中的 LUN 和 / 或原始 LUN ，绝不会进行分区。因此，分区方案的任何更改仅限于在原始设备上的文件系统情况下的行为。</block>
  <block id="ff41c12ef8d0c68ae91ad5f2ddf68907" category="summary">您可以使用适用于 UNIX 的 SnapDrive 创建特定数量的新 LUN 。SnapDrive for UNIX 为此提供了特定的命令。</block>
  <block id="0aedb8ba3b41e9b5b206d28408a61bd5" category="doc">为新 LUN 添加主机条目</block>
  <block id="d0ce9df58bb2612b0c443f1d8fa2aa3d" category="paragraph">确保主机已准备好创建特定数量的新 LUN 。这些 LUN 位于映射到主机的存储系统上。</block>
  <block id="5764092249875d449d97dfeb1223a41d" category="list-text">SnapDrive 配置准备 LUN -count 计数`</block>
  <block id="a29a678eabdb1c3527edcaa821076404" category="paragraph">` -count` 是要为主机准备的新 LUN 的数量。</block>
  <block id="12a8f70d181639422b33485d27d6d732" category="paragraph">在 Linux 上，此命令会为当前没有设备文件的每个潜在 LUN 添加一个新的 ` /dev/sg` 设备文件。</block>
  <block id="b8254f6218aa8ce5ed28717fea6aa1aa" category="paragraph">如果您已手动编辑 ` /kernel/drv/lpfc.conf` 文件以获取永久性绑定，请确保 FC-bind-WWPN 条目位于之后</block>
  <block id="6f42ebc125f90b71238cb5032d3f6faa" category="paragraph">` # bEGIN ： lput-managed Persistent Bindings` 。</block>
  <block id="451eb7d991e7a8788893bb8b051bd75e" category="summary">跟踪日志文件允许您设置各种参数，也可以更改这些参数。必须在 SnapDrive.conf 文件中设置这些参数。</block>
  <block id="c3f18b4241a3adac9b92b631e274f46e" category="doc">跟踪日志文件的默认值</block>
  <block id="eea0ed9ca2b4b18ab8e78ef7a596919b" category="paragraph">跟踪日志文件允许您设置各种参数，也可以更改这些参数。必须在 `snapdrive.conf` 文件中设置这些参数。</block>
  <block id="fd2e4107c650788f30426b247556b673" category="paragraph">必须在 `snapdrive.conf` 文件中设置以下值：</block>
  <block id="e72bd99b89b837a331bef43b101cd825" category="list-text">包含跟踪日志的文件的名称。</block>
  <block id="e96c12dfcdd4c2e580452d8a785056e0" category="list-text">跟踪日志文件的最大大小。默认大小为 "0" 字节。此值可确保每个跟踪日志文件仅包含一个 SnapDrive for UNIX 命令。</block>
  <block id="a60c9f435144289f8800c3a461ec8165" category="paragraph">如果将默认大小重置为 0 以外的值，则在文件达到您指定的大小时， SnapDrive for UNIX 将通过在名称中添加任意数字来重命名当前跟踪日志文件。然后，它将使用 `trace-log-file` 值指定的名称启动一个新的跟踪日志文件。</block>
  <block id="96b0b19ac537367e806c3fb58a57a8ec" category="list-text">SnapDrive for UNIX 保存的最大旧跟踪文件数。默认值为 100. 。</block>
  <block id="05f58cefdbfbe0559171e36c69e37e76" category="list-text">SnapDrive for UNIX 写入跟踪日志文件的消息类型。默认情况下，跟踪日志文件包含致命错误，管理员错误，命令错误，警告和信息消息。</block>
  <block id="f398eef159e929a60e9968de29909efc" category="summary">您可以将 SnapDrive for UNIX 配置为禁用一致性组 Snapshot 副本。</block>
  <block id="f89b448924eed44fd29bf04ac732c8e5" category="doc">禁用一致性组 Snapshot 副本</block>
  <block id="90bd1d70191335d705a79fedb6c343b1" category="list-text">输入 ...</block>
  <block id="81eea31ccd1de5747b7925eda7c66bb6" category="paragraph">` * SnapDrive snap create _-FS_ /mnt/fs3 _-snapname_ nfs_snap _-nodfilerfence_*`</block>
  <block id="8a8611c5cf0065a61bd95fd1d66594ad" category="paragraph">已成功禁用一致性组 Snapshot 副本。</block>
  <block id="0628902c5a82e880db6f0eddfd85c2c8" category="summary">使用 SnapDrive 时，您必须了解与 LUN 相关的限制。</block>
  <block id="3202f84a4fe2a1013e7fb59631d8d8d1" category="doc">由 SnapDrive 管理的 LUN 的限制</block>
  <block id="65e7dd9c2d1e58c97a6788321c68df73" category="list-text">由 SnapDrive 管理的 LUN 不能用作启动磁盘或系统磁盘。</block>
  <block id="f38f52f861ccb05843c99592e01486df" category="list-text">Linux 主机对可创建的 LUN 数量有操作系统限制。</block>
  <block id="b9589b5a300c107cb024f47ea5500675" category="paragraph">在这些主机上创建 SnapDrive 配置检查 lun` 命令时，您可以运行 lun config check lun 命令。使用此命令可以确定可以创建的 LUN 数量。</block>
  <block id="563f70489ab3a15f55f03db4a9ebbeea" category="list-text">SnapDrive 不支持在 LUN 和 Snapshot 副本名称的长格式中使用冒号（：）。</block>
  <block id="ebcffa0ccef83a8243eb81dfcf02054e" category="paragraph">可以在长 Snapshot 副本名称的组件之间或 LUN 的存储系统名称和存储系统卷名称之间使用冒号。例如， `Toaster/vol/vol1 ： snap1` 是典型的长 Snapshot 名称，而 `Toaster/vol/vol1/luna` 是典型的长 LUN 名称。</block>
  <block id="06cbbb53b9f826993943cbe7a5980f6c" category="summary">您需要更改 SnapDrive.conf 文件中的几个配置变量，才能使 MPIO 与 Linux 配合使用。</block>
  <block id="789d0fdca65fdcf06a19b7637801cea6" category="doc">多路径配置变量</block>
  <block id="ec676c6545e3db56d986ae50c041456e" category="paragraph">您需要更改 `snapdrive.conf` 文件中的几个配置变量，才能使 MPIO 与 Linux 配合使用。</block>
  <block id="33a6fd47b30f600cf279eb1c0bb33ff4" category="paragraph">在主机上安装 SnapDrive for UNIX 后，编辑 ` /opt/NetApp/SnapDrive/SnapDrive.conf` 文件并将以下设置更改为相应的值：</block>
  <block id="f7210e8daf6bf7b53c47d389f2f28ba6" category="paragraph">重新启动 SnapDrive 守护进程，使 `snapdrive.conf` 文件更改生效。SnapDrive 守护进程重新启动后， SnapDrive 命令将使用 DM-MP 堆栈启动。</block>
  <block id="6089d5726963eff97e726864edb41f87" category="summary">在要将管理流量和数据流量分开的环境中，多个子网非常有用。这种隔离为管理网络流量创建了一个更安全的环境。在此类环境中，在服务器上运行的 SnapDrive 4.1.1 for UNIX 及更高版本支持在独立环境以及主机和 HA 对环境中可用的所有 SnapDrive 操作。</block>
  <block id="20e04dd1bc6f732e0796455a2162a4b6" category="doc">多子网配置</block>
  <block id="fabc3c026ccc7ad75738f182e9e57c67" category="paragraph">与存储系统管理相关的数据通过管理界面传输。DataFabric Manager ， Protection Manager 和 SnapDrive for UNIX 可以是管理界面的一部分。数据接口用于存储系统之间的数据流量。</block>
  <block id="6cd3708d37592e3fbdc65619e492ac60" category="paragraph">要在环境中配置多个子网，应将 `mgmtpath` 选项与 SnapDrive config set` 命令结合使用。</block>
  <block id="0b9aad15da016dabaa6f15f6f7428e76" category="paragraph">SnapDrive for UNIX 不支持在存储系统的主机名与公有名称不同但这两个名称解析为同一 IP 地址的 SAN 环境中执行操作。要解决此情况，您可以执行以下操作之一：</block>
  <block id="614c884ae1f4a2d3c3d5f96dc6ec31a4" category="list-text">为系统名称分配不同的 IP 地址。</block>
  <block id="2b46c31d5663dd6e243683c5f8d958e9" category="list-text">配置系统，使其在您尝试连接时不会回复。</block>
  <block id="8089611f46eecee6adc7f13c24a04c07" category="summary">您可以查看主机上配置的所有 igroup 。</block>
  <block id="d9cddf59570308d4a112801175370dc8" category="doc">查看 igroup 列表</block>
  <block id="3a43d52ef636df8717a37e847c3dc533" category="list-text">在主机系统上输入以下命令：</block>
  <block id="d3124fa93e120033dcefb17c5ee5f799" category="paragraph">` * SnapDrive igroup list*`</block>
  <block id="03f75874ca159290bc67f2709a763151" category="summary">您可以通过执行 SnapDrive config delete 命令从 SVM 中删除登录信息。</block>
  <block id="69f976d4f37bb09203be0728fb8f75eb" category="doc">从 SVM 中删除用户</block>
  <block id="ac2c270808703d90848e158b052414bb" category="paragraph">您可以通过执行 SnapDrive config delete` 命令从 SVM 中删除登录信息。</block>
  <block id="44b503f47854609c63431e267a8980fb" category="paragraph">` * SnapDrive 配置 delete _appliation_name_*``</block>
  <block id="5f15161dbeb8726b9d4c4d7f9d77e0e9" category="paragraph">` 设备名称 _` 是要删除登录信息的 SVM 的名称。</block>
  <block id="f515c510616ae7b3e9adf0010e51e265" category="paragraph">SnapDrive for UNIX 将删除您指定的 SVM 的登录信息。</block>
  <block id="2cb06d3063315efa4467392af55cc477" category="summary">Operations Manager 控制台可发现您的网络支持的存储系统。它会定期监控从发现的存储系统收集的数据。数据将按设置的间隔刷新。Operations Manager 控制台管理员可以配置刷新间隔。</block>
  <block id="656e9277919651a1add7d9eacdac599e" category="doc">Operations Manager 控制台上的存储系统自动更新</block>
  <block id="88e35e3f7564b438ba395f20dda2a3fd" category="paragraph">LUN 监控间隔， qtree 监控间隔和 vFiler 监控间隔是决定 LUN ， qtree 和 vFiler 更新频率的重要字段。例如，如果在存储系统上创建了新的 LUN ，则新的 LUN 不会立即在 Operations Manager 控制台上更新。因此，向 Operations Manager 控制台发出的对该 LUN 的访问检查将失败。为了避免这种情况，您可以根据需要修改 LUN 监控间隔。</block>
  <block id="5c346ca6596f83e17d5af771220b4253" category="list-text">在 Operations Manager 控制台中选择 * 设置 * &gt; * 选项 * 以更改监控间隔。</block>
  <block id="8c3f083df5f5c0876bc59c7dc4927ef3" category="list-text">Operations Manager 控制台管理员还可以通过在命令行界面中执行 `dfm host discovery filername` 来强制刷新 Operations Manager 控制台。</block>
  <block id="f9fc91823fa473086bd20fe5ef13c29a" category="list-text">Operations Manager 控制台管理员还可以将全局组上的 `Dfm.Database.Write` 功能授予 SD-admin ，以使 SnapDrive for UNIX 能够刷新 Operations Manager 控制台上的存储系统实体。</block>
  <block id="ac93f7c326c1020322c0ebc9da98c5e8" category="summary">连接到 Snapshot 副本时， Snapshot 副本会克隆信息。</block>
  <block id="66e380409b999a3acada8b061175b91e" category="doc">Snapshot 连接和 Snapshot 还原操作</block>
  <block id="62d63aa8e36cfddcd46367b02711326c" category="paragraph">与 Snapshot 还原操作不同， Snapshot 连接操作不会将构成主机实体的 LUN 的现有内容替换为 Snapshot 副本内容。它会克隆信息。</block>
  <block id="864dd409c639bd99257470895dc6f19f" category="paragraph">建立连接后， Snapshot 连接和 Snapshot 还原操作都会执行类似的活动：</block>
  <block id="33ca303f6e7bd46534bb4fccc069e955" category="list-text">Snapshot 连接操作会激活存储实体的逻辑卷，挂载文件系统，并可选择向主机文件系统表添加一个条目。</block>
  <block id="33de75e648fb6780a753f25713ba56b0" category="list-text">Snapshot 还原操作会激活存储实体的逻辑卷，挂载文件系统并应用 Snapshot 副本中保留的主机文件系统挂载条目。</block>
  <block id="766a9002dea19c00b8ff4e74794fa286" category="summary">将 SUSE Linux Enterprise Server \ （ sles\ ）从 10 升级到 11 后，适用于 UNIX 的 SnapDrive 显示错误。您必须创建基本设备名称并挂载文件系统。</block>
  <block id="c81d7e6b383b7f026618a87aa8d69bb7" category="doc">在将 SUSE Linux Enterprise Server 从版本 10 升级到 11 之后， SnapDrive for UNIX 将显示一条错误消息</block>
  <block id="af87041137dae6ba261b5c6da81d180f" category="paragraph">将 SUSE Linux Enterprise Server （ SLES ）从 10 升级到 11 后，适用于 UNIX 的 SnapDrive 显示错误。您必须创建基本设备名称并挂载文件系统。</block>
  <block id="19dfe5e1e938d59c99cd558aee49cae0" category="paragraph">执行存储操作时， SnapDrive for UNIX 会报告以下错误： `0001-791 Admin error ： device /dev/sdc does not have a partition.要支持文件系统 /mnt/testfs 的持久挂载，需要一个分区。使用 "-noperator" 选项` 重试命令</block>
  <block id="eca06193114c6221868876f8b9ee15e5" category="list-text">使用选项 ` -fs` 和 ` -noperit` 来记录基本设备名称，如以下示例所示：</block>
  <block id="dda20a250a0de3adc0957fd183684de6" category="paragraph">` * IBMX336-250-111 ： /etc/udev/rules.d# SnapDrive storage connect -fs /mnt/testfs -lun f3020-207-11 ： /vol/san1/lun200_0 -nolvm -noperate*``</block>
  <block id="66b66d7f91690414c3b833bd428ea08e" category="paragraph">未按预期创建文件系统，但会记录基本设备名称（在此示例中为 ` /dev/sdc` ）。</block>
  <block id="61f2543d131920ffe0a7bc3b5984f9bd" category="list-text">在基本设备名称中创建 `mkdir -p /mnt/testfs` 目录。</block>
  <block id="08d9a3fb28e37e28c399267d58a5e976" category="list-text">运行 `blkid` 。</block>
  <block id="ed4c583b8e24e0974fe35337a9185ec8" category="list-text">指定以下内容：</block>
  <block id="235694dd404b005c8f72d4b7a03c771a" category="paragraph">` * UUID = 239ae9a1-75fd-4faf-b9f4-a0b80bf7b62c /mnt/testfs ext3*`</block>
  <block id="e1a85a2b137f75b229dc68eb7cfcb9c0" category="list-text">挂载文件系统：</block>
  <block id="f77848387d4c3a508005415d9d12d038" category="paragraph">` * # 挂载 /mnt/testfs*``</block>
  <block id="56ad192c932f36764d976a8afcf8740c" category="list-text">显示存储选项：</block>
  <block id="d392963095c2aba92e16e111de8d6288" category="paragraph">` * # SnapDrive storage show -fs /mnt/testfs3*`</block>
  <block id="7b60e88f0b9115d129e69ff015381a1e" category="summary">SnapDrive for UNIX 可帮助您维护各种类型的日志文件，例如审核，恢复和跟踪日志文件。这些日志文件稍后将用于故障排除。</block>
  <block id="81d94ecd7b11a58f4ecfd57f4030b3b3" category="doc">SnapDrive for UNIX 中的审核，恢复和跟踪日志记录</block>
  <block id="a3a08a53e542a15d690521c0a6a169b9" category="summary">SnapDrive for UNIX 管理员从 Operations Manager 控制台管理员处接收用户凭据。要正确执行存储操作，需要在适用于 UNIX 的 SnapDrive 上配置这些用户凭据。</block>
  <block id="a37429487c09f70664d32ef9a9f0cb2e" category="doc">在 SnapDrive for UNIX 上配置用户凭据</block>
  <block id="7ee34269684a378da9035e92c949cdcc" category="list-text">在存储系统上配置 SD-admin 。</block>
  <block id="e5120d6d1933d4bafa464020de339c1c" category="list-text">在存储系统上配置 SD 主机名。</block>
  <block id="a1a76494f1c193ee5f889088efff872f" category="list-text">使用 SnapDrive config list` 命令验证步骤 1 和步骤 2 。</block>
  <block id="9a9ba372b67373682d6506091841768e" category="list-text">通过在 `snapdrive.conf` 文件中设置配置变量 `rbac 路由方法 ="dfm"`` ，将 SnapDrive for UNIX 配置为使用 Operations Manager 控制台基于角色的访问控制（ RBAC ）。</block>
  <block id="b06bef5033d4b743c53bd1aadf79f1a7" category="admonition">用户凭据会进行加密并保存在现有的 ` .sdupw` 文件中。早期文件的默认位置为 ` /opt/netapp/snapDrive/.sdupw` 。</block>
  <block id="e29967f2f124b5ec46a184c491de5040" category="summary">您需要准备主机以添加 LUN 。</block>
  <block id="336921e3e70c67a0eca15c9e0a2efbf6" category="doc">主机准备添加 LUN</block>
  <block id="0c731e27893a06b1df47752443f1976e" category="inline-xref-macro">SnapDrive for UNIX 中支持 VMware VMotion</block>
  <block id="085e04a0b1c81542a3b7acdf31adfb7d" category="paragraph"><block ref="085e04a0b1c81542a3b7acdf31adfb7d" category="inline-xref-macro-rx"></block></block>
  <block id="4e134bf466aa0390d0e866c61ad8ec4a" category="summary">您可以使用 SnapDrive snap delete 命令删除存储系统上的 Snapshot 副本。</block>
  <block id="1b13ec99679ea14be9485d8a18526b67" category="doc">删除 Snapshot 副本</block>
  <block id="0d3c052981f2bcb958b3367b2e8d7bb7" category="summary">您可以使用 SnapDrive portset delete 命令删除在 SnapDrive 中配置的端口集。</block>
  <block id="552b7851baf87f56581694321ca845cd" category="doc">从 SnapDrive 中删除端口集</block>
  <block id="c38770638b6b2ffcf2be51161875b0c6" category="paragraph">您可以使用 SnapDrive portset delete` 命令删除在 SnapDrive 中配置的端口集。</block>
  <block id="c7ac801b8546f870328e8525caf2e53d" category="paragraph">` * SnapDrive 端口集 delete _filername_ [_filername..._]*`</block>
  <block id="12af06e7f0c4472a87c9d08963f671b3" category="paragraph">` _filername_` 是配置端口集的 Vserver 名称。</block>
  <block id="f22a3399c23240e89abedd6505b96a2a" category="paragraph">已成功删除为 SnapDrive 配置的端口集。</block>
  <block id="742e781ab6ec591ecc5f188d63e071fc" category="summary">使用 snapshot snap rename 命令重命名 Snapshot 副本。</block>
  <block id="ca8402bc840f1cbfa983acd46b43121d" category="doc">用于重命名 Snapshot 副本的命令</block>
  <block id="91a5222a20de70ac9515eb150a788fa3" category="paragraph">使用 `snapshot snap rename` 命令重命名 Snapshot 副本。</block>
  <block id="6bcd13b2c17d838b5e0d5700dacc750a" category="summary">在使用 SnapDrive storage resize 命令之前，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="e22f3925b37ab840b0cc3b68f196cfc9" category="doc">使用 SnapDrive storage resize 命令所需的信息</block>
  <block id="eff5aa803cab892c49b84b29b412b49a" category="paragraph">在使用 SnapDrive storage resize` 命令之前，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="49246fc3e4428f502ac4d02b8675edac" category="paragraph">确定是否要增加磁盘或卷组的大小，并使用相应的参数输入此实体的名称。</block>
  <block id="3e2b25700f59264384783f548cd80947" category="paragraph">磁盘组（ -dg file_specs ）或卷组（ -vg file_specs ）</block>
  <block id="9770816c3adecd84579967497bc67d07" category="paragraph">磁盘或卷组的名称 _</block>
  <block id="9376eb73dde152f8ff7c17d4aca020d9" category="paragraph">确定要如何增加存储大小。使用此命令时，请记住以下几点：</block>
  <block id="c434ab8c133c1d828213315052a2735d" category="list-text">使用 ` -growby` 选项将实体大小增加在 size 参数中指定的字节。</block>
  <block id="bfdad4854762787968d79d76f61d23b4" category="list-text">使用 ` -growto` 选项增加实体大小，使新的总大小为 ` size_` 参数中指定的字节数。</block>
  <block id="7ffbb58e2cb46ca46c306bfe981720a2" category="list-text">使用 ` -addlun` 选项向底层磁盘组添加内部生成的新 LUN ，以增加实体大小。如果不使用此参数，则 SnapDrive for UNIX 会增加磁盘组中最后一个 LUN 的大小，以满足在 ` -growby` 选项或 ` -growto` 选项中指定的字节大小。</block>
  <block id="ae503bf356144593e09601662d336fd8" category="paragraph">指定要增加存储的字节数（` -growby _size_` ）</block>
  <block id="34b5640236dbf1afdd276d12134f8ee4" category="paragraph">` 字节数 _ 字节 _`</block>
  <block id="1dde7cd4f74274ed5ae5437ec07cc418" category="paragraph">以字节为单位指定存储要达到的大小（` -growto _size_` ）</block>
  <block id="7e3b56ab4783cc8546e1653b865537d9" category="paragraph">告诉 SnapDrive for UNIX 通过向磁盘组添加新 LUN 来增加大小（` -addlun` ）</block>
  <block id="77391f6a3a124ed5e4643832cfb8ed34" category="paragraph">告诉 SnapDrive for UNIX 增加大小，无论是否创建空间预留 ` -reserve | -noreserve`</block>
  <block id="290cd2f4eb210da8db2783ccaf3cf4e8" category="summary">在非源主机上执行 Snapshot 连接操作后，对原始 LUN 上的文件系统执行 Snapshot 还原操作将失败。</block>
  <block id="a0c594cb1831c92ec21d4ad35a7a0a33" category="doc">Snapshot 还原操作无法还原原始 LUN 上的文件系统</block>
  <block id="a7ce51babf0f8ba2bef277e1b946028c" category="paragraph">如果克隆的 LUN 连接到 Snapshot 副本中的同一文件规范，然后您尝试执行 SnapDrive snap restore 命令，则会显示以下错误消息。</block>
  <block id="9e83495ba1c639bfd267761750a2759e" category="paragraph">命令失败，因为在删除克隆的 LUN 时， iSCSI 守护进程会重新映射已还原的 LUN 的设备条目。</block>
  <block id="0bccb73df0df2fdc3a7b55e1a8281221" category="paragraph">您可以执行以下任一操作：</block>
  <block id="1fdc6e07a0e07d6c12b16e7aa44d682a" category="list-text">再次执行 SnapDrive snap restore` 命令。</block>
  <block id="e9967f198af507a6a2571ee8fbe5bfa0" category="list-text">在尝试还原原始 LUN 的 Snapshot 副本之前，请删除已连接的 LUN （如果它挂载在 Snapshot 副本中的同一文件规范上）。</block>
  <block id="d86a2dc6210d40d27d5194746c2b4293" category="summary">RBAC 允许 SnapDrive 管理员在执行各种 SnapDrive 操作时限制对存储系统的访问。存储操作的这种有限或完全访问权限取决于分配给用户的角色。</block>
  <block id="c5d02c4f80b6b9f6397e50767d89b3e2" category="doc">什么是 SnapDrive for UNIX 中基于角色的访问控制（ RBAC ）</block>
  <block id="89e604e8c9753b1a745cc8e9470df9fa" category="paragraph">SnapDrive 4.0 for UNIX 及更高版本要求对所有 SnapDrive for UNIX 操作执行 RBAC 访问检查。此行为允许存储管理员根据分配的角色限制 SnapDrive 用户可以执行的操作。RBAC 是使用 Operations Manager 基础架构实施的。在 SnapDrive 4.0 for UNIX 之前的版本中，访问控制受限，只有 root 用户可以执行 SnapDrive for UNIX 操作。SnapDrive 4.0 for UNIX 及更高版本可使用 Operations Manager 控制台的 RBAC 基础架构为非 root 本地用户和网络信息系统（ Network Information System ， NIS ）用户提供支持。SnapDrive for UNIX 不需要存储系统的根密码；它使用 SD-&lt;hostname&gt; 用户与存储系统进行通信。</block>
  <block id="2e533d7242c7885a3ff5c5421776cf1b" category="paragraph">默认情况下，不使用 Operations Manager 控制台 RBAC 功能。您必须通过在 `snapdrive.conf` 文件中设置变量 ` _rbac 方法 =dfm_` 来启用 RBAC 功能，然后重新启动 SnapDrive for UNIX 守护进程。</block>
  <block id="810a7e7ff36a65913e9b1dbeade7ec2d" category="paragraph">要使用此功能，必须满足以下要求：</block>
  <block id="0fafe9376e0ea552a24913b96c10b297" category="list-text">Operations Manager 控制台 3.7 或更高版本。</block>
  <block id="5a55456c947ab8e70748954d880e69af" category="list-text">Operations Manager 控制台服务器必须位于包含 SnapDrive 主机和存储系统的 IP 网络中并进行配置。</block>
  <block id="7f1bdd559ee98f4b37114d9f5a2d5932" category="list-text">必须在 SnapDrive 安装期间配置 Operations Manager 控制台通信设置。</block>
  <block id="b0f41ee2983dcc13846c327ca79b71e2" category="list-text">SnapDrive for UNIX 守护进程应正在运行。</block>
  <block id="59b57ba46804bfafa85f1f951c293bfa" category="summary">您可以使用 SnapDrive 命令显示存储系统卷上的 Snapshot 副本。</block>
  <block id="0617cdcd6a2c0e87093d8e6cd4f604c4" category="doc">显示存储系统卷的 Snapshot 副本</block>
  <block id="ebbdd7c64562d0bb468f2e1419b89b73" category="paragraph">要显示有关存储系统卷的 Snapshot 副本的信息，请使用以下语法：</block>
  <block id="5e2f1f085c4b5bd3a5e7520234c59d55" category="paragraph">SnapDrive snap show -filervol filervol [filervol...] 【 -verbose 】`</block>
  <block id="895b22d92df5362423d2e8807b61845d" category="summary">如果在配置值中指定了特殊字符，则 SnapDrive for UNIX 会错误地对美元符号（ $\ ）和所有特殊字符进行不同的解释。</block>
  <block id="808ce48ea57374ace5e17e99f92941d3" category="doc">SnapDrive for UNIX 对美元符号的解释不正确</block>
  <block id="0cf05a6cb4e2d20d81eada8b59d11fb3" category="paragraph">如果在配置值中指定了特殊字符，则 SnapDrive for UNIX 会错误地对美元符号（ $ ）和所有特殊字符进行不同的解释。</block>
  <block id="46b9791a3bcb67b95e194caa38c8c7ab" category="paragraph">所有指定的配置值均应为数字。如果在配置值中指定 $ 或任何其他特殊字符，则 SnapDrive for UNIX 将接受此值，但会以不同的方式解释在特殊字符之后提及的数值。</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="section-title">示例</block>
  <block id="7ce3679bfd633baea0eae113b2e03380" category="paragraph">下面是如何解释 $ 的示例：</block>
  <block id="f58689fda7c973c868ed58c96de93cb9" category="paragraph">在此示例中， SnapDrive for UNIX 会将配置值（ $123 ）解释为 23 。</block>
  <block id="de50bf48438b6edd880078394fc32f1a" category="paragraph">在 $ 之前指定反斜杠（ \ ）。按如下所示修改上一个示例：</block>
  <block id="c995568f2809c58bfa16d707529b8398" category="summary">您可以使用 SnapDrive config list 命令验证是否已在适用于 UNIX 的 SnapDrive 中配置虚拟接口。</block>
  <block id="e09fc2f77e2875ad878e77e55c908476" category="doc">验证 Virtual Storage Console 的登录信息</block>
  <block id="9d83cad16ad3f1b4d80ea835f4a630b3" category="paragraph">您可以使用 SnapDrive config list` 命令验证是否已在适用于 UNIX 的 SnapDrive 中配置虚拟接口。</block>
  <block id="a9ef0401a0adc3834ed2a2752c31ccd8" category="list-text">输入以下命令： SnapDrive config list`</block>
  <block id="77425aaf40c8a6ca15fbc40838430788" category="paragraph">此命令显示 SnapDrive for UNIX 中指定的用户名或虚拟接口。此操作不会显示虚拟接口系统的密码。</block>
  <block id="5bb52fcfe274d52638013bcaa2b1fabc" category="paragraph">以下示例显示了与名为 ruffleskin 的虚拟接口对应的用户。</block>
  <block id="8cc3d3c1c5ef6239859069e7b071d990" category="summary">HBA 设置是指在 Linux 主机上安装适当 HBA 卡和支持的驱动程序的过程。</block>
  <block id="4e772f9d607688b72d7de2e1128966ce" category="doc">HBA 设置</block>
  <block id="d05895f9189218e776b3f4c4aaff8485" category="paragraph">以下是 Linux MPIO 配置支持的 HBA 卡：</block>
  <block id="d2715abf3b31f96147ad3b6d9175fc43" category="list-text">QLogic</block>
  <block id="0daad057770e74e10cede27e96f469f8" category="list-text">Emulex</block>
  <block id="ff6e1594fcfdc905fc4a16cdd883e869" category="paragraph">具有 RHEL4 Update 6 及更高版本的 FC Host Utilities Linux Attach Kit 3.0 及更高版本支持这些 HBA 卡。</block>
  <block id="2c9d8d20a4927c4d17b7907f83e7d018" category="summary">某些 SnapDrive for UNIX 命令用于存储配置。</block>
  <block id="1554e18c0a94a71b7112455af8788ccc" category="paragraph">以下命令行选项用于存储配置操作：</block>
  <block id="f11d937a08999909800f5f801bee5e7b" category="cell">命令行选项</block>
  <block id="686e697538050e4664636337cc3b834f" category="paragraph">创建</block>
  <block id="5647d9191572d4804c7b2fd67806a6af" category="paragraph">SnapDrive storage create -lun _long_lun_name LUN_name ...]_ -lunsize _size_ [ ｛ -dg _ -vg ｝ _dg_name_] 【 -igroupig_name _____]] 【 ｛ -reserve | -noreserver]]]] 【 -fstype _type_] 】【 -vmtype _type_type_v_ ｝`</block>
  <block id="4ac145f51397d2ff7e9b33e2c2bc5008" category="paragraph">SnapDrive storage create ｛ -lvol _ -hostvol ｝ _file_spec_ ｛ -dg _ -vg ｝ _dg_name_] ｛ -dgsize _ -vgsize ｝ _size_-filervol _lor_filer_path_ ｛ -noreserve _ -reserve ｝ ] 【 -fstype _type_】 【 -vmtype _type_type_ 】`</block>
  <block id="55514dc8d781d6c4b302e569590c1fd7" category="paragraph">SnapDrive storage create -fs _file_spec_ -nolvm （ -fsopts options ） "-mntopts options] （ -noperatest] ） ｛ -lun _long_lun_name_ _ - -filervol _long_filer_path_ ｝ -lunsize _size_ （ -igroup _vm_name _ ）（ _ig_name ..._ ） _noresype` _</block>
  <block id="209501ab22c08e0c350bf29d4231a25e" category="paragraph">SnapDrive storage create _host_lvm_fspec_ -filervol _lor_filer_path_ -dgsize _size_ "-igroup _ig_name_ [_ig_name ..._]] [ ｛ -reserve _ -noreserver] ｝`</block>
  <block id="dfceb2bf2d06238bd81a5e38382ef8b1" category="paragraph">SnapDrive storage create _host_lvm_fspec_ -lun _long_lun_name_ [_lun_name ..._] -lunsize _size_ [-igroupg_name [ig_name ...]] [ ｛ -reserve | -noreserve ｝ ]`</block>
  <block id="76d3acfa185c267959c95d8b1071e122" category="paragraph">您可以根据要创建的存储类型对 ` -file_specs` 参数使用任意格式。（请记住， ` -DG` 是 ` -vg` 的同义词， ` -hostvol` 是 ` -lvol` 的同义词。）</block>
  <block id="5f3d7d9993e15be11400dfa61a78e82c" category="paragraph">要直接在 LUN 上创建文件系统，请使用以下格式： ` -fs _file_spec_ （ -nolvm -fs _type_） "-fsops _options_] （ -mntopts _options_） （ -vmtype _type_）`</block>
  <block id="798642a2b3953384df1a6f27a35ba29b" category="paragraph">要创建使用磁盘组或主机卷的文件系统，请使用以下格式： ` -fs _file_spec_ （ -fstype _type_） [-fsopts _options_] （ -mntops _options_） [-hostvol _file_spec_] （ -dg _dg_name_） ] （ -vmtype _type_）`</block>
  <block id="720c76d2b7a4bec521e7eff297b2f14b" category="paragraph">要创建逻辑卷或主机卷，请使用以下格式： ` [-hostvol _file_spec_] [-dg _dg_name_] [-fstype _type_] [-vmtype _type_]`</block>
  <block id="a4795313484ac9e378d43312b976e385" category="paragraph">要创建磁盘组，请使用以下格式： ` -dg _dg_name_ [-fstype _type_] [-vmtype _type_]`</block>
  <block id="49ab28040dfa07f53544970c6d147e1e" category="paragraph">连接</block>
  <block id="b7520b2a8d85648f1668c70400663d58" category="paragraph">SnapDrive storage connect -fs _file_spec-nolvm_ -lun _lun_name_ "-igroup _ig_name _ [_ig_name ..._]] [-noperisure] [-mntopts options] [-fstype _type_] [-vmtype _type_]`</block>
  <block id="41801a52a593304dfe766f333af6fde9" category="paragraph">SnapDrive storage connect -fs _file_spec_ -hostvol _file_spec_ -lun _lun_name_ [_lun_name ..._] [-igroup _ig_name_ [_ig_name ..._]]]-noperuse] [-mntopts options] [-fstype _type_] [-vmtype _type_type_]`</block>
  <block id="318fd2cc4317c206645a2ccfa9169571" category="paragraph">SnapDrive 存储连接 -lun _lun_name_ [_lun_name ..._]-igroup _ig_name_ [_ig_name ..._]-vmtype _type_]`</block>
  <block id="13b33ee21ed5ab586e17f1732f2dd9e5" category="paragraph">SnapDrive 存储连接 -lun _lun_name_ _lun_name..._]-vmtype _type_]`</block>
  <block id="09be431a5c83aaf237dde8f5017c9f33" category="paragraph">SnapDrive 存储连接 -fs _file_spec_ ｛ -hostvol _ -lvol ｝ _file_spec_ -lun _lon_name_ [_lun_name..._] 【 -noperesist] 【 -mntopts 选项】【 -fstype _type_] 【 -vmtype _type_] 】`</block>
  <block id="42ae25231906c83927831e0ef7c317ac" category="paragraph">断开连接</block>
  <block id="b743bedfa2cc65e0c6766505424c95bc" category="paragraph">SnapDrive storage disconnect -lun _long_lun_name_ [_lun_name..._] [-vmtype _type_]`</block>
  <block id="86e378bcac64ed3db9e8f948f2204f17" category="paragraph">SnapDrive 存储断开连接 ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ [_file_spec__]] ｛ -vg _ -dg _ -fs _ lvol _ -hostvol ｝ _file_spec_ … ] …… ] 【 -full】 【 -fstype _type_】 【 -vmtype _type_】`</block>
  <block id="9d723d04c40bfd81835c0766a698cf63" category="paragraph">调整大小</block>
  <block id="1f24b5fee22e73bc69ffd9a572e1c4b9" category="paragraph">SnapDrive 存储调整大小 ｛ -dg _ -vg ｝ _file_spec_ [_file_spec_..._] ｛ -growby _ - -growto ｝ _size_ [_addlun_ [-igroup _ig_name_ [_vmig_name ..._]] ] ｛ -reseserve _ -noreserve ｝ ]] 【 -fstype _type _type____type_______type___________type__&lt;_________`</block>
  <block id="b06deb375679d597ef753ec3cac801dc" category="paragraph">显示 / 列表</block>
  <block id="a0d7f7573e1820e3bb2d1f6a1361a31f" category="paragraph">SnapDrive 存储 ｛ show | list ｝ -filer _filername_ [_filername ..._] [-verbose ] [-quiet ] [-capabilities ]`</block>
  <block id="573855b680ba45c8b1ae9c74f3a8bff0" category="paragraph">SnapDrive 存储 ｛ show | list ｝ -filervol _lor_filer_path_ [_filer_path..._] 【 -verbose 】【 -quiet 】【 -capabilities 】`</block>
  <block id="0dc4bb8cc3121de78841a3385b8ee6c5" category="paragraph">SnapDrive storage ｛ show | list ｝ ｛ -all | device ｝ ｛ -capabilities ｝`</block>
  <block id="842c0e11b285c23ee5edb21a35711211" category="paragraph">SnapDrive storage show [-verbose ] ｛ -filer _filername_ ___filername..._] | -filervol _volname_ [_volname..._] ｝ ｛ -capabilities ｝`</block>
  <block id="db0b9241f7b21591b05e95ffc099fa05" category="paragraph">SnapDrive 存储 ｛ show | list ｝ -lun _long_lun_name_ [_lun_name ..._] [-verbose ] [-quiet ] [-status] [-capabilities ]`</block>
  <block id="d67cfe08c4a0c8866763f3577b63d3f2" category="paragraph">SnapDrive 存储 ｛ show` list ｝ ｛ -vg | -dg | -fs | -lvol _hostvol ｝ _file_spec_ [_file_spec_..._] ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ [_file_spec___]] vm-verbes] 【 -verby__type_status_&lt;__sttype_&lt;__status____________capabilities 】</block>
  <block id="e287084fa0d659e0f5224c1c576d6bc4" category="paragraph">SnapDrive 存储 ｛ show | list ｝ ｛ -filer _filer_name_ __filer_name ..._] ； -filervol _lor_filer_path_ [_filer_path ..._] ｝ ｛ -verbose ｝ ｛ -capabilities ｝ ｛ -quiet ｝`</block>
  <block id="0d88b67e7227d42497f3d494d4dd3e9e" category="paragraph">SnapDrive 存储 ｛ show | list ｝ -lun _lon_lun_name_ [_lun_name ..._] [-verbos] [-status] [-fstype type] [-vmtype type] [-capabilities ] [-quiet ]`</block>
  <block id="f2a6c498fb90ee345d997f888fce3b18" category="paragraph">删除</block>
  <block id="fa2e4bf35bad9a7bf8199778f65e191f" category="paragraph">SnapDrive 存储删除（ -lun ） _long_lun_name_ （ lun_name ） 【 -fstype type】 【 -vmtype 】`</block>
  <block id="935628621cec4ea23b80043fc4128d91" category="paragraph">SnapDrive 存储删除 "-vg | -dg | -fs | -lvol | -hostvol] _file_spec_ [file_spec...] [ ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ [file_spec...] …… ] 【 -full】 【 -fstype 类型】【 -vmtype 类型】`</block>
  <block id="e3762e8c4550a0a5fec8545701fea63d" category="paragraph"><block ref="e3762e8c4550a0a5fec8545701fea63d" category="inline-xref-macro-rx"></block></block>
  <block id="4b65fb8b23505a846cebfbf8451b274a" category="summary">删除旧的 Snapshot 副本以释放存储系统卷上的空间，或者保留较少的 Snapshot 副本。</block>
  <block id="2470caaf1853aed9857f2f92b499e421" category="doc">删除 Snapshot 副本的原因</block>
  <block id="bf03990993fc5620a0875bbdb61d48c9" category="paragraph">由于以下原因，您可能会删除较早的 Snapshot 副本：</block>
  <block id="c8c941dd5737ddec689331b0e81a8f6f" category="list-text">在存储系统卷上保留的已存储 Snapshot 副本数少于硬限制 255 。达到限制后，创建新 Snapshot 副本的尝试将失败。</block>
  <block id="0db30babf200e9b48deef789e5ed5bb9" category="list-text">以释放存储系统卷上的空间。即使在 Snapshot 副本达到限制之前，如果磁盘没有足够的预留空间， Snapshot 副本也会失败。</block>
  <block id="735b1940265202433f2979c31ff65632" category="list-text">您也可以在 Snapshot 副本名称中使用通配符（ * ）。使用 Snapshot show 操作可以使用通配符显示与特定模式匹配的所有 Snapshot 副本名称。以下规则适用于在 Snapshot 副本名称中使用通配符：</block>
  <block id="793e3359b9f10893cfe3dd56474ec3a2" category="summary">SnapDrive for UNIX 在配置 RDM LUN 时有一些注意事项。</block>
  <block id="43c9ade7e4fe99abdfa02938f49567b1" category="doc">配置 RDM LUN 的注意事项</block>
  <block id="3de75e7f42646dfd44aa9d4c0e53d46a" category="list-text">验证子操作系统中的 `snapdrive.conf` 文件中的配置变量 `default-transport` 变量是否设置为 `fcp` 。</block>
  <block id="3393707d8148b80d19d0e6908cb75c8f" category="list-text">配置适用于 UNIX 的 SnapDrive 以访问适用于 VMware vSphere 的 NetApp 虚拟存储控制台。</block>
  <block id="bfa2cb2e842647a94875fdcc8fed2540" category="list-text">确保在 `snapdrive.conf` 文件中使用了 RDM LUN 支持的配置变量。RDM LUN 支持使用 `contact-viadmin-port ， use-https-to-viadmin ， vif-password-file` 和 `virtual-operation-timeoutsecs=600` 等变量。</block>
  <block id="6b86eb0a690bb8c9dc48c939fda084db" category="inline-xref-macro">由 SnapDrive 管理的 RDM LUN 的限制</block>
  <block id="62fbc03b22b515fb74c3d13ddb90ddc2" category="paragraph"><block ref="62fbc03b22b515fb74c3d13ddb90ddc2" category="inline-xref-macro-rx"></block></block>
  <block id="e7e3ebe7a5e592a7174de8938176f64b" category="inline-xref-macro">配置适用于 UNIX 的 SnapDrive 的虚拟存储控制台</block>
  <block id="cfbe075af1d013aaeb590a87168cc70c" category="paragraph"><block ref="cfbe075af1d013aaeb590a87168cc70c" category="inline-xref-macro-rx"></block></block>
  <block id="afdfaa12ef7330567f2fa072363f52af" category="inline-xref-macro">配置选项及其默认值</block>
  <block id="c04e933c6119920420275b21081e03fe" category="paragraph"><block ref="c04e933c6119920420275b21081e03fe" category="inline-xref-macro-rx"></block></block>
  <block id="2ba09ae429264b3cf4373147d09155f8" category="summary">SnapDrive for UNIX 命令用于执行 Snapshot 操作。</block>
  <block id="0f55f8c2d2d0dee789cfc27e48777699" category="doc">Snapshot 操作命令行</block>
  <block id="9eeeb7ec5a20dfad5f8bea2a1a6187f2" category="paragraph">下表为 Snapshot 操作提供了各种命令行选项。</block>
  <block id="7d4fab76513c90b603a722620cde60fe" category="cell">命令行选项</block>
  <block id="2692e651156d0e5d3b0a6db4a8f2957e" category="paragraph">SnapDrive snap create （ -lun ） _ dg _ -vg _ -hostvol _ -lvol _ -fs] _file_spec_ （ file_spec... ） [ ｛ -lun | -dg _ -vg _ -hostvol _ -lvol _ -fs ｝ _file_spec_ [file_spec...] …… ] -snapname _snap_name_ "-force "-noprompt]] -unrelated ] -fstype type] （ -vmtype 类型）`</block>
  <block id="bee0d3f5d12c77e2b262f087c973bc68" category="paragraph">SnapDrive snap ｛ show | list ｝ -filervol _filervol_ [_filervol..._]-verbose`</block>
  <block id="6c32ae9cfaeb634740fc74d1d44f14f6" category="paragraph">SnapDrive snap ｛ show | list ｝ ｛ -verbose ｝ ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ ｛ file_spec... ｝ 【 -fstype type】 【 -vmtype 】`</block>
  <block id="d0adc7dcd49ff1adda9d1adad92cad01" category="paragraph">SnapDrive snap （ 快照）（ -verbose ）（ -snapname ） _long_snap_name_ （快照名称 ... ）`</block>
  <block id="056e3072f7e50828100de4add13f5b3a" category="paragraph">SnapDrive snap ｛ show wlist ｝ ｛ -verbose ｝ ｛ -lun | -vg | -dg | -fs | -lvol | -hostvol] _file_spec_ [file_spec...]`</block>
  <block id="4727219fab46173cfea6683591cb538d" category="paragraph">SnapDrive snap connect -lun _s_lun_named_lun_name_ [-lun] _s_lun_named_lun_name ..._] -snapname _long_snap_snap_name_ [-split ] （ -clone ｛ lunclone _ optimal _ unrestricted ｝ ） ] （ -prefixfvprefixstr] ）【 -verbose ）`</block>
  <block id="d2d89e1bd1ea7c7dc745bd338c970576" category="admonition">在 SnapDrive snap connect 命令中， LUN 名称的格式应为 `lun_name` 或 `qtree_name/lun_name` 。</block>
  <block id="c874b2ce948e0aa16586d40117251f0d" category="paragraph">SnapDrive snap connect _fspec_set_ [_fspec_set..._] -snapname _lor_snap_name_ -autodes] （ -autosename] ）（ -ntopts 选项）（ ｛ -reserve | -noreserve ｝ ）（ -readonly ）（ -split ））（ -clone ｛ clone _ optimal _ verbose` -fixf ｝ ）</block>
  <block id="08309a8f9f3b43ccc752b9e235105b63" category="paragraph">fspec_set 参数的格式如下：</block>
  <block id="c53d1bbe2f3b508c7130ba97c67b78c0" category="paragraph">` （ -vg | -dg _ -fs _ -lvol _ -hostvol] _src_file_spec_[_dest_file_spec_] （ ｛ -destdg _ -destvg ｝ dgname ） [ ｛ -destlv _ -desthv ｝ lvname]`</block>
  <block id="904a8304056d77e4547744781b7ceb50" category="paragraph">重命名</block>
  <block id="b91454b511800df473d5e7ba6e04e0f7" category="paragraph">SnapDrive snap rename -[snapname ]_old_lor_snap_name new_snap_name_ [-force [-noprompt]]`</block>
  <block id="2bd339d85ee3b33e513359ce781b60cc" category="paragraph">还原</block>
  <block id="bf70cc3a93611a1103e4bb69d5e283fd" category="paragraph">SnapDrive snap restore （ 快照还原） "-lun | -dg | -vg | -hostvol | -lvol | -fs | -file] _file_spec_ （ file_spec... ） [ ｛ -lun | -dg _ -vg _ -hostvol _ -lvol _ -fs _ -file ｝ _file_spec_ [file_spec...] …… ] -snapname _snap_name_ [-force [-noprompt]] [-mntopts options][ ｛ -reserve | -noreserve ｝ ] [-vbsr [ 预览 | 执行 ]]`</block>
  <block id="86d8a96e4eb815fcb4b75ec86d38d483" category="paragraph">SnapDrive snap disconnect -lun _long_lun_name_ [_lun_name..._] 【 -fstype 类型】【 -vmtype 类型】【 -ssplit 】`</block>
  <block id="8132875cff560d522326902d01ab5931" category="paragraph">SnapDrive snap disconnect ｛ -dg _ -vg _ -hostvol _ -lvol _ -fs ｝ _file_spec_ [file_spec...] [ ｛ -DG _ -vg _ -hostvol _ -lvol _ -fs ｝ _file_spec_ [file_spec...] …… ] 【 -full】 【 -fstype type】 【 -vmtype 类型】【 -ssplit 】`</block>
  <block id="0ba6ff7442bdf5c3b7028c9d4c471c63" category="paragraph">SnapDrive snap delete （ -snapname] _long_snap_name_ [_snap_name ..._] （ -verbose ）【 -force （ -noprompt]]`</block>
  <block id="311b0390ed34048804b718d6e240ea45" category="summary">您可以在存储系统中添加端口集，以便与 SVM 进行通信。这是一次性活动，必须在使用存储系统之前完成。</block>
  <block id="d6f30fc10f16fbef8f6f0ded5add723b" category="doc">在 SnapDrive 中添加端口集</block>
  <block id="bc02a871fcb6da83c34e8adb6e44c0e7" category="admonition">如果要升级到 SnapDrive 5.2 for UNIX ，请确保早期版本的 SnapDrive for UNIX igroup 已手动与存储管理员设置的端口关联。</block>
  <block id="2bc49a51cf3c64df692b7892f7860b1c" category="paragraph">在以下示例中，存储管理员使用 Vserver 名称而不是 IP 地址，并验证 Vserver 名称是否已在 DNS 服务器上注册。</block>
  <block id="b6dbdc8cce1693687246ada5d6e27055" category="paragraph">` * SnapDrive 端口集 add _portset_name filername_ [_filername..._]*`</block>
  <block id="004d1da740b26235a0c8952a45346cb1" category="paragraph">` _portset_name_` 是端口集的名称。</block>
  <block id="e0808e5cc0eebfff2e238b3b80db2e75" category="paragraph">` _filername_` 是 SVM 的名称。</block>
  <block id="442e6de33f97a3e6b7be709f45fc6e33" category="paragraph">已成功在 SnapDrive 中添加端口集 ps2 。</block>
  <block id="358e3c84f3d6a6b7621d855849f5d220" category="summary">由于 SnapDrive.conf 文件中指定的值不适当，您无法选择存储堆栈。</block>
  <block id="7b6955a4efc04da8a556fdee70e4db73" category="paragraph">由于在 `snapdrive.conf` 文件中指定的值不适当，您无法选择存储堆栈。</block>
  <block id="1efb500c91550c1a8abc9e310c2199e8" category="paragraph">此时将显示以下警告消息。</block>
  <block id="81ed93a7bba485ab4d0f6f6efc7f40f7" category="list-text">如果您使用的是 NFS 环境，请忽略此警告消息并继续在主机系统上使用 SnapDrive 操作。</block>
  <block id="996be6f830ea5eff91448917d36f001a" category="list-text">如果您使用的是 SAN 环境，请确保在 Linux 矩阵堆栈中提供的 `snapdrive.conf` 文件中指定适当的可接受值。然后，重新启动守护进程。</block>
  <block id="5c4077a53e033d7cfd3b93a17cc35263" category="paragraph"><block ref="5c4077a53e033d7cfd3b93a17cc35263" category="inline-xref-macro-rx"></block></block>
  <block id="4b49970a07c7ff7ca827b22a438d97b8" category="summary">如果 64 位 Red Hat Enterprise Linux 4 和 Oracle Enterprise Linux 4 主机上未安装 /lib/libgcc_s.so.1 路径，则 SnapDrive for UNIX 将出错。</block>
  <block id="582aba14c12c416f0930f73754fb8165" category="doc">如果未安装 libgcc_s.so.1 ，则 SnapDrive 会出错</block>
  <block id="55538cf2e166942f664addbe8eb09653" category="paragraph">如果 64 位 Red Hat Enterprise Linux 4 和 Oracle Enterprise Linux 4 主机上未安装 ` /lib/libgcc_s.so.1 path` ，则 SnapDrive for UNIX 将出错。</block>
  <block id="776de9cb2c305f034cc1444c2f323224" category="paragraph">如果 64 位 Red Hat Enterprise Linux 4 和 Oracle Enterprise Linux 4 主机上未安装路径 ` /lib/libgcc_s.so.1` ，则 SnapDrive for UNIX 将显示以下错误消息：</block>
  <block id="37f2c9e6035e824783740660d506be72" category="summary">影响 SnapDrive snap restore 命令还原 Snapshot 副本的功能的条件很少。</block>
  <block id="2219fb752dca1fb311277f4cbc1505f9" category="doc">无法还原 Snapshot 副本</block>
  <block id="f156abb4f040497863d8502c5ab8d8c1" category="paragraph">影响 SnapDrive snap restore` 命令还原 Snapshot 副本的功能的条件很少。</block>
  <block id="9de812893d12f7e62e0f461da20ebcbc" category="list-text">SnapDrive snap restore` 命令必须能够执行以下任务：</block>
  <block id="27aa56840c21a291b086402691b856db" category="list-text">查询所有磁盘组以获取 LUN 列表。</block>
  <block id="109469db06535ba6172ab47704402869" category="list-text">通过 SCSI 命令查询所有 LUN 。要使 SnapDrive snap restore` 命令成功，无需使用和挂载主机卷和文件系统。</block>
  <block id="03499a19d11bcfcd2175e2c1e7be33e5" category="list-text">访问权限必须允许主机在该存储系统上创建和还原信息的 Snapshot 副本。</block>
  <block id="e418342ec4b0382b14e4602a185a22d5" category="list-text">必须将 NFS 挂载的目录正确导出到主机，以便可以挂载该目录。</block>
  <block id="cea68e0664333a997f4fcb48d2a6b013" category="admonition">在向磁盘组添加 LUN 或从磁盘组中删除 LUN 之后，应始终创建另一个 Snapshot 副本。</block>
  <block id="0236445232150a17ecab07f082e6368d" category="list-text">如果在创建 Snapshot 副本后将主机卷或文件系统添加到磁盘组，然后尝试还原 Snapshot 副本，则会收到错误消息。要在这种情况下成功执行还原操作，您必须在命令行中包含 `force` 选项（` -f` ）。</block>
  <block id="e12107cd57a0776de2f85d9535ac7c8f" category="admonition">创建和还原 Snapshot 副本后添加的主机卷和文件系统将无法再访问。</block>
  <block id="2658f675d457ac270517a38eaa978309" category="list-text">如果在创建 Snapshot 副本后重命名主机卷或文件系统或更改挂载点，然后尝试还原它，还原操作将失败。要在这种情况下成功执行还原操作，您必须在命令行中包含 `force` 选项（` -f` ）。</block>
  <block id="f1bb1eb0cc8b16ea4169b684098799a3" category="admonition">请务必使用 ` -f` 选项，以确保不会意外覆盖不打算覆盖的内容。</block>
  <block id="34cb8e8b8e0cdc77872d98596ed703d2" category="list-text">如果在创建 Snapshot 副本后重命名 LUN ，然后尝试还原该 Snapshot 副本，则还原操作将失败。重命名 LUN 后，应创建新的 Snapshot 副本。</block>
  <block id="b7b6f4f6015c01f6e59cae82d66ec0de" category="admonition">启动 Snapshot 还原操作后，请勿暂停该操作。暂停此操作可能会使系统处于不一致状态。然后，您可能需要执行手动恢复。</block>
  <block id="d7f6e61205309bdae48053595a4a6052" category="summary">在基于角色的访问控制 \ （ RBAC ）中，要成功执行每个操作，需要具有特定的功能。用户必须具有一组正确的功能来执行存储操作。</block>
  <block id="0e2ae21a176bdafdf005c9119f8f1d18" category="doc">SnapDrive 命令和功能</block>
  <block id="b245a28981dafc86a3d2a69f602f22f7" category="paragraph">在基于角色的访问控制（ Role-Based Access Control ， RBAC ）中，要成功执行每个操作，都需要特定的功能。用户必须具有一组正确的功能来执行存储操作。</block>
  <block id="ae7a8f7eaf0572b2dabd6a8585e284d0" category="paragraph">下表列出了所需的命令和相应功能：</block>
  <block id="fa97f6975c9b94a252d204cd22159ff4" category="cell">功能</block>
  <block id="d6ba96ae0cbb88e3046bf05ded68e852" category="paragraph">`s存储显示`</block>
  <block id="105f06b70a2a14fd1cf2e5829acee789" category="paragraph">在卷上执行 sd.story.read</block>
  <block id="90419140c51b76680836041523b8a042" category="paragraph">`s存储列表`</block>
  <block id="2f5c6ff0a3ee9f494a38443deb488ec4" category="list-text">对于卷内的 LUN ： `s D.Storage.Write` on Volume</block>
  <block id="396706fd6b6226c9cae45cbb32d5e35e" category="list-text">对于 qtree 内的 LUN ： `s D.Storage.Write` on qtree</block>
  <block id="22eafaf2888a7434e6597cbab5cbbe64" category="paragraph">`s D 存储写入` 在 LUN 上</block>
  <block id="e71bf09856bfd0fccdd87331ae0dda9a" category="paragraph">`s D 存储。删除 LUN 上的`</block>
  <block id="7a92e7df8f70592919a84ca1ec96a540" category="paragraph">`snap show`</block>
  <block id="70a277939aac48ae2ed1d2ae77385175" category="paragraph">卷上 `s .D.snapshot.read`</block>
  <block id="8dabbcf5f3648594790edb764d1b05a7" category="paragraph">`snap delete`</block>
  <block id="7c2b9463ce93a8c893d06aa66b1dadaa" category="paragraph">`s D 存储。删除卷上的`</block>
  <block id="02b89f3920a16cea53b65fcc0a763df8" category="paragraph">`snap rename`</block>
  <block id="81dc974cea7ded701f25f71f53141966" category="paragraph">`s D 存储写入` 卷</block>
  <block id="9663eb14b8c165f7c1cbe3b4747878a3" category="list-text">对于卷中的 LUN 克隆：卷上的 `s .D.snapshot.Clone`</block>
  <block id="890e7626adc17ba6abbf5bae8392566d" category="list-text">对于 qtree 中的 LUN 克隆： `s .D.snapshot.Clone` on qtree</block>
  <block id="7935f73a8b6503950e791d2f526a3e97" category="list-text">对于传统卷克隆： `s .snapshot.Clone` on storage system</block>
  <block id="8cf08cb3f2a01bfe6cb746d1c08b0f0f" category="list-text">对于 FlexClone 卷： `s 父卷上的` .snapshot.Clone</block>
  <block id="6644f73f784c31f33b51363a6ca956fe" category="list-text">对于不受限制的 FlexClone 卷： `s 父卷上的` dsnapshot.UnrestrictedClone</block>
  <block id="e40a4593a2478fecacabe1e91e038c1f" category="paragraph">`snap connect-split`</block>
  <block id="cc6ccfb6b93c85610f4d056f6a52ad51" category="list-text">对于 LUN 克隆（ LUN 在卷中克隆和拆分）：卷上为 `s .d snapshot.Clone` ，卷上为 `s .d Storage.Write`</block>
  <block id="f536deaad7a1c4a5a5fd3df05a2617a0" category="list-text">对于 LUN 克隆（在 qtree 中克隆和拆分 LUN ）：在 qtree 上为 `s .d snapshot.Clone` ，在 qtree 上为 `s .d Storage.Write`</block>
  <block id="31d2288511098665b3fda44f150261db" category="list-text">对于拆分的传统卷克隆：存储系统上为 `s .D.snapshot.Clone` ，存储系统上为 `s .D.Storage.Write`</block>
  <block id="474938ce3abf56b9a5bf69288bf64fc6" category="list-text">对于拆分的 Flex 卷克隆： `s 父卷上的 .D.snapshot.Clone` 。</block>
  <block id="9a8416c279bb8e068746b72627386819" category="paragraph">`clone split start`</block>
  <block id="5bb96fa9556739ae2ba06459aebdf879" category="list-text">对于 LUN 驻留在卷或 qtree 中的 LUN 克隆： `s ontsnapshot.Clone` containing volume or qtree</block>
  <block id="d846162e9cd3f3a8b081b06398b35530" category="list-text">对于卷克隆： `s 父卷上的` .snapshot.Clone</block>
  <block id="b892298716b4a841c49c5e8183f0cf91" category="list-text">要删除不受限制的卷克隆，请执行以下操作：卷上的 `s .D.snapshot.DestroyUnrestrictedClone`</block>
  <block id="beac4b4230cce25bdfa64fa7ef1454f3" category="paragraph">`snap disconnect — split`</block>
  <block id="c3b185b350337d4c2d1459b9c1a8b299" category="list-text">对于 LUN 驻留在卷或 qtree 中的 LUN 克隆： `s 包含卷或 qtree 上的` ontsnapshot.Clone</block>
  <block id="5f163dda021ff882636f0f7db6e5e392" category="list-text">对于卷克隆： `s 父卷上的 .D.Storage.Delete`</block>
  <block id="4dcd0e17bf2e47ebd3e586e99c21d9f2" category="list-text">对于卷中的 LUN ：卷上为 `s .D.snapshot.Restore` ， LUN 上为 `s .D.Storage.Write`</block>
  <block id="087920d63c5ac58627c9a7d973756a82" category="list-text">对于 qtree 中的 LUN ： `s .d snapshot.Restore` 在 qtree 上， `s .d Storage.Write` 在 LUN 上</block>
  <block id="11af1e41089d3d59510216876c2c5db7" category="list-text">对于不在卷中的 LUN ：卷上为 `s .d snapshot.Restore` ，卷上为 `s .d Storage.Write`</block>
  <block id="8ff234c26cfa5daf769c38915f6979e8" category="list-text">对于不在 qtree 中的 LUN ： qtree 上为 `s .d snapshot.Restore` ， qtree 上为 `s .d Storage.Write`</block>
  <block id="c5d61f88ce24605b75f4949cab2d62fa" category="list-text">对于卷：在存储系统上为 `s .snapshot.Restore` （对于传统卷）或在聚合上为 `s .snapshot.Restore` （对于灵活卷）</block>
  <block id="dc989989aba0c37b017580b07bd85aa4" category="list-text">对于卷中的单文件快照还原：卷上的 `s .D.snapshot.Restore`</block>
  <block id="825f79c4f8eedabebbd4db497b0d8c9e" category="list-text">对于 qtree 中的单文件快照还原： `s D.snapshot.Restore` qtree</block>
  <block id="b8068fba9f1da12a1b9a8e8980c7bf8b" category="list-text">要覆盖基线 Snapshot 副本，请执行以下操作：卷上的 `s .Dt.DisruptionBaseline`</block>
  <block id="1ab03ac8568dae60b76c951254782fa5" category="paragraph">`主机连接，主机断开连接`</block>
  <block id="95f7464313565109a2b31f4814aee892" category="paragraph">`s LUN 上的` 配置写入</block>
  <block id="f2b3cf93bf37b16c572601540551986f" category="paragraph">`配置访问`</block>
  <block id="e911ab9cbadd25dfb366c49cb341f5a9" category="paragraph">`s 存储系统上的` .D.Config.Read</block>
  <block id="317b71860bd4520352747a9e113aa2ed" category="paragraph">`配置准备`</block>
  <block id="4384e5b7194b5e5f0a2c85a8358bd9ab" category="paragraph">`s 配置写入` 至少在一个存储系统上</block>
  <block id="8eda7048c0d4f7f0c05689e3809a8b90" category="paragraph">`配置检查`</block>
  <block id="9bd0a34894fa9a7867edd2c5bd7e709a" category="paragraph">`s` 配置读取 至少在一个存储系统上</block>
  <block id="4923e2171361a152e3e366c47e557712" category="paragraph">`config show`</block>
  <block id="8a8913fd4b2172cfb668b831928e40e8" category="paragraph">`配置集`</block>
  <block id="72fdd9103c3ad79ffb57601c00626a97" category="paragraph">`s 存储系统上的` 配置写入</block>
  <block id="c5f9a65304d93813fe89d53d4f009aaa" category="paragraph">`config set -dfm ， config set -mgmtpath ，`</block>
  <block id="c60dc010123e5e3fe07259dbeb50189f" category="paragraph">`config delete`</block>
  <block id="cdb650b190e796cb387edb361ce1a6b9" category="paragraph">`s 存储系统上的` 配置删除</block>
  <block id="b85c56e5452761271aabb0607f871fee" category="paragraph">`config delete dfm_appliance ， config delete -mgmtpath`</block>
  <block id="e06f8fd545aac0405aca6c7b92dd0938" category="paragraph">`s` 配置删除 至少在一个存储系统上</block>
  <block id="25c04a75eeca151ce224ab5271a1bbea" category="paragraph">`配置列表`</block>
  <block id="53b04382cd295e6c7d5cab2a11bdeca3" category="paragraph">`配置迁移集`</block>
  <block id="18fd148ab043d75f28fca3d67d1759b0" category="paragraph">`config migrate delete`</block>
  <block id="8bc0113c24725409d1587efb19fdc88e" category="paragraph">`配置迁移列表`</block>
  <block id="b608c7e6122397cba756526025067644" category="admonition">SnapDrive for UNIX 不会检查管理员（ root ）的任何功能。</block>
  <block id="d1ff1085448b65518bf80015acb0b0ab" category="summary">您可以执行 SnapDrive config list 命令来验证哪个用户名 SnapDrive for UNIX 与存储系统相关联。</block>
  <block id="19a843dfd2ce4527ccc7c244717b6d87" category="doc">验证与 SnapDrive for UNIX 关联的存储系统用户名</block>
  <block id="27f7f1a6bcabd20c348081d78a54b62e" category="paragraph">您可以通过执行 SnapDrive config list` 命令来验证哪个用户名 SnapDrive for UNIX 与存储系统关联。</block>
  <block id="c627406a70c092dc5a758abe3d7f6515" category="paragraph">您必须已以 root 用户身份登录。</block>
  <block id="612a9c29d498650834aa38483296b343" category="paragraph">此命令显示在 SnapDrive for UNIX 中指定了用户的所有系统的用户名或存储系统对。它不会显示存储系统的密码。</block>
  <block id="1ffa6f6c66efe4feef924cd998d163f7" category="paragraph">此示例显示了与名为 Rapidel 的存储系统和中型存储系统关联的用户：</block>
  <block id="20d83e03bb71997409eaff2ed4788857" category="summary">通过 SnapDrive for UNIX ，您可以在不超过限制的情况下确定可以在主机上创建多少个 LUN 。</block>
  <block id="5d0e2d032ad1aa1e2b7c2ce121374ac1" category="doc">确定可以创建的 LUN 数量</block>
  <block id="d73c17083c51451ec5c88c86c407054e" category="paragraph">您可以使用 SnapDrive config check lun` 命令来确定此值。</block>
  <block id="61daa1579f74b9fe7ebff1b7608446a0" category="paragraph">在 Linux 主机上，此命令会检查现有的 /dev/sg 文件，以确定未使用的文件数。</block>
  <block id="464731ea68043c5dbd4b1a2255e0ddc9" category="summary">SnapDrive for UNIX 中的精简配置功能使用户可以为主机提供比存储系统上实际可用的存储空间更多的存储空间。</block>
  <block id="627a2cec3863a60ee1eb9fe78d73c96f" category="doc">SnapDrive for UNIX 中的精简配置</block>
  <block id="b5e25c86b8fc4729491227e86c44097c" category="paragraph">在 SnapDrive for UNIX 中，您无法设置预留百分比值，也无法与自动删除和自动调整等 Data ONTAP 功能集成。这些 Data ONTAP 功能可以安全地与 SnapDrive for UNIX 结合使用；但是，如果发生自动删除或自动调整大小事件， SnapDrive for UNIX 无法识别这些功能。</block>
  <block id="0fbd8971220ee7d0340edcc5aa07a5c0" category="inline-link">NetApp 技术报告 3483 ：《 NetApp SAN 或 IP SAN 企业环境中的精简配置》</block>
  <block id="5c14df6684585f43d0dae983427f4e62" category="summary">您可以通过执行 SnapDrive config delete 命令来删除虚拟接口的用户登录名。</block>
  <block id="815e2d991bcf1ef9ea5cf0acf00f0d13" category="doc">删除 Virtual Storage Console 的用户登录名</block>
  <block id="28cb7e0163a7b694c3a4ecf8b3a9fcdd" category="paragraph">您可以通过执行 SnapDrive config delete` 命令来删除虚拟接口的用户登录名。</block>
  <block id="9526bdaea74acbe2775b1fa651e5447c" category="paragraph">确保已在 vCenter 中配置 Virtual Storage Console 。</block>
  <block id="4298d46c8404a31e9f430f5f7955dec7" category="paragraph">` * SnapDrive config delete appliage_name*`</block>
  <block id="2aa49ea64b529de1beae9d59077d6d10" category="paragraph">` 设备名称 _` 是虚拟接口系统的名称或 IP 地址。</block>
  <block id="86eff586db3f41791ea38646930c9e27" category="paragraph">SnapDrive for UNIX 会删除您指定的虚拟接口的用户名或密码登录信息。</block>
  <block id="1d66da1fd4402633da05ff05bdba4a80" category="admonition">要使 SnapDrive for UNIX 能够访问虚拟接口，必须指定新的用户登录名。</block>
  <block id="fa4c4cf3cd45cba4d4d57e437fba0791" category="summary">如果主机和存储系统之间的 iSCSI 或 FC 连接失败，或者存储系统上的 iSCSI 或 FC 出现故障，则 SnapDrive 命令将失败。</block>
  <block id="ffe70b1268d98960b9f4f1b6cfb0f88a" category="doc">传输协议连接失败时， SnapDrive 命令失败</block>
  <block id="79341cdd26121d53f553d3cb051a21c0" category="paragraph">要成功使用 SnapDrive for UNIX 命令，必须先还原 iSCSI 或 FC 服务。</block>
  <block id="b05bbc5b7cfb216f99be6b5417473bb6" category="summary">可以从主机集群环境中的任何节点执行 Snapshot 副本的断开连接操作。使用命令选项将存储实体与特定节点断开连接。</block>
  <block id="a093f8cc3b3d27bf75aff7d34eae3bc8" category="doc">断开 NFS 实体的 Snapshot 副本连接的准则</block>
  <block id="904595a476065f5e28ab4837c1b4e7c7" category="paragraph">断开包含 NFS 实体的 Snapshot 副本的连接时，请遵循以下准则：</block>
  <block id="4716977ae9f2a0e5e0145564932035d6" category="list-text">如果断开使用只读权限连接的 NFS 目录树的连接，则 SnapDrive for UNIX 将执行以下操作：</block>
  <block id="d46d654b49af046d13832724a8a1a3e4" category="list-text">卸载文件系统。</block>
  <block id="ae980383776cf2ecaf560db421f1ad09" category="list-text">删除文件系统表文件中的挂载条目。</block>
  <block id="db33e6de101149aba016b7632a277533" category="list-text">删除挂载点。</block>
  <block id="b772aff8eec41a25bc6b5bfff52b679d" category="list-text">不会删除 Snapshot 副本目录的导出规则，该目录是在从二级主机（对父卷没有导出权限的主机）连接 NFS 文件规范时创建的。</block>
  <block id="faff888e90dccfc580cb071b32c93648" category="list-text">如果断开使用读写权限连接的 NFS 目录树的连接，则 SnapDrive for UNIX 将执行以下操作：</block>
  <block id="93e8ae4928b4719762fff442748c0e36" category="list-text">删除与 FlexVol 卷克隆中的文件系统对应的 NFS 目录树。</block>
  <block id="30295e8b5ef0687d17341207037329d5" category="list-text">销毁底层 FlexVol 卷克隆（如果为空）。</block>
  <block id="795f57ac929a5fa90120b175be90bf75" category="summary">您可以使用 SnapDrive config list 命令验证是否在适用于 UNIX 的 SnapDrive 中配置了 。</block>
  <block id="03748e0115d55c80c61815da04d46891" category="doc">验证 SVM 的登录信息</block>
  <block id="0c9d8934425ce8a628eecf439cd515ca" category="paragraph">您可以使用 SnapDrive config list` 命令验证是否在适用于 UNIX 的 SnapDrive 中配置了 。</block>
  <block id="5bf75a061a7e22d43ee0f8eadfe8e46d" category="paragraph">SnapDrive 配置列表`</block>
  <block id="96247a55352261d7f54e76ed3af1c9f0" category="paragraph">此命令显示在适用于 UNIX 的 SnapDrive 中指定的用户名或 Vserver ，而不显示 Vserver 的密码。</block>
  <block id="2a13022d64270f92c9ea606f22bf8662" category="paragraph">以下示例将 `vsadmin` 显示为 `StorageSystem` 。</block>
  <block id="f750a555600785f886285e73bfd27342" category="summary">恢复日志可帮助您跟踪系统状态不一致的原因。当某些操作停止工作时， SnapDrive for UNIX 将生成此文件。</block>
  <block id="31fcd623bc53d04d641c3450dd55d0c8" category="doc">恢复日志的内容</block>
  <block id="c2f6434ac5e130fe997baca88b1ab413" category="paragraph">如果按 Ctrl-C 暂停 SnapDrive for UNIX ，或者主机或存储系统在操作期间出现故障，则系统可能无法自动恢复。</block>
  <block id="d81513aa22ada67183f88a28a24ac028" category="paragraph">如果任何操作中断，可能会使系统处于不一致状态，则 SnapDrive for UNIX 会将信息写入恢复日志文件。如果出现问题，您可以将此文件发送给 NetApp 技术支持，以便他们可以帮助您恢复系统状态。</block>
  <block id="ae9993dfc5f9d3568a3294575ad41f06" category="paragraph">恢复日志实用程序会保留操作期间发出的命令的记录。每个命令都会标记一个 operation_index （一个数字，用于唯一标识正在执行的操作），后跟日期 / 时间戳和消息文本。</block>
  <block id="929921d76a549878e4e271ec03ab3f13" category="summary">SnapDrive for UNIX 中的错误消息 ID 具有关联的退出状态值。您可以使用退出状态值来确定 SnapDrive for UNIX 命令的成功或失败。</block>
  <block id="60a325ce4c822d1c5c21873fc5d25614" category="doc">标准退出状态值</block>
  <block id="cec4da87a4c2eef96b8cb5a24fdf515b" category="list-text">使用集群模式 Data ONTAPNetApp Snapshot 技术创建 Snapshot 副本。</block>
  <block id="4724becf144a911c887c0ff6a3433680" category="summary">要为 SnapDrive for UNIX 配置基于角色的访问控制 \ （ RBAC ），您必须完成各种任务。您可以使用 Operations Manager 控制台或命令行界面来执行这些任务。</block>
  <block id="c126c8989fcff68f5bd7da3d1c376f22" category="doc">在 SnapDrive for UNIX 中配置基于角色的访问控制</block>
  <block id="9a5b663d22546292eff0a34309f93864" category="paragraph">要为适用于 UNIX 的 SnapDrive 配置基于角色的访问控制（ Role-Based Access Control ， RBAC ），您必须完成各种任务。您可以使用 Operations Manager 控制台或命令行界面来执行这些任务。</block>
  <block id="ae7dd0e8792a2f697071b55f05dc8ce0" category="summary">某些主机系统要求您在创建新 LUN 之前对其进行准备。SnapDrive for UNIX 提供了一些命令来完成这些步骤，以便使主机做好创建新 LUN 的准备。</block>
  <block id="567d434a4b3a532b6344e0902f1d1ed4" category="doc">正在检查主机信息</block>
  <block id="7f9efd89bad310288e5abc479aa41559" category="paragraph">如果您的操作系统要求您在创建新 LUN 之前对其进行准备，则可以使用 SnapDrive config` 命令。使用 SnapDrive config` 命令可以检查有关在映射到主机的存储系统上创建的 LUN 数量的信息。</block>
  <block id="92c78afaee79569e502d56e27184b133" category="admonition">并非所有主机平台操作系统都要求您准备主机。目前，这些命令仅在 Linux 主机上是必需的。</block>
  <block id="982df9b3e9890636aa3063147dfdeb9d" category="summary">将现有 LUN 添加到卷组时， LUN 上的数据将消失。</block>
  <block id="8a8febf53168b9421a29b1769bf93dad" category="doc">将 LUN 添加到卷组时，数据将消失</block>
  <block id="684c30ed1ab305d5f83eb5a0ffec6562" category="paragraph">如果将现有 LUN 添加到由 LVM 管理的卷组，然后执行 `pvcreate` 命令，则数据将被覆盖。</block>
  <block id="fda88cecf934fd263b5a8800045b9808" category="paragraph">如果需要现有 LUN 上的数据，则必须将该数据迁移到使用 LVM 创建的 LUN 。完成以下步骤。</block>
  <block id="f3a300a070559027dfa71889284d3d23" category="list-text">创建新 LUN 。</block>
  <block id="be492f08d4b814f7b1056d9904277bac" category="list-text">使用 `pvcreate` ， `vgcreate` 和 `lvcreate` 命令将 LUN 置于 LVM 控制之下。</block>
  <block id="d179a3cbc27cc042d3401f40e4d46440" category="list-text">将数据从现有 LUN 复制到您创建并置于 LVM 控制之下的 LUN 。</block>
  <block id="ac4f4ef0c0870d8dd1051ebd49f437a2" category="summary">您可以从主机系统中删除存储系统映射信息。</block>
  <block id="b598ba652f3f16b077fc3bef22a79360" category="doc">从主机系统中删除存储系统映射信息</block>
  <block id="56d59bc755ec338368f028bb6a0881f4" category="paragraph">` * SnapDrive 配置迁移 delete _new_storage_system_name_ ___new_storage_system_name ..._]*`</block>
  <block id="1487cecba1e421a9fe366a959143cfa2" category="list-text">` _new_storage_system_name_` 是新存储系统的名称。</block>
  <block id="8f5b4a081b9c09a70695482e61fbb523" category="list-text">` _[new_storage_system_name...]_` 定义了可以在一个命令行上删除多个存储系统名称。</block>
  <block id="c0816113f07a8e5c98c2f50263313447" category="summary">您可以使用 SnapDrive for UNIX 对存储系统上的 NFS 实体执行精简配置。精简配置称为空间预留。</block>
  <block id="914954f2f29d5cf2b9bdcc7813392562" category="doc">为 NFS 实体启用精简配置</block>
  <block id="46d9766db05d911b4da0712281b75271" category="list-text">要为快照连接操作启用空间预留，您可以对涉及 NFS 实体的命令使用 ` -reserve` 参数来为卷启用空间预留。对于 NFS 实体，如果未在命令中指定 ` -reserve` 或 ` -noreserve` 参数，则 SnapDrive for UNIX 将使用 Snapshot 副本中提供的空间预留。</block>
  <block id="5aa304be49ad5745fabf80144700f527" category="summary">在某些情况下， snapdrived stop 或 snapdrived start 命令可能会挂起。</block>
  <block id="fec36e4cfe4a42e6ae95099076edd899" category="doc">snapdrived stop 或 snapdrived start 命令挂起</block>
  <block id="5facbae37231ff9682e0a80a7202f66c" category="paragraph">在某些情况下， `snapdrived stop` 或 `snapdrived start` 命令可能会挂起。</block>
  <block id="520d7924e550d6385ffe35804b8fdc82" category="paragraph">要解决此问题，请运行 `snapdrived status` 以检查正在执行的命令数量以及这些命令在何时启动。`snapdrived stop` 命令等待执行中的所有命令完成。如果您认为任何命令挂起，请执行问题描述 `snapdrived -force stop` 或 `snapdrived -force restart` 命令。</block>
  <block id="445871d87aafd9e956cfab6aae26a1bc" category="admonition">` -force` 选项将终止所有正在运行的命令，守护进程将停止。这可能会对系统状态产生负面影响，例如过时的设备条目以及未来的守护进程启动。</block>
  <block id="2a70e1eafc133a50dc4a76f79d84a084" category="summary">SnapDrive for UNIX 支持对在 FlexVol 卷上创建的 vFiler 单元执行 SnapDrive 操作。但是，如果您使用的是光纤通道 \ （ FC\ ），则 SnapDrive for UNIX 不支持 vFiler 单元。</block>
  <block id="be12f4121c2dd2bb8058b8fb1453cd61" category="doc">vFiler 单元支持问题</block>
  <block id="4b6b14488dd5fac7bb515e188ae59a61" category="paragraph">SnapDrive for UNIX 支持对在 FlexVol 卷上创建的 vFiler 单元执行 SnapDrive 操作。但是，如果您使用的是光纤通道（ FC ），则 SnapDrive for UNIX 不支持 vFiler 单元。</block>
  <block id="d8eb58c3d8517d7b082786e6dcb789e8" category="paragraph">您必须了解与支持 vFiler 单元的 SnapDrive for UNIX 相关的一些注意事项：</block>
  <block id="8a7e5836fc5d7a846e9d60db0725dfd2" category="list-text">在 qtree 上创建的 vFiler 单元不支持 SnapDrive 操作。</block>
  <block id="5329701c7653da8331ce25408f9cacd1" category="paragraph">如果 vFiler 单元拥有整个存储卷，则允许执行这些操作。</block>
  <block id="c52b498351dccdbd973215eaedf99595" category="list-text">在配置 SnapDrive 以支持 vFiler 单元时，必须确保未为 vFiler0 上的接口配置管理路径和数据路径。</block>
  <block id="4b22886f64a655f8b1ad9904566f2344" category="list-text">在以 7- 模式运行的 Data ONTAP 中，您必须确保将 Data ONTAP 配置变量 `vfiler.vol_clone_zapi_allow` 设置为 `on` ，以连接到 vFiler 单元中卷或 LUN 的 Snapshot 副本。</block>
  <block id="5016d06a2d4bc02d3f11f651517a6dd6" category="summary">在所有 SAN 操作中，无论 LUN 名称是否解析为 IP 地址，其格式都应始终采用主机名。在纯 SAN 环境中，没有数据路径的概念。管理接口映射必须与数据路径接口相同。</block>
  <block id="d3e100d18501f0461c086485dd9e0a7c" category="doc">SAN 环境中的 LUN 名称</block>
  <block id="0a60ce645bdf34d29ff0e7ded279e77a" category="section-title">SAN 多子网环境中的配置列表输出</block>
  <block id="75e482bd6a656fd3f82def0366e27df2" category="summary">您不能设置预留百分比值，也不能与 SnapDrive for UNIX 中的自动删除和自动调整等 Data ONTAP 功能集成。虽然您可以在 SnapDrive for UNIX 中安全地使用 Data ONTAP 功能，但 SnapDrive for UNIX 不会注册自动删除或自动调整事件大小。</block>
  <block id="762e109ab9e3a323a3233c2650d6fb2a" category="summary">在使用 SnapDrive for UNIX 之前，您必须了解其安全功能并了解如何访问它们。</block>
  <block id="b41229adc30903c1796ea319e5109244" category="doc">SnapDrive for UNIX 中的安全功能</block>
  <block id="fcd441dcf6d4a573ee2472c6179bdd49" category="summary">您可以还原单个存储实体或多个存储实体的 Snapshot 副本。</block>
  <block id="d219f852c00cbce74c8860abd88e18a9" category="summary">使用 SnapDrive storage disconnect 命令时，请遵循以下准则。</block>
  <block id="4512f3400ac92abf47f801a45d3c5191" category="doc">SnapDrive storage disconnect 命令的准则</block>
  <block id="7eb7f66eaf1b14265758b6e4ca8b0eaf" category="paragraph">使用 SnapDrive storage disconnect` 命令时，请遵循以下准则：</block>
  <block id="a6667a347c5a722a83de2629119bdb1c" category="paragraph">通过 Linux 主机，您可以将多个文件系统连接到一个挂载点。但是， SnapDrive for UNIX 要求每个文件系统都有一个唯一的挂载点。如果使用 SnapDrive storage disconnect` 命令断开连接到单个挂载点的文件系统，则该命令将失败。</block>
  <block id="9c61fbd92cb47b05580df8d12927c129" category="list-text">如果使用 ` -lun` 选项指定属于主机磁盘组或文件系统的 LUN 的名称，则 SnapDrive storage disconnect` 命令将失败。</block>
  <block id="59707927b8820d42d2f52d0704b31d5d" category="list-text">如果使用 ` -lun` 选项指定主机上的多路径软件未发现的 LUN 的名称，则 SnapDrive storage disconnect` 命令将失败。</block>
  <block id="1b4794086f95a6149501ff8ab8f523b6" category="admonition">在 SnapDrive 5.2 for UNIX 之前的版本中，如果映射 igroup 具有两个以上的全球通用端口名称（ WWPN ），则在使用 RDM LUN 时， SnapDrive storage disconnect` 命令失败。</block>
  <block id="074d3ec794ad2998430361ab4de26f33" category="summary">通过适用于 UNIX 的 SnapDrive ，您可以管理 LVM （逻辑卷管理器）和原始实体。SnapDrive for UNIX 还提供了一些命令，可帮助您在创建存储实体时配置和管理存储。</block>
  <block id="33dd0e4d9e8f6aa61d478f6ba4f3a7b0" category="doc">LVM 和原始实体的管理</block>
  <block id="b69249cbd8a03933c4bc439760f9fc4b" category="paragraph">通过适用于 UNIX 的 SnapDrive ，您可以管理 LVM （逻辑卷管理器）和原始实体。SnapDrive for UNIX 还提供了一些命令，可帮助您在创建存储实体时配置和管理存储。</block>
  <block id="7a979a18ef0ac1e4c2a48845f8d3bf3c" category="summary">您无法运行 SnapDrive for UNIX 命令，因为这些命令似乎被阻止超过 10 分钟。您可能需要等待命令完成。</block>
  <block id="6970fd3698a1333cb6c233df89a6474b" category="doc">命令显示为已阻止</block>
  <block id="c22eff1eba950b3e9e4bcc9fd8524fb4" category="paragraph">在 VxV/DMP 需要时间管理卷配置守护进程的极少数情况下会发生此行为。此行为的触发因素包括：</block>
  <block id="271c383f1a57d0e16ea141e64b5b7d6e" category="list-text">已从崩溃中恢复的存储系统</block>
  <block id="64283f22ba68faf5b3a35090731fa8a9" category="list-text">已从脱机过渡到联机的存储系统目标适配器</block>
  <block id="704eaf6c481c77f85c7951fb221a3204" category="paragraph">等待命令完成。Veritas 配置守护进程需要几分钟的时间来运行并发现设备的当前状态。</block>
  <block id="a2d2d8be446b72ed04af946010b912b5" category="summary">数据收集实用程序可运行 NetApp 诊断实用程序，复制 SnapDrive for UNIX 日志文件，并创建一个用于分析的压缩文件。</block>
  <block id="30485f89187187ed85860157168a4170" category="doc">由 SnapDrive.dc 执行的任务</block>
  <block id="5c53ae9471247ecd0b3b3f7e40293a67" category="paragraph">`snapdrive.dc` 实用程序可执行以下任务：</block>
  <block id="d67fcfadea18adf4ac94670b1ac88ae7" category="list-text">运行 `host_info` 和 `filer_info` 实用程序，以收集有关主机以及连接到主机的存储系统的信息，并将此信息保存在一个压缩文件中。`host_info` 实用程序和 `filer_info` 实用程序随 SnapDrive for UNIX 安装包一起提供。</block>
  <block id="99f44f0bc1ab0bdbb3cbcedee5ce5700" category="paragraph">例如，在 Linux 上，它是 `linux_info` 实用程序。</block>
  <block id="2a94cc85604f4c8ad890d1a4d253895e" category="list-text">创建名为 /tmp/netapp/ntap_SnapDrive_name 的目录。该工具会将以下文件的副本放置在目录中：</block>
  <block id="3864fa9919601b87d0744c9b7081993c" category="list-text">SnapDrive for UNIX 版本，如运行 SnapDrive version 命令所示</block>
  <block id="69c0924d2f8b66f951532c57318691ba" category="list-text">`snapdrive.conf` 文件</block>
  <block id="90a43ca8acd864a0600171be820a6509" category="list-text">审核日志文件</block>
  <block id="e6d8feaa9af78abd011a216ea586d0a9" category="list-text">跟踪日志文件</block>
  <block id="8ae6e438fa83eba2bf11fc407c0dab96" category="list-text">恢复日志文件</block>
  <block id="5c80ea7605c42b4280b7e9c7f510da21" category="list-text">host_info 实用程序创建的文件</block>
  <block id="620d3c33cb45c0eed1c24c282bbf3bd2" category="list-text">创建一个包含目录内容的压缩文件，并显示一条消息，指出您已将此文件发送给 NetApp 技术支持。</block>
  <block id="0d56bb4c3836f3603b135915b707549d" category="summary">集群模式 Data ONTAP 不支持某些 SnapDrive 功能和操作。</block>
  <block id="56661334b4a0a16d55ec2f7c8fe29e34" category="doc">集群模式 Data ONTAP 的 SnapDrive 限制</block>
  <block id="4f0ae58b25d576ce77b8aa26427d38c9" category="list-text">SVM 的根卷不支持存储配置和 Snapshot 管理操作。</block>
  <block id="5fa9dc1c36313650802b6d44c436cdcf" category="list-text">不支持对跨 7- 模式 Data ONTAP 和集群模式 Data ONTAP 上运行的存储系统的文件规范或 LUN 执行操作。</block>
  <block id="affa0dbd71fa9360bd8eb2fdb03617cd" category="list-text">不支持挂载点内的符号链接。</block>
  <block id="776b8238b74cad2be9022f726e26f10f" category="list-text">必须将包含 Vserver 卷的聚合分配给 Vserver 的聚合列表，才能配置 Vserver 并执行 SnapDrive 操作。</block>
  <block id="e1917da4824c36a748be24ab56233ec6" category="list-text">SnapDrive for UNIX 不支持迁移 SVM ，因为集群模式 Data ONTAP 不支持此迁移。</block>
  <block id="7b067b085c5d82799424e49221d1a2a3" category="list-text">使用 ` readonly` 选项执行快照连接操作时，仅会在主机上挂载 ` 。 snapshot` 目录，而不会创建克隆卷。</block>
  <block id="1d5c0e94fd2851f28dfe3bc497ba2de8" category="paragraph">在集群模式 Data ONTAP 中，导出策略仅在卷级别定义，而不是在目录级别定义。因此，无法将 ` .snapshot` 目录导出到二级主机（即对父卷没有导出权限的主机）。</block>
  <block id="d092e6efe2ae14e2ed9779cccce877c6" category="list-text">如果卷采用 SnapMirror 或 SnapVault 操作，则 SnapDrive for UNIX 不支持从在基本 Snapshot 副本之前创建的 Snapshot 副本执行基于卷的 SnapRestore （ VBSR ）操作。</block>
  <block id="f483e0565078b1563234723e522f40a6" category="list-text">当卷处于 SnapVault （ XDP ）关系时， SnapDrive for UNIX 不支持对在 SnapVault 更新之前创建的 Snapshot 副本执行 `snapdelete` 操作。</block>
  <block id="d61e5e629dcfa7539cfc98f5acb2c5de" category="summary">您可以使用 snapshot snap rename 命令更改 Snapshot 副本的名称。跨多个存储系统或存储系统卷的 Snapshot 副本也可以重命名。</block>
  <block id="28f80fce5aa3564f75217afb5497fa68" category="doc">Snapshot 副本重命名</block>
  <block id="7b893a0d3d498900e7b3879443713f5b" category="paragraph">您可以使用 `snapshot snap rename` 命令更改 Snapshot 副本的名称。跨多个存储系统或存储系统卷的 Snapshot 副本也可以重命名。</block>
  <block id="3588a0bfb1636058071c7edd10069751" category="summary">如果 Snapshot 副本位于多个存储系统卷上，则不能删除正在使用的 Snapshot 副本。</block>
  <block id="528518df19b413b130ce0a7b222ccbb5" category="doc">删除 Snapshot 副本的准则</block>
  <block id="ccaae550ca391b26fdbf4e6a6869565c" category="paragraph">使用 SnapDrive snap delete` 命令时，请遵循以下准则：</block>
  <block id="55706c7e2fede33ab5367772adea429b" category="list-text">如果要删除的任何 Snapshot 副本正在使用中或未由 SnapDrive for UNIX 创建，则 Snapshot 删除操作将失败。您可以通过将 ` -force` 选项与 SnapDrive snap delete` 命令结合使用来覆盖此行为。</block>
  <block id="ad48260d22ed26e8db9fedadf2d49bc2" category="list-text">如果您的 Snapshot 副本跨越多个存储系统卷，则必须手动删除每个卷上的 Snapshot 副本。</block>
  <block id="e8c5b64176036e8b4c5affc853aa8a3f" category="summary">要删除 Snapshot 副本，请指定要删除的 Snapshot 副本的名称。使用 SnapDrive snap delete 命令，您可以查看已删除的 Snapshot 副本列表。</block>
  <block id="584df983baeac96b848d685e978f02ee" category="doc">使用 SnapDrive snap delete 命令所需的信息</block>
  <block id="726a338e014ad104cba550d665913ad8" category="paragraph">要删除 Snapshot 副本，请指定要删除的 Snapshot 副本的名称。使用 SnapDrive snap delete` 命令，您可以查看已删除的 Snapshot 副本列表。</block>
  <block id="f94c7608e1ec5aa3d57cb85fa9c25de0" category="paragraph">下表提供了有关 SnapDrive snap delete` 命令的信息。</block>
  <block id="7acc6d255b3bb2d627638f835c8875e1" category="cell">要求 / 选项</block>
  <block id="42b93a78871725a4dc34d8fcf9dade3e" category="paragraph">指定 Snapshot 副本的名称。请使用 Snapshot 副本名称的长格式，在其中输入存储系统名称，卷和 Snapshot 副本名称。以下是一个长 Snapshot 副本名称示例： `BIG_filer ： /vol/account_vol ： snap_20031115`</block>
  <block id="4845ab8cde91cb5415133ab418193d1b" category="paragraph">如果要指定其他 Snapshot 副本，则可以使用名称的简短形式，前提是这些副本与第一个 Snapshot 副本位于同一存储系统和卷上。否则，请再次使用名称的长格式。</block>
  <block id="a36ccc9168b1e1c0edfefbc2c4672896" category="paragraph">Snapshot 副本名称（` -snapname` ）</block>
  <block id="01b929246284aec5e08fc268381ffbef" category="paragraph">` lor_Snapshot copy_name_`</block>
  <block id="a247b3113565c2de2bc883b2d41d7d57" category="paragraph">其他 Snapshot 副本</block>
  <block id="e72a240b1bbc0d7bcca85b13ac856a21" category="paragraph">` _Snapshot copy_name_` （长格式或短格式）</block>
  <block id="e489b37d624d09a030579cecbd9abd6e" category="paragraph">` - 详细`</block>
  <block id="252cec3d8615dd7dce3c5b7bcb51c152" category="paragraph">要显示已删除的 Snapshot 副本的列表，请包括 -verbose 选项。如果您使用的是 Snapshot 副本名称的简短格式，则此选项将填充缺失的存储系统和卷信息。</block>
  <block id="3372e4236acd0b2a711231d81f5f274f" category="paragraph">可选：确定是否要覆盖现有 Snapshot 副本。如果没有此选项，则如果您提供现有 Snapshot 副本的名称，此操作将暂停。提供此选项并指定现有 Snapshot 副本的名称时，系统会提示您确认是否要覆盖此 Snapshot 副本。要防止 SnapDrive for UNIX 显示提示符，请同时包含 ` -noprop` 选项。（如果要使用 ` -noprop` 选项，则必须始终包含 ` -force` 选项。）</block>
  <block id="950b897b0733bbf69f3bb3c92d3a32c9" category="summary">您可以输入 SnapDrive version 命令来验证 SnapDrive for UNIX 的版本。</block>
  <block id="eb9005acd4be1d00c32d944aa3bf9ad4" category="doc">检查适用于 UNIX 的 SnapDrive 版本</block>
  <block id="0a50b6eddd4b03a60ef6a13ae79404ec" category="list-text">在 CLI 提示符处，输入以下命令：</block>
  <block id="0d1dabdeff4e1a00a195ae10fd73e897" category="paragraph">` * SnapDrive 版本 *`</block>
  <block id="fc3ba79aafc760644c5f1e00f7005315" category="admonition">此命令接受的唯一参数是 ` -v` ，它可显示其他版本详细信息。如果包括其他参数，则 SnapDrive for UNIX 将显示警告，然后显示版本号。</block>
  <block id="6e302c7038be17f435b4d65cbb29cf89" category="summary">SnapDrive for UNIX 命令用于主机端操作。</block>
  <block id="b18b107eb6eaf9eb319420dc8ab1ba5f" category="doc">主机端命令行</block>
  <block id="84077469e415bb7604d8e8fecd60ab27" category="paragraph">下表提供了主机端操作的各种命令行选项。</block>
  <block id="9b14c29fac3fb8abc30b990d970f4e0c" category="paragraph">主机连接</block>
  <block id="a5a6aab8631a2432c021937a0efa2867" category="paragraph">SnapDrive 主机连接 -lun _lun_name_ _lun_name ..._] （ -vmtype _type_] ）`</block>
  <block id="68127d7a386026da43add51fd660459f" category="paragraph">SnapDrive 主机连接 -fs _file_spec_ -nolvm -lun _lon_lun_name_ （ -noperates][-mntets options] （ -fstype _type_] ）（ -vmtype _type_] ）`</block>
  <block id="fd3205e661908748da659abb049fd304" category="paragraph">SnapDrive 主机连接 -fs _file_spec_ -hostvol _file_spec_ -lun _lun_name_ [_lun_name_][-noperisure] [-mntopts _options_][-vmtype _type_]`</block>
  <block id="b84e8fabb3eecd8e8ba489c6ee5ac480" category="paragraph">主机断开连接</block>
  <block id="025bb3ad98e559534f7656f98e32f288" category="paragraph">SnapDrive 主机 disconnect -lun _long_lun_name_ _lun_name..._] （ -vmtype _type_）`</block>
  <block id="ca1630478a33cb2a64d4e0e5c4c69c3f" category="paragraph">SnapDrive 主机断开连接 ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_[_file_spec_..._] ｛ -vg _ -dg _ -fs _ lvol _ -hostvol ｝ _file_spec_ [_file_..._]...] 【 -full】 【 -fstype _type_】 【 -vmtype _type_】`</block>
  <block id="1ff3235d94476eee196eed9a8378e166" category="summary">您可以使用 HTTPS 进行安全的 Web 服务和守护进程通信。可以通过在 SnapDrive.conf 文件中设置一些配置变量，并生成和安装自签名证书或 CA 签名证书来启用安全通信。</block>
  <block id="1e5ee019f172e694f916fecb0b971627" category="doc">使用 HTTPS 安全守护进程通信</block>
  <block id="547511b0b0ab34298cfac7e4cea0362a" category="paragraph">您可以使用 HTTPS 进行安全的 Web 服务和守护进程通信。通过在 `snapdrive.conf` 文件中设置一些配置变量，并生成和安装自签名证书或 CA 签名证书，可以启用安全通信。</block>
  <block id="2191a591e7ca17b927656d721bf9b208" category="paragraph">您必须在 `snapdrive.conf` 文件中指定的路径处提供自签名或 CA 签名证书。要使用 HTTPS 进行通信，必须在 `snapdrive.conf` 文件中设置以下参数：</block>
  <block id="179bb8f3b7f2e6e6cb845cacd7cf26fd" category="list-text">`use-https-to-sdU-daemon=on`</block>
  <block id="58e08521cfe82dce9e5032653bd5330a" category="list-text">`contact-https-port-sdU-daemon = 4095`</block>
  <block id="8ccc1178e1741e71306a5fc57ecf5561" category="list-text">`sdu-daemon-certificate-path=/opt/NetApp/SnapDrive/SnapDrive.pem`</block>
  <block id="7f0f1e8c486ad1c6e79b35a0e8a16583" category="admonition">SnapDrive 5.0 for UNIX 及更高版本支持 HTTPS 用于守护进程通信。默认情况下，此选项设置为 `off` 。</block>
  <block id="b80fe93814452825120c6b424beac978" category="summary">克隆拆分估计有助于估算拆分 LUN 克隆所需的存储空间 \ （以 MB 为单位）。根据 SnapDrive for UNIX 提供的克隆拆分估计值，您可以确定用于拆分 LUN 克隆的空间可用性。</block>
  <block id="9e89d0fff1489c445ac9935cf5ecd2fa" category="doc">估算用于拆分 LUN 克隆的存储空间</block>
  <block id="d11e0073a403c1dd6f2e130bb19c322b" category="paragraph">克隆拆分估计有助于估算拆分 LUN 克隆所需的存储空间（以 MB 为单位）。根据 SnapDrive for UNIX 提供的克隆拆分估计值，您可以确定用于拆分 LUN 克隆的空间可用性。</block>
  <block id="3acafc855c08c735aa3bc049242528ed" category="list-text">输入以下命令以估计拆分 LUN 克隆所需的存储空间。</block>
  <block id="03f14f2bf8d2081400e81605a0fd72a0" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun]_lun_name_ _lun_name..._] ；（ ｛ -dg _ -vg _ -fs | -hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]] ；（ -snapname _lon_snap_lunsnap_name_] ｛ -volsnap_sun_name_]_clone ） _lunverbose`</block>
  <block id="eadbaf8f4aaac9759ecde917fc70b44c" category="paragraph">此操作将显示以下信息：</block>
  <block id="42dedd14635643a71561501c61f04077" category="list-text">资源名称</block>
  <block id="fa39193409f3e1aad3c2f823cfdb6269" category="list-text">容器— LUN 克隆的卷</block>
  <block id="067c1f4c73e98f6788aed20a58ad0aa9" category="list-text">Required Space —拆分 LUN 克隆所需的空间</block>
  <block id="68ffa35ef9ac0730b0382a41334840a7" category="list-text">Available space —容器上的可用空间</block>
  <block id="aa460a14be4e493a534d411f85df0e7d" category="list-text">存储状态—指示 LUN 克隆拆分的可用空间</block>
  <block id="864db8f231de002c9af43b129b9f47e5" category="list-text">已拥有空间— LUN 克隆占用的空间</block>
  <block id="a7cff07cff95d59d2776fd5347f410f2" category="list-text">共享空间— LUN 克隆与父级一起占用的空间</block>
  <block id="b6bcfede4403cadb452c4a4f538ae04e" category="paragraph">使用 ` -verbose` 选项时，将显示 `自有空间` 和 `S共享空间` 。</block>
  <block id="3e1506a9d74a6c0a899c5342350ef21a" category="paragraph">以下示例估计了用于拆分 LUN 克隆的存储空间。</block>
  <block id="f8005a044b5dc1a03f3814806e2c0dc5" category="paragraph">以下是使用 ` -verbose` 选项的示例。或者，您也可以使用 ` -v` 选项。</block>
  <block id="0595c659548f84a3d0b0bfea5bc178c0" category="summary">SnapDrive for UNIX 命令具有相关的选项，关键字和参数。</block>
  <block id="e1e2e90136975662b9aed2c114fb6daf" category="doc">SnapDrive for UNIX 选项，关键字和参数</block>
  <block id="10e4668d599c9624c356189d0378921d" category="summary">SnapDrive storage delete 命令除了删除主机上的所有底层主机端实体及其支持这些实体的存储系统 LUN 之外，还会删除主机上的存储实体。</block>
  <block id="f14c2c8292c09205b392faecc6b425b2" category="doc">storage delete 命令</block>
  <block id="f954f756cbbbabb86e59e3241d68bcf5" category="paragraph">SnapDrive storage delete` 命令除了删除主机上的所有底层主机端实体及其后备存储系统 LUN 之外，还会删除主机上的存储实体。</block>
  <block id="eabaa53245380a90e938cef1ba362e04" category="admonition">此命令将删除数据。</block>
  <block id="4ba7ee17c5023524cc7f22995a018ced" category="summary">SnapDrive 在配置 RDM LUN 方面有一些限制。您必须了解可能影响环境的限制。</block>
  <block id="d9b84b6b173a88c74769038aab4c0629" category="list-text">RDM LUN 不能用作启动磁盘或系统磁盘。</block>
  <block id="5c5450e0060b35d073f49407443802c9" category="list-text">SnapDrive 在 Internet 小型计算机系统接口（ iSCSI ）环境中不支持 RDM LUN 。</block>
  <block id="99fa7a547c9bfd3764633d0a46501bea" category="list-text">SnapDrive 不支持在子操作系统中使用 MPIO ，但 VMware ESX 服务器支持 MPIO 。</block>
  <block id="83ed45f1894dbc9f0a4b3b896126e55a" category="list-text">如果传输协议为 ` FC_` ，则 SnapDrive 会忽略在 CLI 命令中指定的 igroup ，而 igroup 会由虚拟接口自动创建。</block>
  <block id="177e82341ac29f2f7d806d13220e1007" category="list-text">您可以重命名，移动或删除作为 `sg3_utils` 一部分捆绑的 ` /usr/bin/resscan-scsi-bus.sh` 脚本，以避免将 RDM LUN 的数量限制为八个。</block>
  <block id="4b36d48e30bee61954aab4088866ebdd" category="admonition">如果要在 `sg3_utils` 中保留 ` /usr/bin/resscan-scsi-bus.sh` 并避免将 RDM LUN 的数量限制为 8 个，则必须创建一个包装程序脚本 ` /root/dynamic-lun-rescan` ，然后从此脚本运行 ` /usr/bin/rescan scsi-bus.sh` ，并使用选项 ` -w ，` ` 和` assign ` 。`</block>
  <block id="f0c8cbae97759813077cf2860390a252" category="paragraph">以下是已修改的 ` /root/dynamic-lun-rescan.sh` 内容的示例：</block>
  <block id="2f6ab7656dfb09dc6be984be3e8fd991" category="paragraph">* 与 VMware ESX 服务器相关的限制 *</block>
  <block id="98c46d69e202a682fac96011f7b28e4d" category="list-text">每个子操作系统可以配置四个 SCSI 控制器，每个 SCSI 控制器可以映射到 16 个设备。</block>
  <block id="084fdc552bd4bc2119544ac79a604a0a" category="paragraph">但是，每个控制器会保留一个设备，因此总共可以将 60 个（ 16 个 * ， 4 个 - 4 个） RDM LUN 映射到子操作系统。</block>
  <block id="bc0c697775654d51c8c2694ee05e5462" category="list-text">每个 ESX 服务器最多可映射到 256 个 RDM LUN 。</block>
  <block id="ea1802c60abfcfa662099ebf62ad4bc3" category="paragraph"><block ref="ea1802c60abfcfa662099ebf62ad4bc3" category="inline-xref-macro-rx"></block></block>
  <block id="f375daf2c1e5ca21ed785333df52d3a5" category="inline-link">www.vmware.com/pdf/vsphere4/r40/vsp_40_config_max.pdf</block>
  <block id="2984fd68f0d4accaf3df48671a9e84b9" category="paragraph"><block ref="2984fd68f0d4accaf3df48671a9e84b9" category="inline-link-rx"></block></block>
  <block id="9b6b3664403e4dae31921515a6cc5233" category="summary">您可以将适用于 UNIX 的 SnapDrive 配置为对主机平台使用 HTTP 。</block>
  <block id="034673861503bc1b9c8bd95a9a25a38a" category="doc">设置 HTTP</block>
  <block id="32d5e72c2bce6496b8ea408f720107b7" category="list-text">备份 `snapdrive.conf` 文件。</block>
  <block id="b7fd947793fc9edeccd067ab2ac6acc9" category="list-text">在文本编辑器中打开 `snapdrive.conf` 文件。</block>
  <block id="366c4067a4c885051a54b2b454a9750f" category="list-text">将 ` use-https-to_filer_` 变量的值更改为 off 。</block>
  <block id="62621fc30b58cd604fbae342524dcb6a" category="paragraph">修改 `snapdrive.conf` 文件时，最好执行以下步骤：</block>
  <block id="442a8b0ee933d35e9b765a1a3e4d7008" category="list-text">注释掉要修改的行。</block>
  <block id="321e13032df81c2c44ec7ef321e45678" category="list-text">复制已注释掉的行。</block>
  <block id="d27b07ea14e1eb65d807d23e1ffac5bc" category="list-text">删除井号（ # ），取消对复制的文本的注释。</block>
  <block id="4b8a94693e3b3b6890425c1aab5f2867" category="list-text">修改此值。</block>
  <block id="05044a4563610fb3c2ad3156ba216d55" category="list-text">更改后保存文件。</block>
  <block id="9044a131ff354f2219bdba6118a4cd86" category="paragraph">SnapDrive for UNIX 会在每次启动此文件时自动对其进行检查。要使更改生效，必须重新启动 SnapDrive for UNIX 守护进程。</block>
  <block id="514e1a76572bdd8e1bb2acb78a8d8acf" category="summary">您可以使用 SnapDrive config migrate set 命令从旧存储系统迁移到新存储系统。迁移完成后，您可以使用新的存储系统在主机系统中执行所有 SnapDrive 操作。</block>
  <block id="7ef410fb3820c440de92d34468f14ba0" category="doc">从旧存储系统迁移到新存储系统</block>
  <block id="2b87cd35ef453e1bacfe303b1b3085b9" category="paragraph">您可以使用 SnapDrive config migrate set` 命令从旧存储系统迁移到新存储系统。迁移完成后，您可以使用新的存储系统在主机系统中执行所有 SnapDrive 操作。</block>
  <block id="8e966c28028010521cc1cc85b67c14a2" category="paragraph">` * SnapDrive 配置迁移集 _old_storage_system_name new_storage_system_name__*`</block>
  <block id="c514bb02941397fce063dc6969288eff" category="paragraph">以下示例显示了可以从旧存储系统 "tuffleskt" 迁移到新存储系统 "roaster" 。</block>
  <block id="eaac7055eb7121354933d5c73822cda1" category="inline-xref-macro">迁移到新的 SVM 名称</block>
  <block id="18de61679543391f61db0b8e2ec7d2f9" category="paragraph"><block ref="18de61679543391f61db0b8e2ec7d2f9" category="inline-xref-macro-rx"></block></block>
  <block id="f7c383060e9dd68096b83314c8c26275" category="summary">您可以在主机上创建文件系统，逻辑卷或磁盘组等实体，并让 SnapDrive for UNIX 自动创建关联的 LUN 。</block>
  <block id="22ecd4470aadebf2dbec337705d3dd95" category="doc">创建 LVM 实体并自动设置 LUN</block>
  <block id="c24c806b21b5c73a60903134d5f3c632" category="list-text">使用 `host_lvm_fSpec` 参数，您可以指定是要创建文件系统，逻辑卷还是磁盘组。此参数具有三种常规格式。使用的格式取决于要创建的实体。</block>
  <block id="0cafa3d9fa560a17f12179744a4a84b4" category="paragraph">要创建文件系统，请使用以下格式： ` -fs file_spec. -fstype type] [-fsopts options] [-mntopts options] [-noperatest] [ -hostvol file_spec] [ -dg_name]`</block>
  <block id="bb4b9ea3b37aaa117e5c57fd89c665fa" category="paragraph">要创建逻辑卷或主机卷，请使用以下格式：</block>
  <block id="f11438e02f8d90ba71a81e3a22ab6a37" category="paragraph">` * （ -hostvol file_spec） _file_spec_ （ -dg _dg_name_） *`</block>
  <block id="11a477353a8d98437d824da5c73e9920" category="paragraph">要创建磁盘或卷组，请使用以下格式：</block>
  <block id="df3af931620a0d010b12e38a680c9d2c" category="paragraph">` * — dg_dg_name__*`</block>
  <block id="162fb6f134e3c4c6021278c4dcad0cc4" category="list-text">如果创建文件系统，还可以包括主机卷规格，磁盘组规格或这两种规格，以指示文件系统所在的主机卷和磁盘组。如果不包括这些规范，则 SnapDrive for UNIX 会自动为主机卷和磁盘组生成名称，或者同时为这两者生成名称。</block>
  <block id="d704e285d20ceaefad95df7942fef67b" category="list-text">指定主机卷时， SnapDrive for UNIX 将创建一个串联主机卷。虽然这是 SnapDrive for UNIX 在创建主机卷时支持的唯一格式，但它确实允许您操作现有的条带化主机卷。</block>
  <block id="c2a40b05da68d1dc413e98bfce759b39" category="list-text">在命令行中，输入以下命令：</block>
  <block id="630c1743e8c088a8af1021c642f3088f" category="paragraph">` * SnapDrive storage create _host_vxvm_fspec_ -filervol _lor_filer_path_ -dgsize "-igroup _ig_name[ig_name ...]__ （ ｛ -reserve _ -noreserve ｝ ） *`</block>
  <block id="5c124009d33d8cb533fdd724cd0562ef" category="paragraph">SnapDrive for UNIX 将创建您指定的主机实体，并在您指定的存储系统上为其创建 LUN 。它会执行与每个 LUN 的主机准备和发现以及 LUN 与主机实体的映射和连接相关的所有任务。</block>
  <block id="0f4282d686e3371d9059cd55d455eecc" category="summary">如果使用 SnapDrive for UNIX 使用 LVM 创建逻辑卷或文件系统，则 SnapDrive for UNIX 会自动创建所需的磁盘组。SnapDrive for UNIX 会根据主机卷管理器支持的类型创建文件系统。对于 Linux ，它包括 ext4 或 Ext3 。</block>
  <block id="d400ad443fca0cf7dcb068f6b795a2fc" category="doc">为 LVM 实体创建存储</block>
  <block id="8fbecff2130d952f7d2e578815cae31d" category="summary">您可以通过设置多路径在主机和存储系统之间配置多个网络路径。SnapDrive for UNIX 支持在多路径环境中使用别名。您需要确保在 /etc/multipath.conf 文件中为映射器设备配置了正确的别名。</block>
  <block id="e8da8bf4dfe9246be3361ac82e206a67" category="doc">设置多路径</block>
  <block id="0be36635b016d857af1106491f5b9c27" category="paragraph">您可以通过设置多路径在主机和存储系统之间配置多个网络路径。SnapDrive for UNIX 支持在多路径环境中使用别名。您需要确保在 ` /etc/multipath.conf` 文件中为映射器设备配置了正确的别名。</block>
  <block id="c370e1af4d458fab41866067ac64a940" category="list-text">主机重新启动后，多路径守护进程应运行，如以下示例所示：</block>
  <block id="7c38ae9d2bea5ec1a226ce73b9d874ca" category="paragraph">如果多路径守护进程未运行，请确保在重新启动后重新启动该守护进程。您可以运行以下命令来启动多路径守护进程：</block>
  <block id="bfbfbff56dcd10f4cdaa16bcf7a9fb7c" category="admonition">下表列出了一些支持在多路径环境中使用别名的 SnapDrive 操作。</block>
  <block id="7022fa19b4f026a2accd373202129b38" category="cell">别名支持</block>
  <block id="3836c33415a6d95d4a63388a6bcadf3b" category="cell">设备类型</block>
  <block id="fdb0e42ad57898d71e254ab1dae8c0c9" category="paragraph">从主主机上的主主机进行 Snap Create 和 Restore （ SFSR 和 VBSR ）</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="paragraph">是的。</block>
  <block id="00872dedb9adb84e34fc4386c6129ea1" category="paragraph">别名设备</block>
  <block id="cbe26b48f7c1bfc2db719c0c21264df6" category="paragraph">从主卷或二级卷克隆</block>
  <block id="9a12e6f6c437eeac06cfc55ad3c64ee9" category="paragraph">未别名的设备</block>
  <block id="c30e67fdf765afadfd0af4cb086a6ee4" category="paragraph">还原到备用</block>
  <block id="399388e79e4d50a46d56efdc483f44bb" category="paragraph">从二级卷还原</block>
  <block id="67ba2e71199a5c11cdc1dfab4409f435" category="list-text">如果您使用的是 Red Hat Enterprise Linux （ RHEL ） 6.4 或更高版本或 Oracle Linux 6.4 或更高版本，则无需在 ` /etc/multipath.conf` 文件中设置任何值。</block>
  <block id="1744e68331e4f2ba749f20127095e606" category="paragraph">但是，您仍必须维护一个虚拟的 ` /etc/multipath.conf` 文件，该文件可以为空，也可以包含列入黑名单的信息和别名（如果需要）。</block>
  <block id="dd41f9844a6ccc797a604700ab8936f7" category="list-text">如果您使用的是 SUSE Linux Enterprise Server （ SLES ） 11 SP3 或更高版本，则无需维护 ` /etc/multipath.conf` 文件。</block>
  <block id="6716aa5d65bc45ec77d0b9b937a0d891" category="paragraph">但是，如果需要，您可以使用 ` /etc/multipath.conf` 文件来包含黑名单信息和别名。</block>
  <block id="42b02f54e9b6f0dd3d796e07727c97b3" category="list-text">将字符串 `Hitachi HUS103073FL3800_V3WTLS7XIA` 替换为命令 `sCSI - id -Gus /block/&lt;LD&gt;` 的输出，其中 `LD` 是本地块设备名称。</block>
  <block id="276ddd2ab39066a60c86402576537ece" category="admonition">对于某些本地块设备， `scsis_id` 命令可能不会返回任何字符串。在这种情况下，必须使用 devnode 指令将本地块设备列入黑名单。</block>
  <block id="f56057c45c4bbc690f54f750ea32b18a" category="list-text">通过在 ` /etc/security/limits.conf` 文件中附加以下行，增加进程可在主机中打开的文件描述符的数量：</block>
  <block id="21d251cbae5f458b74dae2c82b479fb3" category="list-text">输入以下命令，确保在系统重新启动后始终加载 Linux SG 驱动程序：</block>
  <block id="ce51e1c10e81449fe1303706ccd1e759" category="list-text">重新启动主机以确保设置处于活动状态。</block>
  <block id="c1d6b930ffd52adaa0d90fed84dcced7" category="admonition">lvm2-2.02.17-7.27.8 和 ` filter_` 设置必须分配为 = ` &lt;"r=/dev/.\*/by-path/.*"` ， ` "r//dev/.\*/by-id/.*"` ， ` "r=/dev/cciss/.\*"` ， "lvm `……` …</block>
  <block id="bd1282226ac0a5bf2340cef392820c4a" category="summary">了解在使用 SnapDrive for UNIX 时可能会看到的一些更常见的错误消息并了解如何解决这些错误消息，这对您很有帮助。</block>
  <block id="dafedf68c0b2718fbcb3669c102b23bc" category="doc">错误消息值</block>
  <block id="9846acc5464c60b3c34d8fda907da70e" category="paragraph">下表详细介绍了使用 SnapDrive for UNIX 时可能遇到的最常见错误：</block>
  <block id="5f36cf760a5c474cc32a6d35d9c50d05" category="cell">错误代码</block>
  <block id="0fdb3aabc79057b1c0180e5743ff53f8" category="cell">返回代码</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">Type</block>
  <block id="4c2a8fe7eaf24721cc7a9f0175115bd4" category="cell">message</block>
  <block id="49b21ad0d38942f635877e7bbc5d7a1e" category="cell">解决方案</block>
  <block id="7b3575ad240013f94bb680f4a2058ab9" category="paragraph">`0000-001`</block>
  <block id="d4cd0dabcf4caa22ad92fab40844c786" category="paragraph">不适用</block>
  <block id="e3afed0047b08059d0fada10f400c1e5" category="paragraph">管理员</block>
  <block id="4297e4bd237832dae04a3f070ae0c2ba" category="paragraph">已为存储系统 &lt;storage-system-name&gt; 配置 `datapath 。请使用 SnapDrive config delete -mgmtpath 命令将其删除，然后重试` 。</block>
  <block id="3e29d2b77d57efa2d2bddb62871ecf3a" category="paragraph">在删除存储系统之前，请使用 SnapDrive config delete -mgmtpath` 命令删除为存储系统配置的管理路径。</block>
  <block id="f71df7daa8cc1cb9d48d59a1bcdb7f9e" category="paragraph">`0001-242`</block>
  <block id="d97f6afc0095d98e878f529daed9196c" category="paragraph">`无法使用 https 连接到存储系统： 10.72.197.213 。确保 10.72.197.213 是有效的存储系统名称 / 地址， 如果您配置的存储系统正在 7- 模式 Data ONTAP 上运行，请将主机添加到可信主机（选项 trusted.hosts ）并在存储系统 10.72.197.213 上启用 SSL ，或者修改 SnapDrive.conf 以使用 http 进行通信并重新启动 SnapDrive 守护进程。如果您配置的存储系统正在集群模式 Data ONTAP 上运行，请确保 Vserver 名称已映射到 Vserver 管理 LIF 的 IP 地址。``</block>
  <block id="e7bfa7254eca44a09426b8caeee0ff1e" category="paragraph">检查以下条件：</block>
  <block id="9026b6cd1118a998009a13596bcea81e" category="list-text">确保所连接的存储系统是有效的存储系统。</block>
  <block id="e961f499dbdb84743b4f06164e28c613" category="list-text">如果您尝试配置的存储系统正在 7- 模式 Data ONTAP 上运行，请将相同的添加到可信主机，并在存储系统上启用 SSL ，或者修改 `snapdrive.conf` 文件以使用 HTTP 进行通信；然后重新启动 SnapDrive 守护进程。</block>
  <block id="e29ddd2db2d1a693570ed7312c35272f" category="list-text">如果您尝试配置的存储系统正在集群模式 Data ONTAP 上运行，请确保 Vserver 名称已映射到 Vserver 的管理逻辑接口（ LIF ）的 IP 地址。</block>
  <block id="8e5b9e29ff4b31793374fb874edd69b6" category="paragraph">`0003- 004`</block>
  <block id="908e0251c5f1426a58f47917727f1086" category="paragraph">`无法将存储系统 &lt;storage-system-name&gt; 上的 LUN &lt;lun-name&gt; 从子操作系统中逐出。原因：未从 CoreOS` 填充任何映射设备信息</block>
  <block id="7842f7f277320cbb8c87f88454e72b67" category="paragraph">在子操作系统中执行 SnapDrive snap disconnect` 操作时会发生这种情况。</block>
  <block id="120c14bec613ddbb1deb7014fad33337" category="paragraph">检查 ESX 服务器中是否存在任何 RDM LUN 映射，或者 ESX 服务器中是否存在陈旧的 RDM 条目。</block>
  <block id="7591bd8b3cae1b410f3b5a34b53273c8" category="paragraph">在 ESX 服务器以及子操作系统中手动删除 RDM 映射。</block>
  <block id="0c5bf790c485e59b4f14df0f093a7b83" category="paragraph">`0001- 019`</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="paragraph">3.</block>
  <block id="f40496f800f157f14fb749d2de8bb404" category="paragraph">`命令行无效 - 文件名重复： &lt;dg1/vol2 和 dg1/vol2 &gt;`</block>
  <block id="d66ee0b2fcd615f5d99a7d31b83bea96" category="paragraph">如果执行的命令在同一主机卷上具有多个主机实体，则会发生这种情况。</block>
  <block id="2abbd33c32377891194e89ee15c98c94" category="paragraph">例如，命令会明确指定同一主机卷上的主机卷和文件系统。</block>
  <block id="c748e87bf277c912beee47669874feee" category="paragraph">完成以下步骤：</block>
  <block id="c3bdf0b3f9ff31246ff82daa79efa813" category="list-text">删除主机实体的所有重复实例。</block>
  <block id="3b1125d420e0eaebd4c8cd4bdf65c492" category="list-text">再次执行命令。</block>
  <block id="8e220b050e9e8f5703e9e2665d3748b0" category="paragraph">`0001-023`</block>
  <block id="6512bd43d9caa6e02c990b0a82652dca" category="paragraph">11.</block>
  <block id="92695829c1345bd922316c15d419d109" category="paragraph">`无法发现磁盘组 dg1 中的所有 LUN 。设备无响应： dg1 请检查存储系统上的 LUN 状态并根据需要使 LUN 联机，或者将主机添加到可信主机（选项 trusted.hosts ）并在存储系统上启用 SSL ，或者在将 SnapDrive.conf 更改为使用（ http/https ）进行存储系统通信并重新启动 SnapDrive 守护进程后重试。`</block>
  <block id="d31ffd40b93c3db82ee3feacd270f83a" category="paragraph">如果设备上的 SCSI 查询失败，则会发生这种情况。由于多种原因，对设备执行 SCSI 查询可能会失败。</block>
  <block id="57ac445270569e2da3b0185f764b7141" category="paragraph">执行以下步骤：</block>
  <block id="39eea608b73864b9a3b03e95c944c814" category="list-text">将 device-retries 配置变量设置为更高的值。</block>
  <block id="fdeb3223b4141e7de452fb2aa4f0d9ce" category="paragraph">例如，将其设置为 10 （默认值为 3 ），然后重新执行命令。</block>
  <block id="b02af7f8a989d4c7a8799292b931ab3d" category="list-text">使用带有 ` -all` 选项的 SnapDrive storage show` 命令获取有关设备的信息。</block>
  <block id="2ad429d95b4a0c88ca38c8726fc408e5" category="list-text">检查存储系统上的 FC 或 iSCSI 服务是否已启动且正在运行。</block>
  <block id="5613b7b3159476bff6c33b70f76ca9ab" category="paragraph">如果不是，请联系存储管理员以使存储系统联机。</block>
  <block id="32c09809cf15d3a83fc26046fc4b48f7" category="list-text">检查主机上的 FC 或 iSCSI 服务是否已启动。</block>
  <block id="3bd0af2817f1db9c2c0cf62e470d836e" category="paragraph">如果上述解决方案无法解决问题描述问题，请联系技术支持。</block>
  <block id="6f6f28b61691cdf0bb5b501021a9fcc6" category="paragraph">`0001-395`</block>
  <block id="83e83a7bbe6bda1f2361273a0ad4f042" category="paragraph">`此主机上无 HBA ！`</block>
  <block id="ae2cb3e352aba75f150e7f74144c7948" category="paragraph">如果将大量 LUN 连接到主机系统，则会发生这种情况。</block>
  <block id="76050a15e07efc45e6f09bf62c7b36e8" category="paragraph">检查` `snapdrive.conf` 文件中的变量 ` enable-fcp-cache_s 是否设置为 on 。</block>
  <block id="c7a9b7767e57cd4efb858adc4dc408fd" category="paragraph">`0001-389`</block>
  <block id="9c53d1b1558c4ede01886d065a5a540e" category="paragraph">`无法获取 HBA 助手 linuxfcp 的 HBA 类型`</block>
  <block id="f6da94ce3370dfa185ad604f45488014" category="paragraph">`无法获取 HBA 助手 vmwarefcp 的 HBA 类型`</block>
  <block id="893387890b7c32cbdb62e65a38fbb04d" category="paragraph">必须检查以下条件：</block>
  <block id="cc4cf892d6bb35f2ded2e61bc1073d8c" category="list-text">在创建存储之前，请确保您是否已使用命令配置虚拟接口：</block>
  <block id="59228de1bc3533c22490e257a3aeedc9" category="paragraph">` * SnapDrive 配置集 _-viadmin &lt;user&gt; &lt;virtual_interface_IP or name&gt;_*`</block>
  <block id="b85d95aa11ecd3cdc6536c4c6507d9dd" category="list-text">检查虚拟接口的存储系统是否存在，但您仍会遇到相同的错误消息，然后重新启动 SnapDrive for UNIX 以成功执行存储创建操作。</block>
  <block id="d50d3ce3c0cee177331e489b71d119d9" category="inline-link-macro">适用于 VMware vSphere 的 NetApp Virtual Storage Console</block>
  <block id="8c7523485194e6a8f9dc001288fbb328" category="list-text">检查是否满足 Virtual Storage Console 的配置要求，如中所述 <block ref="5daaa73187305756f0b659dbe60e46e3" category="inline-link-macro-rx"></block></block>
  <block id="5cae4d0878b82f197e594627493cefe4" category="paragraph">`0001-682`</block>
  <block id="cf14fe8bc59d0593c77b0d1f29e50ded" category="paragraph">`主机准备新 LUN 失败：不支持此功能检查控制器。`</block>
  <block id="b1239c00a903df28490074476f93b968" category="paragraph">要成功执行 SnapDrive 操作，请再次执行命令。</block>
  <block id="ff48ad51e9ecd9f6e465f59e9587e732" category="paragraph">`0001-859`</block>
  <block id="d4d589d273b8b469e47438287aaf496d" category="paragraph">`主机的接口均无 NFS 权限访问存储系统 &lt;storage system name&gt;` 上的目录 &lt;directory name&gt;</block>
  <block id="9c024f0e52c483a1a13601076a89dace" category="paragraph">在 `snapdrive.conf` 文件中，确保 ` _check-export-permission-nfs-clone_s` 配置变量设置为 `off` 。</block>
  <block id="cb90a9d74327505d15ca70ab154e82a7" category="paragraph">`0002-253`</block>
  <block id="6adedbf18450fcd1f51c9fc5dbbae71e" category="paragraph">`Flex 克隆创建失败`</block>
  <block id="cefdba9d50ceb96ca78c0e30698e6148" category="paragraph">这是存储系统端错误。请收集 sd-trace.log 和存储系统日志以进行故障排除。</block>
  <block id="d000da3d6f962f5bcf739fa940df6aee" category="paragraph">`0002-264`</block>
  <block id="ac658a376398e6d1b95b93c772346730" category="paragraph">`存储器 &lt; 存储器名称 &gt;` 不支持 FlexClone</block>
  <block id="db5dd6447ad06f6a5a4bf8db38407e96" category="paragraph">当前 Data ONTAP 版本的存储系统不支持 FlexClone 。将存储系统的 Data ONTAP 版本升级到 7.0 或更高版本，然后重试此命令。</block>
  <block id="e57beae488957ca466d0df211c797c22" category="paragraph">`0002-265`</block>
  <block id="804baf4c1a5b2bc871fb0c09707a229f" category="paragraph">`无法在 filer &lt;filername&gt;` 上检查 flex_clone 许可证</block>
  <block id="eba5fe3d856c941252638651dac42faa" category="paragraph">这是存储系统端错误。收集 sd-trace.log 和存储系统日志以进行故障排除。</block>
  <block id="95e86e523f7a2b00c0422c3aebfd6e0b" category="paragraph">`0002-266`</block>
  <block id="ea3f847a35344d656f8d08d3d214313b" category="paragraph">`FlexClone 在 filer &lt;filername&gt;` 上未获得许可</block>
  <block id="bc138d346bcf820a6b1013c80caf90a6" category="paragraph">FlexClone 未在存储系统上获得许可。在存储系统上添加 FlexClone 许可证后重试此命令。</block>
  <block id="d1f6822a04df7879afdb11ee43ae97ef" category="paragraph">`0002-267`</block>
  <block id="9aa3887c844c4cf7d7b5bec5ed4baeef" category="paragraph">`根卷 &lt;volume-name&gt; 不支持 FlexClone`</block>
  <block id="8df79af9462161220e9849c16c13eb05" category="paragraph">无法为根卷创建 FlexClones 。</block>
  <block id="8b8fc21ec588aa332ca45a1514e0d52d" category="paragraph">`0002-270`</block>
  <block id="d724a950ebb6890e24604b29d536c1db" category="paragraph">`聚合 &lt;aggregate-name&gt; 上的可用空间小于磁盘组 /FlexClone 元数据所需的 &lt;size&gt;MB （ MB ）`</block>
  <block id="9242643b6e3180c3746aa705221a1dd0" category="list-text">要使用 FlexClones 连接到原始 LUN ，聚合上需要 2 MB 的可用空间。</block>
  <block id="b1a2017ac4fd90b249dcdf413bf3537c" category="list-text">按照步骤 1 和 2 释放聚合上的一些空间，然后重试此命令。</block>
  <block id="7b79790bac6cf778e26a725306f88dc1" category="paragraph">`0002-332`</block>
  <block id="1e572fc03055fe73229ad996080a05a7" category="paragraph">对于用户 lnx197-142\john` ， qtree storage_array1 ： /vol/vol1/qtree1 上的 `s .d snapshot.Restore 访问被拒绝</block>
  <block id="fe9f4b287adb28ac491e583a661cf001" category="paragraph">请联系 Operations Manager 管理员以向用户授予所需功能。</block>
  <block id="d8bb3a6528f8edce5f1ebd994434eecc" category="paragraph">`0002-364`</block>
  <block id="814d860782edf5d023e713656c8bd898" category="paragraph">`无法联系 DFM ： lnx197-146 ，请更改用户名和 / 或密码。`</block>
  <block id="86f68daa5ec4d0c062b09e626088a65f" category="paragraph">验证并更正 SD-admin 用户的用户名和密码。</block>
  <block id="49350ad67d9d623d89701edd1159db8c" category="paragraph">`0002-268`</block>
  <block id="99875c2e31f5957980898cee346cf4df" category="paragraph">` &lt; 卷名称 &gt; 不是灵活卷`</block>
  <block id="2542bfe8efb8c6115b69c408d0a61dc2" category="paragraph">无法为传统卷创建 FlexClones 。</block>
  <block id="847132f5865b773135026b7ebe2ebff8" category="paragraph">`0003-003`</block>
  <block id="81f8426a3de16a99e34359bd17c0283d" category="list-text">`无法将存储系统 &lt;storage_name&gt; 上的 LUN &lt;LUN_name&gt; 导出到子操作系统。`</block>
  <block id="2c017706fc08fb055e060b65d5519529" category="list-text">检查 ESX 服务器（或） ESX 服务器中陈旧的 RDM 条目中是否存在任何 RDM LUN 映射。</block>
  <block id="9440d305330e616875e0f3fb6968fbb8" category="paragraph">`0003-012`</block>
  <block id="66b22c2687589de3df116737831f1cce" category="paragraph">`无法访问虚拟接口服务器 win2k3-225-238 。`</block>
  <block id="7095f2be42aa5080a403146555441b29" category="paragraph">未在上为主机 / 子操作系统配置 NIS 。</block>
  <block id="c8bde87df4065d8a3cab9c18914b4782" category="paragraph">您必须在位于 ` /etc/hosts` 的文件中提供名称和 IP 映射</block>
  <block id="19db3d72d30de64dc0e9d6e00812ec8a" category="paragraph">例如： ` # cat /etc/hosts10.72.225.238 win2k3-225-238.eng.org.com win2k3-225-238`</block>
  <block id="904519dc15841230b1badca16f643e1d" category="paragraph">`0001-552`</block>
  <block id="d4fbf2025edfedfa217f9614b224fae2" category="paragraph">`不是有效的卷克隆或 lun-clone`</block>
  <block id="2faaff7ee2d3fdcd7ef155e7fce4676b" category="paragraph">无法为传统卷创建克隆拆分。</block>
  <block id="cde2871f8a7213ae7bcad2e85899c600" category="paragraph">`0001-553`</block>
  <block id="70c9efab7f6e941cf8d2971aaed7cac3" category="paragraph">`由于 &lt;Filer- Name&gt;` 中的存储空间不足，无法拆分 "FS-Name"</block>
  <block id="5e9f0780f320658cad571b7f1c4d6478" category="paragraph">克隆拆分会继续拆分过程，但由于存储系统中没有足够的可用存储空间，克隆拆分会突然停止。</block>
  <block id="a595e217d817d8faa223ef1f9b47354b" category="paragraph">`0003-002`</block>
  <block id="cc1ec518f53105f281a4343fb1552078" category="paragraph">`无法将更多 LUN 导出到子操作系统。`</block>
  <block id="e10f93273136eadd6c8a64dee235caf3" category="paragraph">由于 ESX 服务器为控制器支持的设备数量已达到最大限制，您必须为子操作系统添加更多控制器。</block>
  <block id="2de0fa608f04e32e3321f36128a1062c" category="paragraph">* 注： * ESX 服务器将每个子操作系统的最大控制器数限制为 4 。</block>
  <block id="0e1f3b2d8f6e2fa6b4dfc9e53d500393" category="paragraph">`9000-023`</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1.</block>
  <block id="7cf9393a7922f37c760368019ba2d20b" category="paragraph">`关键字 -lun 无参数`</block>
  <block id="57c9332b6ce379f88dcbbeff983e046e" category="paragraph">如果带有 ` -lun` 关键字的命令没有 ` lun_name_` 参数，则会发生此错误。</block>
  <block id="3769c4072fb912c1c923f5bd1d9b496f" category="paragraph">操作：执行以下任一操作；</block>
  <block id="dbd1521f2c705582ccbc5d91d32bde69" category="list-text">使用 ` -lun` 关键字为命令指定 ` lun_name_` 参数。</block>
  <block id="10e2485155a9cbb19fbd4014f66d9dcd" category="list-text">检查 SnapDrive for UNIX 帮助消息</block>
  <block id="1384eaa6c22f2289856be8b443940eaa" category="paragraph">`0001-028`</block>
  <block id="73bc10b6450fec42ae02265feacc446d" category="paragraph">`文件系统 &lt;/mnt/qa/dg4/vol1&gt; 的类型（ HFS ）不受 SnapDrive 管理。请重新提交您的请求，而不显示文件系统 &lt;mnt/qa/dg4/vol1&gt;`</block>
  <block id="c388c9d3bb0632159df09f9e4ba853e9" category="paragraph">如果某个命令包含不受支持的文件系统类型，则会发生此错误。</block>
  <block id="02c075570df669221dd0a65b5f31602b" category="paragraph">操作：排除或更新文件系统类型，然后再次使用命令。</block>
  <block id="c87b7491e242265df9f06b190e2ce7ce" category="paragraph">有关最新的软件兼容性信息，请参见互操作性表。</block>
  <block id="447faa717229f64c872f470ef766ae7d" category="paragraph">`9000-030`</block>
  <block id="449282768e101cfe0f85b687e86beebf" category="paragraph">` LUN 不能与其他关键字` 结合使用</block>
  <block id="2ff2e4685cd96f2319d59b285d9b5abf" category="paragraph">如果将 ` -lun` 关键字与 ` -fs` 或 ` -dg` 关键字组合使用，则会发生此错误。这是一个语法错误，表示命令使用无效。</block>
  <block id="96c9784edbf71f3d8a92bd2e3e41749b" category="paragraph">操作：仅使用 ` -lun` 关键字重新执行命令。</block>
  <block id="2c22f79d2f9d52ffb8c25acb220be9e6" category="paragraph">`0001-034`</block>
  <block id="424efd4f2ed679d121b4d6bf0bc136ae" category="paragraph">`m挂载失败：挂载： &lt; 设备名称 &gt; 不是有效的块设备 "`</block>
  <block id="fe74599371b62e4f47fb70d9c9388d74" category="paragraph">只有当克隆的 LUN 已连接到 Snapshot 副本中存在的相同文件规范，然后您尝试执行 SnapDrive snap restore` 命令时，才会发生此错误。</block>
  <block id="c57bc56400c4d7c41074c372ad2b840c" category="paragraph">操作：执行以下任一操作：</block>
  <block id="fc7df101b6c8258d4e2b202cadbfa958" category="paragraph">`0001-046 和 0001-047`</block>
  <block id="cc11fabe9de6e6eb6a4e755f614d6efe" category="paragraph">`Snapshot 名称无效： &lt;/vol/vol1/no_filer_pre fix&gt; 或 Snapshot 名称无效： no_long_FILERname - 存储器卷名称缺失`</block>
  <block id="82250b4ad43444fe1bb4f40181987ea5" category="paragraph">这是一个语法错误，表示命令使用无效，尝试使用无效的 Snapshot 名称执行 Snapshot 操作。</block>
  <block id="44f136db157b424d9ee19c8df1a2049b" category="paragraph">操作：完成以下步骤：</block>
  <block id="9dd10a77925f51bc167463f5c928aef9" category="list-text">使用 SnapDrive snap list - filer &lt;filer-volume-name&gt; 命令获取 Snapshot 副本列表。</block>
  <block id="37f1ce99712fbd93c037b6f7619785f7" category="list-text">使用 long_snap_name 参数执行命令。</block>
  <block id="37def21ebe1788c14ce4f8dd205caa47" category="paragraph">`9000-047`</block>
  <block id="97384cb45d182f8e900ed693f5aca360" category="paragraph">`m提供了一个 -snapname 参数`</block>
  <block id="11866b902fc59b627a8e0f79b7c45ea9" category="paragraph">SnapDrive for UNIX 不能在命令行中接受多个 Snapshot 名称来执行任何 Snapshot 操作。</block>
  <block id="1bbe49ab3605592c153afa8a847357b2" category="paragraph">操作：使用一个 Snapshot 名称重新执行命令。</block>
  <block id="4e78dc875a23591c61f87367a449e4f5" category="paragraph">`9000-049`</block>
  <block id="f45839be013904a84cd982c88c01556f" category="paragraph">` -dg 和 -vg 不能组合使用`</block>
  <block id="213ba73ab7459eca46a11c74b0c9f7ff" category="paragraph">将 ` -DG` 和 ` -vg` 关键字组合使用时会发生此错误。这是一个语法错误，表示命令使用无效。</block>
  <block id="1ba8b15828a9b5a894b5c69b9a502f0d" category="paragraph">操作：使用 ` -dg` 或 ` -vg` 关键字执行命令。</block>
  <block id="3d92e86e6b87ea7a25ea59c080004db6" category="paragraph">`9000-1050`</block>
  <block id="4d32d10b85fba88ddee1651a3616fafc" category="paragraph">` lvol 和 -hostvol 不能组合使用`</block>
  <block id="4cac90ebfe2f7826eee1b2dbf70d6fee" category="paragraph">将 ` lvol` 和 ` -hostvol` 关键字组合使用时会发生此错误。这是一个语法错误，表示命令使用无效。操作：完成以下步骤：</block>
  <block id="da60499079085985fe479d4253c9f1e4" category="list-text">在命令行中将 ` lvol` 选项更改为 ` -hostvol` 选项，反之亦然。</block>
  <block id="2d234b4fca309595b6877fb52190c3f3" category="list-text">执行命令。</block>
  <block id="618ee7547fff1aa5bf21add9689ff3c3" category="paragraph">`9000-057`</block>
  <block id="c1deabb3dfe3acf0b467b4e2fae9a137" category="paragraph">`m使用所需的 -snapname 参数`</block>
  <block id="59242bc139c09d098522da8c260012e7" category="paragraph">这是一个语法错误，表示命令使用无效，在该命令中，尝试执行 Snapshot 操作时不提供 snap_name 参数。</block>
  <block id="929e8e2ba40483e54a6a7a13563a6935" category="paragraph">操作：使用适当的 Snapshot 名称执行命令。</block>
  <block id="cbae4dbb4689a32ff8d0854c7eac0858" category="paragraph">`0001-067`</block>
  <block id="1679091c5a880faf6fb5e6087eb1b2dc" category="paragraph">6.</block>
  <block id="ef710400ddf7014e6034d9e00a0d3401" category="paragraph">`snapshot hourly.0 不是由 SnapDrive 创建的。`</block>
  <block id="380a4e46fc9c9ac06564e46768e21374" category="paragraph">这些 Snapshot 副本是由 Data ONTAP 创建的每小时自动 Snapshot 副本。</block>
  <block id="507b6897b99d6904a8051caf4ff03d53" category="paragraph">`0001-092`</block>
  <block id="bfac1b04841941a978171ef59ec6a0bc" category="paragraph">`snapshot &lt;non_existent_24965&gt; doeservol Exocet 上不存在： &lt;/vol/vol1&gt;`</block>
  <block id="2b60427fd69d9d55a9e142e6b0c95a00" category="paragraph">在存储系统上未找到指定的 Snapshot 副本。操作：使用 SnapDrive snap list` 命令查找存储系统中的 Snapshot 副本。</block>
  <block id="8da55b407ad37b6ba3c94d7a7e43f5b2" category="paragraph">`0001- 099`</block>
  <block id="d3d9446802a44259755d38e6d163e820" category="paragraph">10</block>
  <block id="41f72feaddcd0098ff913713c489a829" category="paragraph">`Snapshot 名称无效： &lt;Exocet ： /vol2/dbvol ： New SnapName&gt; 与存储器卷名称 &lt;Exocet ： /vol/vol1&gt;` 不匹配</block>
  <block id="c1611b1cfe11dab073c1478c783bd5ab" category="paragraph">这是一个语法错误，表示命令使用无效，尝试使用无效的 Snapshot 名称执行 Snapshot 操作。</block>
  <block id="e5f9d5e7869a1852b79b1fd2c5a0fade" category="list-text">使用 SnapDrive snap list - filer _&lt;filer-volume-name_` 命令获取 副本列表。</block>
  <block id="c66e6d5d25b5eb4a2649939875262ba5" category="list-text">使用 SnapDrive for UNIX 限定的 Snapshot 名称的正确格式执行命令。限定格式为： ` lor_snap_name_` 和 ` Short_snap_name_` 。</block>
  <block id="f1998bd2d8ff2c6b6fdb96c88abc6fde" category="paragraph">`0001-122`</block>
  <block id="e071e8e0a31c1efdc4554f8ebd2c440b" category="paragraph">`无法在存储器 &lt;Exocet&gt; 上获取快照列表：指定的卷不存在。`</block>
  <block id="8cb02a4036ef8dba941acc4cd5c668d6" category="paragraph">如果指定的存储系统（存储系统）卷不存在，则会发生此错误。</block>
  <block id="aa7d3fddf5ba4f2af90779234b8aa083" category="list-text">请联系存储管理员以获取有效存储系统卷的列表。</block>
  <block id="4e11317ffb12929cdc303c26149a23eb" category="list-text">使用有效的存储系统卷名称执行命令。</block>
  <block id="2bee107722053f0a9e6c8dfefb914d14" category="paragraph">`0001-124`</block>
  <block id="698d51a19d8a121ce581499d7b701668" category="paragraph">111.</block>
  <block id="7dd0e29c4c3b9c2a8b12c756f92b4b85" category="paragraph">`无法在存储器 &lt;Exocet&gt; 上删除 &lt;snap_delete_m多云 _inuse_2437&gt; ： lun clone`</block>
  <block id="925c19c5bf1b2e3263bd5212b0e511e9" category="paragraph">对指定 Snapshot 副本执行 `Snapshot delete` 操作失败，因为存在 LUN 克隆。</block>
  <block id="bdc92fac8292a65aed6d7b9271b262d0" category="list-text">使用带有 ` -all` 选项的 lun storage show 命令查找 SnapDrive 副本的 lun 克隆（作为后备 副本输出的一部分）。</block>
  <block id="eadc445278d15cbb55333183baaf788f" category="list-text">请联系存储管理员将 LUN 从克隆中拆分。</block>
  <block id="343903d04f39570deb8278dd5f1f217b" category="paragraph">`0001-155`</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="paragraph">4.</block>
  <block id="df65e20b7670df5a8dd978813f1d8c96" category="paragraph">`snapshot &lt;dup_snapname23980&gt; 已位于 &lt;Exocet ： /vol/vol1&gt; 上。请使用 -f （强制）标志覆盖现有快照`</block>
  <block id="05ecdd99e5f7d74d61d9e6321e472ac4" category="paragraph">如果命令中使用的 Snapshot 副本名称已存在，则会发生此错误。</block>
  <block id="424041032a5f03ce166194a0f355780b" category="list-text">使用其他 Snapshot 名称重新执行此命令。</block>
  <block id="bfbbf8bf3a6e5fcbaf1c915977bda593" category="list-text">使用 ` -f` （ force ）标志再次执行命令以覆盖现有 Snapshot 副本。</block>
  <block id="2e9116e768577f1961fc864c4c0f90b6" category="paragraph">`0001-158`</block>
  <block id="68d30a9594728bc39aa24be94b319d21" category="paragraph">84.</block>
  <block id="9aaaa7a8d60eae4a1046e6847b84fa04" category="paragraph">自 `d&lt;snapshotexocet ： /vol/vo L1 ： overwrite_noforce_25 078&gt; 以来， iskgroup 配置已更改。已删除 hostvol /dev/dg3/vol4 &gt; 请使用 "-f" （强制）标志覆盖警告并完成还原`</block>
  <block id="165db7ad34a2014dbed563fc5e78e095" category="paragraph">磁盘组可以包含多个 LUN ，当磁盘组配置发生更改时，您会遇到此错误。例如，创建 Snapshot 副本时，磁盘组包含 X 个 LUN ，创建副本后，磁盘组可以包含 X+Y 个 LUN 。</block>
  <block id="8fd9d06b4ceecc0beaf511a323212a46" category="paragraph">操作：再次使用带有 ` -f` （ force ）标志的命令。</block>
  <block id="f3b54ddc6c1566e35d9579c55c0567f3" category="paragraph">`0001-185`</block>
  <block id="b02defc4edbcb0498120d89df4220452" category="paragraph">`storage show failed ：没有 NetApp 设备可在存储器上显示或启用 SSL ，或者在更改 SnapDrive.conf 以使用 http 进行存储器通信后重试。`</block>
  <block id="d6f5b78543d43a0d357f59f9cf67036a" category="paragraph">出现此问题的原因如下：</block>
  <block id="0ee6f284aa2f7c5cafae89c4f3f7bbd1" category="paragraph">如果主机上的 iSCSI 守护进程或 FC 服务已停止或出现故障，则 SnapDrive storage show -all` 命令将失败，即使主机上已配置 LUN 也是如此。</block>
  <block id="d7313ad3b495c29d6bd1183906f4ed78" category="paragraph">操作：解决发生故障的 iSCSI 或 FC 服务。</block>
  <block id="bea19e9fdf2f079c8f745dfd9482bc74" category="paragraph">配置了 LUN 的存储系统已关闭或正在重新启动。</block>
  <block id="1f367212743d27c3a3e6f33df1fe8e11" category="paragraph">操作：等待 LUN 启动。</block>
  <block id="27d5eaef6c538eb3844f647bee8c563c" category="paragraph">为 ` usehttps- to -filer_` 配置变量设置的值可能不受支持。</block>
  <block id="ede74dac33ff321da60ea576c4e42690" category="list-text">使用 `sanlun lun show all` 命令检查是否有任何 LUN 映射到主机。</block>
  <block id="deb19754adecc0583a4aff291909e370" category="list-text">如果有任何 LUN 映射到主机，请按照错误消息中所述的说明进行操作。</block>
  <block id="2ca4983c5ec065dadca06661e901267e" category="paragraph">将 ` _usehttps-` filter_`配置变量的值（如果值为 "`off` " ，则更改为 "` off` " ；如果值为 "`on` " ，则更改为 "`off " ）。</block>
  <block id="6171af32dc8e1305439261f349df651e" category="paragraph">`0001-226`</block>
  <block id="1aab48744c5dfccfddf62ffd91d03457" category="paragraph">`"snap creation" 要求所有文件专用系统均可访问请验证以下不可访问的文件专用系统：文件系统： &lt;/mnt/qa/dg1/vol3&gt;`</block>
  <block id="6fbce55cee1c5876275ef9d431e791ed" category="paragraph">如果指定的主机实体不存在，则会发生此错误。</block>
  <block id="adef3b1bc9fd2f11324dfd1c13c322e8" category="paragraph">操作：再次使用带有 ` -all` 选项的 SnapDrive storage show` 命令查找主机上存在的主机实体。</block>
  <block id="8dcc18a8aaf71a8dd1af7d4f5db6b06b" category="paragraph">`0001- 242`</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="paragraph">18</block>
  <block id="22423eff625b34817090b302d8af6a4d" category="paragraph">`无法连接到存储器： &lt;filername&gt;`</block>
  <block id="7b00f497bd9949152725143cd2d3f61f" category="paragraph">SnapDrive for UNIX 会尝试通过安全 HTTP 协议连接到存储系统。如果主机无法连接到存储系统，则可能会发生此错误。</block>
  <block id="ac3d31833e3514b39e5ff392d0f75e89" category="list-text">网络问题：</block>
  <block id="24f515961a03fc4ebe7850de27281e61" category="list-text">使用 nslookup 命令检查通过主机运行的存储系统的 DNS 名称解析。</block>
  <block id="8231cc8699bddb0a1df8f2f36bb6394b" category="list-text">如果存储系统不存在，请将其添加到 DNS 服务器。</block>
  <block id="2ba5c2e7dd8a779747c25c413c365a24" category="paragraph">您也可以使用 IP 地址而不是主机名来连接到存储系统。</block>
  <block id="ea011b4e9dd3a7d8ac934072191996de" category="list-text">存储系统配置：</block>
  <block id="542a64011bb95720737e0e2f32f60a01" category="list-text">要使 SnapDrive for UNIX 正常工作，您必须具有用于安全 HTTP 访问的许可证密钥。</block>
  <block id="da787c7ef4324f28556181a39156be22" category="list-text">设置许可证密钥后，请检查您是否可以通过 Web 浏览器访问存储系统。</block>
  <block id="86890485b8e027e6a3065b760e2534fd" category="list-text">执行步骤 1 或步骤 2 或两者后执行命令。</block>
  <block id="9611d62f0fb9fbcde52c5fd8d35f9a96" category="paragraph">`0001- 243`</block>
  <block id="6b98d2835999a5d179497c5091171db5" category="paragraph">`DG 名称无效： &lt;SDU_dg1&gt;`</block>
  <block id="1f804123483593d48456b8b404281df2" category="paragraph">如果主机中不存在磁盘组，则会发生此错误，进而导致命令失败。例如，主机中不存在 ` _SDU_dg1_` 。</block>
  <block id="b884e6cc14045bfc340226f3cfa769b8" category="list-text">使用 SnapDrive storage show -all` 命令获取所有磁盘组名称。</block>
  <block id="fd021f20fff57a2af9b6b4756821c448" category="list-text">使用正确的磁盘组名称重新执行命令。</block>
  <block id="13b28b24d4b21d09a88fc614f8cdfadb" category="paragraph">`0001- 246`</block>
  <block id="f1a8a3c31a531401cbbaac562434405c" category="paragraph">`无效的主机卷名称： /mnt/qa/dg2/bADFS&gt; ，有效格式为 &lt;vgname/hostvolname&gt; ，即 &lt;MyGroup/vol2&gt;`</block>
  <block id="c9c6f2ec8200e38f85703c86bd43fac5" category="paragraph">操作：使用以下适用于主机卷名称的格式重新执行命令： `vgname/hostvolname`</block>
  <block id="2c6ae242d1f2ce801f33a04cd53dbe67" category="paragraph">`0001- 360`</block>
  <block id="e369853df766fa44e1ed0ff613f563bd" category="paragraph">34</block>
  <block id="264974a685cb6ab57190f5f44b13d7dd" category="paragraph">`无法在存储器 &lt;Exocet&gt; 上创建 LUN &lt;/vol/badvol1/naneHP13_ unnewDg_fv_SdLun&gt; ：无此卷`</block>
  <block id="30ebde63103d91e045596374eb747dcf" category="paragraph">如果指定路径包含不存在的存储系统卷，则会发生此错误。</block>
  <block id="fad134dfcc68017d0623b82c4bfae3ef" category="paragraph">操作：请与存储管理员联系以获取可供使用的存储系统卷列表。</block>
  <block id="f8dab8d51a08388e255c26c3adc68a56" category="paragraph">`0001- 372`</block>
  <block id="66f041e16a60928b05a7e228a89c3799" category="paragraph">58</block>
  <block id="73b8680e3b0f5a5d756132b388275eab" category="paragraph">` + 错误的 LUN 名称：： +` ` &lt;/vol/vol1/SCE_lun2a&gt; - 无法识别格式`</block>
  <block id="5f6e932e70516e31b1e99a1d92a72296" category="paragraph">如果在命令中指定的 LUN 名称不符合 SnapDrive for UNIX 支持的预定义格式，则会发生此错误。SnapDrive for UNIX 要求按以下预定义格式指定 LUN 名称： ` &lt;filer-name ： /vol/&lt;volname&gt;/&lt;lun-name&gt;`</block>
  <block id="d766c01e788e9525117ca6ed25de3277" category="list-text">使用 SnapDrive help` 命令了解 SnapDrive for UNIX 支持的 LUN 名称的预定义格式。</block>
  <block id="c6c302ba566aa1ae6ca1e3242f857234" category="paragraph">`0001-`</block>
  <block id="eae1c71af6deddd2582e3c76ec24b30f" category="paragraph">`未找到以下所需的 1 个 LUN ： Exocet ： &lt;/vol/vol1/NotRealLun&gt;`</block>
  <block id="354d36846335613769b10119d00e5ba7" category="paragraph">如果在存储系统上未找到指定的 LUN ，则会发生此错误。</block>
  <block id="805ad558e0d9aeb24f30d07ff1101a29" category="list-text">要查看连接到主机的 LUN ，请使用 SnapDrive storage show -dev` 命令或 SnapDrive storage show -all` 命令。</block>
  <block id="5dccaebdc08e7e4d682168603da0f34d" category="list-text">要查看存储系统上的完整 LUN 列表，请与存储管理员联系，以从存储系统获取 lun show 命令的输出。</block>
  <block id="556f16c9f4fc6c8ed827b149ff25096a" category="paragraph">`0001-`</block>
  <block id="17e62166fc8586dfa4d1bc0e1742c08b" category="paragraph">43</block>
  <block id="cc80a3f7cbfcedf1d9e93b3dc737570e" category="paragraph">`d磁盘组名称 &lt;name&gt; 已在使用中或与其他实体冲突。`</block>
  <block id="3ff3bde84336b93ea27ad6274aee10df" category="paragraph">如果磁盘组名称已在使用中或与其他实体冲突，则会发生此错误。操作：执行以下任一操作：</block>
  <block id="b3613f4d9b930d272042821e66a7dfdc" category="list-text">使用 ` - autorename` 选项执行命令</block>
  <block id="1b42ae10efe66835561d5923b31a13dc" category="list-text">使用带有 ` -all` 选项的 SnapDrive storage show` 命令查找主机正在使用的名称。执行命令以指定主机未使用的其他名称。</block>
  <block id="1c2329c9a9b854be3558119102762b31" category="paragraph">`0001- 380`</block>
  <block id="1c6a351715e21d4915de291c48f929ba" category="paragraph">`主机卷名称 &lt;dg3/vol1&gt; 已在使用中或与其他实体冲突。`</block>
  <block id="db1dd235a0bd5313008d2767d232bd37" category="paragraph">如果主机卷名称已在使用中或与其他实体冲突，则会发生此错误</block>
  <block id="a4b6fac09332eb1d191782e3feb0c779" category="list-text">使用 ` - autorename` 选项执行命令。</block>
  <block id="b47af68ced7d146612f48655e872181c" category="paragraph">`0001- 417`</block>
  <block id="2838023a778dfaecdc212708f721b788" category="paragraph">51</block>
  <block id="d1e786f613d39c3a7ea3519e9a40ad7b" category="paragraph">`以下名称已在使用中： &lt;mydg1&gt; 。请指定其他名称。`</block>
  <block id="5a81b74f3f17784a523a580c33646125" category="list-text">使用 ` -autorename` 选项重新执行命令。</block>
  <block id="c1801172affca93a77b9dde8dac33dcf" category="list-text">使用 SnapDrive storage show - all` 命令查找主机上的名称。再次执行命令以明确指定主机未使用的其他名称。</block>
  <block id="aa5c80b9c79bdcd87962c22278b3baf1" category="paragraph">`0001- 430`</block>
  <block id="ac8e4651b21764eff42d799f45cf09ea" category="paragraph">`您不能同时指定 -dG/vg dg 和 - lvol/hostvol dG/vol`</block>
  <block id="6899d7d271a7f58470a2b198872b07ad" category="paragraph">这是一个语法错误，表示命令使用无效。命令行可以接受 ` -dg/vg` 关键字或 ` -lvol/hostvol` 关键字，但不能同时接受这两者。</block>
  <block id="1f232b31f99971d4936c0a3eab6abdc1" category="paragraph">操作：仅使用 ` -dg/vg` 或 ` - lvol/hostvol` 关键字执行命令。</block>
  <block id="4a763f8bef50eb9fa65607fdbf1b0327" category="paragraph">`0001-`</block>
  <block id="a2af249c6c7d1a32511a9856e335d0b4" category="paragraph">`snapshot Exocet ： /vol/vol1 ： not_E IST 不在存储卷 Exocet ： /vol/vol1` 上</block>
  <block id="6f6542ae0fbaed96e755a6b8caea53c0" category="paragraph">如果在存储系统上未找到指定的 Snapshot 副本，则会发生此错误。</block>
  <block id="06fd9cf1f520cf731457e97f088a5834" category="paragraph">操作：使用 SnapDrive snap list` 命令查找存储系统中的 Snapshot 副本。</block>
  <block id="4baba2d4730f98f8a011dee87ae6d66e" category="paragraph">`0001- 435`</block>
  <block id="48225fb794eecb3cdac55399e499c4cd" category="paragraph">`您必须在命令行上指定所有主机卷和 / 或所有文件系统，或者提供 -AutoExpand 选项。命令行中缺少以下名称，但在 Snapshot &lt;snap2_5vg_SINGLELUN _remote&gt; 中找到了这些名称： Host Volumes ： &lt;dg3/vol2&gt; File Systems ： &lt;/mnt/qa/dg3/vol2&gt;`</block>
  <block id="81695c8dfbd65d6bba3ad0f79fe17b4a" category="paragraph">指定的磁盘组具有多个主机卷或文件系统，但命令中不会提及完整的设置。</block>
  <block id="c03affb2c84a885a8b06b73051617bc4" category="list-text">使用 ` - AutoExpand` 选项重新发出命令。</block>
  <block id="9ce261a5026a684f91b8bdcce9006f0c" category="list-text">使用 SnapDrive snap show` 命令查找主机卷和文件系统的完整列表。执行命令以指定所有主机卷或文件系统。</block>
  <block id="4ba853b41d2554c83333731f8056859d" category="paragraph">`0001- 440`</block>
  <block id="0c1648f683283dd04e27db065b3d7278" category="paragraph">`snapshot snap2_5vg_SINGLELUN_ remote 不包含磁盘组 "gBAD"`</block>
  <block id="55c695b36f14592642c77c74c4095049" category="paragraph">如果指定的磁盘组不属于指定的 Snapshot 副本，则会发生此错误。</block>
  <block id="b8dbff864bfb5e0a2f16f901cea0114c" category="paragraph">操作：要确定指定磁盘组是否存在任何 Snapshot 副本，请执行以下任一操作：</block>
  <block id="5f52b3f06da7097cde071e1e67fbb87f" category="list-text">使用 SnapDrive snap list` 命令查找存储系统中的 Snapshot 副本。</block>
  <block id="3913935891c6068c724dc27219c4ff50" category="list-text">使用 snapshot show` 命令查找 SnapDrive 副本中的磁盘组，主机卷，文件系统或 LUN 。</block>
  <block id="a8e8071d00f9fc56b1a3c849ae143fc4" category="list-text">如果磁盘组存在 Snapshot 副本，请使用 Snapshot 名称执行命令。</block>
  <block id="c585e778b57f5ff7451422a1c11d224b" category="paragraph">`0001- 442`</block>
  <block id="01c4b1df1ee42f17a8fdc4f3517353e1" category="paragraph">`m多个目标 - 为单个 Snap 连接源 &lt;src&gt; 指定 &lt;dis&gt; 和 &lt;dis1&gt; 。请使用单独的命令重试。`</block>
  <block id="2bf469fb769b4688cc9a12cd34ec5817" category="paragraph">操作：执行单独的 SnapDrive snap connect` 命令，以使新的目标磁盘组名称（属于 snap connect 命令的一部分）与同一个 SnapDrive snap connect` 命令中已属于其他磁盘组单元的名称不同。</block>
  <block id="d0950bd8a01774a30c619194018be415" category="paragraph">`0001-`</block>
  <block id="75a7734a9946c6ca80c589be7b9ee014" category="paragraph">`以下文件名不存在且无法删除： disk Group ： &lt;naneHP13_ dg1&gt;`</block>
  <block id="3ba095775504d9b1dcaecb78613dbff2" category="paragraph">主机上不存在指定的磁盘组，因此对指定磁盘组执行的删除操作失败。</block>
  <block id="fcdddae053bf357a83240efd9d4c9857" category="paragraph">操作：使用带有 all 选项的 SnapDrive storage show` 命令查看主机上的实体列表。</block>
  <block id="8200985daf6c40958e7a54d71cf7b80f" category="paragraph">`0001- 476`</block>
  <block id="e5390ae8348da346be3ef30274ca0952" category="paragraph">`无法发现与 &lt; 长 LUN 名称 &gt; 关联的设备如果正在使用多路径，可能会出现多路径配置错误。请验证配置，然后重试。`</block>
  <block id="d643f17026edbf729a8d2a8cac5a4be4" category="paragraph">失败的原因可能有很多。</block>
  <block id="b50b9e0f7398ab40690758ead4d63a58" category="list-text">主机配置无效：</block>
  <block id="6992de45d5d76fbb034e7807f7401326" category="paragraph">未正确设置 iSCSI ， FC 或多路径解决方案。</block>
  <block id="017bf17e7206c223ce0d990904e42b90" category="list-text">网络或交换机配置无效：</block>
  <block id="88bbc9c4b45d648fefae551d9e62ba78" category="paragraph">未为 IP 网络设置适当的 iSCSI 流量转发规则或筛选器，或者 FC 交换机未配置建议的分区配置。</block>
  <block id="6e9eb27f655a86802c2688101f4f8406" category="paragraph">上述问题很难按算法或顺序进行诊断。</block>
  <block id="dd7b72ff0d4f92638eafdc74cd4593cd" category="paragraph">操作： NetApp 建议在使用适用于 UNIX 的 SnapDrive 之前，按照《主机实用程序设置指南》（适用于特定操作系统）中建议的步骤手动发现 LUN 。</block>
  <block id="37089534312b1354db90ab5bb3aa0c41" category="paragraph">发现 LUN 后，请使用 SnapDrive for UNIX 命令。</block>
  <block id="e32520f407f34c77c14beb7c42ca17c7" category="paragraph">`0001- 486`</block>
  <block id="c20ad4d76fe97759aa27a0c99bff6710" category="paragraph">12</block>
  <block id="661aae74277b103e14dabc8ce72bfccc" category="paragraph">`LUN 正在使用中，无法删除。请注意，在删除由卷管理器控制的 LUN 时，如果不先将其从卷管理器控制中正确删除，则会很危险。`</block>
  <block id="12179343a1044892fbc21af1c7188b2a" category="paragraph">SnapDrive for UNIX 无法删除属于卷组的 LUN 。</block>
  <block id="655fb833a857bc940558bfbc7de4b0d5" category="list-text">使用命令 SnapDrive storage delete -dg &lt;dgname&gt;` 删除磁盘组。</block>
  <block id="b2a6c1d292dd76a277ece5aeb7b6692e" category="list-text">删除 LUN 。</block>
  <block id="0f2cec51fcdda8d281705d6cf0b1b91e" category="paragraph">`0001- 494`</block>
  <block id="b394c4393c594d39ec4e96a49bc8fed0" category="paragraph">SnapDrive 无法删除 &lt;mydg1&gt; ，因为其中仍保留 1 个主机卷。使用 -full 标志删除与 &lt;mydg1&gt;` 关联的所有文件系统和主机卷</block>
  <block id="d9d4923c76783eaf1f8bafd93feb0168" category="paragraph">除非明确请求删除磁盘组上的所有主机卷，否则 SnapDrive for UNIX 无法删除该磁盘组。</block>
  <block id="f817abc7df6c7a0944a29756626d0ced" category="list-text">在命令中指定 ` 完整` 标志。</block>
  <block id="79a1133b40ab593fda914b47d707a036" category="list-text">使用 SnapDrive storage show -all` 命令获取磁盘组上的主机卷列表。</block>
  <block id="dacba076418f7d1f429419b9df764bd4" category="list-text">在 SnapDrive for UNIX 命令中明确提及其中的每一项。</block>
  <block id="9f29dc8d169613ef372342cb63be99f7" category="paragraph">`0001- 541`</block>
  <block id="fc490ca45c00b1249bbe3554a4fdf6fb" category="paragraph">65</block>
  <block id="f3398eea4fd602ede8adeb8a3ebe7070" category="paragraph">`访问权限不足，无法在存储器 &lt;Exocet&gt;.` 上创建 LUN</block>
  <block id="2e500c3b6a2e4de7bdc6f046c7213ed8" category="paragraph">SnapDrive for UNIX 在根存储系统（存储器）卷上使用 `sdhostname.prbac` 或 `sdgenergy.prbacfile` 作为其伪访问控制机制。</block>
  <block id="968c2bf289a04062793e4dd8c7765821" category="list-text">修改 `sd-hostname.prbac` 或 `sdgenic 。存储系统中的 prbac` 文件，以包含以下必需权限（可以是一个或多个）：</block>
  <block id="b50339a10e1de285ac99d4c3990b8693" category="list-text">无</block>
  <block id="adbf59b78dc42409c9d6b88cd2aa4b66" category="list-text">snap create</block>
  <block id="24437c00a2fd8df48da8304ce235a648" category="list-text">快照使用</block>
  <block id="658abaa8a56e84be5d22a4e67fe00011" category="list-text">捕获所有</block>
  <block id="6c2d1498fffd75f5db4c209b771a8433" category="list-text">存储创建删除</block>
  <block id="749725e97371127919ec1fc89493cf7e" category="list-text">存储使用情况</block>
  <block id="2f95ad9da13efb69c6dab8ba4cef0b10" category="list-text">全部存储</block>
  <block id="3d3dac4212a84d2f88795aaf81430d3a" category="list-text">所有访问</block>
  <block id="9a58b5aa20d973302c3a17ded0496b1a" category="paragraph">* 注： *</block>
  <block id="d571e5b49c1dc43e84c5ea0b7ed00de2" category="list-text">如果您没有 `sd-hostname.prbac` 文件，请修改存储系统中的 `sdgenic.prbac` 文件。</block>
  <block id="0c5bff9dcbc49fb4dbdd48781e69a5ce" category="list-text">如果您同时具有 `sd-hostname.prbac` 和 `sdgenergic.prbac` 文件，则只能修改存储系统中 `sdhostname.prbac` 文件中的设置。</block>
  <block id="a2cbba090a360d75a971ef052d04297d" category="list-text">在 `snapdrive.conf` 文件中，确保 `all-access-if-rbacunspecified` 配置变量设置为 "`on` " 。</block>
  <block id="a8230678c16d3a49954c130cce5f914e" category="paragraph">`0001-559`</block>
  <block id="fd5baf84d7f4422ce7594b8e13caa7a7" category="paragraph">`d快照时已设定 I/O 。请暂停应用程序。请参见 SnapDrive 管理员有关详细信息，请参见指南。`</block>
  <block id="8fca58cc2cf9c829c39201ea6d00d76a" category="paragraph">如果您尝试创建 Snapshot 副本，而对文件规范执行并行输入 / 输出操作且 `snapcreate-cg-timeout` 的值设置为紧急，则会发生此错误。</block>
  <block id="b2bec4e6374e90084497cef50b58351c" category="paragraph">操作：将 `snapcreate-cg-timeout` 的值设置为宽松，以增加一致性组超时的值。</block>
  <block id="77881d33702d56f91615f3b8c190f743" category="paragraph">`0001- 570`</block>
  <block id="b03abf2bf24004b957eeb0f5e6c9c820" category="paragraph">`d磁盘组 &lt;dg1&gt; 不存在，因此无法调整大小`</block>
  <block id="d1300cdd82702d343907c88232a16e2e" category="paragraph">如果主机中不存在磁盘组，则会发生此错误，进而导致命令失败。</block>
  <block id="32164a16042a8866e5bc371171359970" category="list-text">使用正确的磁盘组名称执行命令。</block>
  <block id="5ba1c4a9db3a7acd6bd66686da697921" category="paragraph">`0001- 574`</block>
  <block id="49c300f97df4d6fd1f56cc26dc658aa0" category="paragraph">` &lt;VmAssistant&gt;lvm 不支持调整磁盘组中 LUN 的大小`</block>
  <block id="b3a91cc32aeb19c95911eedc4d68ccd5" category="paragraph">如果用于执行此任务的卷管理器不支持调整 LUN 大小，则会发生此错误。</block>
  <block id="0919672f3068b54e17a10105d60698e2" category="paragraph">如果 LUN 属于磁盘组，则 SnapDrive for UNIX 将依靠卷管理器解决方案来支持调整 LUN 大小。</block>
  <block id="ecd1d712ce7a9803d2b3db9806e85cc6" category="paragraph">操作：检查所使用的卷管理器是否支持 LUN 大小调整。</block>
  <block id="d62add748763d0669a60597a598db600" category="paragraph">`0001- 616`</block>
  <block id="9b793df2e6585563da2998ccd32bea04" category="paragraph">在存储器上未找到 `1 个快照： Exocet ： /vol/vol1 ： MySnapName&gt;`</block>
  <block id="22820eee29a880421f1273b15b230c98" category="paragraph">SnapDrive for UNIX 不能在命令行中接受多个 Snapshot 名称来执行任何 Snapshot 操作。要更正此错误，请使用一个 Snapshot 名称重新发出命令。</block>
  <block id="c78dc155b132a814f49cf8c0f80a77f3" category="paragraph">这是一个语法错误，表示命令使用无效，尝试使用无效的 Snapshot 名称执行 Snapshot 操作。要更正此错误，请完成以下步骤：</block>
  <block id="66e72f02b8dc2a68e2ef702858a91cf2" category="list-text">使用 SnapDrive snap list - filer &lt;filer-volume-name&gt;` 命令获取 副本列表。</block>
  <block id="65426382fffd02e1a68959fe79c6bf3e" category="list-text">使用 ` * long_snap_name*` 参数执行命令。</block>
  <block id="67dac37e89b9dbacc04303142994c302" category="paragraph">`0001- 640`</block>
  <block id="cad990200e2955da58af30a825ae2cbb" category="paragraph">`根文件系统 / 不受 SnapDrive` 管理</block>
  <block id="77738a8380eace173e36f1bb6f7f4179" category="paragraph">如果 SnapDrive for UNIX 不支持主机上的根文件系统，则会发生此错误。这是对 SnapDrive for UNIX 的无效请求。</block>
  <block id="19cb4b2c3e154d125e25cdbf922741d2" category="paragraph">`0001- 684`</block>
  <block id="6c8349cc7260ae62e3b1396831a8398f" category="paragraph">45</block>
  <block id="f87ff2ca55880c61724739fc1d68eedc" category="paragraph">`m挂载表` 中已存在挂载点 &lt;fs_spec&gt;</block>
  <block id="cd09620c829bb7a040a06addae5d5bb2" category="list-text">使用其他挂载点执行 SnapDrive for UNIX 命令。</block>
  <block id="ff49e1c23e0c53c7825c64746a8ce8a5" category="list-text">检查挂载点是否未在使用中，然后手动（使用任何编辑器）从以下文件中删除该条目：</block>
  <block id="ee64e65064970c4c01c0a1c017c5bf3d" category="paragraph">Linux ： /etc/fstab</block>
  <block id="9ab934bed8349381fda1fc4977502f0b" category="paragraph">`0001- 796 和 0001- 767`</block>
  <block id="56fba47add89e8e6f791a6202eafe518" category="paragraph">`0001-796 和 0001-767`</block>
  <block id="eeb1c679ad0e17eef6cc56b4ed82afd9" category="paragraph">SnapDrive for UNIX 在使用 ` -nolvm` 选项的同一命令中不支持多个 LUN 。</block>
  <block id="3cde8a2b7be125d616fff3b86533d83d" category="list-text">再次使用命令仅使用 ` -nolvm` 选项指定一个 LUN 。</block>
  <block id="194f0995ecfa642ca5acbac349ee10cc" category="list-text">使用不带 ` - nolvm` 选项的命令。这将使用主机中支持的卷管理器（如果有）。</block>
  <block id="d678525ca18eada876d3782a8b373377" category="paragraph">`2715`</block>
  <block id="8c9833382e9ccc23ef809e6ea7e7e98d" category="paragraph">`卷还原 Zephyr 不可用于存储器 &lt;filename&gt; 请继续执行 LUN 还原`</block>
  <block id="356db0977887f8d242a766b970e42ef8" category="paragraph">对于较旧的 Data ONTAP 版本，卷还原 ZAPI 不可用。使用 SFSR 重新发出命令。</block>
  <block id="4e20c6432560a8796ba60f5a03e58c6d" category="paragraph">`2278`</block>
  <block id="d8b80148293ffa5626811466b7340b74" category="paragraph">`s在 &lt;snapname&gt; 无卷克隆后创建的快照 ... 失败`</block>
  <block id="146f6221168d68e06714b02056df02d0" category="paragraph">拆分或删除克隆</block>
  <block id="b84556705aea5437d72d27809f480c9d" category="paragraph">`2280`</block>
  <block id="c9cb2378548c874ff62be4ae120b63ba" category="paragraph">`LUN 已映射且未处于活动状态或 Snapshot &lt;fildedicate-name&gt; 出现故障`</block>
  <block id="858ff9410e39a64901d53e5f5455edca" category="paragraph">取消映射 / 存储会断开主机实体的连接</block>
  <block id="5963ebf17fc36a694b1863962f8344a7" category="paragraph">`2282`</block>
  <block id="c73689dc37ecd25821e1436604f25ba2" category="paragraph">`不存在 SnapMirror 关系 ... 失败`</block>
  <block id="6b717560cf580a33a7a4779a2e63cd06" category="list-text">删除关系，或</block>
  <block id="f8a82837ae436e7a5e279085794fa6ab" category="list-text">如果已配置 SnapDrive for UNIX RBAC 和 Operations Manager ，请要求 Operations Manager 管理员向用户授予 `s …… .DisruptionBaseline` 功能。</block>
  <block id="33bb2727c914af7c36d94c09291c5de9" category="paragraph">`2286`</block>
  <block id="6d2782fefd9577d38c7bafa58e9abc08" category="paragraph">`不属于 &lt;fsname&gt; 的 LUN 在快照卷中的应用程序一致 ... 失败。Snapshot LUN 不属于 &lt;fsname&gt; ，可能是应用程序不一致`</block>
  <block id="4d6978128cb28a56f25dbc47b0da76de" category="paragraph">验证检查结果中提及的 LUN 是否未在使用中。` 之后，请使用` -force 选项。</block>
  <block id="fc6e292aa75ef949bfc54e6c7f34501a" category="paragraph">`2286`</block>
  <block id="7a724d46ba50066d177704af8f84be05" category="paragraph">`Snapshot &lt;snapname&gt; 之后未创建新的 LUN ... 失败`</block>
  <block id="f87fec26cfaae8eb715ae951e7a888e0" category="paragraph">`2290`</block>
  <block id="1a96e6914fe0bdd9f0ea3cd8a57b6b01" category="paragraph">`无法执行不一致且较新的 LUN 检查。Snapshot 版本早于 SDU 4.0`</block>
  <block id="32dde60df77fb545f1da1e10b761db29" category="paragraph">与 ` -vbsr` 结合使用时，适用于 UNIX 快照的 SnapDrive 3.0 会发生这种情况。手动检查创建的任何较新的 LUN 是否不再使用，然后继续执行 ` -force` 选项。</block>
  <block id="b2af89370adbbe5594d112f60c4a60ec" category="paragraph">`2292`</block>
  <block id="98964a0431b89ea3bd1ecd33d75dfd0f" category="paragraph">`不存在新快照 ... 失败。创建的快照将丢失。`</block>
  <block id="cb821a563ef9ece75af1da3f49f46272" category="paragraph">检查检查检查结果中提到的快照是否将不再使用。如果是，请继续执行 ` -force` 选项。</block>
  <block id="49d38fc28e54e2690f93ae7e928f348f" category="paragraph">`2297`</block>
  <block id="6e664cf4d90505adf267df1c0f96c3c8" category="paragraph">`正常文件和 LUN 都存在 ... 失败`</block>
  <block id="1ccc42eb3026be9eda0df9c37eeac30d" category="paragraph">确保检查结果中提及的文件和 LUN 不再使用。如果是，请继续执行 ` -force` 选项。</block>
  <block id="07135bf20abcfb1263971afc2d8a40b1" category="paragraph">`2302`</block>
  <block id="05f64a7c87b6871525e80db2f16009a0" category="paragraph">`NFS 导出列表没有外部主机 ... 失败`</block>
  <block id="34973a406b20250f557d01c2d03050d1" category="paragraph">请联系存储管理员，从导出列表中删除外部主机，或者确保外部主机未通过 NFS 使用卷。</block>
  <block id="5c2995a8a38f7017d0cdf211ed49e343" category="paragraph">`9000-305`</block>
  <block id="d644e857e580a64ba7da5d3ed4df6560" category="paragraph">`无法检测实体 /mnt/my_fs 的类型。如果您知道实体的类型` ，请提供一个特定选项（ -lun ， -dg ， -fs 或 -lvol ）</block>
  <block id="0227ffe5ae18b06364b5b81e3957dfbe" category="paragraph">验证此实体是否已存在于主机中。如果您知道实体的类型，请提供 file-spec.</block>
  <block id="da3b6222fe4f2c2c5caef31df1ed17d3" category="paragraph">`9000-303`</block>
  <block id="f0876e984c25e6e40faa0ddb54da38ed" category="paragraph">`m主机上存在多个同名实体 - /mnt/my_fs 。为您指定的实体提供特定选项（ -lun ， -dg ， -fs 或 -lvol ）。`</block>
  <block id="7c0dd1ded4c8734ceaa67197e8390d92" category="paragraph">用户具有多个同名实体。在这种情况下，用户必须明确提供 file-spec. 类型。</block>
  <block id="d3dd5a6bcdb44dba46069249da502b77" category="paragraph">`9000-304`</block>
  <block id="fc0b5e251e888eeee854f1c64baf401e" category="paragraph">检测到 ` /mnt/my_fs 为文件系统类型的关键字，此命令不支持此关键字。`</block>
  <block id="aebf609c75070aa9f1e745622faafbbd" category="paragraph">此命令不支持对自动检测到的 file_Spec 执行操作。使用相应的帮助验证此操作。</block>
  <block id="1eeeaf2214c0ac6b8920d22dcb7581e1" category="paragraph">`9000-301`</block>
  <block id="e705e49fbc6a92a20e1da1535a2ba3c4" category="paragraph">`自动转引内部错误`</block>
  <block id="498c75d2bf9ee5a955ee67b9f1e75034" category="paragraph">自动检测引擎错误。提供跟踪和守护进程日志以供进一步分析。</block>
  <block id="a25a6d6ddc6043e86a99430890693223" category="paragraph">`snapdrive.dc 工具无法在 RHEL 5Ux 环境中压缩数据`</block>
  <block id="503c2508dc52f70d562668a8bbb5f68a" category="paragraph">默认情况下不会安装压缩实用程序。您必须安装压缩实用程序 `ncompress` ，例如 `ncompress-4.2.4-47.i386.rpm` 。</block>
  <block id="750e7baff819e0224212bae3a95b7e46" category="paragraph">要安装压缩实用程序，请输入以下命令： `rpm -ivh ncomprest-4.2.4-47.i386.rpm`</block>
  <block id="1e0bd550e5f7cd04aa028b655ef062a8" category="paragraph">`文件规范无效`</block>
  <block id="40297f849d0201a99f139e3990dbc662" category="paragraph">如果指定的主机实体不存在或不可访问，则会发生此错误。</block>
  <block id="9f93128fb7839e5285b031085a0d41a9" category="paragraph">`作业 ID 无效`</block>
  <block id="8a64830aa5331c3042717cdc750a0fc0" category="paragraph">如果指定作业 ID 无效或已查询作业结果，则会针对克隆拆分状态，结果或停止操作显示此消息。您必须指定有效或可用的作业 ID ，然后重试此操作。</block>
  <block id="36acf6d91a1bf524d969f6ae4e07f5aa" category="paragraph">`s已在执行中`</block>
  <block id="e88f0881734b4d3f2aee76e71c118f26" category="paragraph">在以下情况下会显示此消息：</block>
  <block id="1f288d87a73125bbe810b0aff8c0b2da" category="list-text">给定卷克隆或 LUN 克隆的克隆拆分已在进行中。</block>
  <block id="f38e7c09c225607479d2e9cf649babe5" category="list-text">克隆拆分已完成，但未删除作业。</block>
  <block id="5b8a39b979bc2d464210d5eb93266c20" category="paragraph">`不是有效的卷克隆或 LUN 克隆`</block>
  <block id="71540a3c8bcf9242abc68e99799e03eb" category="paragraph">指定的文件规范或 LUN 路径名不是有效的卷克隆或 LUN 克隆。</block>
  <block id="867b0fc6ac967cb6b7b8858e0a2a7cf0" category="paragraph">`没有可拆分卷的空间`</block>
  <block id="963702a7f0d4d1e6c87c6348d301286f" category="paragraph">此错误消息是由于无法使用所需的存储空间拆分卷而导致的。在聚合中释放足够的空间以拆分卷克隆。</block>
  <block id="7d5f78a2c6721bdc468c31a845e690c9" category="paragraph">`filer-data ： junction_dbsw 信息不可用— LUN 可能已脱机`</block>
  <block id="bbc160bb26bc36f44ceb27cc6b2004c4" category="paragraph">如果 ` /etc/fstab` 文件配置不正确，则可能会发生此错误。在这种情况下，虽然挂载路径为 NFS ，但 SnapDrive for UNIX 将其视为 LUN 。</block>
  <block id="4342d6af808f9c59d6b85d40c6b1689a" category="paragraph">操作：在存储器名称和接合路径之间添加 "/" 。</block>
  <block id="ccb2c8a937a810c130376da251912ed8" category="paragraph">`0003-013`</block>
  <block id="7b7ef5b25531c0536806d34b806249e2" category="paragraph">`虚拟接口服务器发生连接错误。请检查虚拟接口服务器是否已启动且正在运行。`</block>
  <block id="ba0c417077c7a66bd6f7b1c92310b471" category="paragraph">如果 ESX 服务器中的许可证到期且 VSC 服务未运行，则可能会发生此错误。</block>
  <block id="e22708e602a048cd0929b197377d72ac" category="paragraph">操作：安装 ESX Server 许可证并重新启动 VSC 服务。</block>
  <block id="3d83c5aa0669623ee36d0e77e1f70bcb" category="paragraph">`0002-137`</block>
  <block id="10af3b94b6676e3dd14330205f12b67d" category="paragraph">`无法从 Snapshot 10.231.72.21 ： /vol/ips_vol3 获取 10.231.72.21 的 fstype 和 mntOpts ： /vol/ips_vol3 ： T5120-206-66_nfssnap 。`</block>
  <block id="15945d01091979931cf9bbab8dcb581e" category="paragraph">操作：执行以下任一操作</block>
  <block id="8a9c218264140f554f453d498a65cdae" category="list-text">将数据路径接口的 IP 地址或特定 IP 地址作为主机名添加到 ` /etc/hosts` 文件中。</block>
  <block id="56efaad27ff3e86dd01460321d12980d" category="list-text">在 DNS 中为数据路径接口或主机名 IP 地址创建一个条目。</block>
  <block id="fafe024e31636cdd50654e64f4d30672" category="list-text">配置 SVM 的数据 LIF 以支持 SVM 管理（使用 firewall-policy=mgmt ）</block>
  <block id="7f32e48b66064891939484e1958b1adf" category="paragraph">` * 网络 int modify _-vserver vserver_nameLIF_name-firewall-policy_mgmt_*`</block>
  <block id="53d66244654ff91fda16727d938d7318" category="list-text">将主机的管理 IP 地址添加到 SVM 的导出规则中。</block>
  <block id="51be2b66f7af7a051627eb0cd5e00b74" category="paragraph">`13003`</block>
  <block id="9f61490de186ab06f743dbd6c5bed8e2" category="paragraph">`权限不足：用户无权读取此资源。`</block>
  <block id="2ea8ad0ae612a920be7103296e467b5d" category="paragraph">问题描述 for UNIX 5.2.2 中显示了此 SnapDrive 。在 SnapDrive for UNIX 5.2.2 之前，在 SnapDrive for UNIX 中配置的 vsadmin 用户需要具有 vsadmin_volume 角色。在 SnapDrive for UNIX 5.2.2 中， vsadmin 用户需要提升访问角色，否则 snapmirror-get-iter ZAPI 将失败。</block>
  <block id="2f81764d5c4cae54b9f852ed93224ee0" category="paragraph">操作：创建角色 vsadmin 而不是 vsadmin_volume 并分配给 vsadmin 用户。</block>
  <block id="b705c545b54cf9e54b8a1e24b6772283" category="paragraph">`0001-016`</block>
  <block id="8a19fd99695fea632c93dca079127d3f" category="paragraph">`无法在存储系统上获取锁定文件。`</block>
  <block id="1b71191c7a1c53a265813037818f1063" category="paragraph">由于卷中的空间不足， Snapshot 创建失败。或由于存储系统中存在 ` .SnapDrive_lock` 文件。</block>
  <block id="83e972c63fcb9b3648905d91f2292a00" category="list-text">删除存储系统上的文件 ` /vol/&lt;volname&gt;/.SnapDrive_lock` ，然后重试 snap create 操作。要删除此文件，请登录到存储系统，进入高级权限模式，然后在存储系统提示符处执行命令 `rm /vol/&lt;volname&gt;/.SnapDrive_lock` 。</block>
  <block id="ce70c64a4138a7bdb2844a33cc3341e0" category="list-text">在创建快照之前，请确保卷中有足够的可用空间。</block>
  <block id="0fd551b0fd9476c8b79343fda940d4a5" category="paragraph">`无法将存储系统 &lt; 控制器名称 &gt; 上的 LUN 导出到子操作系统。原因： flow-11019 ： MapStorage 故障：没有为存储系统配置接口。`</block>
  <block id="da2e857b1a460f00334a0d4ddcf8a822" category="paragraph">出现此错误的原因是缺少 ESX 服务器中配置的存储控制器。</block>
  <block id="f9e07f6e198a18b6d91284347ef8ae48" category="paragraph">操作：在 ESX 服务器中添加存储控制器和凭据。</block>
  <block id="b98d60a6bd6eed2a44a04d21088e3bd5" category="paragraph">`0001-493`</block>
  <block id="16aebe1378be919e44bab6056aa37cbe" category="paragraph">`创建挂载点时出错： mkdir 发出意外错误： mkdir ：无法创建目录：权限被拒绝检查挂载点是否位于自动挂载路径下。`</block>
  <block id="4b294f7559bf3bb9317a94c40637762a" category="paragraph">如果目标文件规范位于自动挂载路径下，则克隆操作将失败。</block>
  <block id="ca4b0305491f3716ee59c1f87bf31c95" category="paragraph">操作：确保目标文件规范 / 挂载点不在自动挂载路径下。</block>
  <block id="a04869c9bb2a83b902e3e4115b1208dd" category="paragraph">`0009-049`</block>
  <block id="d68a096de897f5e387cd0755a2e5b36b" category="paragraph">`无法从存储系统上的快照还原：无法从 SVM 上卷的 Snapshot 副本还原文件。`</block>
  <block id="edcd03854c8daf1e12bd9d270f1a70ae" category="paragraph">如果卷已满或超过自动删除阈值，则会发生此错误。</block>
  <block id="ab7098c17a843f4abe843e15315c6ebb" category="paragraph">操作：增加卷大小并确保卷的阈值保持在自动删除值以下。</block>
  <block id="300eb72fc87be153428a4084876ff505" category="paragraph">`主机准备新 LUN 失败：不支持此功能。`</block>
  <block id="848562097408a339c65eda0d32d103e7" category="paragraph">如果创建新的 LUN ID 失败，则会发生此错误。</block>
  <block id="1d92e8bccc6dbcbb7555d885bbd9a78e" category="paragraph">操作：增加要使用创建的 LUN 的数量</block>
  <block id="7fc4a0942f73c6388b9ff82fd34c7196" category="paragraph">` * SnapDrive 配置准备 _-count count_value_*`</block>
  <block id="e41391935b8ef639ce50e4c182f751a5" category="paragraph">命令：</block>
  <block id="f818b9bc0a60341379abb147ceedcfd2" category="paragraph">`0001-060`</block>
  <block id="cb5547d1a8b7bc4b8f9f69a7bef9058c" category="paragraph">`无法获取有关磁盘组的信息： volume Manager linuxlvm 返回的 vgdisplay 命令失败。`</block>
  <block id="ce10e77b1b3c4ff3e7376a15005941d4" category="paragraph">如果在 RHEL 5 及更高版本上使用 SnapDrive for UNIX 4.1.1 及更低版本，则会发生此错误。</block>
  <block id="b147497e7b484de0e45ccac34a499637" category="paragraph">操作：升级 SnapDrive 版本并重试，因为 RHEL5 及更高版本不支持适用于 UNIX 的 SnapDrive 4.1.1 及更低版本。</block>
  <block id="fe98dfa1c91cd7d154519da5b97a58a1" category="paragraph">`0009-045`</block>
  <block id="c397c93e12aec9b3bde76315b2ffc701" category="paragraph">`无法在存储系统上创建快照：由于由快照备份的克隆，不允许执行快照操作。请稍后重试。`</block>
  <block id="6af9cd8dd44e2340334bf43c798530cd" category="paragraph">在执行单文件快照还原（ SFSR ）操作后立即创建快照期间会发生此错误。</block>
  <block id="c1dd866e61daf2636dd6317a71dd037f" category="paragraph">操作：稍后重试 Snapshot 创建操作。</block>
  <block id="235db32c94ab19417a2eb612941af842" category="paragraph">`0001-304`</block>
  <block id="c4a385abf60704803c357391cb9736b6" category="paragraph">`创建磁盘 / 卷组时出错：卷管理器失败，并显示： metainit ：无此类文件或目录。`</block>
  <block id="0c4f609737ff0b2104c36f884fcf2ef6" category="paragraph">在 Sun 集群环境中执行 SnapDrive storage create dg ， hostvol 和 fs solaris 时会发生此错误。</block>
  <block id="6b214c54388cbafa7923adf54683ac93" category="paragraph">操作：卸载 Sun Cluster 软件并重试此操作。</block>
  <block id="785fa2a1cf25b867cdebae5cd327487c" category="paragraph">`无法在存储器上获取快照列表指定的卷 &lt;volname&gt; 不存在。`</block>
  <block id="8192c1aae4b922311fc3e07c5a8736bd" category="paragraph">如果 SnapDrive for UNIX 尝试使用卷的导出活动文件系统路径（实际路径）创建 Snapshot ，而不使用虚拟导出的卷路径创建 Snapshot ，则会发生此错误。</block>
  <block id="a781a19af48d9bb30cac34ed47fb9c7a" category="paragraph">操作：使用具有导出的活动文件系统路径的卷。</block>
  <block id="00a123ddafb27d0bfcd6459def0cb3ab" category="paragraph">`0001-476`</block>
  <block id="52141bc4f6e3600098ab5b25b4b5ae15" category="paragraph">`无法发现设备。如果正在使用多路径，可能会出现多路径配置错误。请验证配置，然后重试。`</block>
  <block id="f270f80755d11aa9b14f94f08e3ed97a" category="paragraph">出现此错误的原因有多种。</block>
  <block id="994aa1f36f841a37cd4d9dfdc286bd34" category="paragraph">要检查的条件如下：在创建存储之前，请确保分区正确。</block>
  <block id="90efff24e191423748c0ebecb1699743" category="paragraph">检查 `snapdrive.conf` 文件中的传输协议和多路径类型，并确保设置了正确的值。</block>
  <block id="513025ac8ee08a89ddee5a36447773e5" category="paragraph">如果 multipathing-type 设置为 nativempio start multipathd 并重新启动 snapdrived 守护进程，请检查多路径守护进程状态。</block>
  <block id="e125c3c5e2464120bfddcedb9097d583" category="paragraph">由于 LV` 不可用，重新启动后无法挂载 `FS</block>
  <block id="4338cdbc428be86e727eeb685f2f2221" category="paragraph">如果重新启动后 LV 不可用，则会发生这种情况。因此，未挂载文件系统。</block>
  <block id="858682c2c01e2202ae942eb445a6ff97" category="paragraph">操作：重新启动后，执行 vgchange 以启动 LV ，然后挂载文件系统。</block>
  <block id="ad4f73ebc25d15a29e95f87651f09f02" category="paragraph">`s对 SDU 守护进程的状态调用失败。`</block>
  <block id="ebc8a6dbdc133835be32cb98eefe68f2" category="paragraph">出现此错误的原因有多种。此错误表示与特定操作相关的 SnapDrive for UNIX 作业突然失败（子守护进程已结束），然后操作才能完成。</block>
  <block id="52211cf1748ec7990a90681e6e911843" category="paragraph">如果存储创建或删除失败，并显示 "Status call to SnapDrive for UNIX daemon failed" ，则可能是因为调用 ONTAP 以获取卷信息失败。volume-get-iter ZAPI 可能失败。请稍后重试 SnapDrive 操作。</block>
  <block id="5e844ac3426469fdabedcd1700c7174b" category="paragraph">由于 `multipath.conf` 值不适当，在创建分区或其他操作系统命令时执行 "kpartx -l" 时， SnapDrive for UNIX 操作可能会失败。确保设置了正确的值，并且 `multipath.conf` 文件中不存在重复的关键字。</block>
  <block id="814bce1cb5a0a0c300b7e9675d331c83" category="paragraph">在执行 SFSR 时， SnapDrive for UNIX 会创建临时 Snapshot ，如果已达到最大 Snapshot 值数，此 Snapshot 可能会失败。删除旧快照并重试还原操作。</block>
  <block id="e1f6610412beaf8f8dc579b78603d19a" category="paragraph">`m正在使用中；无法刷新`</block>
  <block id="0a01a50622d052bd0c4a44310932e3cf" category="paragraph">如果在存储删除或断开连接操作期间尝试刷新多路径设备时遗留了任何陈旧设备，则会发生此错误。</block>
  <block id="607a31273fa7f34f6a160887be206fc9" category="paragraph">操作：执行命令以检查是否存在任何陈旧设备</block>
  <block id="29693c46177ca52cc16fc7ed2f84fd3f" category="paragraph">` * 多路径 *`</block>
  <block id="27e2c632033cc4f9a22279e20babaedd" category="paragraph">` -l egrep -ifail_` 并确保在 `multipath.conf` 文件中将 ` _flush_on_last_del_` 设置为 "yes" 。</block>
  <block id="2baa56fec6789465f0c82d99ceeee8d7" category="summary">为 SnapDrive.conf 文件中的变量指定的值会影响日志文件的轮换。</block>
  <block id="125742aac93fada651be327f4459d3b1" category="doc">日志文件轮换设置</block>
  <block id="48738c28bc4ea0fd3a72e08389df8295" category="paragraph">您在 `snapdrive.conf` 文件中为变量指定的值会影响日志文件的轮换。</block>
  <block id="a2ea18c6bfd835acc7fad105fceffc4e" category="paragraph">您在 `snapdrive.conf` 文件中指定的值可启用日志文件自动轮换。如有必要，您可以通过编辑 `snapdrive.conf` 变量来更改这些值。以下选项会影响日志文件的轮换：</block>
  <block id="f326c530e8ed288fb8beb36518a26c81" category="list-text">`audit-log-max-size`</block>
  <block id="5a126a901091a98e48a49811c9cfb23d" category="list-text">`audit-log-save`</block>
  <block id="bced170504ac1e1274a79958c75d1afe" category="list-text">`trace-max-size`</block>
  <block id="7eb5dfeac6227bff4d2b605fca9bbcd8" category="list-text">`trace-log-max-save`</block>
  <block id="03515f4d92471df28dee879f92a7e7fe" category="list-text">`recovery-log-save`</block>
  <block id="42292272d055ccf341dc311abee76bd7" category="paragraph">通过自动日志轮换， SnapDrive for UNIX 会保留旧的日志文件，直到达到 `audit-log-save` ， `trace-log-save` 和 `recovery-log-save` 变量中指定的限制为止。然后，它将删除最旧的日志文件。</block>
  <block id="56f84e83a0079feffb1e6024463e293b" category="paragraph">SnapDrive for UNIX 通过在创建文件时为文件分配数字 "0" 来跟踪最旧的文件。每次创建新文件时，它都会将分配给每个现有日志文件的数量增加 1 。当日志文件的编号达到保存值时， SnapDrive for UNIX 将删除该文件。</block>
  <block id="2a01ffa6767cd86f599cd2ab9c1743f6" category="paragraph">* 示例： * 此示例使用 `ls` 命令显示有关系统上日志文件的信息。</block>
  <block id="cc9c55a08186f27cbee14861d4bb192f" category="paragraph">根据这些设置，您将在日志文件中看到以下信息。</block>
  <block id="477783120f4c563a23e521eacf92b648" category="summary">SnapDrive for UNIX 存储命令通过创建 LVM 对象来配置 LVM 实体。</block>
  <block id="f4b9ba53c74f0e4569195d9961b8726d" category="doc">LVM 环境中的 SnapDrive for UNIX 配置</block>
  <block id="46160ab15e59fa2c8d26579925008e3f" category="paragraph">如果您请求执行 SnapDrive for UNIX 存储操作来配置 LVM 实体，例如包含主机卷或文件系统的磁盘组，则 SnapDrive storage` 命令可与 LVM 配合使用，以创建使用该存储的 LVM 对象和文件系统。</block>
  <block id="06da1066e812251c7b798483e3b5b652" category="paragraph">在存储配置操作期间，将执行以下操作：</block>
  <block id="0d6b8cbc22eb2c9cfffc08872a71fff0" category="list-text">主机 LVM 将存储系统中的 LUN 组合成磁盘或卷组。</block>
  <block id="e1ab921758741427ed6cff36dcd14ac1" category="paragraph">然后，存储将划分为逻辑卷，这些逻辑卷将用作原始磁盘设备来存放文件系统或原始数据。</block>
  <block id="7d67fb5df0e8bfcf684f9cedce20ea30" category="list-text">SnapDrive for UNIX 与主机 LVM 集成在一起，以确定为 Snapshot 副本请求的每个磁盘组，主机卷和文件系统由哪些 NetApp LUN 构成。</block>
  <block id="028eba752ec999d15f97632556a66d55" category="paragraph">由于任何指定主机卷中的数据都可以分布在磁盘组中的所有磁盘上，因此只能为整个磁盘组创建和还原 Snapshot 副本。</block>
  <block id="5c73f6d66e623c1abd8f4acdd1267114" category="summary">有几个命令可以帮助您配置适用于 UNIX 的 SnapDrive 。</block>
  <block id="e7d6a134b08392dfbf4b340a52c0472d" category="doc">一些配置命令</block>
  <block id="a532e6b4183e5971f674e856f738e4a5" category="paragraph">下表总结了有助于配置 SnapDrive for UNIX 的其他命令：</block>
  <block id="816b4b65de3e1753775d6177d3392c97" category="cell">命令或操作</block>
  <block id="62d725abb1369ab0df1270e878203aeb" category="paragraph">配置和验证 SnapDrive for UNIX 软件的版本</block>
  <block id="5fc7be20a94b7cdf641b247f46a2948f" category="paragraph">` * SnapDrive 配置显示 *`</block>
  <block id="20c169f5a0c9ed3c0704f45845b70321" category="paragraph">检查 `snapdrive.conf` 文件中的值。</block>
  <block id="272442ecc8700e158d8e1f5dd9695388" category="paragraph">` * SnapDrive 版本 *``</block>
  <block id="44118b66e091c28b2bc6b1583fb184f1" category="paragraph">检查适用于 UNIX 的 SnapDrive 版本。</block>
  <block id="52085ffb337ee04db70dc05ac54b8f28" category="paragraph">启动 SnapDrive for UNIX 守护进程。</block>
  <block id="f804a35842d1f0e790c3152b22ef8592" category="paragraph">` * SnapDrive 配置准备 -count count_value*`</block>
  <block id="a217c1cbf9a24b6ee6619e7f4f22aa3d" category="paragraph">准备主机以创建特定数量的 LUN ，并确定可以创建的 LUN 数量。</block>
  <block id="d158c4972cbeb5d9ffd3215965b59714" category="paragraph">` * SnapDrive 配置集 -viadmin &lt;user&gt; &lt;vadmin_name&gt;*`</block>
  <block id="138e81153d6726e5a87d06635904d087" category="paragraph">准备子系统以在 Linux 子操作系统上创建 RDM LUN 。</block>
  <block id="08cead2e2196a1e19d63118338f862b7" category="admonition">通过在不使用主机实用程序的情况下使用 FCP 协议，您只能在 Linux 主机上使用这些命令。</block>
  <block id="122a5bb4cc66f75dc531ce1688637adf" category="paragraph">` * SnapDrive clone split *``</block>
  <block id="2e4d09dbfdfbee654b91f0b46511f4c2" category="paragraph">估算，启动，停止和查询卷克隆或 LUN 克隆的拆分状态。</block>
  <block id="9a7a024990d5fc53f0b8a35b280ed309" category="paragraph">编辑 `snapdrive.conf` 文件中的变量。</block>
  <block id="0c8f6dc286a99780dc6ac2e38c73b1e4" category="paragraph">更改日志文件的路径名称和选项。SnapDrive for UNIX 会将信息记录到三个文件中：</block>
  <block id="05176a0f52076d414d65e81123997d23" category="list-text">审核文件</block>
  <block id="955129579ed3ce77d978baf187ca27c3" category="list-text">恢复文件</block>
  <block id="4f6c66955ea087fb19c11d6634499977" category="list-text">跟踪文件</block>
  <block id="59e540a83416b69d48c45793cfb5ad49" category="paragraph">设置和显示主机与存储系统之间的访问控制权限。</block>
  <block id="896548d2f7b925e78267fb4723bb98fa" category="paragraph">编辑与该主机关联的存储系统上的访问控制权限文件（ SD ` _hostname_` .prbac ）。</block>
  <block id="5abb878f58ed08d340e32a0dccff6168" category="paragraph">指定主机对存储系统的访问控制权限。您可以为存储系统上的主机设置以下访问级别：</block>
  <block id="bde7ca5e59d73f6e1a731871817cf83c" category="list-text">无—无访问权限。</block>
  <block id="538e170cc60c8743d45080d8d32974bd" category="list-text">snap create —创建 Snapshot 副本。</block>
  <block id="9979d36cffa3a2bf5e13c1020d42560b" category="list-text">snap use--Delete 和 rename Snapshot 副本。</block>
  <block id="42386dba793b999e220af4f4e427d1e2" category="list-text">Snap All- 创建，还原，删除和重命名 Snapshot 副本。</block>
  <block id="09a52f41f15a5c0d61b640cecf5727b0" category="list-text">storage create delete-create ， resize 和 delete 存储。</block>
  <block id="baab6719edcf7cfaea94ef1fb72e704c" category="list-text">存储使用—连接和断开存储连接。</block>
  <block id="880ae8784b9e297f26bc2e8ca6012113" category="list-text">存储全部—创建，删除，连接和断开存储连接。</block>
  <block id="d05a87298f95e9182a8d0e0b9b183b48" category="list-text">所有访问—所有操作。</block>
  <block id="f9d9d9ee3f8524584094a6e42ba15f5e" category="paragraph">` * SnapDrive 配置访问 show &lt;filer_name&gt;*`</block>
  <block id="4a39f65007021edb0482da22bb716c34" category="paragraph">显示有关主机对存储系统的访问控制权限的信息。</block>
  <block id="25953eb30f12f34b79ef3866e8c5fd19" category="paragraph">` * SnapDrive 配置删除 &lt; 文件名 &gt;&lt;&lt; 文件名 &gt; 。。.]*`</block>
  <block id="2b2ebd9fc7df62f9fb82219fd01c032d" category="paragraph">从 SnapDrive for UNIX 中删除指定的用户名密码对。</block>
  <block id="fc963eaacb0574b5b5db43054cf444ff" category="summary">克隆拆分估计有助于估算拆分卷克隆所需的存储空间 \ （以 MB 为单位）。根据 SnapDrive for UNIX 提供的克隆拆分估计值，您可以确定用于拆分卷克隆的空间可用性。</block>
  <block id="e009a6e7bf291bfa88df4e81b6ecf86b" category="doc">估算用于拆分卷克隆的存储空间</block>
  <block id="0863ee4ec324b88f540ab36a121def0b" category="paragraph">克隆拆分估计有助于估算拆分卷克隆所需的存储空间（以 MB 为单位）。根据 SnapDrive for UNIX 提供的克隆拆分估计值，您可以确定用于拆分卷克隆的空间可用性。</block>
  <block id="b02cae8ba59a3b3959e6b3c0bc68133e" category="list-text">输入以下命令以估计拆分卷克隆所需的存储空间。</block>
  <block id="24bd010cdbd34f4292a81ffcd09be8d4" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun ） _lun_name_ 【 lon_lun_name_...】 | [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_SPS_ [_file_spec_...]] | "-snapname _lort_snap_name_] ｛ -volclone]-v | -verbose ）【 -dump | -dumpall]*`</block>
  <block id="517f4c8fe0eef56848fe0cade20b13a0" category="list-text">Container — FlexClone 的聚合</block>
  <block id="26244c79e14d9fb48a31820efeea26b8" category="list-text">Required Space —拆分卷克隆所需的空间</block>
  <block id="f75274af3a08bc35f91813aa87e03fce" category="list-text">存储状态—指示卷克隆拆分的可用空间</block>
  <block id="9e42b2dea8cdbc6534fd9809820ecd69" category="list-text">自有空间—卷克隆占用的空间</block>
  <block id="0ed9cc503b90a76e9860d64a041ce1dc" category="list-text">共享空间—卷克隆与父卷一起占用的空间</block>
  <block id="74b65845dbf63265cc427eddd273a02c" category="paragraph">以下示例估计了用于拆分卷克隆的存储空间。</block>
  <block id="e36507a1eb223d4944c4e772bbe8ae71" category="paragraph">对于每个文件规范， SnapDrive for UNIX 将确定在存储系统中拆分卷克隆所需的可用空间。此处， ` /mnt/my_mnt1` 文件规范具有所需的拆分空间，因此存储状态显示为可用。` ，` /mnt/my_mnt2 文件规范没有所需的拆分空间，因此存储状态显示为不可用。</block>
  <block id="9466679b82912f7fa4733214072096ec" category="summary">您可以使用命令 SnapDrive snap show 或 list 显示有关存储系统，存储系统卷，磁盘或卷组，文件系统， Snapshot 副本等。</block>
  <block id="163c3baadf8f524248a7cccf97d7ef8c" category="doc">使用 SnapDrive snap show 或 list 命令所需的信息</block>
  <block id="47ef82e2f9b0df03ef3cd979a5548c09" category="paragraph">您可以使用命令 SnapDrive snap show` 或 `list` 显示有关存储系统，存储系统卷，磁盘或卷组，文件系统， Snapshot 副本等。</block>
  <block id="fcdb531475078cd22bd28fa4e157f0ef" category="paragraph">下表提供了使用 SnapDrive snap show | list` 命令时需要提供的信息。</block>
  <block id="bd3510defe9952a48ab4ed26c8f2d6b1" category="admonition">无论输入 SnapDrive snap show` 还是 SnapDrive snap list` 作为命令，都可以使用相同的参数。这些命令是同义词。</block>
  <block id="90eac22584e3c0fc13e1b6f7b74d7217" category="paragraph">根据您输入的命令，您可以显示有关以下任一项的信息：</block>
  <block id="87d2b5d50a3f94d38a8b567627e0fb58" category="list-text">存储系统</block>
  <block id="53e6d1e219471201035f2c4a43b463cd" category="list-text">存储系统卷</block>
  <block id="f30dac0c67b41bf6006df3d2362edb96" category="list-text">磁盘或卷组</block>
  <block id="3b18b13f059019d19211f8a9f36f7e4e" category="list-text">文件系统</block>
  <block id="c6b11d9cabdf567066dcf84a79aac910" category="list-text">主机或逻辑卷</block>
  <block id="92d0a1aef2134a70d5c0f0279dc22ec6" category="list-text">Snapshot 副本</block>
  <block id="1b82dbfa4e139bd6b3cde3eb05c7328e" category="paragraph">为 `file_specs` 参数输入的值必须标识要显示其信息的存储实体。此命令假定实体位于当前主机上。</block>
  <block id="0cec5a7907f67d09eadd5c33965c0a1a" category="paragraph">存储系统（` 存储器` ）</block>
  <block id="066fa3199b11f5f1219d019845f1885c" category="paragraph">` 文件名 _`</block>
  <block id="6addbd9832db578eb18c571254f66c9b" category="paragraph">存储系统上的卷（` -filervol` ）</block>
  <block id="910a3b456b561a1b1a7423127012a02e" category="paragraph">` filervol_`</block>
  <block id="bd580b7d02bcc5881218575bcde36c41" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` -vg _file_spec_` ）</block>
  <block id="3170581f5e56e5832888bf2f00fb590a" category="paragraph">磁盘或卷组的 ` 名称 _`</block>
  <block id="87587dea2a795cb84a7112bdb89c78cd" category="paragraph">文件系统（` -fs _file_spec_` ）</block>
  <block id="706a6d67c48f696f6690b0fd0517c7cd" category="paragraph">主机卷（` -hostvol _file_spec_` ）或逻辑卷（` -lvol _file_spec_` ）</block>
  <block id="ba0d7268e1bec5d26a89b4d46b8ab91a" category="paragraph">主机或逻辑卷的 ` 名称 _`</block>
  <block id="3dc49f9d1dac79c6fdb483bedb3f1f53" category="paragraph">Snapshot 副本名称（` -snapname _lor_snap_name_` ）</block>
  <block id="ed87d7a5c1cbf9ee3a3affd9c49a88df" category="paragraph">` lor_snap_name_`</block>
  <block id="980a638b85df49f88ffbbab5d84a3379" category="paragraph">其他 Snapshot 副本名称</block>
  <block id="4ff827ce4574912c0c6f670351c59088" category="paragraph">` Snap_name_` （长版或短版）</block>
  <block id="0afe09b50d59ed1356c4882e0f0e483c" category="paragraph">如果要显示有关 Snapshot 副本的信息，请指定 Snapshot 副本的名称。对于第一个 Snapshot 副本 ` lor_snap_name_` ，请输入此名称的长版本，其中包括存储系统名称，卷和 Snapshot 副本名称。如果 Snapshot 副本名称位于同一个存储系统和卷上，则可以使用该名称的简短版本。</block>
  <block id="cd8ee0f35073977d1dd1b9dd477cdd2c" category="paragraph">要显示追加信息，请包含 ` -verbose` 选项。</block>
  <block id="787e68942370d213cb3ccc3fd2bfa943" category="summary">您可以使用 SnapDrive snap rename 命令更改 Snapshot 副本的名称。Snapshot 重命名操作会将源 Snapshot 副本的名称更改为目标参数指定的名称。</block>
  <block id="7dee3b5a0ef4bd0957ae1c3eebbeaa9b" category="doc">更改 Snapshot 副本名称</block>
  <block id="342f6a387a9e99349a6a55c028e9eb4c" category="paragraph">您可以使用 SnapDrive snap rename` 命令更改 Snapshot 副本的名称。Snapshot 重命名操作会将源 Snapshot 副本的名称更改为目标参数指定的名称。</block>
  <block id="aa5e66182da84f134a3b7729b891dff9" category="list-text">输入以下命令以更改 Snapshot 副本名称：</block>
  <block id="9d457c155abd8bc1f71fcae681b535da" category="paragraph">` * SnapDrive snap rename （ -snapname] _old_long_snap_name new_snap_name_ （ -force （ -noprompt]） *`</block>
  <block id="13a56a0c43ba8d7c5aa4e599721a152b" category="paragraph">以下是 SnapDrive snap rename` 命令的示例。第一个命令行包含 ` -force` 选项，因为名为 `new snapshot` copy 的 Snapshot 副本已存在。在第二个示例中，两个 Snapshot 副本名称都使用较长的名称形式，但它们都将解析为同一个存储系统卷。</block>
  <block id="78175ca4b41fa7e04ddbcadab68492db" category="summary">您可以将 SnapDrive for UNIX 配置为创建一致性组 Snapshot 副本。</block>
  <block id="5f58a4da5b2e124bda0d5098f13eb773" category="doc">创建一致性组 Snapshot 副本</block>
  <block id="87e3c89e70363e9fad2a357d521700a2" category="list-text">在主机上输入以下命令： +</block>
  <block id="c3f50eaf901a471c6bcd4d4eba3f2c4b" category="paragraph">` * SnapDrive snap create -fs /mnt/test -snapname _snapshotName_ -f -noprompts.*`</block>
  <block id="78486ff9883f29e2c9d7c7df20a5099b" category="paragraph">` _SnapshotName_` 是为一致性组 Snapshot 副本指定的名称。</block>
  <block id="c8fbc49fea171ae4f36c8e6fd483dc4d" category="paragraph">以下是命令示例：</block>
  <block id="e91d801d10a7450162be06b3a0f9df2d" category="paragraph">已成功创建一致性组 Snapshot 副本。</block>
  <block id="80a51aa04c77199eac913a7b12fe3440" category="summary">如果要启用日志文件，请在要启用的日志文件的名称 - 值对中指定一个文件名作为值。如果要禁用某个文件，请勿为日志文件名参数输入一个值。</block>
  <block id="fb90436abd3c23e898661dac25d6e532" category="doc">启用和禁用日志文件</block>
  <block id="92ee15279fe6b00723852baeac03b133" category="paragraph">您必须已以 root 用户身份登录。</block>
  <block id="bbb6dd2a54d1b808610e5bd99433316f" category="list-text">选择相应的选项以启用或禁用日志文件。</block>
  <block id="5d920b501536441ea32ecc24679c72a2" category="cell">如果您要 ...</block>
  <block id="c1325f6903ebb5ebb2bb519a73ddb1b0" category="cell">那么 ...</block>
  <block id="3a9b8ccbf40a8de35ec4a34f2863d387" category="paragraph">* 启用日志文件 *</block>
  <block id="83193e1722127316ba2faf6c16197ed0" category="list-text">审核日志： `sd-audit.log`</block>
  <block id="87192f48f47d811d2a35ae3d911f37c2" category="list-text">恢复日志： `sd-recovery.log`</block>
  <block id="2d372695cdfc9da3c7746920ae381ff9" category="list-text">跟踪日志： `sd-trace.log`</block>
  <block id="cddf7232cc7cd40eda62976d7d0bc575" category="admonition">这些文件的路径可能因主机操作系统而异。</block>
  <block id="e7353884c2f6b52175b0a1688bf7824c" category="paragraph">* 禁用日志文件 *</block>
  <block id="0a57390a83f193a2e7b8d4024906a116" category="paragraph">* 示例 * 此示例将禁用审核日志文件。`audit-log-file=""`</block>
  <block id="a5783a05379ac36ed09062c09a8df6a6" category="list-text">进行所有更改后，请保存 `snapdrive.conf` 文件。</block>
  <block id="cd47c90e7b3cd1e7af3f28b7cfb90a29" category="summary">您可以使用 SnapDrive snap delete 命令删除 Snapshot 副本。</block>
  <block id="a54b136db43ef934319f796c42778a3a" category="paragraph">您可以使用 SnapDrive snap delete` 命令删除 Snapshot 副本。</block>
  <block id="a5d880d1a20455b022b6ce329c443446" category="paragraph">` * SnapDrive snap delete （ -snapname] _long_snap_name_ [_snap_name ..._] （ -verbose ） [-force （ -noprompt]]*`</block>
  <block id="d22b4f5b3b43ba4706f42c42fd702c39" category="admonition">如果指定的 Snapshot 副本正在使用中，则此操作将失败。SnapDrive for UNIX 仅在删除所有 Snapshot 副本后才报告此操作已成功完成。</block>
  <block id="95d6474be7a48b9ee8e7156ed147fcbd" category="paragraph">SnapDrive for UNIX 会删除您在 `snap delete` 命令行中指定的 LUN 的现有内容，并将其替换为您指定的 Snapshot 副本中的 LUN 内容。</block>
  <block id="b8d080c5da8cd8f188fe112410523a11" category="paragraph">此示例显示了要删除的内容的列表：</block>
  <block id="07f14be12074f109c4e6ece9d8dcee61" category="summary">您可以将 Snapshot 副本与 LUN ， LUN 上的文件系统，磁盘组， NFS 目录或 LUN 上的共享磁盘组，主机卷和文件系统断开连接。</block>
  <block id="c7da9c68e970c5bc47d980b28ef1889a" category="doc">断开 Snapshot 副本的连接</block>
  <block id="f2a03d44e347a76b8fbbe954bc3277d3" category="admonition">您可以将拆分的克隆卷与 SnapDrive for UNIX 4.2 及更高版本断开连接。</block>
  <block id="07ac92d07a849f885f9267e91e41dadf" category="summary">用户名和密码允许 SnapDrive for UNIX 访问 SVM 。它还提供了安全性，因为除了以 vsadmin 身份登录之外，您还必须运行 SnapDrive for UNIX ，并在出现提示时提供正确的用户名和密码。</block>
  <block id="8fa213a9304eaa8178219673004723d7" category="doc">SVM 的登录信息</block>
  <block id="9a2b771c158ed68e4233f1f29bb71624" category="summary">如果在镜像存储系统上创建了 Snapshot 副本，则可以将源存储系统上的 Snapshot 副本连接到目标系统。</block>
  <block id="a4d4e7ffab29a45ac4286bdf1c6453c4" category="doc">在镜像存储系统上连接 Snapshot 副本</block>
  <block id="7eff625fb3402a8c0ad91edee7510e94" category="paragraph">在镜像存储系统上创建 Snapshot 副本时， Snapshot 副本会自动从创建该副本的源系统复制到目标（镜像）存储系统。SnapDrive for UNIX 允许您在源存储系统上连接 Snapshot 副本。您还可以在目标存储系统上连接 Snapshot 副本。</block>
  <block id="dfbb757f2fbe527eda9387de0f927cc4" category="summary">要使用 SnapDrive storage connect 命令，您需要遵循一些准则。</block>
  <block id="1901e2549bc18b426f4ba38e1c41427b" category="doc">storage connect 命令的准则</block>
  <block id="05a444c361a9c8411b2fdefdc9fc6c63" category="paragraph">要使用 SnapDrive storage connect` 命令，您需要遵循一些准则。</block>
  <block id="02458696fe2aa801e0d65c206689d7ac" category="paragraph">包含 LVM 实体的存储具有特殊要求。要使用 SnapDrive storage connect` 命令连接 LVM 实体，必须创建存储，以便存储层次结构中的每个实体都只有一个下一个实体的实例。例如，您可以使用 SnapDrive storage connect` 命令连接一个存储层次结构，该存储层次结构包含一个磁盘组（ dg1 ），一个主机卷（ hostvol1 ）和一个文件系统（ fs1 ）。但是，您不能使用 SnapDrive storage connect` 命令连接一个层次结构，其中一个磁盘组（ dg1 ）包含两个主机卷（ hostvol1 和 hostvol2 ）和两个文件系统（ fs1 和 fs2 ）。</block>
  <block id="9b1f79fac6cb836a198c48e00f6cf7e9" category="paragraph">在 Linux 主机上，只有在对底层 LUN 进行分区后， SnapDrive storage connect` 命令才会连接直接在 LUN 上创建的文件系统。</block>
  <block id="460675214052774031c292a6ecb2b736" category="admonition">使用 SLES10 Update 2 ， SnapDrive for UNIX SnapDrive storage connect` 和 SnapDrive storage create` 命令可直接在 LUN 上创建文件系统。SnapDrive for UNIX 会在原始设备上创建一个文件系统，然后挂载该文件系统。</block>
  <block id="78549ce6bf0d4e52f8cbf23f3863da11" category="summary">SnapDrive 提供了不同的向导，可帮助您以交互方式执行特定的 SnapDrive 操作。</block>
  <block id="025eedf29ac5fd858a55a4244d916c82" category="doc">什么是 SnapDrive 向导</block>
  <block id="6dc7605c251b415982e21546bd8be9ff" category="summary">您可以在创建 Snapshot 副本的存储系统上还原 Snapshot 副本。</block>
  <block id="cc921359d9d7013bb0a011ad9314627b" category="paragraph">在目标存储系统上创建 Snapshot 副本时， Snapshot 副本会自动从创建该副本的源系统复制到目标存储系统。通过 SnapDrive for UNIX ，您可以还原源存储系统上的 Snapshot 副本。您还可以在目标存储系统上还原 Snapshot 副本。</block>
  <block id="7759f1fff15492118e354288bf3b423d" category="paragraph">如果要在 SnapMirror 关系中执行单个文件快照还原，则源卷名称和目标卷名称不应相同。如果源卷名称和目标卷名称相同，则 SnapDrive for UNIX 将显示以下错误消息：</block>
  <block id="be85e040fe75b354ca1ba6e265db0ee6" category="paragraph">在适用于 UNIX 的 SnapDrive 4.0 及更高版本中，如果启用了基于角色的访问控制，则只有在 vFiler 单元具有 Snapshot 还原功能时，才能在 vFiler 单元上执行快照还原。</block>
  <block id="86b4365f18dc3c5b6b7deb2a0a4859ed" category="summary">在还原 Snapshot 副本之前，请确保您未使用文件系统，并且不会中断还原过程。</block>
  <block id="14ba898d721b91c83339667686a0f501" category="doc">还原 Snapshot 副本的注意事项</block>
  <block id="f4e3782cb929bd79b4f6bad011065a64" category="paragraph">在还原 Snapshot 副本之前，请考虑以下重要信息：</block>
  <block id="e6e1c806bd116c46124a0ed6fd7ab49b" category="list-text">确保您不在要还原的文件系统上的任何目录中。您可以从任何目录执行 SnapDrive snap restore` 命令，但要将信息还原到的文件系统上的目录除外。</block>
  <block id="172da28c3ea7047628bbcd2b483853bd" category="list-text">请勿输入 Ctrl-C 中断还原操作这样做可能会使系统处于不可用的配置中。如果发生这种情况，您可能需要联系 NetApp 技术支持才能恢复。</block>
  <block id="4e0dccbc8ef4bf0b60509567a1eac03c" category="list-text">将 NFS 实体导出到卷时，请将匿名用户 ID 选项设置为 "`0` " ，以便 SnapDrive snap restore` 命令能够成功运行。</block>
  <block id="d46f5e6a633d219f620caa1e370b4929" category="summary">SnapDrive for UNIX 5.0 或更高版本可在 Linux 中为多路径和非多路径环境提供存储分区功能。</block>
  <block id="32de2fe97a097bd155c989327de86510" category="doc">支持的分区设备</block>
  <block id="eba1dce287244a047f6d5283f332215a" category="paragraph">您必须按照准则使用适用于 UNIX 的 SnapDrive 对存储设备进行分区。</block>
  <block id="8401dcd677a02df3fec7e6db92692bb2" category="paragraph">在 Linux 中使用逻辑卷管理器时，必须使用未分区的 LUN 。</block>
  <block id="8c235f63c9de3937cd61f0c71634de90" category="paragraph">下表提供了分区信息以及如何为不同的操作系统启用分区信息：</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="cell">操作系统</block>
  <block id="eef67ff15a4127c321964ba5ac35e320" category="cell">单个分区</block>
  <block id="fe5140a7939f0efa7929769ad3151380" category="cell">多个分区</block>
  <block id="c977275f99fc6b313ac424d16894f350" category="cell">非分区设备</block>
  <block id="c410b0bed4aa121a30e3edd9390f6858" category="cell">文件系统或原始设备</block>
  <block id="65847f1b236a6e826ae7f147a15b957b" category="paragraph">Red Hat Enterprise Linux 5 倍</block>
  <block id="dd8f660117eb95e489b0c2ec695b27f9" category="paragraph">Oracle Enterprise Linux 5 倍</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="paragraph">否</block>
  <block id="bceab77a3dd776918c0403d43679e146" category="paragraph">ext3*</block>
  <block id="3cd514c05533a9591831d58e101cd523" category="paragraph">Red Hat Enterprise Linux 6x</block>
  <block id="34039c6bd1ccde435ff955e939533463" category="paragraph">Oracle Enterprise Linux 6 倍</block>
  <block id="b7915d9d4cd56041a4478be54eaad47b" category="paragraph">ext3 或 ext4*</block>
  <block id="39639ee8d62cba02f91b68df0563998c" category="paragraph">SUSE Linux Enterprise Server 11</block>
  <block id="a58ff3543bdd4887dec931f5116e6135" category="paragraph">SUSE Linux Enterprise Server 10</block>
  <block id="b1b97bac1ed7c1f9ab685dc410531098" category="paragraph">ext3***</block>
  <block id="675e74f51b9e2442e3a3f599280bcb99" category="paragraph">Red Hat Enterprise Linux 5x 或更高版本</block>
  <block id="13f082ce0ac068ed8c9bee016d841573" category="paragraph">Oracle Enterprise Linux 5x 或更高版本</block>
  <block id="f931af8f038528a9c4f4bcea6bcac8b9" category="paragraph">使用 ASMlib* 的 ASM</block>
  <block id="3cfc98c175bf783bd16a20745749b708" category="paragraph">SUSE Linux Enterprise Server 10 SP4</block>
  <block id="96c419db90f630c44df291141932a7c1" category="paragraph">SUSE Linux Enterprise Server 10 SP4 或更高版本</block>
  <block id="12f619a4d1808b4dd9d0859eb0a913ab" category="paragraph">不使用 ASMlib'%'* 的 ASM</block>
  <block id="3389dae361af79b04c9c8e7057f60cc6" category="paragraph">*</block>
  <block id="3006c60e25480c4d83b26aaedcb70d26" category="paragraph">对于非 MPIO 环境，请输入以下命令： ` * sfdisk -us -f -L -q /dev/_device_name_*`</block>
  <block id="96fb40332961c07660e152ec952952fd" category="paragraph">对于 MPIO 环境，输入以下命令：</block>
  <block id="7c10a04851fb9c346ddf4e465dad8d32" category="list-text">` * sfdisk -us -f -L -q /dev/_device_name_*`</block>
  <block id="75170f368a651d5a178e2c856d8ebfe3" category="list-text">` * kpartx -a -p p /dev/mapper/ _device_name_*`</block>
  <block id="514faf5a71b4f0f67374c388f37aa0d7" category="paragraph">*</block>
  <block id="359619a0e1c09286be65d2f2a4327231" category="paragraph">对于非 MPIO 环境，输入以下命令： ` * fdisk /dev/_device_name_*`</block>
  <block id="d345552dd73c844392ace35406e6be96" category="list-text">` * fdisk /dev/mapper/_device_name_*`</block>
  <block id="d10f6876227425e6c71ddad4dd23140e" category="list-text">` * kpartx -a -p p /dev/mapper/_device_name_*`</block>
  <block id="488ef17badbd6656db3971ae7a30c9f4" category="paragraph">\***</block>
  <block id="1727ed989c7f4287136d81d78aeb960e" category="paragraph">不适用。</block>
  <block id="c62983f964dced8ad2805d5ec49a97c4" category="paragraph">\'\'\'\'\</block>
  <block id="282b30e711b36ea8fd32f9518a883561" category="paragraph">对于 MPIO 环境，输入以下命令：</block>
  <block id="c7642e585cb4cc8c2ebe3630eb6ba8aa" category="list-text">` * kpartx -a -p /dev/$kernel*`</block>
  <block id="4193f1cbe828c29fba37bc9250c8ab9e" category="paragraph">* 一般注意事项 *</block>
  <block id="d6d6820cbc54cb5c0820913e063d7222" category="paragraph">在 SnapDrive for UNIX 4.2 中创建的 Snapshot 副本基于分区设备。这些 Snapshot 副本可以在 SnapDrive for UNIX 5.0 及更高版本中进行还原，连接并受支持。</block>
  <block id="a9bc2f27f959c4a6acdcba2a40da8850" category="summary">以下示例显示了当您不是执行特定操作的授权用户时可能会收到的错误消息。</block>
  <block id="75c0f4e3be043959e00cbd143941fb82" category="doc">对多个存储对象执行的操作</block>
  <block id="e06d50c60e25243d856d9403f4f08fda" category="paragraph">John 有权在 vol2 上列出存储实体，但不能在 vol1 上列出。SnapDrive for UNIX 将显示 vol1 的实体并显示 vol2 的警告消息。</block>
  <block id="b5535e176353f29499d528c6a201cdea" category="admonition">对于 `storage list` ， `storage show` ， `snap list` 和 `snap show` 命令，适用于 UNIX 的 SnapDrive 将显示警告而不是错误。</block>
  <block id="3b11786c803957ce3422b07df59aa883" category="summary">通过适用于 UNIX 的 SnapDrive ，您可以增加存储系统卷组或磁盘组的大小。您可以使用 SnapDrive storage resize 命令执行此操作。</block>
  <block id="8de584507473eda59b8ba5e41b261b3e" category="doc">使用 SnapDrive for UNIX 增加存储大小</block>
  <block id="e998f476457c090c0464c677edf8de2c" category="paragraph">通过适用于 UNIX 的 SnapDrive ，您可以增加存储系统卷组或磁盘组的大小。您可以使用 SnapDrive storage resize` 命令执行此操作。</block>
  <block id="c8ea7e9ea8e5955e5f3c64c61adadebc" category="admonition">此命令不允许调整主机卷或文件系统的大小。例如，不能使用 resize 命令更改 LUN 上文件系统的大小。调整底层磁盘组的大小后，您需要使用 LVM 命令调整主机卷和文件系统的大小。</block>
  <block id="37582334346f0b1a1470ab0fe1224803" category="paragraph">您可以将存储调整大小操作分为以下常规类别：</block>
  <block id="53a1c0564ab4f2780c1acf4208fadbf7" category="list-text">设置要将存储增加到的目标大小（以字节为单位）</block>
  <block id="d6f67e8a878ee485e5d6619fe15dcc94" category="list-text">指定要增加存储的字节数</block>
  <block id="ab334707c849a0ddaa796b8db405ee22" category="paragraph">SnapDrive for UNIX 将添加系统生成的 LUN 。如果指定要增加存储的容量（例如 50 MB ），则会使 LUN 达到 50 MB 。如果指定存储的目标大小，则会计算当前大小与目标大小之间的差值。此差异将成为随后创建的 LUN 的大小。</block>
  <block id="f37eeda992626ada8a6bbe308d25a8d9" category="summary">您可以连接到驻留在一个卷中的多个文件系统。以下示例介绍了如何完成此操作。</block>
  <block id="e695b56c87b725267e82d31e533aaa81" category="doc">连接到多个文件系统</block>
  <block id="678bf9a7c9e7f8d463a48fc6eed7a057" category="paragraph">要创建受限的 FlexClone ，您需要在 `snapdrive.conf` 文件中设置 `san-clone-method = unrestricted` ，或者在连接到多个文件规范之前设置 `` -clone unrestricted` 。此示例显示了要连接到卷 vol1 中 snap1 中的多个 filSpec ` /mnt/fs_1` 和 ` /mnt/fs_2` 时的结果。</block>
  <block id="6cc4540bec5021628cf436183271a916" category="paragraph">/mnt/fs_1 和 /mnt/fs_2 的布局如下所示：</block>
  <block id="bdb7666c35010236fd17c745d59ab266" category="paragraph">在此，用户使用了 Snapshot snap2 ，其中包含用于 snap connect 的应用程序一致 Snapshot ` /mnt/fs1` 和 ` /mnt/fs2` 。</block>
  <block id="c95062ad3bfec94d74f7b2439c2ca15a" category="paragraph">在这种情况下， SnapDrive for UNIX 已从 Snapshot snap2 创建了一个不受限制的 FlexClone `Snapdrive_vol1_0_volume_clone_from_snap2_Snapshot` 。然后，该虚拟机将连接到 LUN testlun1 和 testlun2 ，分别创建克隆的主机文件系统 ` /mnt/fs1_0 和 /mnt/fs2_0` 。</block>
  <block id="67eeb882b389e9239a414177fad0744c" category="summary">您可以将 Snapshot 副本从一台主机连接到另一台主机。</block>
  <block id="bcd25ac7776c9dec360040d0d144ead6" category="doc">连接到 Snapshot 副本</block>
  <block id="a3c152f5a45c5655abfd8fba8225ba66" category="paragraph">通过 SnapDrive for UNIX ，您可以将主机从主机上的其他位置连接到 Snapshot 副本。此新位置可以位于创建 Snapshot 副本的主机（发起主机）上，也可以位于其他主机（非发起主机）上。</block>
  <block id="71df8ad29db36a70e816324400d12e81" category="paragraph">能够在新位置设置 Snapshot 副本意味着您可以将 Snapshot 副本备份到另一个介质，对磁盘组执行维护或访问 Snapshot 副本数据，而不会中断数据的原始副本。</block>
  <block id="d03a2a84bfa717c03d094c3dcf34f3ae" category="paragraph">使用此命令，您可以将主机连接到包含以下任一内容的 Snapshot 副本：</block>
  <block id="1b66368f36263282a007a28415552603" category="list-text">共享存储系统上的磁盘组，主机卷和文件系统</block>
  <block id="24fe4502f5af87e5b9346afa1cdd70b5" category="summary">您可以使用 nfs config delete -mgmtpath 命令删除与 SnapDrive 环境中特定管理接口关联的数据接口条目。</block>
  <block id="0f416195c3cd2491fac7340c837185c0" category="doc">删除管理接口的数据接口条目</block>
  <block id="afa8d7bcc021c4c508cb996c99940349" category="paragraph">您可以使用 nfs config delete -mgmtpath` 命令删除与 SnapDrive 环境中特定管理接口关联的数据接口条目。</block>
  <block id="400b98347de1827758ef57c81fb7a991" category="list-text">在 CLI 中，输入以下命令：</block>
  <block id="acda4ac60f769b1c5276be6d3f428acd" category="paragraph">` * SnapDrive config delete -mgmtpath data_interface*`</block>
  <block id="379868824ebd36dcbd9e9b40121d0127" category="paragraph">以下是 SVM 的示例。</block>
  <block id="2ddb47581ca753ada7406ea1e167cc21" category="summary">每个 SnapDrive for UNIX 错误消息都与一个退出状态值相关联。退出状态值包含错误的发生原因及其类型 - 警告，命令，管理员或致命。</block>
  <block id="20150dad9001e71001871bcaa1e623ab" category="doc">了解错误消息的退出状态值</block>
  <block id="db85f9c26c72783b2fd02ba1da2be5b1" category="paragraph">每个 SnapDrive 错误消息 ID 都链接到一个退出状态值。退出状态值包含以下信息：</block>
  <block id="56e5eb9e82223ad77006ccf9c06ae2f2" category="list-text">exit status value —表示错误情况的基本发生原因。</block>
  <block id="ea8e9c0d96a578ad74f2535f0605bb90" category="list-text">type —表示错误类型。严重性级别取决于消息，而不是值。可能值如下：</block>
  <block id="a50334f35cd32cd5968f24c2cbe12306" category="list-text">警告— SnapDrive for UNIX 已执行此命令，但发出了有关可能需要您注意的情况的警告。</block>
  <block id="688517a0877a554105484734ebe8a909" category="list-text">Command-SnapDrive for UNIX 由于命令行错误而无法执行命令。检查命令行格式以确保其正确无误。</block>
  <block id="e31900b47c5a581515c22025889bc7db" category="list-text">admin-SnapDrive for UNIX 由于系统配置不兼容而无法执行命令。请联系您的系统管理员以查看您的配置参数。</block>
  <block id="57a250781651d4e72c6812740de6a249" category="list-text">由于出现意外情况， faily--SnapDrive for UNIX 无法执行命令。极少发生致命错误。如果发生致命错误且您在解决该错误时遇到问题，请联系 NetApp 技术支持以帮助确定正确恢复和修复任何错误情况所需的步骤。</block>
  <block id="753783493297484d4838e59fc22330c1" category="summary">您可以使用 SnapDrive for UNIX 在存储系统上执行精简配置。精简配置也称为空间预留。</block>
  <block id="b82324d1fb622a1f9da4ad5ac0257792" category="doc">为 LUN 启用精简配置</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="list-title">步骤</block>
  <block id="7aeb3d77d7a5729a671a73e5897496f9" category="list-text">将 `space — reservations enabled` 配置变量值设置为 `on` 。</block>
  <block id="7e9996c8d7b764ae4a4bb717703db634" category="paragraph">您也可以使用 ` -reserve` 和 ` -noreserve` 参数启用精简配置。</block>
  <block id="f51c4e26af80769dc8ec4228a792e486" category="paragraph">参数会覆盖 ` -space-reservations — enabled` 变量中提及的值。</block>
  <block id="e42f0e1e621037c21037dc494c8a76a8" category="paragraph">您可以使用 ` -reserve` 和 ` -noreserve` 和以下命令来启用或禁用 LUN 预留：</block>
  <block id="794bdcef476c0ae214add441a6ef9bb3" category="list-text">SnapDrive 存储调整大小`</block>
  <block id="92d62c3f90c2d69bb95568dd2e4d0302" category="paragraph">默认情况下， SnapDrive for UNIX 会为全新或新的存储创建操作启用空间预留。对于快照还原和快照连接操作，如果在命令行中未指定 ` 预留` 或 ` -noreserve` 参数，或者配置文件中的值未被注释，则会使用 Snapshot 副本中存在的空间预留。</block>
  <block id="5e1acf06450b5102526ff4c6d9197f72" category="summary">SnapDrive for UNIX 提供了适用于不同情形的示例。无论您的操作系统如何，所有示例中的 AutoSupport 消息内容都基本相同。</block>
  <block id="2ab19068098a175104cc1e01ffff7628" category="doc">AutoSupport 消息示例</block>
  <block id="6e6d9fd50c7091246e5f39fb722cf7dd" category="paragraph">示例：添加新存储系统</block>
  <block id="37b64c552520c10061eafb3df6e99885" category="paragraph">以下示例是从名为 ` 的主机发送的消息：` _x336-207-58_ ：</block>
  <block id="c868306fec8774f93a9302a7fd0ce1d9" category="paragraph">示例：重新启动守护进程</block>
  <block id="cbba1973711f0d6f29c9e721d933ce39" category="paragraph">重新启动守护进程时， SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="46080e48944c8bfc01bf51213376c76f" category="paragraph">如果已配置 `dFM` 且 `RBAC 方法` 设置为 `dFM` ，则 SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="6075181770e60444ec382dcc9ebfa5ef" category="paragraph">如果配置了 `dfm` 且将 `rbac 方法` 设置为原生，则 SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息。</block>
  <block id="f14272e50ad4d48ac2f8782ee02f7760" category="paragraph">当 `snap create` 操作成功时， SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="c0800b59618e595b124e25da3e66275d" category="paragraph">如果 storage show all 操作成功，则适用于 UNIX 的 SnapDrive 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="6b7e6f72e22d703b434f3ab08f3e6579" category="summary">本指南介绍部署完成后如何在 Linux 环境中管理 SnapDrive for UNIX 。</block>
  <block id="d1ead2fec4caa8786de34fe77746293c" category="doc">《 Linux ® 管理指南》</block>
  <block id="ce814b0dc7cf2c366cab13d73bfb960a" category="paragraph">本指南介绍部署完成后如何在 Linux 环境中管理适用于 UNIX 的 SnapDrive 5.3.2 。</block>
  <block id="7f4811a18edc1e02da0067fb48d2cbcb" category="paragraph">主题包括如何配置产品，如何创建和克隆 Snapshot 副本，如何升级和卸载产品以及 CLI 命令说明。</block>
  <block id="e2d63d4ac783999d76d66b402e91e6ff" category="summary">这是 SnapDrive for UNIX 中的一条错误消息。</block>
  <block id="2927af13b3e2f82fa52a05f3ef83d3f7" category="doc">错误消息示例</block>
  <block id="ba593a9f66e81b23ff00faa0d47bdb37" category="paragraph">以下消息指示命令提示符出现问题。消息 ID 为 0001-3777 。</block>
  <block id="a23a2f85d7b3f88bb0576690d908a45b" category="summary">以下是数据收集命令的示例。</block>
  <block id="fa53a051fd3d41d006f288df5586d893" category="doc">使用 SnapDrive.dc 的示例</block>
  <block id="293fb09a203f5093adb402a833921291" category="paragraph">此示例使用命令行选项为生成的文件指定目录和名称。</block>
  <block id="9a463b223a0ba82561710d50a8444bd5" category="summary">要断开 Snapshot 副本的连接，请指定要使用的存储实体类型，例如 LUN ，磁盘组，文件系统， 或主机卷。</block>
  <block id="4d38a8ed92aab70d60d1231a89424722" category="doc">使用 SnapDrive snap disconnect 命令所需的信息</block>
  <block id="6cfeba8dffac74744c0394dfed3854a6" category="paragraph">下表提供了使用 SnapDrive snap disconnect` 命令时需要提供的信息。</block>
  <block id="7da424fe94f6fcc20ed474e77f2a0f21" category="paragraph">LUN （` -lun _file_spec_` ）</block>
  <block id="5ab465146a4a0546c41949ca7bde3691" category="paragraph">LUN 的名称。包括存储器，卷和 LUN_ 的名称</block>
  <block id="3ded29c06ea303d7dce4984c6887c48d" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` -vg _file_spec_` ）</block>
  <block id="b45dfa4a18bb024e1e8714c326beda0d" category="paragraph">文件系统（` -fs _file_spec_` ）</block>
  <block id="52eefb1f4a59f8fad947c610f74b168a" category="paragraph">主机卷（` -hostvol _file_spec_` ）或逻辑卷（` -lvol _file_spec_` ）</block>
  <block id="eab88d00aaad989e18c49f2dfaf78d92" category="paragraph">主机或逻辑卷的名称 _</block>
  <block id="5196d715f884e556a4197356fea79eee" category="paragraph">指定要用于断开 Snapshot 副本连接的存储实体的类型，并使用适当的参数提供该实体的名称。</block>
  <block id="e7b0f9c65f54a04902628d074088da30" category="paragraph">这是 ` _file_spec_` 参数的值。</block>
  <block id="ec2d1f970a17079cb4bc27de191d36c5" category="paragraph">` 全满`</block>
  <block id="5603c3d7625715abe1771b1f589d1469" category="paragraph">如果您希望 SnapDrive for UNIX 从 Snapshot 副本断开对象连接，即使命令行上的主机端实体包含其他实体（例如具有一个或多个主机卷的磁盘组），也可以在命令行中包含 -full 选项。如果不包含此选项，则只能指定空的主机端实体。</block>
  <block id="5bfe8511abc40d31b8534f9e70bc39d7" category="paragraph">可选：指定要使用的文件系统和卷管理器的类型。</block>
  <block id="d2d125829fb703ec7e5c035635cd3b5b" category="paragraph">` 拆分`</block>
  <block id="e5c03fefd9a3f3c65e9bdfcabac904fa" category="paragraph">用于在 Snapshot 连接和 Snapshot 断开操作期间拆分克隆的卷或 LUN 。</block>
  <block id="2d17ec8de1d57f84d796dca5398a9710" category="summary">SnapDrive for UNIX 使用用户名格式通过 Operations Manager 控制台执行访问检查。这些格式取决于您是网络信息系统 \ （ NIS\ ）还是本地用户。</block>
  <block id="74305c8d34a93943e2b8f18a680955f6" category="doc">用于使用 Operations Manager 控制台执行访问检查的用户名格式</block>
  <block id="81fc4fe90d8a2caa5382d4c4b1110c34" category="paragraph">SnapDrive for UNIX 使用用户名格式通过 Operations Manager 控制台执行访问检查。这些格式取决于您是网络信息系统（ Network Information System ， NIS ）还是本地用户。</block>
  <block id="e75e1f4f0603acc8114cd9c2560c979b" category="paragraph">SnapDrive for UNIX 使用以下格式检查用户是否有权执行某些任务：</block>
  <block id="c67a8eeddbbf7f9af384bfcea792bd58" category="list-text">如果您是运行 SnapDrive` 命令的 NIS 用户，则 SnapDrive for UNIX 将使用格式 ` &lt;nisdomain&gt;&lt;username&gt;` （例如， `netapp.com\marc` ）</block>
  <block id="7f30bb17c33fb56ccaedd162a98fffbd" category="list-text">如果您是 lnx197-141 等 UNIX 主机的本地用户，则 SnapDrive for UNIX 将使用格式 ` &lt; 主机名 &gt;\&lt; 用户名 &gt;` 格式（例如， `lnx197-141\john` ）</block>
  <block id="c41139e381ff767edcecc23a7c01bd54" category="list-text">如果您是 UNIX 主机的管理员（ root ），则 SnapDrive for UNIX 会始终将此管理员视为本地用户，并使用格式 `lnx197-141\root` 。</block>
  <block id="7c9bf95f9e3f1db325ded027bf77006e" category="summary">必须在适用于 UNIX 的 SnapDrive 中配置虚拟存储控制台，以便在子操作系统中配置 RDM LUN 。但是，有一个用户名和密码允许 SnapDrive for UNIX 访问虚拟存储控制台。Virtual Storage Console 不会对这些登录凭据进行身份验证。</block>
  <block id="bb29798332e6db0d7f713b5aa7bc58ad" category="doc">指定 Virtual Storage Console 的登录信息</block>
  <block id="d931c824d26047b06f52d86cfbd7074c" category="paragraph">确保已为 Virtual Storage Console 配置 vCenter 。</block>
  <block id="7857f50c8d30c7e11b711e7c548a7f54" category="paragraph">` _user_` 是虚拟接口系统的用户名。</block>
  <block id="eee4e8db6fc239f2664f7b76e1dc8fc0" category="paragraph">` _viadmin_name_` 是虚拟接口系统的名称或 IP 地址。</block>
  <block id="0822b18f9d1f67cabcb165daaf2dd144" category="paragraph">如果尚未设置任何密码，请按</block>
  <block id="3d32aa72bd5e92d3c6ceacaacfcf975a" category="paragraph">`输入`</block>
  <block id="1eaba5c6332c64b5b8177d77a7acbb4b" category="paragraph">（空值）。</block>
  <block id="bb7d37a5e84ea462e0e9b72bda1f6f26" category="paragraph">此示例将为虚拟接口设置一个名为 `sdadmin` 的用户：</block>
  <block id="a2648ae6cd582e4cc7f9d92c37b61854" category="paragraph">SnapDrive for UNIX 现在可以在子操作系统中配置 RDM LUN 。</block>
  <block id="971fdf1492e7d955298f2deaf4d9f693" category="admonition">如果您要配置新的虚拟接口，则现有虚拟接口详细信息将被覆盖，因为 SnapDrive for UNIX 允许您仅为子操作系统配置一个虚拟接口。</block>
  <block id="590eb0041b51b180e650fc060794425a" category="summary">SnapDrive for UNIX 支持多个 Operations Manager 控制台服务器。如果一组存储系统由多个 Operations Manager 控制台服务器管理，则需要此功能。SnapDrive for UNIX 按照在 SnapDrive for UNIX 中配置 Operations Manager 控制台服务器的相同顺序联系 Operations Manager 控制台服务器。您可以运行 SnapDrive config list 命令来获取配置顺序。</block>
  <block id="a62c50187315a461344aad412d693ac3" category="doc">多个 Operations Manager 控制台服务器</block>
  <block id="b07ebf9ca678edcfba0eaec43f6a448d" category="paragraph">SnapDrive for UNIX 支持多个 Operations Manager 控制台服务器。如果一组存储系统由多个 Operations Manager 控制台服务器管理，则需要此功能。SnapDrive for UNIX 按照在 SnapDrive for UNIX 中配置 Operations Manager 控制台服务器的相同顺序联系 Operations Manager 控制台服务器。您可以运行 SnapDrive config list` 命令来获取配置顺序。</block>
  <block id="1f14c40a578251edd7a4747d4e59146c" category="paragraph">以下示例显示了多个 Operations Manager 控制台服务器的输出：</block>
  <block id="b4c3122ba479343dfe7f973f661e3991" category="paragraph">在上面的示例中， storage_array1 由 ops_mngr_server1 管理， storage_array2 由 ops_mngr_server2 管理。在此示例中， SnapDrive for UNIX 会首先联系 ops_mngr_server1 。如果 ops_mngr_server1 无法确定访问权限，则 SnapDrive for UNIX 将联系 ops_mngr_server2 。</block>
  <block id="42e8377b5856ffb63f104d18124c4203" category="paragraph">只有在以下情况下， SnapDrive for UNIX 才会联系第二个 Operations Manager 控制台：</block>
  <block id="061d2984e60a20419353f0aaaa86c784" category="list-text">第一个 Operations Manager 控制台无法确定访问权限时。之所以出现这种情况，可能是因为第一个 Operations Manager 控制台不管理存储系统。</block>
  <block id="d81021c5b822d216e5aca75fd6879f61" category="list-text">第一个 Operations Manager 控制台关闭时。</block>
  <block id="80b5c790bbf9ce182294cadb8acd66ee" category="summary">要在 SnapDrive for UNIX 中使用多路径，必须完成包括安装和启动 HBA 在内的步骤。如果您使用的是非 NetApp 多路径解决方案，则必须从 HBA 供应商的网站下载软件和应用程序包。</block>
  <block id="cda0eb8700aa05f4919c0cca02fd1c5a" category="doc">启用多路径</block>
  <block id="89f3857e2ea70c640ee16eb67e3343c2" category="paragraph">要在 SnapDrive for UNIX 中使用多路径，必须完成包括安装和启动 HBA 在内的步骤。如果您使用的是非 NetApp 多路径解决方案，则必须从 HBA 供应商的网站下载软件和应用程序包。</block>
  <block id="5bd92d3ea7c73dfd23d28248816566ea" category="paragraph">您的系统必须运行当前版本的 FC 和 iSCSI 系统组件。</block>
  <block id="51300a163de2b5bf49b1464febbdf6b6" category="list-text">在安装相应的 Host Utilities 软件之前，请先安装支持的 HBA 。</block>
  <block id="22a44975c0aadec84d893a49fa85c5bf" category="admonition">适用于 UNIX 的 SnapDrive 支持多供应商 HBA 。</block>
  <block id="1709f55af75b32f02f9b619a4113afdc" category="list-text">启动 HBA 服务。</block>
  <block id="ddc36441edf1327c26d756da84db14bc" category="paragraph">如果 HBA 服务未运行，则在运行 SnapDrive for UNIX 命令时会显示以下错误消息，例如 SnapDrive storage create` 和 SnapDrive config prepare LUNs` ：</block>
  <block id="b61be7b6d8bcbfa5a7648ef86fe3d746" category="paragraph">您必须验证所需数量的路径是否已启动且正在运行。您可以使用 Host Utilities 软件附带的 `sanlun` 实用程序验证路径。例如，在 FC 多路径配置中，您可以使用 `sanlun fcp show adapter -v` 命令。</block>
  <block id="1fb5e614619532b82fb0c8874e581b7f" category="paragraph">在以下示例中，有两个 HBA 端口（ fcd0 和 fcd1 ）连接到运行正常的主机（端口状态）。您只能有一个 HBA 或 iSCSI 启动程序，并且必须通过为目标 LUN 提供多个路径来配置多路径。</block>
  <block id="c92aee3c6ca46307c0f3810e3ed95c5e" category="paragraph">如果在主机上启用了多路径，则可以为同一 LUN 显示多个路径。您可以使用 `sanlun lun show all` 命令验证路径。在以下示例中，您可以找到指向同一 LUN 的多个路径（`鱼： /vol/vol1/lun` ）：</block>
  <block id="74bc051fbde0097a734d4363e03e0451" category="list-text">如果 SnapDrive for UNIX 或 Host Utilities 支持第三方多路径解决方案，请从 HBA 供应商的网站下载 HBA 驱动程序软件包和应用程序包。 * QLogic * ：对于 QLogic HBA ，请转至<block ref="592e8992ff7670bbc5d32826d035b268" category="inline-link-rx"></block>。在 OEM 型号中，选择 NetApp 。找到支持表中列出的驱动程序版本并下载。* Emulex ： * 对于 Emulex HBA ，请转至<block ref="5033d9ab3879753de19bceec82756c97" category="inline-link-rx"></block>。从 "Downloads" 中选择 "NetApp" 。找到支持表中列出的驱动程序版本并下载。同时，从同一位置下载 Emulex 应用程序软件包。</block>
  <block id="77c991d3a042fe6820e01bdfb5dfcc86" category="paragraph">如果您使用的是具有 FC 连接的 QLogic 适配器，请从 QLogic 网站下载 QLogic 重新扫描脚本并将其复制到 ` 或 root` 路径（例如， ` /root/dynamic-lun-rescan` ）。QLogic 重新扫描脚本会要求用户确认； SnapDrive for UNIX 可能会在此确认阶段无限期挂起。您可以通过在脚本中将变量 ` QL_disable_warning_` 设置为 `1` 来避免此确认。</block>
  <block id="457655b3df9db97f8c419f619033fbbf" category="paragraph">早期版本的 SnapDrive for UNIX 使用供应商专用的 SCSI 重新扫描脚本通过 FC 扫描 LUN ，从而将供应商专用脚本复制到 ` /root/dynamic-lun-rescan 。 sh` 。此功能在 RHEL 5U3 之前一直可用。</block>
  <block id="19a0bd44dbec6ec7cc3b5917a0f30f53" category="paragraph">对于 RHEL 5U4/SLES 10SP2 及更高版本， ` /usr/bin` 目录中当前提供了重新扫描脚本。如果目录中没有重新扫描脚本，则该脚本会与 `sg3_utils` 软件包一起存在。</block>
  <block id="bcae99b108c1767b7ea4b9ed979b038e" category="admonition">您必须确保 `sg3_utils` 和 `sg3_utils-libs` 库可用于 Red Hat Enterprise Linux （ RHEL ）和 Oracle Enterprise Linux （ OEL ）版本。但是， `scSCI utility.rpm` 软件包中的 `sg3_utils` 库可用于 SUSE Linux Enterprise Server （ SLES ）版本。</block>
  <block id="1f11330423e6648ae3849ed8a24d8c34" category="list-text">在 FC 配置中，使用交换机分区配置对主机 HBA 端口和目标端口进行分区。</block>
  <block id="746d0c6475a07ef733df3e85c8cbb5b8" category="list-text">安装并设置相应的 FC 交换机。</block>
  <block id="7215beb7cbef94ba4307eb4c491a34bf" category="list-text">检查 SnapDrive for UNIX 堆栈要求。</block>
  <block id="662be6befc27e597937c10287573d8ca" category="list-text">安装或升级适用于 UNIX 的 SnapDrive 。</block>
  <block id="30739395bc6013b4cf20aea45708aa5c" category="list-text">验证 SnapDrive for UNIX 安装。</block>
  <block id="fd61116195694b7cdb97b72c49f96a37" category="list-text">找到 `snapdrive.conf` 文件路径。</block>
  <block id="be4dc3a02f66ac2d7b2524b293e24c82" category="list-text">在 `snapdrive.conf` 文件中配置以下配置变量：</block>
  <block id="71ef71e458c74596265d2b3ee1ea4735" category="paragraph">对于每台主机，多路径类型，传输类型，文件系统和卷管理器类型彼此相关。下表介绍了所有可能的组合：</block>
  <block id="39eea648dab96b0ee6022dabb38bc420" category="paragraph">iSCSI</block>
  <block id="e18786e2dcb35d1369f7e4faa201f10e" category="paragraph">ext4 或 ext3</block>
  <block id="331cf256a0fbefd5d7aeab5bacd2dc73" category="paragraph">上表提供了 ` multipathing-type_` ， ` default-transport_` ， ` fsttype_` 和 ` vmtype_` 配置变量支持的值。</block>
  <block id="5d16c09fa54f8ee68cedea1fd3390a4f" category="admonition">如果传输协议为 `iscsi` ，而多路径类型设置为 `none` ，则应停止多路径守护进程并执行 SnapDrive for UNIX 命令。</block>
  <block id="36853f2f9970a60eb2d49521d6a6b690" category="list-text">保存 `snapdrive.conf` 文件。</block>
  <block id="a87b0be2f29f824843ac0c374ee59d4c" category="inline-xref-macro">迁移多路径类型后， SnapRestore 和 Snapconnect 操作在 Linux 中不起作用</block>
  <block id="9c6abc4f109916d3a73128a78273f185" category="paragraph"><block ref="9c6abc4f109916d3a73128a78273f185" category="inline-xref-macro-rx"></block></block>
  <block id="11b96ca838fa0b56b40474e4bc28c2de" category="summary">您必须在停止守护进程后重新启动它，以便对配置文件或其他模块所做的更改生效。只有在完成正在执行且处于队列中的所有命令后， SnapDrive for UNIX 守护进程才会重新启动。收到重新启动请求后，不会执行任何新命令。</block>
  <block id="b8d8d397a5907bcd09870b8ef63f47c9" category="doc">正在重新启动守护进程</block>
  <block id="3432ce6aa57419bfa56c78f007571ad2" category="list-text">确保同一主机上未并行运行任何其他会话。在这种情况下， `snapdrived restart` 命令将挂起系统</block>
  <block id="218b2acf2644e3a1722d762c8e19a6c4" category="list-text">输入以下命令重新启动守护进程：</block>
  <block id="dec5adf2a3a9c5fd7aae026e877fb60f" category="paragraph">` * 快照重新启动 *`</block>
  <block id="806336904372f792ba70e4e9a536ae37" category="summary">如果您不想等待所有命令完成执行，则可以强制停止守护进程。收到强制停止守护进程的请求后， SnapDrive for UNIX 守护进程将取消正在执行或正在排队的所有命令。强制停止守护进程时，系统的状态可能未定义。不建议使用此方法。</block>
  <block id="5db27bf2109f1adf814474ffe091e1e6" category="doc">强制停止守护进程</block>
  <block id="f47dba7124ecb5e7fbf368e11b65a65b" category="list-text">强制停止守护进程：</block>
  <block id="ffff3f5320df3ad529a540e9ba6dbfcf" category="paragraph">` * snapdrived -force stop*`</block>
  <block id="767ac669111773cf54036f51acb5fb9b" category="summary">每个退出状态值都有一个错误名称以及与其关联的类型。查看此表以了解退出状态值，错误名称，类型和问题描述。</block>
  <block id="c0de1ee2f09da492a115923bbba50179" category="doc">退出状态值</block>
  <block id="53c3d64929b8d0ce230c8b427915d1e4" category="paragraph">下表包含有关退出状态值的信息。退出状态值按顺序编号。如果 SnapDrive for UNIX 当前未实施错误，则此表不会包含此退出状态值。因此，这些数字可能会有一定的差距。</block>
  <block id="d7e94cd02d5a16a1933272467c32fdd1" category="cell">退出值</block>
  <block id="4891393d028af41e297324f76a1beaa7" category="cell">错误名称</block>
  <block id="aa7f77e663b832d5b0e544c5511e680c" category="paragraph">不支持</block>
  <block id="57aebc88ab4486b9ad93be75bf149954" category="paragraph">命令错误</block>
  <block id="f908eaded7119b825f19c81425e80741" category="paragraph">已调用此版本的 SnapDrive for UNIX 不支持的函数。</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="paragraph">2.</block>
  <block id="b2651b1f2dbac6837d9207b4bd8fb630" category="paragraph">无内存</block>
  <block id="882384ec38ce8d9582b57e70861730e4" category="paragraph">致命</block>
  <block id="68012f2037ee4b54a5e376b3345b6803" category="paragraph">系统内存已用尽。只有释放足够的内存才能使 SnapDrive for UNIX 正常工作，才能继续运行。检查其他正在运行的应用程序，确认它们不会占用过多的内存。</block>
  <block id="a79dc19b3cdd1e5bd1b225cb5cdf0d82" category="paragraph">命令无效</block>
  <block id="5d23f01b6f092e49e99773e4ce6c1d21" category="paragraph">您发出的命令无效；这可能是您输入的命令文本中的语法错误。</block>
  <block id="2e828c10c1802fcfb4b8cabf63941c95" category="paragraph">已存在</block>
  <block id="f9612d186f318823769d05cffee7c7b2" category="paragraph">您请求创建已存在的内容。通常，此错误是指 Snapshot 副本名称，该名称不能位于要创建 Snapshot 副本的存储系统卷上。</block>
  <block id="e4da3b7fbbce2345d7772b0674a318d5" category="paragraph">5.</block>
  <block id="397b1770050565dff51a2b735021a684" category="paragraph">创建线程失败</block>
  <block id="e60907ec4aea3271114c7e57d7f24a28" category="paragraph">管理员错误</block>
  <block id="1df7ece3675442853526fea045b2dd27" category="paragraph">SnapDrive for UNIX 无法创建进程线程。检查系统上运行的其他进程，以确保有足够的线程资源可用。</block>
  <block id="9e076f5885f5cc16a4b5aeb8de4adff5" category="paragraph">未找到</block>
  <block id="75cc4389129f517d66d7e3d326278ae7" category="paragraph">您在 SnapDrive for UNIX 命令行中包含了不存在的文件，数据组，主机卷，文件系统或其他参数。</block>
  <block id="8f14e45fceea167a5a36dedd4bea2543" category="paragraph">7.</block>
  <block id="765bcfccb020fd004134fe671a5752ee" category="paragraph">不是挂载的文件系统</block>
  <block id="3b7d37dd044401227c6aeaa9a6c6064e" category="paragraph">要访问的文件系统不是有效的文件系统或未挂载。</block>
  <block id="45c48cce2e2d7fbdea1afc51c7c6ad26" category="paragraph">9</block>
  <block id="b983da89f255f2282f226f6f5fb08d12" category="paragraph">卷管理器错误</block>
  <block id="6d02aa5096df167970fcf478b210d906" category="paragraph">访问卷管理器时返回错误。请参见特定错误消息，以获取有关哪个错误以及原因的详细信息。</block>
  <block id="f55c2aa6ad7a9d9d52eaca01b6a8f121" category="paragraph">名称无效</block>
  <block id="55154a2ea4ebedb3e8a5bfc8a3348add" category="paragraph">您在命令行上提供的名称格式不正确。</block>
  <block id="021e58c33d925c39059c3004adbbae12" category="paragraph">例如，未将存储系统卷指定为 `filer ： /vol/vol_name` 。如果在基于存储系统或卷管理器的名称中指定了无效字符，则也会出现此消息。</block>
  <block id="4667c1d8e6736bb6063fd20a471661e2" category="paragraph">未找到设备</block>
  <block id="8c1fd06b491ed92ff9a3de13ca077f35" category="paragraph">SnapDrive for UNIX 无法访问要为其创建 Snapshot 副本的磁盘组中的 LUN 。</block>
  <block id="0667c6ecf7417aec72fbbeb8a371b240" category="paragraph">检查主机和存储系统上所有 LUN 的状态。另请检查存储系统卷是否联机，以及存储系统是否已启动并连接到主机。</block>
  <block id="d8a942ef2b04672adfafef0ad817a407" category="paragraph">繁忙</block>
  <block id="e92c9fead0390c5c244c1194650d3964" category="paragraph">LUN 设备，文件，目录，磁盘组，主机卷， 或其他实体处于繁忙状态。</block>
  <block id="91545b43f62ba70b5f7c4010cd325983" category="paragraph">这通常是一个非致命错误，在您重试此命令时会消失。有时，它会指示某个资源或进程挂起，从而导致此对象处于繁忙状态且不可用，无法供 SnapDrive for UNIX 使用。</block>
  <block id="32b091333c5739f692f94ff64e6a78c4" category="paragraph">它还可能指示您在 I/O 流量过大而无法成功创建 Snapshot 副本的时间段内尝试创建 Snapshot 副本。</block>
  <block id="c51ce410c124a10e0db5e4b97fc2af39" category="paragraph">13</block>
  <block id="95b64eaa3a1b32224b3de7247c338a1d" category="paragraph">无法初始化</block>
  <block id="1a0a973ce0acf08b30044dbb573f76b3" category="paragraph">SnapDrive for UNIX 无法初始化所需的第三方资料。这可以是指文件系统，卷管理器，主机集群软件，多路径软件等。</block>
  <block id="aab3238922bcc25a6f606eb525ffdc56" category="paragraph">14</block>
  <block id="a00cd57a7b1d06c177a33b7853478494" category="paragraph">SnapDrive 繁忙</block>
  <block id="2c5a36323f045276752aecf81421f0f9" category="paragraph">另一个用户或进程正在同一主机或存储系统上执行操作，而您要求 SnapDrive for UNIX 执行此操作。重试此操作。</block>
  <block id="fa6b9c154f429c4cb4b270aba471db8b" category="paragraph">有时，此消息表示另一个进程已挂起，您必须将其终止。</block>
  <block id="93d9fa4259df506b89761a1bbd6b26ac" category="admonition">在某些情况下， Snapshot 还原操作可能需要很长时间。请确保您认为挂起的过程不仅仅是等待 Snapshot 还原操作完成。</block>
  <block id="9bf31c7ff062936a96d3c8bd1f8f2ff3" category="paragraph">15</block>
  <block id="baffee2f69908e812dc0aac6ea69e5aa" category="paragraph">配置文件错误</block>
  <block id="602947a18ca95b9f1404d7f7ff3b8a00" category="paragraph">SnapDrive.conf 文件中的条目无效，不足或不一致。有关详细信息，请参见特定的错误消息。必须更正此文件， SnapDrive for UNIX 才能继续。</block>
  <block id="70efdf2ec9b086079795c442636b55fb" category="paragraph">17</block>
  <block id="143d1e9a3def6a1400cf1de591c9b478" category="paragraph">权限错误</block>
  <block id="a6de7c141aa6874384ce50ed52f90252" category="paragraph">您无权执行此命令。要运行适用于 UNIX 的 SnapDrive ，您必须以 root 用户身份登录。</block>
  <block id="c0d152a9d68d0d61522735ef9ffc9630" category="paragraph">无存储器</block>
  <block id="b3fe9df00e813347ec0fadd153e0223b" category="paragraph">SnapDrive for UNIX 无法联系此命令所需的存储系统。检查错误消息中指示的与存储系统的连接。</block>
  <block id="1f0e3dad99908345f7439f8ffabdffc4" category="paragraph">19</block>
  <block id="9dc59831eae7b36d5d66719bc47edc82" category="paragraph">存储器登录错误</block>
  <block id="ce3b70b00e2974babb7e7b3435f6e487" category="paragraph">SnapDrive for UNIX 无法使用您提供的登录信息登录到存储系统。</block>
  <block id="98f13708210194c475687be6106a3b84" category="paragraph">20</block>
  <block id="1c4c4bbe3ae5effdedcc416c4425d4ce" category="paragraph">许可证错误</block>
  <block id="a727615d4a309b57ec8117a5380e8431" category="paragraph">SnapDrive for UNIX 所需的服务未获得在此存储系统上运行的许可。</block>
  <block id="b6d767d2f8ed5d21a44b0e5886680cb9" category="paragraph">22.</block>
  <block id="566fb0472600a675824ad2b1124e62c4" category="paragraph">无法冻结 FS</block>
  <block id="7dc09456a06806b56267232d36ae6add" category="paragraph">Snapshot 创建操作失败，因为 SnapDrive for UNIX 无法冻结指定的文件系统以创建 Snapshot 副本。确认系统 I/O 流量足够轻，足以冻结文件系统，然后重试此命令。</block>
  <block id="02e74f10e0327ad868d138f2b4fdd6f0" category="paragraph">27</block>
  <block id="405f9f3bf4c323922ec766a30839824e" category="paragraph">Snapshot 副本不一致</block>
  <block id="f91ca3221360bf7b3f18d4f4ea9d306c" category="paragraph">Snapshot 还原操作失败，因为您请求从磁盘组映像不一致的 Snapshot 副本进行还原。在以下情况下，可能会出现映像不一致的情况：</block>
  <block id="1effdab0d63d764566ee9a9b66894251" category="list-text">您未使用 SnapDrive for UNIX 创建 Snapshot 副本。</block>
  <block id="b3a8b52af6fad0a8c6ef016fb0a1e04b" category="list-text">Snapshot 创建操作在设置一致的位之前中断，因此无法清理（如发生灾难性系统故障）。</block>
  <block id="241c24b9d586fab270f156240b6f6c6a" category="list-text">创建 Snapshot 副本后， Snapshot 副本发生某种类型的数据问题。</block>
  <block id="33e75ff09dd601bbe69f351039152189" category="paragraph">28</block>
  <block id="6a6d2ecdc3505822d7a75d50f16d868b" category="paragraph">HBA 故障</block>
  <block id="35ffdf496add5f0b8eb32d653171c1b3" category="paragraph">SnapDrive for UNIX 在尝试从 HBA 检索信息时遇到错误。</block>
  <block id="6ea9ab1baa0efb9e19094440c317e21b" category="paragraph">29</block>
  <block id="eeea29b1c436b6a8e2d4f95d9b26c0a8" category="paragraph">元数据错误</block>
  <block id="d09e89408f35a4515fd46eeae71d6c03" category="paragraph">SnapDrive for UNIX 在创建 Snapshot 副本时写入的 Snapshot 副本元数据发生错误。</block>
  <block id="34173cb38f07f89ddbebc2ac9128303f" category="paragraph">30 个</block>
  <block id="e4a96d3a4b2a6fa896b7d5185de1ac98" category="paragraph">无 Snapshot 副本元数据</block>
  <block id="590f765a9470b6d79bd36f72cf621643" category="paragraph">SnapDrive for UNIX 无法执行 Snapshot 还原操作，因为元数据不包含所有请求的磁盘组。</block>
  <block id="c16a5320fa475530d9583c34fd356ef5" category="paragraph">31</block>
  <block id="acd655615e248415ddd1f22028a2eadf" category="paragraph">密码文件错误</block>
  <block id="75c66e694cc252dff4401f3146be8479" category="paragraph">此密码文件的条目错误。使用 SnapDrive config delete` 命令删除此存储系统的登录条目。然后使用 SnapDrive config set _user_name_` 命令重新输入登录信息。</block>
  <block id="182be0c5cdcd5072bb1864cdee4d3d6e" category="paragraph">33</block>
  <block id="1e8e741df29908151f2ca91b1e3d7861" category="paragraph">无密码文件条目</block>
  <block id="745680ec16d24d747ab3a2c3979b92ee" category="paragraph">此密码文件没有此存储系统的条目。对需要运行 SnapDrive for UNIX 的每个存储系统运行 SnapDrive config set _username filername_` 命令。然后重试此操作。</block>
  <block id="26ca9fc28c6430351abbfdeec67cdd2e" category="paragraph">不是 NetAPPLUn</block>
  <block id="0bbd56b312e414812866365a2e3ed154" category="paragraph">SnapDrive for UNIX 命令遇到的 LUN 不在 NetApp 存储系统上。</block>
  <block id="1c383cd30b7c298ab50293adfecb7b18" category="paragraph">35</block>
  <block id="9f2204a151cd5480187712ba6aa6856b" category="paragraph">用户已中止</block>
  <block id="4cacdd78f57fce5499dcdbd620a20f4a" category="paragraph">系统显示一个提示，要求您确认操作，您表示不希望执行此操作。</block>
  <block id="19ca14e7ea6328a42e0eb13d585e4c22" category="paragraph">36</block>
  <block id="343e8e29bfadea3151e80c4584940c62" category="paragraph">I/O 流错误</block>
  <block id="4e57ba64655b3a7ccf93de3e41da0368" category="paragraph">系统输入或系统输出例程返回了 SnapDrive for UNIX 无法识别的错误。</block>
  <block id="b9ff8de85879e3959b940480e0b14b6b" category="paragraph">运行 SnapDrive.dc 并将此信息发送给 NetApp 技术支持，以便他们可以帮助您确定要执行的步骤以完成恢复。</block>
  <block id="a5bfc9e07964f8dddeb95fc584cd965d" category="paragraph">37</block>
  <block id="79ec32b05118cd5e1c2addf9154d62ee" category="paragraph">文件系统已满</block>
  <block id="5e011edf171d40ee738260c550585df6" category="paragraph">尝试写入文件失败，因为文件系统上的空间不足。当您在相应的文件系统上释放足够的空间时， SnapDrive for UNIX 可以继续。</block>
  <block id="a5771bce93e200c36f7cd9dfd0e5deaa" category="paragraph">38</block>
  <block id="05b7856bec9d5ba9ab5b544a38fed5da" category="paragraph">文件错误</block>
  <block id="6869715d7b380d87c0dee27787e051d7" category="paragraph">当 SnapDrive for UNIX 读取或写入系统配置文件或临时文件时发生 I/O 错误。</block>
  <block id="d67d8ab4f4c10bf22aa353e27879133c" category="paragraph">39</block>
  <block id="209ce3d39f10030dd865d40dea5a1793" category="paragraph">磁盘组重复</block>
  <block id="1f6424bb5c176759f25348adb7dc0a99" category="paragraph">尝试激活磁盘组时， SnapDrive for UNIX 获得了重复的次要节点编号。</block>
  <block id="d645920e395fedad7bbbed0eca3fe2e0" category="paragraph">40</block>
  <block id="57558080aed9d41a4e24fd33fabfcf75" category="paragraph">文件系统解冻失败。</block>
  <block id="f931c1c21dccf01459f4a33b8d96710e" category="paragraph">由于文件系统上的系统活动， snap create 命令失败。如果 Snapshot 副本所需的 SnapDrive for UNIX 文件系统冻结在 Snapshot 副本完成之前超时，通常会发生这种情况。</block>
  <block id="150d4297fece16d01f5f41483d840755" category="paragraph">名称已在使用中</block>
  <block id="8431795dfb9c091142ea90e88c36a51b" category="paragraph">SnapDrive for UNIX 已尝试创建磁盘组，主机卷，文件系统或 LUN ，但此名称已在使用中。要更正此错误，请选择一个未使用的名称，然后重新输入 SnapDrive for UNIX 命令。</block>
  <block id="f7177163c833dff4b38fc8d2872f1ec6" category="paragraph">44</block>
  <block id="a85be9feb2f66d15ca2edcbd98726bbc" category="paragraph">文件系统管理器错误</block>
  <block id="64719ebc9eb5e36cc56b724a7ad9602f" category="paragraph">在以下情况下， SnapDrive for UNIX 在文件系统中遇到意外错误：</block>
  <block id="24c5558f0b524b0800648736cac37b62" category="list-text">正在尝试创建文件系统</block>
  <block id="440ea162d05baf4d36fe3ce99979f647" category="list-text">在文件系统挂载表中创建一个条目，以便在启动时自动挂载文件系统。</block>
  <block id="47306d57a3181f8fc70dd3dd810c2c88" category="paragraph">随此代码显示的错误消息文本描述了文件系统遇到的错误。记录此消息并将其发送给 NetApp 技术支持，以便他们能够帮助您确定要执行的步骤以完成恢复。</block>
  <block id="df7035156df4562e92294a1044969b52" category="paragraph">挂载点错误</block>
  <block id="e396a7eb716193ad7e905cf5c8fcbdc5" category="paragraph">文件系统挂载点出现在系统挂载表文件中。要更正此错误，请选择未使用或未在挂载表中列出的挂载点，然后重新输入 SnapDrive for UNIX 命令。</block>
  <block id="d9d4f495e875a2e075a1a4a6e1b9770f" category="paragraph">46</block>
  <block id="18a27ae85bb2d1ca6e05d14f5d083ea6" category="paragraph">未找到 LUN</block>
  <block id="82bf854aa6c1dbccc4396abf3669ace7" category="paragraph">SnapDrive for UNIX 命令尝试访问存储系统上不存在的 LUN 。</block>
  <block id="6cba57ad367e434a5c06868af281b685" category="paragraph">要进行更正，请检查 LUN 是否存在以及是否正确输入了 LUN 的名称。</block>
  <block id="67c6a1e7ce56d3d6fa748ab6d9af3fd7" category="paragraph">47</block>
  <block id="4b1a1eb32653e2a777dccf06ba5e2ea0" category="paragraph">未找到启动程序组</block>
  <block id="08c9193e0a2dc6759ab5b683eec16993" category="paragraph">无法按预期访问存储系统启动程序组。因此， SnapDrive for UNIX 无法完成当前操作。</block>
  <block id="f6d4dbfe83782833a5e9064b0d5b5aa6" category="paragraph">具体的错误消息介绍了问题以及解决问题所需执行的步骤。修复此问题，然后重复此命令。</block>
  <block id="642e92efb79421734881b53e1e1b18b6" category="paragraph">48</block>
  <block id="0f3d601aeb7e7baea6beb2c9619c8487" category="paragraph">对象脱机</block>
  <block id="db0924474c58f2a993a60441771e882e" category="paragraph">SnapDrive for UNIX 尝试访问某个对象（例如卷），但由于该对象处于脱机状态而失败。</block>
  <block id="f457c545a9ded88f18ecee47145a72c0" category="paragraph">49</block>
  <block id="1195935424d1ff964b3d2fca9d25585e" category="paragraph">实体冲突</block>
  <block id="b9d804e333a47e0cb6661729b110e91f" category="paragraph">SnapDrive for UNIX 尝试创建 igroup ，但遇到名称相同的 igroup 。</block>
  <block id="c0c7c76d30bd3dcaefc96f40275bdc0a" category="paragraph">50</block>
  <block id="1151aa58c20aa493f5d144ccb540342c" category="paragraph">清理错误</block>
  <block id="80838a846bdc140682351d6cc9251a38" category="paragraph">SnapDrive for UNIX 遇到了一个应删除但仍存在的项目。</block>
  <block id="c70b2c20f8dd352783960a8199984f9d" category="paragraph">磁盘组 ID 冲突</block>
  <block id="78ffdd46fbea66da3590cc959275bf7c" category="paragraph">SnapDrive snap connect` 命令请求的磁盘组 ID 与现有磁盘组冲突。</block>
  <block id="3efc21c48a6bdd6b2937a2cfc8621a26" category="paragraph">这通常意味着，在不支持 SnapDrive snap connect` 命令的系统上尝试在发起主机上执行该命令。要修复此问题，请尝试从其他主机执行此操作。</block>
  <block id="9a1158154dfa42caddbd0694a4e9bdc8" category="paragraph">52</block>
  <block id="6cb0b8fa8af3e9a4c4e85d97754ca811" category="paragraph">LUN 未映射到任何主机</block>
  <block id="68c12c0964e27b3410315c96e0f932cc" category="paragraph">LUN 未映射到任何主机。换言之，它不属于存储系统启动程序组。要访问 LUN ，必须将 LUN 映射到 SnapDrive for UNIX 以外的当前主机。</block>
  <block id="d82c8d1619ad8176d665453cfb2e55f0" category="paragraph">53.</block>
  <block id="80ae7b463c9a34d57b982f0b434b713b" category="paragraph">LUN 未映射到本地主机</block>
  <block id="161d493438ac146de38ed0d17feb635e" category="paragraph">LUN 未映射到当前主机。换言之，它不属于包含当前主机启动程序的存储系统启动程序组。要访问 LUN ，必须将 LUN 映射到 SnapDrive for UNIX 以外的当前主机。</block>
  <block id="a684eceee76fc522773286a895bc8436" category="paragraph">54</block>
  <block id="34c8165c6d9ef5029fab5c6d9d2a4608" category="paragraph">LUN 使用外部 igroup 进行映射</block>
  <block id="6f7095eb243ce15e2824353a55119151" category="paragraph">LUN 使用外部存储系统启动程序组进行映射。换言之，它属于仅包含在本地主机上未找到的启动程序的存储系统 igroup 。</block>
  <block id="ea1559405e4a0d16a46e1f2c6ddbc6cd" category="paragraph">因此， SnapDrive for UNIX 无法删除此 LUN 。</block>
  <block id="f275cc28bbcacd9a989c27c5b3c69586" category="paragraph">要使用适用于 UNIX 的 SnapDrive 删除 LUN ， LUN 必须仅属于本地 igroup ；即，仅包含在本地主机上找到的启动程序的 igroup 。</block>
  <block id="b53b3a3d6ab90ce0268229151c9bde11" category="paragraph">55</block>
  <block id="741118eb82e9c2a4a290dcc1ee724221" category="paragraph">LUN 使用混合 igroup 进行映射</block>
  <block id="6c7ea5e0d7edce9782075408982e7066" category="paragraph">LUN 使用混合存储系统启动程序组进行映射。换言之，它属于一个存储系统 igroup ，其中包含在本地主机上找到的启动程序和在该主机上未找到的启动程序。</block>
  <block id="999e98920e77a2eeeff7f8c48a35742d" category="paragraph">因此， SnapDrive for UNIX 无法断开 LUN 的连接。</block>
  <block id="8afa5ad5f13b7d6c05007d8c458bf7c0" category="paragraph">要使用 SnapDrive for UNIX 断开 LUN 的连接， LUN 必须仅属于本地 igroup 或外部 igroup ，而不是混合 igroup 。（本地 igroup 仅包含在本地主机上找到的启动程序；外部 igroup 包含在本地主机上未找到的启动程序。）</block>
  <block id="9f61408e3afb633e50cdf1b20de6f466" category="paragraph">56</block>
  <block id="8aee8b5179b96d16fc91ad43cbc72405" category="paragraph">Snapshot 副本还原失败</block>
  <block id="fce5225f9fd4ebacd37f26d232762ece" category="paragraph">SnapDrive for UNIX 已尝试执行 Snapshot 还原操作，但在未还原 Snapshot 副本中的任何 LUN 的情况下，此操作失败。</block>
  <block id="51dde53d1cb172fbf30dbb1c9745d077" category="paragraph">需要重新启动主机</block>
  <block id="4ede5e1e32007455a7d86b84ac67f9a2" category="paragraph">主机操作系统需要重新启动才能更新内部数据。SnapDrive for UNIX 已为此更新准备好主机，但无法完成当前操作。</block>
  <block id="0cfc46ab4e86dbdaa7791e1d4fe6c81e" category="paragraph">重新启动主机，然后重新输入导致显示此消息的 SnapDrive for UNIX 命令行。重新启动后，该操作将能够完成。</block>
  <block id="093f65e080a295f8076b1c5722a46aa2" category="paragraph">59</block>
  <block id="567541dad36fbaa6a17e01dd12385346" category="paragraph">主机，需要准备 LUN</block>
  <block id="cded3595c39b1f898efcde6994c92322" category="paragraph">主机操作系统需要更新内部数据才能完成当前操作。要创建新的 LUN ，需要进行此更新。</block>
  <block id="524d1c668dd46d70f8f892a1454053cd" category="paragraph">SnapDrive for UNIX 无法执行更新，因为已禁用主机自动配置准备，因为 `snapdrive.conf` 变量 ` _enable-implicate-host-preparation_` 设置为 "`off` " 。</block>
  <block id="6746a4ac804b28c38a30ddb18f666e09" category="paragraph">在禁用自动主机准备的情况下，您应使用 lun config prepare SnapDrive 命令来准备主机以配置 LUN ，或者手动执行准备步骤。</block>
  <block id="3d2a0d5d976dc4f6cc46f9a7f6394b3b" category="paragraph">要避免此错误消息，请在 `snapdrive.conf` 文件中将 ` enable-implicate-host-preparation_` 值设置为 "`on` " 。</block>
  <block id="44f683a84163b3523afe57c2e008bc8c" category="paragraph">62.</block>
  <block id="44edc5da79b289f81094d8d5952efde7" category="paragraph">不为空</block>
  <block id="f64d9b44a1ca19fe05f7dc609e4ab54f" category="paragraph">发生错误的原因是， SnapDrive for UNIX 无法删除存储系统卷或目录。如果其他用户或其他进程在 SnapDrive 尝试删除的同一目录中同时创建文件，则可能会发生这种情况。要避免此错误，请确保一次只能有一个用户使用存储系统卷。</block>
  <block id="03afdbd66e7929b125f8597834fa83a4" category="paragraph">63.</block>
  <block id="50f2e821d70b490770ae994ad87b4d9a" category="paragraph">超时已过期</block>
  <block id="9cc9a434b0678e529cf81c1b16a870d4" category="paragraph">发生错误的原因是， SnapDrive for UNIX 无法在 50 分钟的超时时间段内还原 LUN 。</block>
  <block id="a48c5adea703dbee073d90090d74adb1" category="paragraph">记录此消息并将其发送给 NetApp 技术支持，以便他们能够帮助您确定要执行的步骤以完成恢复。</block>
  <block id="ea5d2f1c4608232e07d3aa3d998e5135" category="paragraph">64</block>
  <block id="f887cf66032ce78a342e97715c4fe7d6" category="paragraph">服务未运行</block>
  <block id="d257922868c2f689e7d737cbb52c2d79" category="paragraph">发生错误的原因是， SnapDrive for UNIX 命令指定了一个 NFS 实体，而存储系统未运行 NFS 服务。</block>
  <block id="069059b7ef840f0c74a814ec9237b6ec" category="paragraph">126.</block>
  <block id="aee9784c03b80d38d3271cde2b252b8d" category="paragraph">未知错误</block>
  <block id="62b0ba3270ba2e2c7242a67974f3de3b" category="paragraph">发生了可能很严重的未知错误。运行 `snapdrive.dc` 实用程序，并将其结果发送给 NetApp 技术支持进行分析。</block>
  <block id="ec5decca5ed3d6b8079e2e7e7bacc9f2" category="paragraph">127.</block>
  <block id="8f8913c1f755436db84ae169e37c61f9" category="paragraph">内部错误</block>
  <block id="23983c0c1efde9163e58bcc8377da18d" category="paragraph">发生 SnapDrive for UNIX 内部错误。运行 `snapdrive.dc` 并将其结果发送给 NetApp 技术支持进行分析。</block>
  <block id="3b61d8ad4a32b78565ffc80d84beab99" category="summary">您可以运行 SnapDrive config migrate list 命令来验证迁移后的存储系统是否包含在主机系统中。</block>
  <block id="12e6311d9f96fcf3ecb487d2a5c057ae" category="doc">查看迁移的新存储系统</block>
  <block id="b729ea9ba016e4cfe2480088aaa352b5" category="paragraph">您可以运行 SnapDrive config migrate list` 命令来验证迁移后的存储系统是否包含在主机系统中。</block>
  <block id="de4ce46c40d1ed511f23974721fc3356" category="paragraph">` * SnapDrive 配置迁移列表 *`</block>
  <block id="ef8cc839f60f54fd50a0b0d9edd0ec42" category="summary">SnapDrive for UNIX 会使用 Data ONTAP 7.2 及更高版本提供的一致性组支持，以便跨多个卷的所有 Snapshot 副本都保持崩溃状态一致。</block>
  <block id="939c1d09f0a148084485dec0e4652cd2" category="doc">与 Data ONTAP 7.2 及更高版本的崩溃一致性</block>
  <block id="750383472acd859fd0b9ab1ffbdc1d3d" category="paragraph">Data ONTAP 7.2 及更高版本支持一致性组和存储系统隔离。SnapDrive for UNIX 使用这些功能来确保跨多个卷的所有 Snapshot 副本都保持崩溃状态一致。</block>
  <block id="a3db5210aeed5d3e91f7a922640c0ec9" category="paragraph">要在多个卷之间创建崩溃状态一致的 Snapshot 副本， SnapDrive for UNIX 将执行以下操作：</block>
  <block id="3208550f585619a1f737f464b5f7dcbb" category="list-text">将 I/O 隔离（冻结）到包含存储实体的每个卷。</block>
  <block id="2eadbdd3ed8b716a1f93bd1fb5051ee5" category="list-text">为每个卷创建一个 Snapshot 副本。</block>
  <block id="fbf7a20292077aff1f4af6ef01fe8aa3" category="paragraph">隔离卷和创建 Snapshot 副本所需的时间有限，并且由 Data ONTAP 控制。</block>
  <block id="c1e86549c4e184998a780d9891825aa8" category="paragraph">在 `snapdrive.conf` 文件中的 ` * snapcreate-cg-timeout*` 参数指定在 Data ONTAP 限制范围内您希望允许存储系统隔离的时间量。您可以指定紧急，中等或宽松的间隔。如果存储系统所需时间超过完成隔离操作所允许的时间，则 SnapDrive for UNIX 将使用先前 Data ONTAP 7.2 版本的一致性方法创建 Snapshot 副本。您也可以在创建 Snapshot 副本时使用 ` -nodfilerfence` 选项来指定此方法。</block>
  <block id="917b1df3e444e59643ac3e5f36b54647" category="paragraph">如果您请求的存储实体跨 Data ONTAP 7.2 及先前 Data ONTAP 版本的存储系统创建 Snapshot 副本，则 SnapDrive for UNIX 还会对 7.2 之前的 Data ONTAP 版本使用一致性方法创建 Snapshot 副本。</block>
  <block id="5a29e4e132dfb15ff18fcdc5b66e260b" category="summary">您可以在主机系统中使用 SnapDrive config list 命令查看所有存储系统。</block>
  <block id="97f6d3bcac4a8e73d35c37600d9f4fa0" category="doc">查看存储系统列表</block>
  <block id="b647b2c04780e1fb3527de913bbe4011" category="paragraph">您可以在主机系统中使用 SnapDrive config list` 命令查看所有存储系统。</block>
  <block id="4d7d2deb21f8eb5bffde5a1691e76942" category="summary">要增加存储的大小，您应了解要使用的正确语法。</block>
  <block id="541a833c7412dc63871f94b15c4d2d3e" category="doc">用于增加存储大小的命令语法</block>
  <block id="43cae2bd5e4c3371d5ce00b0f8951440" category="paragraph">SnapDrive storage resize -dg _file_spec_ ｛ -growby | -growto ｝ size "-addlun "-igroup _ig_name_ [_ig_name ..._]]] 【 ｛ -reserve _ - noreserve ｝ ]] 【 -fstype _type_] 【 -vmtype _type_】`</block>
  <block id="56020f7b094d711b7c59125b10dcf73d" category="paragraph">您不能使用 SnapDrive storage resize` 命令减小实体的大小。您只能使用此命令增加大小。</block>
  <block id="552d8b9f494bc7c3c4127845ede7f6f0" category="paragraph">SnapDrive storage resize` 命令不直接支持逻辑卷或文件系统。例如，您不能使用 lun storage resize` 命令调整 SnapDrive 上文件系统的大小。</block>
  <block id="e2cbe7358386c6a8523516abb0e687a6" category="paragraph">* 结果 * ：此命令将存储实体（逻辑卷或磁盘组）的大小增加以下值之一：</block>
  <block id="f4f8f6d1f435f4bbb1d68178a7656b68" category="list-text">向存储添加字节（` -growby` ）。</block>
  <block id="66e7a12f26d84663d036d817b5fa338d" category="list-text">将大小增加到您指定的字节大小（` -growto` ）。</block>
  <block id="15a6862a2f1f5c62042bd3a9bc87ccac" category="summary">您可以连接到 LUN 中的单个文件规范。以下示例介绍了如何完成此操作。</block>
  <block id="d60a646d003bc045505599f0f3dfc711" category="doc">连接到 LUN 中的单个文件规范</block>
  <block id="e002d0720bc9a6a1f246ded3f11c5fda" category="admonition">文件规范可以是文件系统，主机卷，磁盘组或 LUN 的任意一个。</block>
  <block id="88ab26a713b3274c6bcede05ec82102e" category="paragraph">要创建受限的 FlexClone ，您需要在 `snapdrive.conf` file 中设置选项 `san-clone-method =optimal` 或提供 ` -clone optimal` ，然后才能连接文件规范。此示例显示了要连接 LUN `homer ： /vol/vol1/lun1` 中的文件规范 ` /mnt/fs1` 时的结果</block>
  <block id="2c1cb607e4a3a2a76be3b93ac8f7f4a9" category="paragraph">源文件系统 ` /mnt/fs1` 的布局如下所示：</block>
  <block id="1344401218a78fcbe4d99cd2776cc86e" category="paragraph">在这种情况下， SnapDrive for UNIX 会自动选择从 snapshot snap1 创建受限的 FlexClone `Snapdrive_vol1_0_volume_clone_from_snap1_snapshot` 并将其连接到此 FlexClone 中的 LUN testlun1 以创建克隆主机文件系统 /mnt/fs_1_0 。</block>
  <block id="68df81630c985644171e69a5a911b096" category="paragraph">SnapDrive for UNIX 使用命令行界面中提及的前缀为目标 FlexClone 命名。</block>
  <block id="ef90d4b793b1c938649eaf0aabc4a76e" category="paragraph">如果生成的 FlexClone 名称（带前缀）已在使用中，则 SnapDrive for UNIX 将显示一条错误消息。在这种情况下，您可以使用 ` -autorename` 选项以及 ` -prefixfv` 来自动生成克隆卷名称。</block>
  <block id="e3166c38d3c5724a41f4022866ae1774" category="paragraph">` -prefixfv` CLI 选项仅适用于基于 SAN 的文件系统。在 FlexClone 操作期间， SnapDrive for UNIX 对于基于 SAN 的文件系统会忽略 ` -destfv` CLI 选项。</block>
  <block id="ce882ee6fada4e2b7c91c13a5ac6f5c1" category="admonition">当 Snapshot 副本因 LUN 克隆而被锁定时， SnapDrive for UNIX 将显示警告。但是， SnapDrive for UNIX 会继续执行 `snap connect` 操作。</block>
  <block id="1ec3756099aaaf28c8d7f843791305cf" category="summary">您可以检查守护进程的状态以查看守护进程是否正在运行。如果守护进程已在运行，则在更新 SnapDrive for UNIX 配置文件之前，无需重新启动它。</block>
  <block id="e0b404c473ad643dcfde3575c03a18a7" category="doc">正在检查守护进程的状态</block>
  <block id="4e7fc7235d24c6818c526700579c117a" category="list-text">检查守护进程的状态：</block>
  <block id="bf73656ac378c222008ee5ded97c02ab" category="paragraph">` * 快照状态 *`</block>
  <block id="ede87e49820bbbe8d98264bd3fbf7424" category="summary">您可以删除为存储系统配置但不再需要的任何 igroup 。</block>
  <block id="e1396d3d261ada18b8bc71c429d2bb37" category="doc">删除 igroup</block>
  <block id="f0760ad11c3871a17e31fcbe255381fa" category="paragraph">` * SnapDrive igroup delete _filer_name_*`</block>
  <block id="7a19ba335f2c99b8163b2b2296c8e082" category="paragraph">已成功删除为存储系统面包机配置的 igroup `igg` 。</block>
  <block id="cd7a1c8f2fb2c6693bb34c9ee724ff74" category="summary">SnapDrive for UNIX Web 服务为所有 NetApp SnapManager 和第三方产品提供了一个统一的界面，可与 SnapDrive for UNIX 无缝集成。要在适用于 UNIX 的 SnapDrive 中使用命令行界面 \ （ cli\ ）命令，您需要启动守护进程。</block>
  <block id="19c684f86cb92b9ac632930c05afce44" category="doc">什么是 Web 服务和守护进程</block>
  <block id="57ed9acbe60736ae3ebe19736435d135" category="paragraph">SnapDrive for UNIX Web 服务为所有 NetApp SnapManager 和第三方产品提供了一个统一的界面，可与 SnapDrive for UNIX 无缝集成。要在适用于 UNIX 的 SnapDrive 中使用命令行界面（ CLI ）命令，您需要启动守护进程。</block>
  <block id="a2ca9463bf19f73b24f2ae0e9b33ed0e" category="paragraph">各种 NetApp SnapManager 产品都使用命令行界面（ CLI ）与 SnapDrive for UNIX 进行通信。使用命令行界面会限制 SnapManager 和 SnapDrive for UNIX 的性能和易管理性。使用 SnapDrive for UNIX 守护进程时，所有命令都是一个唯一的过程。守护进程服务不会影响 SnapDrive for UNIX 命令的使用方式。</block>
  <block id="b3907e4cddcd53a1728df61453bcf3b4" category="paragraph">SnapDrive for UNIX Web 服务允许第三方应用程序与 SnapDrive for UNIX 无缝集成。它们使用 API 与 SnapDrive for UNIX 进行交互。</block>
  <block id="7638d5c66914cd0a6a4b12ac3a726efd" category="paragraph">启动守护进程时， SnapDrive for UNIX 守护进程会首先检查该守护进程是否正在运行。如果守护进程未运行，则启动守护进程。如果守护进程已在运行，而您尝试启动它，则 SnapDrive for UNIX 将显示以下消息：</block>
  <block id="391161efefb976827aabd4f6513b516c" category="paragraph">SnapDrive 守护进程已在运行`</block>
  <block id="4a77f8917b8338ed76fcb544f682e328" category="paragraph">您可以检查守护进程的状态以查看 SnapDrive for UNIX 是否正在运行。在决定启动守护进程之前，应先检查状态。如果非 root 用户尝试检查状态，则 SnapDrive for UNIX 将检查该用户的凭据并显示消息：</block>
  <block id="da6a002aae70353b3bd06e3b1d82129b" category="paragraph">只有 root 用户` 才能查看 SnapDrive 守护进程状态</block>
  <block id="fc9c810751455c1eee754895daf119a3" category="paragraph">当您尝试停止守护进程时， SnapDrive for UNIX 会检查您的凭据。如果您不是 root 用户，则 SnapDrive for UNIX 将显示此消息</block>
  <block id="13f2b4922c965864b11fa4cb74447c22" category="paragraph">SnapDrive 守护进程只能由 root 用户` 停止</block>
  <block id="7d47fac6bf6b47d4908ee4c5ed030bfb" category="paragraph">停止守护进程后，必须重新启动 SnapDrive for UNIX 守护进程，对配置文件或任何模块所做的任何更改才能生效。如果非 root 用户尝试重新启动 SnapDrive for UNIX 守护进程，则 SnapDrive for UNIX 将检查该用户的凭据并显示消息</block>
  <block id="1e0f8eb5f07a4d369a7d5fcbfce4d84a" category="paragraph">SnapDrive 守护进程只能由 root 用户` 重新启动</block>
  <block id="ca4e4b251c2760a86ce6fe8e488e2a62" category="summary">使用基于角色的访问控制（ RBAC ）取决于 Operations Manager 控制台基础架构。Operations Manager 控制台管理员必须创建用于 UNIX 的 SnapDrive 的用户名。所有存储操作请求都会首先发送到 Operations Manager 控制台以进行访问检查。在 Operations Manager 控制台验证特定 SnapDrive 用户的存储操作后，此操作将完成。</block>
  <block id="de03eb5b6c4324994cd84cc725abfa3c" category="doc">SnapDrive for UNIX 和 Operations Manager 控制台交互</block>
  <block id="a523c39babdc154100ab93096622e399" category="paragraph">使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）取决于 Operations Manager 控制台基础架构。Operations Manager 控制台管理员必须创建用于 UNIX 的 SnapDrive 的用户名。所有存储操作请求都会首先发送到 Operations Manager 控制台以进行访问检查。在 Operations Manager 控制台验证特定 SnapDrive 用户的存储操作后，此操作将完成。</block>
  <block id="5ac03b4733b761df5a3a02e1ba49db90" category="paragraph">下图显示了用于存储操作的整个 RBAC 。</block>
  <block id="b78c659630c8ce44bf0830e855f9b43b" category="image-alt">SDU RBAC Process 01 Linux</block>
  <block id="28675c4764a18ab0c75d417bb3073e2f" category="list-text">Operations Manager 控制台管理员在 Operations Manager 控制台上添加了 SD-admin 用户。</block>
  <block id="c565374cfa5a365f85046534555fadd7" category="list-text">Operations Manager 控制台管理员可在存储系统上创建 SD 主机名用户。</block>
  <block id="127bacd97b1bb1f5f0b9b6deecffa190" category="list-text">Operations Manager 控制台管理员将 SD-admin 和 SD-hostname 凭据发送给 SnapDrive for UNIX 管理员。</block>
  <block id="84c1ff00cd5a65a9b71f238b75611e28" category="list-text">SnapDrive 管理员使用收到的用户凭据配置 SnapDrive 。</block>
  <block id="4bb17ff34b8c1c06a825a37521a91be8" category="list-text">Operations Manager 控制台会使用 SnapDrive 管理员添加的用户凭据检查 SnapDrive for UNIX 的使用情况。</block>
  <block id="dbdd85646db17b614e76de287afec140" category="list-text">对 SnapDrive 用户进行身份验证后，该用户可以连接到存储系统。</block>
  <block id="99b04e3c6eb4d67ad5af119fe20b54b8" category="paragraph">当 SnapDrive 用户希望执行某些存储操作时，用户会在命令行上发出相应的命令。此请求将发送到 Operations Manager 控制台以进行访问检查。Operations Manager 控制台会检查请求的用户是否具有执行 SnapDrive 操作的适当权限。访问检查的结果将返回到 SnapDrive 。根据结果，允许或不允许用户在存储系统上执行存储操作。</block>
  <block id="fcf5b1ddbfed4280ba397250fe7af062" category="paragraph">如果在访问检查后验证了用户，则用户将以 SD 主机名的形式连接到存储系统。</block>
  <block id="8136aed6cdc97765f5adbc6782a0bbf0" category="admonition">建议使用 sd-hostname 和 sd-admin 用户名。您可以使用其他用户名配置 SnapDrive for UNIX 。</block>
  <block id="48aed5737b33511c2eb7a0d991d407f4" category="summary">SnapDrive for UNIX 提供了有关错误消息的信息，这些错误消息显示在不同的位置并采用各种格式。</block>
  <block id="05085938b1bb0e2e306555c272cff188" category="doc">了解错误消息</block>
  <block id="34eb68f6fb5d3e7561cd44be57dffd6c" category="summary">SnapDrive for UNIX 提供了一个数据收集实用程序（ SnapDrive.dc\ ），用于收集有关 SnapDrive for UNIX ， SnapDrive 配置检查程序和系统设置的诊断信息。</block>
  <block id="db4017ec5f5ce464f320b2e9f2b32f1e" category="doc">关于数据收集实用程序</block>
  <block id="a8310405abf1e19a2b2ca1a329b3b542" category="paragraph">SnapDrive for UNIX 提供了一个数据收集实用程序（ `snapdrive.dc` ），用于收集有关 SnapDrive for UNIX ， SnapDrive 配置检查程序和系统设置的诊断信息。</block>
  <block id="ea4fd1ba8255bf28eb3cfb69c2689cde" category="paragraph">为此，它会运行 NetApp 诊断实用程序并将 SnapDrive for UNIX 日志文件复制到一个特殊目录。然后，它会创建一个包含此信息的压缩文件，您可以将此信息发送给 NetApp 技术支持进行分析。</block>
  <block id="f16b7af74d0e31a2e23143034893c2ae" category="paragraph">在适用于 UNIX 的 SnapDrive 5.0 中，会实施 ` -dump` 和 ` -dumpall` 选项。` dump` 选项收集 SnapDrive 命令的第一个日志，而 ` -dumpall` 选项收集 SnapDrive 命令的所有日志。使用 ` -dump` 或 ` -dumpall` 选项执行 SnapDrive 操作时，将生成 `snapdrive.dc` 并列出压缩后的文件位置。该 tar 文件收集 SnapDrive 命令的所有日志信息，您可以对该文件进行解压缩，并从相应位置检索该文件。</block>
  <block id="39f826d15deefaff9c76e05ad10004c3" category="paragraph">已为 SnapDrive 命令实施 ` -dump` 或 ` -dumpall` 选项，例如 SnapDrive storage show` ， SnapDrive storage create` ， SnapDrive storage delete` ， SnapDrive snap create` ， SnapDrive snap connect` ， SnapDrive snap disconnect` ， SnapDrive snap restore` ， SnapDrive 克隆拆分估计值` 和 SnapDrive 克隆拆分开始` 操作。</block>
  <block id="a744b5675723a6dffb315047902d46b8" category="admonition">它不会复制包含存储系统登录信息的文件。它也不会对配置进行任何更改。</block>
  <block id="9b82e242d13dbb280f295aae894b1382" category="summary">您可以更改恢复日志文件的名称以及 SnapDrive for UNIX 保存的最大旧恢复日志文件数。</block>
  <block id="1d4de96b4c42bed9a7d71ac64e7960b5" category="doc">恢复日志的默认值</block>
  <block id="7ac92298efeab1ed01e8fbf9ba6a69a4" category="paragraph">使用 `snapdrive.conf` 文件可以为恢复日志记录设置以下值：</block>
  <block id="0934d6ad062d6db5c4043a52718fe3cc" category="list-text">包含恢复日志的文件的名称，例如 `recovery.log` 。</block>
  <block id="4772eba1e116543399cb73df4823fc6f" category="list-text">SnapDrive for UNIX 保存的最大旧恢复文件数。默认值为 20. 。如果未立即发现此过程的问题， SnapDrive for UNIX 将保留此数量的恢复日志。SnapDrive for UNIX 会在每次完成操作时启动一个新的恢复日志文件。然后，通过在名称中添加任意数字来重命名前一个，例如 `recovery.log.0` ， `recovery.log.1` 等。</block>
  <block id="bce6a267d67af26b5a914dc54dd3a3c4" category="admonition">恢复日志文件的大小取决于所执行的操作。每个恢复日志都包含有关单个操作的信息。此操作完成后，无论先前的文件大小如何， SnapDrive for UNIX 都会启动一个新的恢复日志。因此，恢复日志文件没有最大大小。</block>
  <block id="31352621124480f8b1134caceef95703" category="paragraph">以下恢复日志示例显示， SnapDrive for UNIX 已在操作暂停之前还原两个 Snapshot 副本。您可以将此恢复日志文件发送给技术支持，以协助还原其余 Snapshot 副本。</block>
  <block id="b894c4f73630254acf75bc87666bcf17" category="summary">在使用 iSCSI 设置的 Red Hat Enterprise Linux 4 和 Oracle Enterprise Linux 4 主机的所有更新上，所有 SnapDrive for UNIX 命令均会出错。</block>
  <block id="91e35173d7c51b2c4805a291ba457637" category="doc">在 HBA_LoadLibrary 中加载 /usr/lib/libqlsdm.so 时出错</block>
  <block id="4fdb5c2d6f5e58c9f5ca54fd199e4f32" category="paragraph">在卸载或卸载 QLogic 驱动程序期间， `libHBAAPI` 库仍会保留在 ` /usr/lib` 文件中，并且不会被 `QLogic ./install` 脚本删除。以下错误消息显示为</block>
  <block id="d2c3c0d6349abfceed26ad72bd559ca2" category="paragraph">重命名或移动（ mv ） ` _libqlsdm.so_` 库。例如， `mv /usr/lib/libqlsdm.so /usr/lib/libqlsdm.so.old` 。</block>
  <block id="3648c5444b01a74cb1f14899a884f8ab" category="summary">您可以编辑 SnapDrive.conf 文件，该文件包含 SnapDrive for UNIX 中使用的所有配置变量和选项，以便根据您的要求启用或禁用选项。您还可以添加变量以创建特定于主机的使用情况。</block>
  <block id="166f3f369566c4d3f7ff6c4a9ff8186f" category="doc">配置适用于 UNIX 的 SnapDrive</block>
  <block id="ea5875e1813ccd71d3143371f87fc7e3" category="paragraph">您可以根据需要编辑 `snapdrive.conf` 文件，该文件包含 SnapDrive for UNIX 中使用的所有配置变量和选项，以启用或禁用选项。您还可以添加变量以创建特定于主机的使用情况。</block>
  <block id="9f185aa58bd3ac5991a9a6491bb7612b" category="summary">使用 SnapDrive storage resize 命令时，需要遵循一些准则。</block>
  <block id="988c9eed018a56fb5331320e0bce4446" category="doc">storage resize 命令的准则</block>
  <block id="f872e922f7f476347b10d4d421273b66" category="paragraph">使用 SnapDrive storage resize` 命令时，需要遵循一些准则。</block>
  <block id="7653fe376389defa49615410d2e930a2" category="list-text">存储调整大小操作只能增加存储大小。您不能使用它来减小实体的大小。</block>
  <block id="666825e4d28d5bd7b35b022c81826d46" category="list-text">所有 LUN 都必须位于同一个存储系统卷中。</block>
  <block id="90bff0326734114adba80c62ae6a7414" category="list-text">调整大小操作不支持直接对逻辑主机卷执行，也不支持对逻辑主机卷或 LUN 上的文件系统执行。在这种情况下，必须使用 LVM 命令调整存储大小。</block>
  <block id="c8f9875472e48c962d5e067d013e4c27" category="list-text">您不能调整 LUN 的大小；您必须使用 ` -addlun` 选项添加新的 LUN 。</block>
  <block id="98e9fc2582176e69d13cc7e96db63807" category="summary">如果向使用共享磁盘组或文件系统的主机集群配置添加了新节点，则需要遵循其他语法。</block>
  <block id="c57613d92188bdaa82afa39a8a5a717a" category="doc">使用共享资源连接现有 LUN</block>
  <block id="826f40620c50b66f6d61e18d5a5fd5ee" category="paragraph">SnapDrive 存储连接 -fs _file_spec_ -lun _lon_lun_name_ LUN_name...] 【 -mntets option】`</block>
  <block id="e81c5ac2698fd8e5079bcfc667e71104" category="summary">审核日志显示有关您使用 SnapDrive for UNIX 发出的命令的信息。</block>
  <block id="de2a5ef6e96042f34973fb0b9769bd66" category="doc">审核日志文件的内容</block>
  <block id="0ebc92ea9ea36e9ffbae2618ba729a01" category="paragraph">审核日志文件会保留以下信息的历史记录：</block>
  <block id="61c7887e5c74b00eaa28b4070da442ea" category="list-text">发出的命令。</block>
  <block id="8165536d8bf4682de7b6b811144ff9da" category="list-text">这些命令的返回值。</block>
  <block id="4667f79cd20f6a120b89f51612336cde" category="list-text">调用命令的用户的用户 ID 。</block>
  <block id="b2e112ba03b610e64566818865075824" category="list-text">指示命令启动时间的时间戳（无返回代码）和指示命令完成时间的另一个时间戳（含返回代码）。审核日志记录仅显示有关 SnapDrive` 使用的信息（发出的命令）。</block>
  <block id="cb45d6866f12c9dddd8e17b242c29e7c" category="paragraph">审核日志文件包含以下信息。</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="9871d3a2c554b27151cacf1422eec048" category="paragraph">UID</block>
  <block id="7770f29b8d6d3cdccc2118f44e518d32" category="paragraph">用户 ID</block>
  <block id="2d53a8fb7abf5be7f4a3cf4b565cc75c" category="paragraph">GID</block>
  <block id="323e237c481315f14a50e7fe99b34121" category="paragraph">组 ID</block>
  <block id="36fc33c5138f84adff5eda4d57163acf" category="paragraph">msgText</block>
  <block id="805507d972acf4c43e142b72382281f0" category="paragraph">消息文本</block>
  <block id="0b73a49afd68b3ee92a7e6fb3c03bf96" category="paragraph">返回代码</block>
  <block id="8845ac8c468a1c074277036eb55d5a89" category="paragraph">从命令返回代码</block>
  <block id="76814dde2bf2ac99b2c5558099fa3c3d" category="summary">如果守护进程在 SnapDrive 进程中发现少量陈旧条目，则无法启动此守护进程。</block>
  <block id="a7904ae66dfd784e26b6349f586f1994" category="doc">无法启动守护进程</block>
  <block id="97ece97cf49c82a1ebbbc941bebf7479" category="paragraph">启动或重新启动守护进程时，将显示以下错误消息。</block>
  <block id="65f2837798ab56c61994298f6dc2975c" category="paragraph">在守护进程重新启动 / 启动操作期间，您可能会遇到已处理的 SnapDrive 进程条目，从而导致守护进程失败。</block>
  <block id="80987de15670b24e838fd97c744ee86c" category="paragraph">此问题的临时解决策将执行以下操作：</block>
  <block id="fb06af3d45a7c6efb81721354aab0851" category="list-text">手动删除 SnapDrive 进程中陈旧的条目。</block>
  <block id="8a96df3befa4dc47ce292c75c49c723a" category="list-text">查找主机中可用的端口。然后，在 SnapDrive.conf 文件中，在选项 contact-http-port-sdU-daemon 中指定端口。</block>
  <block id="ffc8af9179f86d7f2f03ceeba682f244" category="summary">SnapDrive for UNIX 命令可使用多种选项。</block>
  <block id="fce5117eee534e18d71629fbb86764a4" category="paragraph">通过 SnapDrive for UNIX ，您可以根据需要在其命令中包括以下选项。在某些情况下，您可以使用这些选项的缩写形式。例如，您可以使用 ` -h` ，而不是 ` -help` 。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">选项</block>
  <block id="31f24d0371cef7a0e41efb2076247951" category="paragraph">` -addlun`</block>
  <block id="cebd6e487175401400776b7103c37b48" category="paragraph">指示 SnapDrive for UNIX 将内部生成的新 LUN 添加到存储实体以增加其大小。</block>
  <block id="02833ce6ce543216a9319c92246ec807" category="paragraph">` 所有`</block>
  <block id="80cc198aac2bb4a1efb7e3a12d2044e4" category="paragraph">与 SnapDrive storage ｛ `show | list` ｝ 命令结合使用，可显示主机已知的所有设备和 LVM 实体。</block>
  <block id="8105c644d1a898f76dea318d5d397576" category="paragraph">` 自动扩展`</block>
  <block id="d2860167b46df0bead9d6361ee542a13" category="paragraph">与 SnapDrive snap connect` 命令结合使用，用于在您提供磁盘组中一部分逻辑卷或文件系统时请求连接磁盘组。</block>
  <block id="6ded4b1b37e43a7593156bbfb1ae86be" category="paragraph">` 自动名称`</block>
  <block id="e92c56feee4ae86d22f996dbf862ee4a" category="paragraph">与 SnapDrive snap connect` 命令结合使用，可通过命令重命名已使用默认名称的任何新连接的 LVM 实体。</block>
  <block id="78f322e4e4375d8f91ad682726722b71" category="paragraph">` 克隆类型`</block>
  <block id="f6e0af3f7f56cb2e8826dea6fe36ad22" category="paragraph">在 `snap connect` 操作期间使用的克隆方法。此处的类型是指 lunclone （创建 LUN 克隆）， optimal （ SnapDrive 会根据存储配置自动在受限 FlexClone 和 LUN 克隆之间进行选择）和 Unrestricted （创建 FlexClone ，可用于配置和 Snapshot 操作，就像普通灵活卷一样）。</block>
  <block id="a5d77fa12d354ff8405e267e25997558" category="paragraph">` 功能`</block>
  <block id="655e03d0b4034724acc264b119581ca5" category="paragraph">与 SnapDrive storage show` 命令结合使用，可了解允许对主机文件规格执行的操作。</block>
  <block id="02d0becad1b8d44b509a638cb9e858dc" category="paragraph">` 设备` 或 ` 开发`</block>
  <block id="8816808e526197eb09ec2ecddb589e7d" category="paragraph">与 storage ｛ show | list ｝ 命令结合使用，可显示主机已知的所有设备。</block>
  <block id="6ce995dd2ec11d1349a25b2f1176aa8f" category="paragraph">` -dgsize` 或 ` -vgsize`</block>
  <block id="fd95c235a391be027f79d6fc99a1499b" category="paragraph">与 SnapDrive storage create` 命令结合使用以指定要创建的磁盘组的大小（以字节为单位）。</block>
  <block id="da6b394581ef0b733575b6a8ef6aa792" category="paragraph">` 强制` （或 ` f` ）</block>
  <block id="55e0d884e60630ca1142b9f1840bca37" category="paragraph">导致尝试 SnapDrive for UNIX 不会正常执行的操作。SnapDrive for UNIX 会提示您在执行操作之前请求确认。</block>
  <block id="6d6807aae9a9b7a3e5a6beb10f8f59c3" category="paragraph">` -fsopts`</block>
  <block id="162fa2692421d9413eba7dc75d2bcf4d" category="paragraph">要传递给创建新文件系统的主机操作的选项。根据主机操作系统的不同，此主机操作可能是一个命令，例如 `mKFS` 命令。</block>
  <block id="474bf6f808a92f7c877511318f1ae3af" category="paragraph">此选项提供的参数通常需要指定为带引号的字符串，并且必须包含要传递到命令的确切文本。</block>
  <block id="cf19ef59911e0c667f05e0247f71e5cd" category="paragraph">例如，您可以输入 ` -o largefiles` 作为要传递给主机操作的选项。</block>
  <block id="ca9cb328f3a9f1827f36c25cec115489" category="paragraph">要用于 SnapDrive for UNIX 操作的文件系统类型。文件系统类型必须为 SnapDrive for UNIX 操作系统支持的类型。可为此变量设置的当前值为 "`ext3 或 ext4` "</block>
  <block id="b24952f93079d8a86c5cb0d3dd381adb" category="paragraph">您也可以使用 ` -fstype` 配置变量指定要使用的文件系统类型。</block>
  <block id="ef9b68429d1eba30a8d3f159e6ae8557" category="paragraph">允许对指定主机端实体执行操作，即使该实体不为空（例如，该实体可能是包含一个或多个逻辑卷的卷组）也是如此。</block>
  <block id="08f536a3dcaf83288ca34dc99e23c924" category="paragraph">` - 增长`</block>
  <block id="9fd0f889e3e1e41d23d93bbb3cb17aa5" category="paragraph">要增加 LUN 或磁盘组大小，要添加到 LUN 或磁盘组的字节数。</block>
  <block id="0a341bddfc80e00c129c571095f10a82" category="paragraph">` - 增长`</block>
  <block id="6b43592d492f05127a48380904c3ecbd" category="paragraph">LUN ，磁盘组或卷组的目标大小（以字节为单位）。SnapDrive for UNIX 会自动计算达到目标大小所需的字节数，并将对象大小增加该字节数。</block>
  <block id="ca6c068d9b2bab12276a5adb2fa8b1c4" category="paragraph">` —帮助`</block>
  <block id="bbccd614a5dd356dfb19038ec9a782de" category="paragraph">输出命令和操作的使用情况消息。输入此选项本身，而不使用其他选项。下面是可能的命令行示例。</block>
  <block id="6c15002cd72dfebcfc7b813ab4aaa82d" category="paragraph">` - lunsize`</block>
  <block id="a5360e4c2663447432ff7db65e09ff57" category="paragraph">要通过给定命令创建的 LUN 的大小（以字节为单位）。</block>
  <block id="dccba082637bb56f4a5eaf03d4780bd7" category="paragraph">指定要传递到 host mount 命令的选项（例如，指定文件系统日志记录行为）。选项也存储在主机文件系统表文件中。允许的选项取决于主机文件系统类型。</block>
  <block id="3f2ee1f6f23fa51b3c310e05525b770f" category="paragraph">您提供的 ` -mntopts` 参数是一个文件系统类型选项，使用 mount 命令 "` - o` " 标志指定。请勿在 ` -mntopts` 参数中包含 "` "` - o` " 标志。例如，序列 ` -mntopts tmplog` 会将字符串 ` -o tmplog` 传递到挂载命令行，并在新命令行中插入文本 "`tmplog` " 。</block>
  <block id="0f784b2e9d182052226133ae4247599d" category="paragraph">` -nodfilerfence`</block>
  <block id="389762231324da6e03c66f9644c6d75b" category="paragraph">禁止在创建跨多个存储器卷的 Data ONTAP 副本时使用 Snapshot 一致性组功能。</block>
  <block id="ef1465fb3e51cbfe58417367da680f45" category="paragraph">在 Data ONTAP 7.2 或更高版本中，您可以暂停对整个存储器卷的访问。通过使用 ` -nodfilerfence` 选项，您可以冻结对单个 LUN 的访问。</block>
  <block id="1db64239e29f25cf886ab382dab94df7" category="paragraph">直接在 LUN 上连接或创建文件系统，而不涉及主机 LVM 。</block>
  <block id="a90fb0d8b45ef2f3bce61c23ab16a102" category="paragraph">使用此选项直接在 LUN 上连接或创建文件系统的所有命令都不接受主机集群或共享资源使用此选项。只有本地资源才允许使用此选项。</block>
  <block id="fd5fb04f3d6e66087cfe9c828021ac73" category="paragraph">连接或创建文件系统或具有文件系统的 Snapshot 副本，而无需在主机的持久挂载条目文件中添加条目。</block>
  <block id="aa8be6683300a1ca557b5583da724bab" category="paragraph">` -prefixfv`</block>
  <block id="5bf16e520f931f28208aad2a8713e9f5" category="paragraph">生成克隆卷名称时要使用的前缀。新卷的名称格式为 ` &lt;pre-fix&gt;_&lt;original_volume_name&gt;` 。</block>
  <block id="c89a047364f47cfd7d16b29a866188f4" category="paragraph">` 预留 - noreserve`</block>
  <block id="8cce80e9b6e53b6e74d4302db8fc2d11" category="paragraph">与 SnapDrive storage create` ， SnapDrive snap connect` 或 SnapDrive snap restore` 命令结合使用，用于指定 SnapDrive for UNIX 是否创建空间预留。默认情况下， SnapDrive for UNIX 会为存储创建，调整大小和 Snapshot 创建操作创建预留，而不会为 Snapshot 连接操作创建预留。</block>
  <block id="bffce2d958d26329867c16237e037b88" category="paragraph">禁止执行命令期间出现提示。默认情况下，任何可能会产生危险或不直观的副作用的操作都会提示您确认应尝试使用 SnapDrive for UNIX 。此选项将覆盖此提示；如果与 ` -force` 选项结合使用，则 SnapDrive for UNIX 将执行此操作，而不要求确认。</block>
  <block id="dfe4ce03dcc072e22c4c5620ad0e92c0" category="paragraph">` - 静默` （或 ` - q` ）</block>
  <block id="8c9109c503b77a698e1799ed91103e82" category="paragraph">禁止报告错误和警告，无论它们是正常还是诊断。它将返回零（成功）或非零状态。` -quiet` 选项会覆盖 ` -verbose` 选项。</block>
  <block id="67e225c386236f7914ddae528f010358" category="paragraph">对于 SnapDrive storage show` ， SnapDrive snap show` 和 SnapDrive config show` 命令，将忽略此选项。</block>
  <block id="0955bd9522eec4372a782f5dbb880d96" category="paragraph">` 只读`</block>
  <block id="1fd87724143bfcaee865f8fb66348568" category="paragraph">对于使用 Data ONTAP 7.1 的配置或任何使用传统卷的配置来说是必需的。连接具有只读访问权限的 NFS 文件或目录。</block>
  <block id="3f55872f1c328bc674852b0d922f5be1" category="paragraph">对于使用 FlexVol 7.0 且使用 Data ONTAP 卷的配置，可选。连接具有只读访问权限的 NFS 文件或目录树。（默认值为读 / 写）。</block>
  <block id="8d115ade12b028c197ee8ee08de608f7" category="paragraph">您也可以使用 ` _enable-split-clone_s` 配置变量拆分克隆的卷或 LUN 。</block>
  <block id="efc7c703fded0ee9c746010637040f55" category="paragraph">` 状态`</block>
  <block id="c639fe052ac3ba9efcc13fe5c0183ddb" category="paragraph">与 SnapDrive storage show` 命令结合使用以了解卷或 LUN 是否已克隆。</block>
  <block id="64bfdd8aec07e030b35770f8271ea490" category="paragraph">创建 Snapshot 副本时，为无相关写入的 `file_specs` 实体创建 Snapshot 副本。由于这些实体没有依赖写入，因此 SnapDrive for UNIX 会为各个存储实体创建崩溃状态一致的 Snapshot 副本，但不会采取措施使这些实体彼此保持一致。</block>
  <block id="513c06d76f8c7297a0fff1ef67b2e2f8" category="paragraph">` - 详细` （或 ` - v` ）</block>
  <block id="d1880d3117065953ac9f24fa9943393a" category="paragraph">在适当的情况下显示详细输出。所有命令和操作都接受此选项，但有些命令和操作可能会忽略此选项。</block>
  <block id="afd87f62ceb4c8c42940470b1d344c2b" category="paragraph">` -vgsize` 或 ` -dgsize`</block>
  <block id="795da0ae58fe56ce466bfc15522d80f1" category="paragraph">与 `storage create` 命令结合使用以指定要创建的卷组的大小（以字节为单位）。</block>
  <block id="532731392417e1f1f7786d51547163c1" category="paragraph">要用于 SnapDrive for UNIX 操作的卷管理器的类型。</block>
  <block id="79bfd3fed3a2f8c28c7a7525c8ace6de" category="paragraph">如果用户在命令行中明确指定了 ` -vmtype` 选项，则 SnapDrive for UNIX 将使用选项中指定的值，而不管在 `vmtype` 配置变量中指定的值如何。如果未在命令行选项中指定 ` -vmtype` 选项，则 SnapDrive for UNIX 将使用配置文件中的卷管理器。</block>
  <block id="02f2e2223a6138583dbac0ee9bf2aa60" category="paragraph">卷管理器必须是 SnapDrive for UNIX 支持您的操作系统的类型。可以为此变量设置的当前值为 lvm 。</block>
  <block id="0f068dfac9a8caa31f6955663b33a922" category="paragraph">您还可以使用 vmtype 配置变量指定要使用的卷管理器类型。</block>
  <block id="c2c712296e0972d6ade979dcfc049c7c" category="paragraph">` -vbsr ｛ preview ； execute ｝`</block>
  <block id="5bcee5c393936cc197aff2e724298591" category="paragraph">`preview` 选项可为给定主机文件规范启动基于卷的 SnapRestore 预览机制。使用 `execute` 选项， SnapDrive for UNIX 将继续为指定的文件规范使用基于卷的 SnapRestore 。</block>
  <block id="4b149c7192cf430f28b749d5f292b3d8" category="summary">为了便于显示有关存储的信息， SnapDrive for UNIX 为 SnapDrive storage show 命令提供了多种格式。</block>
  <block id="9d177f3ac9908c636396a4d5e8b8881c" category="doc">显示存储信息的方法</block>
  <block id="ef932b17ce8f7f3b40f42e315d573144" category="paragraph">为了便于显示有关存储的信息， SnapDrive for UNIX 为 SnapDrive storage show` 命令提供了多种格式。</block>
  <block id="5f8b986b4dc711587228256d363087d5" category="paragraph">storage show 操作分为以下几类：</block>
  <block id="0978d42e10996029c8c68293dd84fa59" category="list-text">显示有关特定 LUN 的信息。</block>
  <block id="f614fa32af9147083002ea2b156ff312" category="list-text">列出有关可用于特定存储系统或存储系统卷的 LUN 的信息。</block>
  <block id="c30251ed261f33b374e8f48e69ec4e25" category="list-text">显示与指定参数关联的 LUN 的信息。</block>
  <block id="0320614cd2a7f8e08025ec6d5cec2ef3" category="paragraph">这些参数可以包括 NFS 实体，文件系统，主机卷或磁盘组。如果在命令提示符处使用 ` 详细` 选项，则 SnapDrive for UNIX 将提供详细输出，例如显示存储层次结构，包括备用 LUN 。</block>
  <block id="cd5a8feb03e60d8dab9900f2814f99e2" category="list-text">显示主机已知设备的相关信息。</block>
  <block id="e68145a9bbdd7d7e3647f54a8cb8a9a0" category="list-text">显示主机已知的所有设备和 LVM 实体的信息。</block>
  <block id="71ecdb7339c5b08bb1fc37728a8750d2" category="list-text">将资源的状态显示为共享或专用。</block>
  <block id="59902472742b830971cc5503454fb1cf" category="summary">您可以使用 SnapDrive 命令创建，还原和管理 LVM ，原始设备和 NFS 实体的 Snapshot 副本。</block>
  <block id="16c04a628e24e89e68c0e8362ea1d53c" category="doc">如何管理 LVM ，原始设备和 NFS 实体的 Snapshot 副本</block>
  <block id="06006c1ff81bb50c09c6172d93984219" category="paragraph">您必须在主机上运行命令来创建，还原和管理存储实体的 Snapshot 副本。</block>
  <block id="69845566c5f54b02300466b826a22993" category="list-text">卷管理器实体</block>
  <block id="19240602ccd584247abeef539f266e3d" category="paragraph">卷管理器实体是包含使用主机卷管理器创建的主机卷和文件系统的磁盘组。</block>
  <block id="df9d73b7debb08c211af55daa9113b1f" category="list-text">原始实体</block>
  <block id="a0a5e1853a45974867b1f9d41c2098ce" category="paragraph">原始实体是指包含文件系统而不创建任何卷或磁盘组的 LUN 或 LUN ，它们会直接映射到主机。</block>
  <block id="1f112a59b8a9e5e579dc4ae69df72b32" category="list-text">NFS 实体</block>
  <block id="1a14205a43ea2fe47606259fa495242f" category="paragraph">NFS 实体是 NFS 文件和目录树。</block>
  <block id="f4eec3e411fcf02d8f455801fa0c012b" category="paragraph">您创建的 Snapshot 副本可以位于多个存储系统和存储系统卷上。SnapDrive 会检查 Snapshot 副本中存储实体的读取或写入权限，以确保所有 Snapshot 副本数据崩溃状态一致。除非数据崩溃状态一致，否则 SnapDrive 不会创建 Snapshot 副本。</block>
  <block id="83519a516078d9234f2630821bfefaeb" category="summary">在 SnapDrive for UNIX 中运行 storage create 命令时，在发现阶段，某些映射设备的发现将被拒绝，并且此命令将失败。</block>
  <block id="3f0e7bba12b0fb5dfcc77584809af305" category="doc">发现某些映射设备时， SnapDrive for UNIX storage create 命令失败</block>
  <block id="44548ddec5a5bb79bc4b60cbb93159c2" category="paragraph">在 SnapDrive for UNIX 中运行 `storage create` 命令时，在发现阶段，系统会拒绝发现某些映射设备，并且此命令会失败。</block>
  <block id="f196ecd2f6bcd8858dbd2108876e29a4" category="paragraph">对于要接受的所有设备，编辑 ` /etc/lvm/lvm.conf` 文件的筛选部分：</block>
  <block id="7e041699cb2f61aa1eb089d4607b70f5" category="inline-xref-macro">存储创建操作的准则</block>
  <block id="d22ed224cc877235a2e2de76e777c064" category="paragraph"><block ref="d22ed224cc877235a2e2de76e777c064" category="inline-xref-macro-rx"></block></block>
  <block id="545b8bd4a81c213f95e894d6d98f16cb" category="summary">您可以在使用基于卷的 SnapRestore \ （ VBSR\ ）时牢记几点。牢记这些要点有助于您安全地使用 VBSR 功能。</block>
  <block id="1cdaed408001854d34013d78a13d3cc8" category="doc">使用基于卷的 SnapRestore 的注意事项</block>
  <block id="de8ed88badb9875ccaa2283755b99424" category="paragraph">您可以在使用基于卷的 SnapRestore （ VBSR ）时牢记几点。牢记这些要点有助于您安全地使用 VBSR 功能。</block>
  <block id="e531a9f126f1c36efec3b9109bd72c2a" category="paragraph">您必须牢记以下几点：</block>
  <block id="830e57f62f687205ae8f99a7294ebd03" category="list-text">VBSR 会将整个卷还原到创建 Snapshot 副本时的状态，此状态用于 VBSR 。VBSR 包括以下内容：</block>
  <block id="6cfe1cf01c2974e3de3bc2f1111ab46c" category="list-text">在 `snap create` 操作期间，指定主机文件规范的所有文件和 LUN 。</block>
  <block id="dbf26e1f8d0fd55a2b64f8397cef503f" category="list-text">在 `snap create` 操作期间，应用程序一致的 Snapshot 副本中的所有文件和 LUN 。</block>
  <block id="b32e480d19f991bce4ebe54251a4b490" category="list-text">VBSR 将删除在用于还原的 Snapshot 副本之后在当前卷上创建的所有较新文件和 LUN 。</block>
  <block id="6d1b2d97203d22d66fb63529e35f3e17" category="list-text">VBSR 将删除在用于还原的 Snapshot 副本之后创建的所有较新 Snapshot 副本。</block>
  <block id="e148b726e968437dc4e406b17fc37100" category="list-text">建议在使用 ` -vbsr execute` 命令之前运行 ` -vbsr preview` 命令。</block>
  <block id="cac8fd79eda2d990667742ec325acf87" category="summary">在运行任何 SnapDrive for UNIX 命令之前，您必须了解 Web 服务和守护进程以及如何使用它们。所有 SnapDrive for UNIX 命令均使用守护进程服务运行。在 Linux 主机上使用 SnapDrive for UNIX 之前，必须启动守护进程，以便 SnapDrive for UNIX 能够与其他 NetApp 和非 NetApp 产品无缝安全地集成。</block>
  <block id="9750476883165646daa575c63e30d531" category="doc">了解 SnapDrive for UNIX 守护进程</block>
  <block id="4925680e74a1c734c8c664bc3ad84142" category="summary">SnapDrive for UNIX 具有一些常见错误消息。查看常见错误消息列表。</block>
  <block id="87e06d207b5d9c43cbbdd16f15ddfbdc" category="doc">常见错误消息</block>
  <block id="09c66cc58c86b885acac10449601c168" category="summary">SnapDrive storage delete 命令在 SnapDrive for UNIX 中具有一些限制。</block>
  <block id="7a4761b5d02f97cbf27a8943f89d9994" category="doc">使用 storage delete 命令的准则</block>
  <block id="9ad4e33f3762976c3c6c145eaad73d55" category="paragraph">SnapDrive storage delete` 命令在 SnapDrive for UNIX 中具有一些限制。</block>
  <block id="d50d7165336475f2e909c7b9792fbcd3" category="list-text">删除文件系统时， SnapDrive for UNIX 始终会删除文件系统的挂载点。</block>
  <block id="4843a08d5672d2670ed843a56dabfd04" category="paragraph">通过 Linux 主机，您可以将多个文件系统连接到一个挂载点。但是， SnapDrive for UNIX 要求每个文件系统都有一个唯一的挂载点。如果使用 SnapDrive storage delete` 命令删除连接到单个挂载点的文件系统，则该命令将失败。</block>
  <block id="cfe37f2efc0fc31dba619e057246933f" category="list-text">如果使用 ` -lun` 选项指定属于主机磁盘组或文件系统的 LUN 的名称，则 SnapDrive storage delete` 命令将失败。</block>
  <block id="6857f84bbd75a86a4cb1a46a5c47a5eb" category="list-text">如果使用 ` -lun` 选项指定主机上的多路径软件未发现的 LUN 的名称，则 SnapDrive storage delete` 命令将失败。</block>
  <block id="844da243db07c19bb078c4aa3b18b401" category="admonition">如果映射 igroup 在适用于 UNIX 的 SnapDrive 5.2 之前的版本中具有两个以上的全球通用端口名称（ WWPN ），则在使用 RDM LUN 时， SnapDrive storage delete` 命令将失败。</block>
  <block id="28e3e5f38f3fff19a96dc12faa18e0c1" category="summary">影响 SnapDrive snap create 命令创建 Snapshot 副本的功能的条件很少。</block>
  <block id="c631e654af11321364aa1f9d2fe3ad43" category="doc">无法创建 Snapshot 副本</block>
  <block id="826ca6f7a0de407094cc05de242455de" category="paragraph">影响 SnapDrive snap create` 命令创建 Snapshot 副本的功能的条件很少。</block>
  <block id="ecc2e25f6eef9e25d4ba1a085a3c99f8" category="list-text">SnapDrive snap create` 命令必须能够执行以下任务：</block>
  <block id="38506da6f7828a0be4f8ac900800eec7" category="list-text">通过 SCSI 命令查询所有 LUN 。</block>
  <block id="44afd276a84abf067eb100bd4a2d4e78" category="list-text">在创建 Snapshot 副本之前，磁盘组中的 LUN 必须处于联机状态并映射到磁盘组。如果任何 LUN 脱机或未映射，则创建操作将失败。</block>
  <block id="886d337380c7d59ae41d9f64a83503cf" category="paragraph">在尝试创建 Snapshot 副本之前，请确保所有 LUN 均已联机并映射到主机。</block>
  <block id="8e0cac7bf1dec57a0100417194a66ce1" category="list-text">访问权限不允许主机为该存储系统上的信息创建 Snapshot 副本。</block>
  <block id="bb2ea30a5ea2eda353132d185b0ff0cf" category="paragraph">此外，由于它可与 LVM 条目结合使用，因此您必须以足够的权限登录到主机以使其能够操作 LVM 条目。</block>
  <block id="d387635fddf35f606bce4e4521a2adcb" category="summary">您可能需要为文件系统或磁盘组创建崩溃状态一致的 Snapshot 副本。SnapDrive for UNIX 会创建 Snapshot 副本，其中包含实体中指定的所有存储系统卷的映像。</block>
  <block id="992835851c9442c1ca4f13445975c8b0" category="doc">崩溃状态一致的 Snapshot 副本</block>
  <block id="46629aed97782e76851185bf3c81e0b4" category="paragraph">在为文件系统或磁盘组等存储实体创建 Snapshot 副本时， SnapDrive for UNIX 会创建一个 Snapshot 副本，其中包含使用 `file_specs` 参数构成您指定实体的所有存储系统卷的映像。`file_specs` 参数指定存储实体，例如 SnapDrive for UNIX 用于创建 Snapshot 副本的文件系统， LUN 或 NFS 目录树。</block>
  <block id="94dd8472beb69b35ca53b62504865bfa" category="paragraph">SnapDrive for UNIX 可提供一致的存储组件，用于构成您在 Snapshot 副本中请求的实体。这意味着，在 SnapDrive snap create` 命令 `file_specs` 参数指定的 LUN 或目录之外使用的 LUN 或目录可能在 Snapshot 副本中没有一致的映像。通过 SnapDrive for UNIX ，您可以仅还原由 `file_specs` 参数指定且在 Snapshot 副本中保持一致的实体。</block>
  <block id="21b30c6ac96a094c0aafcb829d46a49c" category="paragraph">单个存储系统卷上包含的实体的 Snapshot 副本始终保持崩溃状态一致。SnapDrive for UNIX 会采取特殊步骤，以确保跨多个存储系统或存储系统卷的 Snapshot 副本也保持崩溃状态一致。SnapDrive for UNIX 用于确保崩溃一致性的方法取决于 Snapshot 副本中存储实体所在的 Data ONTAP 版本。</block>
  <block id="f70796d2986b118c2a1fa4c2a3ce3774" category="summary">SnapDrive 允许重命名存储系统。如果创建了 Snapshot 副本，并且在创建该副本后对存储系统进行了重命名，则只要重新对所有客户端（主机）进行身份验证， SnapDrive 就允许您执行 Snapshot 操作。</block>
  <block id="c3cc527d33ed9283182bf1ad32536786" category="doc">支持存储系统重命名</block>
  <block id="71aed45b2b5a08ee198bb2421c884eac" category="paragraph">SnapDrive 允许重命名存储系统。如果创建了 Snapshot 副本，并且在创建副本后重命名了存储系统，则只要重新对所有客户端（主机）进行身份验证， SnapDrive 就允许您执行 Snapshot 操作。</block>
  <block id="84e07752df900d79d9329c41255369d0" category="paragraph">只有在重新对客户端进行身份验证后，还原，连接，断开连接，显示和删除等快照操作才会在主机系统中继续运行。您必须重新进行身份验证，因为主机名用作注册表项的一部分以保存密码。</block>
  <block id="0e39245ed27e947df8977b2a2314e79a" category="summary">通过适用于 UNIX 的 SnapDrive ，您可以在 VMware VMotion 前后断开并连接 RDM LUN 。完成 VMotion 操作后，您可以执行存储系统所需的存储操作。</block>
  <block id="611e85a6c66f79e4f72ecdc7c98acfc1" category="paragraph">* 关于 VMware VMotion ： *</block>
  <block id="2fe6af9e1170f8d85122b2b928aad16a" category="paragraph">通过 VMware VMotion ，您可以将子系统从一个 ESX 服务器移动到另一个 ESX 服务器。</block>
  <block id="d74032d35e45054108f1912943b0a976" category="paragraph">要断开和连接 SnapDrive for UNIX 中的 RDM LUN ，必须执行以下操作。</block>
  <block id="71d5745056bf97b06ecce87dc14e3738" category="paragraph">* 在 VMotion 之前 *</block>
  <block id="6f24f36ed341d82acf12f2b496a7490c" category="paragraph">您需要使用 SnapDrive storage disconnect` 命令删除 RDM LUN 的映射。以下语法：</block>
  <block id="67b4616559dd44c9c852d590bd4e0980" category="paragraph">` * SnapDrive storage disconnect -lun _long_lun_name LUN_name...]_*`</block>
  <block id="a7ed3719586860bfaad0cfd91d41553e" category="paragraph">* 在 VMotion* 之后</block>
  <block id="4cfc6dba80ac8dc9b65eb546aff20af4" category="paragraph">完成 VMotion 后，您必须使用 SnapDrive storage connect 命令连接 RDM LUN 。以下语法：</block>
  <block id="58c26a758a24d50ed975ec0317e82de5" category="paragraph">` * SnapDrive storage connect -lun _long_lun_name LUN_name...]_*`</block>
  <block id="fbc2e5b7fe8abd9178a231e3cc2b6914" category="summary">AutoSupport 允许 SnapDrive for UNIX 将因 SnapDrive 被发送到 /etc/log/EMS 文件中存储系统的 EMS 日志视图而发生的任何操作故障发送到该存储系统的 EMS 日志视图。</block>
  <block id="5670f47893d364edebfd2cad0b02f183" category="doc">什么是 AutoSupport</block>
  <block id="86058fd332daebd9756c9820dafb6dff" category="paragraph">AutoSupport 允许 SnapDrive for UNIX 将因 SnapDrive 被发送到存储系统的 EMS 日志视图中的 ` /etc/log/EMS 文件` 而发生的任何操作故障发送到 EMS 日志视图。</block>
  <block id="93089ef5f7034341da979b89e9314f75" category="summary">您可以使用 SnapDrive for UNIX 命令拆分现有的 FlexClone 卷。</block>
  <block id="fc360f93c78a90fb789d12c3fde18a78" category="doc">拆分 FlexClone 卷</block>
  <block id="470fe85c99dd79ec26910a447a850f6e" category="paragraph">要拆分 FlexClone 卷，您还需要使用 `snap connect` 命令指定 ` -Spli` CLI 选项。要断开连接，应使用 `disconnect` 命令提供 ` -split` 选项以断开拆分的 FlexClone 卷。此处有效的是启动 ` 拆分` 操作的阻止和非阻止模式。</block>
  <block id="cd0bcb897c3ffd66fc4ec079e6f404c5" category="paragraph"><block ref="cd0bcb897c3ffd66fc4ec079e6f404c5" category="inline-xref-macro-rx"></block></block>
  <block id="33c6bb1b36b652fb603cd4b70ce1fad3" category="summary">由于 LUN 繁忙， Snapshot 创建和删除操作无法删除存储系统上的 Snapshot 副本。</block>
  <block id="81def60b54b4244e35db31e9811dcd8f" category="doc">Snapshot 创建和删除操作失败</block>
  <block id="86fb5dd45eb1057e7a1d22cfa368b29d" category="paragraph">此时将显示以下错误消息：</block>
  <block id="01be8cf64c14aca4f46c5af4aa1cd2a7" category="paragraph">如果满足以下条件，您可能会遇到此错误，并且可能无法直接删除 Snapshot 副本：</block>
  <block id="9bbcdf7c6054dce4abe7beb7a52de949" category="list-text">一个磁盘组跨越多个存储系统。</block>
  <block id="aa85b7a501edd4775d08dc0b99223d61" category="list-text">以下 SnapDrive 命令会循环执行 50 次以上的迭代（迭代次数取决于主机操作系统）：</block>
  <block id="74b5b9da92429d964921dbbfc932287d" category="list-text">SnapDrive snap delete`</block>
  <block id="a46d73e1146020dca1d9b1dc49e6340e" category="paragraph">此时，存储系统上的 Snapshot 副本状态将显示 ` * luns-busy*` ，此状态将持续几小时。</block>
  <block id="0e70badc44a77ff4fe31c154da73f618" category="cell">* 如果 ...*</block>
  <block id="64906a366ee047656ce859c322bebdf1" category="cell">* 然后 * 。</block>
  <block id="4a7fa62c742a1fc3d2cfdf11625ee911" category="paragraph">Snapshot 副本中存在未连接到主机的克隆 LUN 。</block>
  <block id="75953743919c171fe7ae76e14cefd740" category="paragraph">您可以执行以下操作之一来删除 Snapshot 副本：</block>
  <block id="76f86e0cb8d1872617d189f8bb4b34c7" category="list-text">使用 `filer split clone` 命令将克隆的 LUN 从存储系统中拆分。</block>
  <block id="1f435b68b58a340cc01f608c2cfcddfc" category="list-text">删除克隆的 LUN 。</block>
  <block id="c8b2f988b4e353064bb3359063ca3f25" category="paragraph">执行以下步骤：</block>
  <block id="46b13238ee92464b01a666fbe3d431bb" category="list-text">使用 SnapDrive snap disconnect` 命令断开克隆的 LUN 与主机的连接。</block>
  <block id="a60561364d6d30b2ef938418f0eda269" category="list-text">删除 Snapshot 副本。</block>
  <block id="27681ab018e6d916aaa456dfd910f929" category="paragraph">存在以下任何一种情况：</block>
  <block id="0eff6a637727a4f4c90643cffc25c4ee" category="list-text">Snapshot 副本中的克隆 LUN 也存在于其他 Snapshot 副本中</block>
  <block id="e852f527c140465f5038614bd1608f3a" category="list-text">备份克隆的 LUN</block>
  <block id="d52f656247d81de630ca113b6925ce5f" category="list-text">在存储系统命令提示符下运行以下命令： `lun snap usage -s &lt;VolumeName&gt;&lt; snap-name&gt;`</block>
  <block id="2cd954340375adbc749cd0c68ef03243" category="paragraph">此列表列出了包含克隆 LUN 的 Snapshot 副本的 Snapshot 副本的名称，如以下示例所示：</block>
  <block id="39220ec613af905cd28da32e02593917" category="list-text">按照 LUN snap usage 命令输出中列出的顺序从存储系统中删除 Snapshot 副本，如以下示例所示。</block>
  <block id="231843b5d8b2f3af487506f02e8a4991" category="paragraph">`snap delete vol1 mpiotest2`</block>
  <block id="7ad5234a66587ec242a3b3db351002b4" category="admonition">确保要删除的 Snapshot 副本未被任何其他主机使用。如果正在访问，则无法删除。</block>
  <block id="b57849c104eadc42914e8ec9efb983ab" category="paragraph">没有克隆的 LUN</block>
  <block id="696b758e3c8b58bbb63fbac202d343f7" category="paragraph">请稍候，直到存储系统上 Snapshot 副本的 `luns-busy` 状态消失。</block>
  <block id="e6d5e193fd5bc77ff3e7fcec3a297294" category="summary">在某些情况下， SnapDrive 快照断开操作无法删除克隆的卷，并且会显示错误消息 Does not look SnapDrive-generated 。</block>
  <block id="dc0196d30146b5fafca3e9418f99061e" category="doc">快照断开操作无法删除克隆的卷</block>
  <block id="17a106e617897adcae7ff8e63aa1402d" category="paragraph">在某些情况下， SnapDrive snap disconnect` 操作无法删除克隆的卷，并且会显示错误消息 `dOES not look SnapDrive-generated` 。</block>
  <block id="39be069a3b50a7accf8a6e442db74ebc" category="paragraph">此问题的临时解决策是还原到 Snapshot 副本的原始名称，并确保在 `snapdrive.conf` 文件中将 ` bypass-SnapDrive-clone-generated_check_` 设置为 on 。</block>
  <block id="46d7075ea59a5390f83825d5d97d9ab0" category="summary">如果更改 SnapDrive for UNIX 配置文件，则必须停止并重新启动守护进程。您可以非强制或强制停止守护进程。</block>
  <block id="6dfb4a73f2366af568e9007a4a7e2007" category="doc">正在停止守护进程</block>
  <block id="ab403e9e96b8d189e0136a98a78378ec" category="summary">根据 SnapDrive for UNIX 使用 FlexClone 卷的方式， FlexClone 卷可以分为临时卷或通用卷。</block>
  <block id="b6d355abf99c53a32cd5d0ff513404c6" category="doc">FlexClone 卷的类型</block>
  <block id="44b53133a0d5d9dfb39a469665ae966c" category="list-text">* 受限或临时 FlexClone 卷 * ：此 FlexClone 卷（在 `snap connect` 期间创建）主要用于验证数据。不允许在此 FlexClone 卷上通过 SnapDrive for UNIX 执行配置和 Snapshot 操作（除 `snap disconnect` 之外）。</block>
  <block id="8a14e395cfb34e32ab495f3a9505d015" category="list-text">* 无限制或通用 FlexClone 卷 * ：此 FlexClone 卷（在 `snap connect` 期间创建）也可用作配置和 Snapshot 操作的后端，就像普通灵活卷一样。您可以对此 FlexClone 卷执行所有常规 SnapDrive 操作。</block>
  <block id="b5fea4d92a3de845367b753a37eb4f01" category="summary">您可以通过执行 SnapDrive config delete 命令来删除一个或多个存储系统的用户登录名。</block>
  <block id="e25c64c2c654163016900c44535c20dc" category="doc">删除存储系统的用户登录名</block>
  <block id="6346bdcbee40106032125609c5769628" category="paragraph">您可以通过执行 SnapDrive config delete` 命令来删除一个或多个存储系统的用户登录名。</block>
  <block id="da8ca087a817df7ff6c658d5e31d59b5" category="paragraph">` * SnapDrive config delete _appliage_name [appliation_name]_*`</block>
  <block id="a57922ff93cb504f7ad96599032cd8b3" category="paragraph">appliage_name 是要删除其用户登录信息的存储系统的名称。</block>
  <block id="85532ce163ffae8af51a7dff5ecb4a96" category="paragraph">SnapDrive for UNIX 会删除您指定的存储系统的用户名或密码登录信息。</block>
  <block id="bf885cb956b75b55297a8c4218b40b34" category="admonition">要使适用于 UNIX 的 SnapDrive 能够访问存储系统，必须指定新的用户登录名。</block>
  <block id="2f36e98c3b055e72dbf1015b0839c4f9" category="summary">snap connect 操作步骤适用于 Data ONTAP 7.2 或更高版本，并说明了 snap connect 操作的步骤。</block>
  <block id="4d706ef618a9d622c7c6ec31b79e4487" category="doc">Snap Connect 操作步骤</block>
  <block id="c3e2e831dd8d52f030199c103033a18c" category="paragraph">以下步骤说明了 Snap Connect 操作步骤：</block>
  <block id="24b6a05ca86c7b023dce62f87ce1b7a5" category="list-text">SnapDrive for UNIX 从 snap connect 命令行界面获取文件规范名称和 Snapshot 名称。然后，它会查找快照所在的原始存储系统卷。</block>
  <block id="1e2c18f34d2d3bbfada61a93f1c7ada0" category="list-text">SnapDrive for UNIX 会根据命令行界面配置选项为存储系统实体选择适当的克隆方法。</block>
  <block id="f90aa0b00fb06aa8647d996b60218981" category="admonition">如果指定了 CLI 选项，则它始终会覆盖 `snapdrive.conf` file 选项。</block>
  <block id="14d788885d9f0d794726a9a97ee53b6a" category="list-text">如果在 CLI 中指定了 ` -clone lunclone` 选项或在 `snapdrive.conf` 文件中指定了 `san-clone-method = lunclone` 选项，则 SnapDrive for UNIX 将从给定快照在同一卷中创建一个 LUN 克隆。</block>
  <block id="8819eca2636e2c10c409e1f4618bd6fe" category="list-text">如果在命令行界面中指定了 ` -clone unrestricted` 选项或在 `snapdrive.conf` 文件中指定了 `san-clone-method = unrestricted` 选项，则 SnapDrive for UNIX 将从给定的 Snapshot 创建或重新使用通用 FlexClone 。</block>
  <block id="13e154bc59223b033e287f63bd78ef93" category="list-text">如果在命令行界面中指定了 ` -clone optimal` 选项或在 `snapdrive.conf` 文件中指定了 `san-clone-method = optimal` 选项，则 SnapDrive for UNIX 会根据存储系统配置自动在受限的 FlexClone 和 LUN 克隆之间进行选择。</block>
  <block id="d8cce310401af7a02b977fdf4d99aa28" category="admonition">默认情况下， SnapDrive for UNIX 创建的克隆是备份克隆。</block>
  <block id="0a7c592b996d1134ac49200f68edfbce" category="summary">如果管理员对多个存储对象没有执行存储操作所需的权限，则 SnapDrive for UNIX 将显示一条错误消息。</block>
  <block id="e85fe964801054381619fb412d454a57" category="doc">对多个存储对象执行单个文件规范操作</block>
  <block id="f413b573385fcf021c9e8ed1e3d523fc" category="paragraph">` 文件规范：文件规范可以是文件系统，主机卷，磁盘组或 LUN_` 的任何一个</block>
  <block id="c191b98dfd43c11db486d5551d653b6b" category="paragraph">在此示例中，文件规范跨越两个存储系统卷 vol1 和 vol2 。unix_host 的管理员（ root ）不对这两个卷都具有 `s D Storage.Write` 访问权限。因此， SnapDrive for UNIX 会为每个卷显示一条错误消息。要继续执行 `storage create` ，管理员（ root ）必须要求 Operations Manager 控制台管理员对这两个卷授予 `s D Storage.Write` 访问权限。</block>
  <block id="634b23cc4633b7b63d067a8dcb1ab15d" category="summary">本节介绍使用基于卷的 SnapRestore 的命令和选项。</block>
  <block id="ecb57a7cb62363e536778a84f101de69" category="doc">基于卷的 SnapRestore 命令</block>
  <block id="c6f491c886d9e88f7275211f197b3a6f" category="paragraph">在 snap restore 命令行界面中添加了 ` -vbsr` 选项，用于选择基于卷的 SnapRestore 。使用以下命令语法使用基于卷的 SnapRestore 执行还原：</block>
  <block id="94e11a2861a34dab09ef1f3c968d3acf" category="paragraph">如果在 ` -vbsr` 中未提供任何参数，则默认输出为 `preview` 选项的输出。使用 ` -verbose` 选项，可以详细输出用户可能会覆盖的所有必需检查。未提供 ` 详细` 选项时的默认输出将显示失败的检查的结果。</block>
  <block id="a9cdbd127a3d85b73886fdef3faa2d50" category="paragraph">如果您不希望在执行基于卷的 SnapRestore 时出现任何确认消息，则可以在执行 `snap restore -vbsr execute` 命令时使用 ` -noprop` 和 ` -force` 选项。下表根据您提供的选项介绍了 SnapDrive for UNIX 的行为。</block>
  <block id="5a5d82ae9b842d066e1a87bfcb1a65fd" category="cell">序列号</block>
  <block id="be26b3ca9acc6de6c9021091f5f15e7e" category="cell">-vbsr execute</block>
  <block id="02e554f8f135bc49b80e8fc45a341757" category="cell">【强制】</block>
  <block id="d9d795b4d274a7eeda898d9cf647d590" category="cell">-noproPrompt</block>
  <block id="1d41e6f55521cdba4fc73febd09d2eb4" category="paragraph">1.</block>
  <block id="323398d9998903135434ed0daa3a8613" category="paragraph">预览模式为默认模式。完成所有检查，并为每个检查生成报告。</block>
  <block id="3e35563210f995ee79a073fa882e1fd6" category="paragraph">2.</block>
  <block id="2f15bf73a91120cf8505323f9f3c86b5" category="paragraph">所有检查均已完成。如果用户可以覆盖的任何强制检查失败， SnapDrive for UNIX 将显示一条错误消息。</block>
  <block id="d9cb741476305f454667e117d9e4f7ba" category="paragraph">3.</block>
  <block id="1a4ce43213f9e9260d5049502fe7d381" category="paragraph">所有检查均已完成。如果任何强制检查失败， SnapDrive for UNIX 将显示一条错误消息。如果用户可以覆盖的任何检查失败， SnapDrive for UNIX 将提示您。</block>
  <block id="ee2468a702bdc29871e84d63e851dd26" category="paragraph">4.</block>
  <block id="dad8d9d6e88d334f26ba6a4a299db4ef" category="paragraph">所有检查均已完成。如果任何强制检查失败， SnapDrive for UNIX 将显示一条错误消息。如果用户可以覆盖的任何检查失败， SnapDrive for UNIX 不会提示您。</block>
  <block id="9f79a677c74c35741ab9c1c4bb808de0" category="summary">存储断开操作会使用 lun SnapDrive storage create 或 lun SnapDrive storage connect 命令删除已映射到主机的 LUN 或存储实体。</block>
  <block id="7b566d56b1feb27787701108dd0ade45" category="doc">storage disconnect 命令</block>
  <block id="a7074397169c9ef5e344ffaed84490c5" category="paragraph">执行 `storage disconnect` 操作会删除 LUN ，或者使用 SnapDrive storage create` 或 SnapDrive storage connect` 命令映射到主机的 LUN 和存储实体。</block>
  <block id="d4233a2e8b21177da96026d3f93c0bbd" category="paragraph">使用 SnapDrive storage disconnect` 命令断开连接：</block>
  <block id="c0825561d595fc749b15ca43dde42f54" category="paragraph">当 SnapDrive for UNIX 删除 LUN 映射时，它会导出 LUN 包含的磁盘组或文件系统。此操作会将磁盘和文件系统标记为已导出，这是断开映射对 LUN 内容的唯一更改。</block>
  <block id="b9512996f310f8753f33930e9894ce13" category="summary">您可以使用 SnapDrive snap disconnect 命令断开包含共享存储实体的 Snapshot 副本的连接。</block>
  <block id="e69e9622f6d74910138f1be6fe38fab9" category="doc">断开 Snapshot 副本与共享存储实体的连接</block>
  <block id="d8db80db7aebd767b490f3b15ffce89c" category="paragraph">您可以使用 SnapDrive snap disconnect` 命令断开包含共享存储实体的 Snapshot 副本的连接。</block>
  <block id="d94fa846ada336b26679f9cb155c6919" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs ｝ _file_spec_ [_file_spec..._] ｛ -dg _ -fs ｝ _file_spec_ [file_spec...]...] _long_snap_name_ [-full] [-fstype _type_] [-vmtype _type_] [-split]*`</block>
  <block id="2397d0c41cf0bb7bd7bf21cbefb26e83" category="paragraph">此示例将断开共享文件系统的连接：</block>
  <block id="e922b764e6dc3656767c8f76bcc62db5" category="summary">使用 SnapDrive snap show \ （或 list\ ）命令显示有关 Snapshot 副本的信息。</block>
  <block id="554032c7457f12a90ae8b2efe59c800c" category="doc">用于显示 Snapshot 副本信息的命令</block>
  <block id="363b14e970e8e7bb3c498138ab806070" category="paragraph">使用 SnapDrive snap show` （或 `list` ）命令显示有关 Snapshot 副本的信息。</block>
  <block id="a04d8ee5a6f09a065f2490158ffcb77c" category="paragraph">您可以使用 SnapDrive snap show` （或 `list` ）命令显示有关 SnapDrive for UNIX 创建的每个 Snapshot 副本的信息。您可以使用此命令显示有关以下内容的信息：</block>
  <block id="7f08df2b91966ed82db904a603724a1c" category="list-text">存储系统上的卷</block>
  <block id="1f949aac0ac9172871c79379b59089ac" category="list-text">存储实体，例如 NFS 文件和目录树，卷组，磁盘组，文件系统，逻辑卷， 和主机卷</block>
  <block id="ee7db10e5fb74d6c55977065dffc62e9" category="admonition">此命令的 `show` 和 `list` 形式是同义词。对于适用于 UNIX 的 SnapDrive 2.0 及更高版本，在显示有关 Snapshot 副本的信息时，必须使用 Snapshot 副本名称的长格式。</block>
  <block id="7b48d791f97392bb2db7ff038b3a9c4d" category="summary">从集群模式 Data ONTAP 8.3 开始，默认情况下，所有新 LUN 映射都会启用选择性 LUN 映射（ SLM\ ）。创建新的 LUN 映射时，只能通过 LUN 所属节点及其 HA 配对节点上的路径来访问此 LUN 。</block>
  <block id="541f30a2fe5e9669a23f130e2aedf80b" category="doc">在 SnapDrive for UNIX 中使用选择性 LUN 映射</block>
  <block id="d935da63f48c9d57af5b0d7dc3b7c4b8" category="paragraph">从集群模式 Data ONTAP 8.3 开始，默认情况下，所有新的 LUN 映射都会启用选择性 LUN 映射（ SLM ）。创建新的 LUN 映射时，只能通过 LUN 所属节点及其 HA 配对节点上的路径来访问此 LUN 。</block>
  <block id="fd47fee66b759671428dc7475fc72bc7" category="paragraph">默认情况下， LUN 可通过 Storage Virtual Machine （ SVM ）的所有 LIF 进行访问。您应将 LIF 分配给网络中每个集群节点上的 SVM 。随着集群中节点数量的增加，潜在路径数量也会成倍增加。这可能会导致 LUN 的路径过多，每个主机多个 igroup 以及发生中断移动事件。SLM 通过将 LUN 的可访问性限制为拥有 LUN 的节点和 HA 配对节点来解决这些问题。此外，它还可以为每个主机创建一个 igroup ，并支持无中断的 LUN 移动操作，而这些操作不需要操作端口集或重新映射 LUN 。</block>
  <block id="5cd2f7f9266588552a3df369cd723340" category="admonition">SLM 不会自动应用于在集群模式 Data ONTAP 8.3 之前创建的 LUN 映射。</block>
  <block id="73021e4c1b8ab18e40d50516571a6ddf" category="paragraph">如果您要通过 LUN 所属节点访问 LUN ，则此路径称为 " 活动优化 " 。 但是，如果您通过 HA 配对节点访问该 LUN ，则该路径称为 " 活动非优化 " 。</block>
  <block id="54ee9e996b5c03369521c9d46b06df66" category="cell">SnapDrive 命令</block>
  <block id="b3b8a27d4b53164a72ad4126ee50895d" category="paragraph">SnapDrive LUN showpaths _lon_lun_name_`</block>
  <block id="c6b9a38b81e183da846ec3a0c9cac994" category="paragraph">SnapDrive lun showpaths` 命令可列出指向 lun 的所有路径。它还会显示哪个路径处于活动优化状态，哪个路径处于活动非优化状态。</block>
  <block id="991370f8fc07a79af2b24556e214540c" category="paragraph">` lun_name_` 是 LUN 的名称。如果未指定 LUN ，则会对所有 LUN 执行此操作。</block>
  <block id="6a7847937d06f78499bc646ed9f5433c" category="paragraph">SnapDrive LUN fixpaths_lon_lun_name_`</block>
  <block id="9b55abacc23e88093be5127c1fbdd244" category="paragraph">SnapDrive lun fixpaths` 命令会尝试修复至少没有一个活动优化路径的 LUN 的路径。</block>
  <block id="7bddf595c63685dc338048f3c90275ff" category="paragraph">` lun_name_` 是 LUN 的名称。如果未指定 LUN ，则会对至少没有一个活动优化路径的所有 LUN 执行此操作。</block>
  <block id="51c44fed0d5dbf8fe80d40b9606391ac" category="admonition">SnapDrive lun fixpaths` 命令在子操作系统中不起作用。</block>
  <block id="2557fc24e7eaf351829bd5187c5f0042" category="paragraph">使用 `lunpath-monitor-frequency` 参数可以指定 SnapDrive for UNIX 自动修复 LUN 路径的频率。默认值为 24 小时。</block>
  <block id="18b8545d5ebfa6f6471726ae7e375753" category="paragraph">如果 SnapDrive LUN fixpaths` 操作失败，则会为所有 LUN 生成 AutoSupport （ ASUP ）消息。ASUP 消息包含以下详细信息：</block>
  <block id="863698330b289e1a5ed2aba4bb5e03f1" category="list-text">计算机名称</block>
  <block id="3eeff671d5f837827eeabcaad6477469" category="list-text">事件源</block>
  <block id="b64c136408bbb80dfa6717a62d239726" category="list-text">应用程序版本</block>
  <block id="bb17fcf4d17c630b1d2e9d9262bbcc6f" category="list-text">事件 ID</block>
  <block id="c4ef352f74e502ef5e7bc98e6f4e493d" category="list-text">类别</block>
  <block id="b5e3374e43f6544852f7751dfc529100" category="list-text">主题</block>
  <block id="e15784a0e3d8ff43183a432b1098dbee" category="paragraph">以下是 ASUP 消息的示例：</block>
  <block id="1988e9c8cf124cb346a67d52ea613567" category="inline-link">《 ONTAP 9 SAN 管理指南》</block>
  <block id="18c7e0e75e3812f51b2d0d056bba571f" category="paragraph"><block ref="18c7e0e75e3812f51b2d0d056bba571f" category="inline-link-rx"></block></block>
  <block id="bccb9d1dbf9341c88d01626a0fca1e00" category="summary">使用 SnapDrive 配置向导更新向导中的配置变量。您可以随时运行配置向导，将配置更改修改为 SnapDrive 。</block>
  <block id="be89433ee7a5e663b757867b0bc0a409" category="paragraph">您可以从 ` /opt/netapp/SnapDrive/setup/config_wizard` 运行配置向导</block>
  <block id="7556322a5380f2dd156f1b69cd52d0c1" category="paragraph">输入 `exit` 以关闭配置向导，而不保存所做的更改。</block>
  <block id="0b9ad04b856afabbbe0b296b8c6abe86" category="paragraph">或者，您也可以直接在 `snapdrive.conf` 文件中修改配置变量值。</block>
  <block id="dbd83b0afbc1f45e49a9146cb3940ce4" category="summary">连续多次迭代后， SnapDrive for UNIX 命令无法发现 LUN 。</block>
  <block id="395823a4be9ae48f7e2e2cbc07aa9437" category="doc">由于 iSCSI 守护进程限制， LUN 发现失败</block>
  <block id="1af1a3a4a0a1853e2d67d050c11c76c6" category="paragraph">您可能会看到以下错误消息。</block>
  <block id="fcf1586d40c19adc26464d41d7f0c88d" category="paragraph">发生这种情况的原因是以下主机中存在 iSCSI 守护进程限制：</block>
  <block id="d14d3b7d88c9e48d2f3cbcc6133767eb" category="list-text">Red Hat Enterprise Linux 4.0</block>
  <block id="f750ce792a8793a48a13fd630ef8fe75" category="list-text">Oracle Enterprise Linux 4.0</block>
  <block id="52c79f1325a2a06b863af0beecccd181" category="list-text">将 ` * fs.file-max*` 参数添加到 ` /etc/sysctl.conf` 文件中。</block>
  <block id="45938ff554df7c69ce446dc17d088a5c" category="paragraph">以下是命令行中的一个示例。</block>
  <block id="2ebcddf84b6e173e1ae681a7d5839776" category="admonition">建议将参数值设置为 `65536` ，但也可以根据主机上的应用程序设置此值。</block>
  <block id="5f80fade4b5b509100aff42e307d49b6" category="list-text">将 `65536` 分配给 ` * fs.file-max*` 参数。</block>
  <block id="2ca34b7f01c722e687b707398924a3a5" category="list-text">更新 root 用户 UNIX 帐户的默认 Shell `sToot-up` 文件。</block>
  <block id="d2793aa8b523a5009d5bda9a87541c1e" category="list-text">对于 Bourne ， Bash 或 Korn shell ，运行以下命令，将以下行添加到 ` /etc/profile` 文件中：</block>
  <block id="68c1d9f566f23b1b3694a4a49f468765" category="list-text">对于 C shell （ csh 或 tcsh ），运行以下命令将以下行添加到 ` /etc/csh.login` 文件中：</block>
  <block id="60b54c0d948755997a33a7995647b67b" category="list-text">运行以下命令，将以下参数添加到 ` /etc/security/limits.conf` 文件中：</block>
  <block id="4c46d094bb52f847bc3932494a1628d9" category="list-text">执行以下命令，激活系统的所有内核参数： `sysctl -p`</block>
  <block id="cc03321ce8de9278367eadcf0d0ab6de" category="summary">如果 SnapDrive for UNIX 对存储对象具有正确的写入访问权限，则它可能会显示错误。</block>
  <block id="e5c965132786f0a81f0a87a8ccf64a80" category="doc">SnapDrive for UNIX 命令显示 Could not check access error</block>
  <block id="d70f11b820c6c0a0ab640f0c3e20bbd5" category="paragraph">它会显示以下错误消息：</block>
  <block id="172a77652b27bc8eb3f521fc1cb5d79d" category="paragraph">此问题的解决方案是：</block>
  <block id="99a030436fb9b702d0783e3edc7010d5" category="list-text">验证是否已在 Operations Manager 上刷新存储资源。如果未在 Operations Manager 上刷新存储资源，则</block>
  <block id="52730a77b9618cbfde66795fa3a7b3a1" category="list-text">手动执行 `dFM host discover &lt;storage-system&gt;` 。</block>
  <block id="836c681de3fc72212fb1c731469109a6" category="list-text">将 ｛ Global ， dfm.Database.Write ｝ 功能分配给 `sd-admin`</block>
  <block id="d20476ef273a303c2114d4b073e83284" category="paragraph">在这种情况下， SnapDrive for UNIX 会自动刷新 Operations Manager 并重新发出访问检查。</block>
  <block id="e3f71b3eefdba91217044892ed3426eb" category="paragraph">SnapDrive for UNIX 使用的默认刷新间隔为 15 秒（` _dft-rbac - retry-休眠 - 秒 _` ）， SnapDrive for UNIX 使用的默认重试次数为 12 （` _dfm - rbac - 重试次数 _` ）。如果您仍收到上述错误消息，请将 ` dft-rbac -retries _` 配置变量的值增加到 14 ， 16 ， 18... 等，以匹配您的环境。Operations Manager 所需的刷新间隔取决于存储系统中的 LUN 和卷数量。</block>
  <block id="f56ab7f440307517a89a9a5598dad11a" category="summary">SnapDrive 4.0 for UNIX 及更高版本可在卷级别提供 Snapshot 还原功能。本节介绍了可使用基于卷的 Snapshot 还原执行的各种存储操作。</block>
  <block id="3f20050e38321d186cb4ef82c159cd57" category="doc">基于卷的 SnapRestore</block>
  <block id="18e3c78a376ac6d36d97cc4fe9eaae98" category="summary">要还原 Snapshot 副本，请确定要还原的存储实体，指定 Snapshot 副本的名称等。</block>
  <block id="d0dbaf0a35bebbad37da4abae35636eb" category="doc">使用 SnapDrive snap restore 命令所需的信息</block>
  <block id="8bd2cc855baf47f43610dce99cc5928c" category="paragraph">下表提供了使用 SnapDrive snap restore` 命令时需要提供的信息。</block>
  <block id="1d9f67aebbde65871b43d3f911ad71e7" category="paragraph">确定要还原的存储实体的类型，并使用相应的参数输入此实体的名称。</block>
  <block id="64c60fe654b00137a612d536a4615899" category="list-text">如果指定要还原的主机卷或文件系统，则所提供的参数将转换为包含该卷或文件系统的磁盘组。然后，适用于 UNIX 的 SnapDrive 将还原整个磁盘组。SnapDrive for UNIX 会冻结这些磁盘组中主机卷中的任何文件系统，并为这些磁盘组中包含 LUN 的所有存储系统卷创建一个 Snapshot 副本。</block>
  <block id="b31e2bdd166f8fddcbfef3c45a4e2412" category="list-text">如果指定的文件规范是 NFS 挂载点，则参数将转换为目录树。SnapDrive for UNIX 仅还原 NFS 目录树或文件。在目录树中， SnapDrive for UNIX 会删除在创建 Snapshot 副本之后创建的任何新 NFS 文件或目录。这样可以确保已还原目录树的状态与创建该树的 Snapshot 副本时相同。</block>
  <block id="fb3f41c583936d161dda219572eed1eb" category="list-text">如果还原 LUN ， SnapDrive for UNIX 将还原您指定的 LUN 。</block>
  <block id="28cdd527873ba1c6bfea3a1311a014f4" category="list-text">如果还原直接在 LUN 上创建的文件系统，则 SnapDrive for UNIX 将还原 LUN 和文件系统。</block>
  <block id="687a5e5af7850b0a6f59f889126632b2" category="list-text">如果 Snapshot 副本包含跨越多个存储系统卷的存储实体，则可以还原该 Snapshot 副本中的任何实体。</block>
  <block id="d5b56ef500bb8e4985392ef5a5708eaa" category="paragraph">LUN （` -lun _file_spec_` ）</block>
  <block id="fd589b102fc043797df5e324c72fd9e1" category="paragraph">LUN 的名称。您必须包含存储系统，卷和 LUN_ 的名称</block>
  <block id="e5be2559dab3be2493fb61902135edfa" category="paragraph">磁盘组（` -dg _file_spec_ c` ）或卷组（` -vg _file_spec_` ）</block>
  <block id="b5865fed551431ba1450a519ef68a84a" category="paragraph">文件系统的名称</block>
  <block id="691286b5a50d3247f99947a2c66849fd" category="paragraph">文件（` -file _file_spec_` ）</block>
  <block id="59f2d93d3043485973b6e7f961670739" category="paragraph">NFS 文件的名称</block>
  <block id="e829b4e09723bb1158186bc420eeed6b" category="paragraph">主机或逻辑卷的名称。您必须同时提供请求的卷及其所在的磁盘组；例如 - hostvol dg3/Acct_volume_</block>
  <block id="01d2c4e6b0448ea1473bfca6d3de71a3" category="paragraph">指定 Snapshot 副本的名称。如果您在命令提示符处提供的任何 ` file_spec_` 参数当前位于本地主机上，则可以使用简短形式的 Snapshot 副本名称。</block>
  <block id="56afb9e4c2bcb3c60f55e4f1d6ea046b" category="paragraph">如果主机上不存在 ` file_spec_` 参数，则必须使用一个长形式的 Snapshot 副本名称，在此输入存储系统名称，卷和 Snapshot 副本名称。如果在命令提示符处为 Snapshot 副本使用较长名称，并且路径名称与存储系统和 / 或存储卷信息不匹配，则 SnapDrive for UNIX 将失败。以下是一个长 Snapshot 副本名称示例： `BIG_filer ： /vol/account_vol ： snap_20031115`</block>
  <block id="c7e5f0ab2ea894230889ed034d4590db" category="paragraph">有时，随 ` file_spec_` 参数提供的值可能在主机上不存在。例如，如果您已卸载文件系统或通过导出，删除或销毁操作删除了磁盘组，则该文件系统或磁盘组仍可作为 ` file_spec_` 参数的值。但是，该值将被视为不存在的值。SnapDrive for UNIX 可以还原此类不存在的 Snapshot 副本 ` _file_spec_` ，但您必须使用较长的 Snapshot 副本名称。</block>
  <block id="b4f584ff18db001f7a4a61c564f11f7b" category="paragraph">当您还原跨越多个存储系统和卷且包含不存在的 ` file_spec_` 参数的 Snapshot 副本时， SnapDrive for UNIX 会允许命令行出现不一致。它不允许使用现有的 ` _file_spec_` 参数。如果您只想从多个存储系统 Snapshot 副本还原一个存储实体，则您指定的 Snapshot 副本不必与包含该存储实体的存储系统位于同一个存储系统上。</block>
  <block id="f960b915fa866aadaf5f2b2e026a9059" category="paragraph">相同 Snapshot 副本名称的简短格式将省略存储系统和存储系统卷名称，因此其显示为： ` Snap_20031415_`</block>
  <block id="00a10f4376c95dae0a9c492b00449c77" category="paragraph">` snap_name_`</block>
  <block id="f8bf92562086d437096463af5e90315e" category="paragraph">它可以是一个短名称，例如 ` mysnap1_` ，也可以是一个包含存储系统名称，卷和 Snapshot 副本名称的长名称。</block>
  <block id="5bd6f344f9892ab393f2ef70536dac4f" category="paragraph">通常， NetApp 建议您使用短名称。如果 ` _file_spec_` 参数不存在：即，它不再存在于主机上；请参见 ` file_spec_` 参数的说明。然后，必须使用 Snapshot 副本的长名称。</block>
  <block id="ff30f24941299d3b621d61236ac090e1" category="paragraph">` 预留 | -noreserve`</block>
  <block id="25ae9c4c6f0a3737a38876b0720235e3" category="paragraph">可选：希望 SnapDrive for UNIX 在还原 Snapshot 副本时创建空间预留。</block>
  <block id="7e750cd8e9c06163dfe90f2e00575256" category="paragraph">可选：确定是否要覆盖现有 Snapshot 副本。如果没有此选项，则如果您提供现有 Snapshot 副本的名称，此操作将暂停。提供此选项并指定现有 Snapshot 副本的名称时，系统会提示您确认是否要覆盖此 Snapshot 副本。要防止 SnapDrive for UNIX 显示提示符，请同时包含 ` -noprop` 选项。（如果要使用 -noprop 选项，则必须始终包含 ` -force` 选项。）</block>
  <block id="4d347fc5451e7695248f417890116559" category="paragraph">如果您尝试还原自上次 Snapshot 副本以来配置发生更改的磁盘组，则必须在命令提示符处包含 ` -force` 选项。例如，如果在创建 Snapshot 副本后更改了磁盘上数据的条带化方式，则需要包含 ` -force` 选项。如果没有 ` -force` 选项，此操作将失败。此选项会要求您确认要继续此操作，除非您在其中包含 ` -noprop` 选项。</block>
  <block id="502060d0f026392539b2e7c6f6c758dc" category="admonition">如果添加或删除了 LUN ，则还原操作将失败，即使包含 ` -force` 选项也是如此。</block>
  <block id="998389fcdcf879ef9424377042995a11" category="paragraph">`mntopts`</block>
  <block id="8c0dd6ee1614d8d9fa1284959953b5e4" category="list-text">` -mntopts_` 参数是一个文件系统 ` 类型` 选项，使用 `mount` command ` -o` 标志指定。请勿在 -mntopts 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="a8fa00f09157e4b18918c51995933071" category="summary">您可以使用 SnapDrive 命令显示存储系统上的 Snapshot 副本。</block>
  <block id="3debaf32d3d95232955d0cee027c3380" category="doc">显示存储系统上的 Snapshot 副本</block>
  <block id="919c49760fe3c7f6f6482bc0ec013af3" category="paragraph">要显示有关驻留在存储系统上的 Snapshot 副本的信息，请使用以下语法：</block>
  <block id="80dfeec70f865b83383d8cfc93ef3b2b" category="paragraph">SnapDrive snap show -filer filername [filername...] 【 -verbose 】``</block>
  <block id="7c0c486523775b9637a931d2b3aa3629" category="summary">从 Red Hat Enterprise Linux 3 更新迁移到 Red Hat Enterprise Linux 4 更新（即从 LVM1 迁移到 LVM2 ）后，从 Snapshot 副本还原文件系统失败。</block>
  <block id="59b49c700af9a20b05d814d3c51c76c5" category="doc">从 Snapshot 副本还原文件系统失败</block>
  <block id="4f81e39b67723d0e52719bb30dd03137" category="paragraph">在使用 LVM2 从 Snapshot 副本还原文件系统（在 LVM1 上创建）期间， SnapDrive snap restore -fs` 命令不会挂载文件系统。但是，它会成功还原与其关联的磁盘组和主机卷。</block>
  <block id="4147aa93f82664f5cc6f7250b37718ab" category="paragraph">例如， LVM1 创建的主机卷的设备文件位于 ` /dev/Mydg_sddg/Mydg_sdhv` 中； LVM2 创建的主机卷的设备文件位于 ` /dev/mapper/Mydg_SdDG-Mydg_sdhv` 中</block>
  <block id="88716e60587fa2ad87357f6f42c2a167" category="paragraph">之所以出现这种情况，是因为 Red Hat Enterprise Linux 4 Update 3 主机使用 LVM2 ，而 LVM2 使用设备映射程序与内核进行接口，而 Red Hat Enterprise Linux 3 Update 5 主机使用 LVM1 ，而 LVM1 不使用设备映射程序。</block>
  <block id="37f2ab0583a82a3de99023f7c2e3e813" category="summary">要连接到 Snapshot 副本，请确定存储实体的类型，将具有 NFS 目录树的 Snapshot 副本连接到 Data ONTAP 7.3 配置等。</block>
  <block id="5e192f9af50407435a751d89ab770ffd" category="doc">使用 SnapDrive snap connect 命令所需的信息</block>
  <block id="9464efd3b5ccb0588ce993af346d3dcd" category="paragraph">下表提供了使用 SnapDrive snap connect` 命令时需要提供的信息。</block>
  <block id="60e620de43fc53ca3b8468db8eccd704" category="paragraph">确定要用于附加 Snapshot 副本的存储实体的类型，并使用相应的参数提供此实体的名称。这是 ` src_fspec_` 参数的值。</block>
  <block id="c24f96b9c2d8900fa4eae9cfa8a7cf3a" category="list-text">如果连接 LUN 的 Snapshot 副本，则 SnapDrive for UNIX 将连接您指定的 LUN 。您不能在同一命令行上使用 ` -lun` 选项和 ` -vg` ， ` -dg` ， ` -fs` ， ` -lvol` 或 ` -hostvol` 选项。您可以使用 lun_name 或 qtree_name/lun_name 格式指定 LUN 的短名称。</block>
  <block id="18f21f5bdf1576c6106e427b56be477b" category="list-text">如果您连接的是直接在 LUN 上创建的文件系统的 Snapshot 副本，则 SnapDrive for UNIX 将连接具有该文件系统的 LUN 。</block>
  <block id="8affc8430932c31bcb97e1a7d0137c95" category="list-text">如果连接的磁盘组的 Snapshot 副本具有主机卷或文件规范，则参数将转换为存储系统上的一组磁盘组。SnapDrive for UNIX 将连接包含此实体的整个磁盘组，即使此实体是主机卷或文件系统也是如此。</block>
  <block id="905b924dd839c7a562bee14e2554aa67" category="list-text">如果连接 NFS 文件系统的 Snapshot 副本，则参数将转换为 NFS 目录树。SnapDrive for UNIX 将创建卷的 FlexClone ，删除 Snapshot 副本中未指定的目录树，然后连接并挂载 NFS 目录树。如果指定 NFS 挂载点，则不能在同一命令行上指定非 NFS 实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` -hostvol` ）。</block>
  <block id="75eab9ecc14866c83ce72ce786d61c99" category="admonition">SnapDrive for UNIX 在挂载点级别不支持符号链接。</block>
  <block id="65872994a7cfb270e986b99e2585ed0e" category="paragraph">LUN 的缩写名称。 _</block>
  <block id="c869fa513793fdee7b98c645e800030c" category="paragraph">` _s_lun_name_` 指定存在于 ` -snapname _long_snap_name_` 中的 LUN 。lun_name 短称为必填项。不能包含存储系统或存储系统卷名称。` d_d_lun_name_` 指定 LUN 的连接名称。短 ` lun_name_` 为必填项。不能包含存储系统或存储系统卷名称。您必须指定 ` _d_lun_name_`</block>
  <block id="230584ac0afd66540b3b6af02bff83d1" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` -vg _file_spec_` ）</block>
  <block id="8c347f8d18c18c32d6d43e72eafa5a1f" category="paragraph">将具有 NFS 目录树的 Snapshot 副本连接到 Data ONTAP 7.3 配置。</block>
  <block id="ca0b606e3413bba38b82ed206422192d" category="list-text">如果您的配置使用 Data ONTAP 7.3 或更高版本的 Data ONTAP 与传统（而不是 FlexVol ）卷，则必须指定此选项来连接具有只读访问权限的 Snapshot 副本（必需）。</block>
  <block id="c8b3c05c9c2a86a9807b13d3a39a3a2a" category="list-text">如果您的配置使用 Data ONTAP 7.3 及更高版本以及 FlexVol 卷，则 SnapDrive for UNIX 会自动提供读写访问。仅当要将访问限制为只读（可选）时，才指定此选项。</block>
  <block id="066ff3fe2920df0ba8fb0827e234c6f7" category="paragraph">-readonly</block>
  <block id="6910f9d42adc4533fa5231393b936627" category="paragraph">设置只读权限 _</block>
  <block id="23e0e6491be68afd4bb2537b32ce05e1" category="paragraph">可选：提供在连接存储实体后可访问目标实体的名称。SnapDrive for UNIX 使用此名称连接目标实体。这是 ` dest_file_spec_` 参数。</block>
  <block id="35d0156e53e410ead8d89470686feb96" category="paragraph">如果省略此名称，则 `snap connect` 命令将使用您为 ` src_fspec_` 提供的值。</block>
  <block id="d7814c642325455b53ea1cfd4ea6ea9d" category="paragraph">目标实体的名称</block>
  <block id="bc7d772cc7394fb68ca9defbf586bef4" category="paragraph">` dest_file_spec_`</block>
  <block id="9bcaf1eec04059eca7c697a5e3446773" category="paragraph">可选：指定目标存储实体的名称。如果您在 ` dest_fspec/src_fspec_` 对中包含此信息，则无需在此处输入。</block>
  <block id="77b67a9b798a25494b791ba798c32681" category="paragraph">如果目标存储实体的名称不是 ` destination_fspec/src_fspec_` 对的一部分，则可以使用 ` -destxx` 选项来指定此信息。例如， ` -fs` 选项仅命名目标挂载点，因此您可以使用 ` -destdg` 选项指定目标磁盘组。</block>
  <block id="16c806d05cd0426e8244db6aa32c5f3a" category="paragraph">如果未指定连接目标磁盘组中的实体所需的名称，则 SnapDrive snap connect` 命令将从源磁盘组中获取该名称。</block>
  <block id="ebc97a20fb25724d2df57786f973e2b1" category="paragraph">如果未指定连接目标磁盘组中的实体所需的名称，则 `snap connect` 命令将从源磁盘组中获取该名称。如果不能使用该名称，则操作将失败，除非您在命令提示符处包含 ` -autorename` 。</block>
  <block id="1aa68adad2864f2c56a9ce0d3489535d" category="paragraph">目标磁盘组（` destdg` ）或目标卷组（` -destvg` ）</block>
  <block id="ff694c1d82bf4440e1e624caa9482e7b" category="paragraph">` _dgname_`</block>
  <block id="e0b21e8042a9ed7c2ab5b887e2371acc" category="paragraph">目标逻辑卷（` -destlv` ）或目标主机卷（` -desthv` ）</block>
  <block id="4783a16ac097b313aa37f88bdb3af571" category="paragraph">` lvname_`</block>
  <block id="e50e45644c11b75b2d27ac36cf0a324c" category="paragraph">指定 Snapshot 副本的名称。请使用名称的长格式输入存储系统名称，卷和 Snapshot 副本名称。</block>
  <block id="30d414c7708476f49fc6a4b6f6d573db" category="paragraph">可选：将 Snapshot 副本连接到新位置，而不在主机文件系统表中创建条目。</block>
  <block id="fd2ce9bdfb4b7fb73ec406006e8f9846" category="list-text">使用 ` -noperit` 选项，您可以将 Snapshot 副本连接到新位置，而无需在主机文件系统表中创建条目。（例如，在 Linux 上为 `fstab` ）默认情况下，适用于 UNIX 的 SnapDrive 会创建永久性挂载。这意味着：</block>
  <block id="6dc31410b390ebf110fe0da2af850f67" category="list-text">在主机上连接 Snapshot 副本时， SnapDrive for UNIX 会挂载文件系统，然后在主机的文件系统表中为构成文件系统的 LUN 放置一个条目。</block>
  <block id="5d11cfc3a3655f0ac6ff5ca380f072f4" category="list-text">在 Linux 主机上连接 Snapshot 副本时， SnapDrive for UNIX 会挂载文件系统，重置文件系统通用唯一标识符（ UUID ）和标签，并将 UUID 和挂载点放置在主机的文件系统表中。</block>
  <block id="47d906a9304e38acf62be011938baba7" category="list-text">您不能使用 ` -noperit` 连接包含 NFS 目录树的 Snapshot 副本。</block>
  <block id="01522c41290d89c82ed9892b1104d5d6" category="paragraph">可选：无论是否创建空间预留，都将 Snapshot 副本连接到新位置。</block>
  <block id="40b4703a32ab1f60f7249891535c6eb4" category="paragraph">可选： NetApp 建议您使用主机的默认 igroup ，而不是提供 igroup 名称。</block>
  <block id="84cffe862479ec9228de7e46058f6335" category="paragraph">要缩短连接到卷组时必须提供的信息量，请在命令提示符处包括 ` -AutoExpand` 选项。使用此选项，您只能为卷组中的一部分逻辑卷或文件系统命名。然后，它会扩展与磁盘组中其余逻辑卷或文件系统的连接。通过这种方式，您无需指定每个逻辑卷或文件系统。SnapDrive for UNIX 使用此信息生成目标实体的名称。</block>
  <block id="51071d19c2e4e7930bc0a038dd9f78f6" category="paragraph">此选项用于对命令提示符处指定的每个磁盘组以及组中的所有主机 LVM 实体执行适用场景操作。如果不使用 ` -AutoExpand` 选项（默认），则必须指定该磁盘组中包含的所有受影响主机卷和文件系统来连接整个磁盘组。</block>
  <block id="f56328c604b3866c3605f318e488e943" category="admonition">如果输入的值是磁盘组，则无需输入所有主机卷或文件系统，因为 SnapDrive for UNIX 知道磁盘组连接到的内容。</block>
  <block id="d976d96a77d508469fe6597da9b95789" category="paragraph">NetApp 建议，如果包括此选项，则还应包括 ` -autorename` 选项。如果需要使用 ` -AutoExpand` 选项连接 LVM 实体的目标副本，但此名称已在使用中，则命令将失败，除非 ` -autosename` 选项位于命令提示符处。</block>
  <block id="66a2f577780da63318753b4d83fefb8d" category="paragraph">如果您不包括 -AutoExpand ，也不指定在命令提示符处引用的所有磁盘组中的所有 LVM 主机卷（通过指定主机卷本身或文件系统），则此命令将失败。</block>
  <block id="47dccd48ca31691ebb791291eef6a604" category="paragraph">如果在不使用 ` -autosename` 选项的情况下使用 ` -AutoExpand` 选项，则在使用 LVM 实体的目标副本的默认名称时， `snap connect` 命令将失败。如果包含 ` -autorename` 选项，则 SnapDrive for UNIX 会在使用默认名称时重命名实体。这意味着，在命令提示符处使用 ` -autorename` 选项时，无论所有必要名称是否可用， Snapshot 连接操作都会继续进行。</block>
  <block id="53c29d6670fcd873509843f3579c2280" category="paragraph">此选项用于适用场景命令提示符处指定的所有主机端实体。</block>
  <block id="bd4011f0cc97bf7016224a47ae61c61c" category="paragraph">如果在命令提示符处包括 ` -autosename` 选项，则表示 -AutoExpand 选项，即使不包含该选项也是如此。</block>
  <block id="1e69e3fe8e317979ce5c4d5e6c1bbae3" category="list-text">` -mntopts_` 参数是一个文件系统 ` 类型` 选项，使用 `mount` command ` -o` 标志指定。请勿在 ` -mntopts` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="b0b3772cea071e2640ca669658d45aee" category="summary">SnapDrive for UNIX 支持不同的命令行，例如配置，存储配置，主机端管理， 和 Snapshot 操作。</block>
  <block id="6f62abec45caf417dbe90d76e233cfd6" category="doc">命令摘要</block>
  <block id="dbec9da016c48ac9d7717683c4ea0108" category="summary">要使用 SnapDrive storage disconnect 命令删除直接在 LUN 上创建的文件系统，请使用以下语法。</block>
  <block id="d6877a85c39ead7ee9dba0e1c9a0e88c" category="doc">用于将 LUN 上创建的文件系统与主机断开连接的命令语法</block>
  <block id="11bc72cb9660c7b60814349a164e4578" category="paragraph">要使用 SnapDrive storage disconnect` 命令删除直接在 LUN 上创建的文件系统，请使用以下语法：</block>
  <block id="957633f3da6a31458a72252b17434189" category="paragraph">SnapDrive storage disconnect -fs file_spec. -fstype type] -vmtype type.`</block>
  <block id="dbb80525df2fcad97fa4e8608d490e88" category="section-title">示例：断开在 RDM LUN 上创建的文件系统的连接</block>
  <block id="2a7d4b8d0256f71b996e94b7a9206abb" category="summary">如果主机无法与任何已配置的存储系统进行通信，则无法启动守护进程。</block>
  <block id="c5af8616b1fb4dcb5b1a2311c531e678" category="doc">当主机无法与存储系统通信时，无法重新启动守护进程</block>
  <block id="e708778b9f8a31331c5f0e0e3c0e3a80" category="paragraph">在这种情况下，当您尝试重新启动守护进程时，守护进程不会启动，并且会遇到以下错误消息。</block>
  <block id="e6515df585d2ce259bde92f2493f4550" category="paragraph">主要是，您需要通过对存储系统执行 ping 命令来确保主机是否正在与存储系统通信。如果主机仍无法与存储系统通信，请尝试使用以下选项：</block>
  <block id="5c4a74d69e34be89db670149ab06c3cc" category="list-text">删除未与主机通信的存储系统，然后尝试重新启动守护进程。</block>
  <block id="cef88acf46e47f95328dc3e8b099feef" category="list-text">如果您不想删除为主机配置的存储系统，请在 `snapdrive.conf` 文件中禁用选项 ` autosupport-enabled_` to ` off_` 以禁止显示此错误消息。</block>
  <block id="39e3a30653c704deb2685030db996c23" category="summary">完成存储创建操作后，您必须提供一些信息。</block>
  <block id="8ccceeca5b35abc323ef7f2f2e13e264" category="doc">存储创建操作所需的信息</block>
  <block id="9e879bfd5c6e41dcaed0780b7324eeef" category="paragraph">下表列出了使用 SnapDrive storage create` 命令创建存储时需要提供的信息：</block>
  <block id="d02152fa684df73555b6a7ae10ccdd80" category="paragraph">确定要配置的存储类型。根据您输入的命令，您可以创建以下任意项：</block>
  <block id="482f256e48e014de766ec6423a0d02ff" category="paragraph">如果创建一个或多个 LUN ，则第一个参数必须使用长形式的 LUN 名称，此名称用于指定存储系统名称，卷名称以及卷中 LUN 的名称。</block>
  <block id="34c603a9b20840110ea005d3cfab1238" category="paragraph">要指定其他 LUN ，如果新 LUN 与上一个 LUN 位于同一存储系统和卷上，则可以单独使用 LUN 名称（简称）。否则，您可以指定新的存储系统名称和卷名称（或仅指定卷名称）来替换先前的值。</block>
  <block id="6fe58cc15ce9c4fc8559fcf732368091" category="paragraph">如果在 LUN 上创建文件系统，则第一个参数必须是 ` _-FS_` 挂载点。要在存储系统和卷中的 LUN 上创建文件系统，请使用 ` -filervol_` 参数并指定存储系统和卷的名称。要在特定 LUN 上创建文件系统，请使用 ` _-lun_` 参数并指定存储系统名称，卷名称和 LUN 名称。您还必须包括 ` -nolvm` 选项，才能在 LUN 上创建文件系统，而无需激活主机 LVM 。</block>
  <block id="f2f1e75229bc9c85170693a8a2b7cc82" category="paragraph">默认情况下， SnapDrive for UNIX 会自动执行与 LUN 的主机准备和发现以及映射和连接相关的所有任务。</block>
  <block id="de755a8d499ac3153bcc333a4d05545b" category="paragraph">如果在 Linux 主机上创建 LUN ，则 SnapDrive for UNIX 将执行以下操作：</block>
  <block id="648cbfc10d002dfe944108ea8b97fa05" category="list-text">创建 LUN 。</block>
  <block id="1c9a9085b785ea9504b8f35f0c1ed015" category="list-text">将 LUN 配置为一个分区。</block>
  <block id="0dbf510e44d0a13b9887d694d92628a8" category="admonition">如果您使用的是 SLES10 Update 2 ，则会使用原始设备创建文件系统。</block>
  <block id="cedf444c00f49a90c6b990b99e3fc8f4" category="list-text">包含主机卷和文件系统的 LVM 磁盘组</block>
  <block id="705cad036dad45c485da3d33e687a4d0" category="paragraph">指定磁盘或卷组，文件系统，主机或逻辑卷时， SnapDrive for UNIX 将执行创建所指定实体所需的所有操作。您可以明确指定 LUN ，也可以仅提供存储系统和卷信息，并让 SnapDrive for UNIX 自动创建 LUN 。</block>
  <block id="400732b633becc02a71e1af29fabd9ca" category="paragraph">如果要创建文件系统等实体，则无需为磁盘或卷组提供值。SnapDrive for UNIX 会自动创建一个。</block>
  <block id="36df7c47b4da2b3d9708d2215db57f74" category="list-text">LUN （ -LUN ）</block>
  <block id="9454dc4c79a6cb55efc75260a5249576" category="paragraph">` * lun_name*`</block>
  <block id="f65bf8c844d104c29c3ec3931b54a791" category="paragraph">` * lun_name*` （长或短格式）</block>
  <block id="737b2c607c73b4a5f739d9e4aa85a603" category="list-text">磁盘组（` -dg * dgname*` ）或卷组（` -vg * vgname*` ）</block>
  <block id="6597fd23ae658e10cd41e1004244dc3e" category="paragraph">` * 磁盘 *` 或 ` * 卷组名称 *`</block>
  <block id="c00828fe88f0e444c95308feee07e0c7" category="paragraph">SnapDrive for UNIX 会根据您使用 ` -DG` 选项输入的值创建一个磁盘或卷组来存放 LUN 。您为组提供的名称不能存在。</block>
  <block id="a612a94c8b0d015c73d700e01d28fb0f" category="list-text">主机卷（` -hostvol * file_spec*` ）或逻辑卷（` -lvol * file_spec*` ）</block>
  <block id="e44365becec89eca2397b7f6a0d53ff6" category="paragraph">` * 主机 *` 或 ` * 逻辑卷名称 *`</block>
  <block id="37c22533a4191f9895e2a3113cbabfdd" category="list-text">文件系统（` -fs * 文件规范 *` ）</block>
  <block id="11382f995906b5e1f1414e41036adb12" category="paragraph">` * 文件系统名称 *`</block>
  <block id="9d9b4028b355763904cbb6e324e2e4d0" category="paragraph">-nolvm</block>
  <block id="3100175ba695f97b823aca2e3d0de46b" category="paragraph">* 必需： * 如果要创建直接驻留在 LUN 上的文件系统，请指定 ` -nolvm` 选项。</block>
  <block id="95c1911a36310b3873dfde06441e6523" category="list-text">LUN 大小（` -lunsize` ）</block>
  <block id="b209722d56794a5df4a5a8d4bcac8c9b" category="paragraph">` * 大小 *`</block>
  <block id="e4019f5919f9d4928b6931266dce193e" category="list-text">磁盘组大小（` -dgsize` ）</block>
  <block id="4ed2479c74087a54111837594630778b" category="list-text">卷组大小（` -vgsize` ）</block>
  <block id="09dd1cb919b115ff7ee61050dc8bf7c0" category="paragraph">为要创建的每个实体指定大小（以字节为单位）或其他一些数据单元。LVM 实体的大小取决于您请求的 LUN 的聚合大小。</block>
  <block id="f7a5b57002491f7e30b725561809a350" category="paragraph">要控制主机实体的大小，请使用 ` -dgsize` 选项指定底层磁盘组的大小（以字节为单位）。</block>
  <block id="c89ac7c479645b66e861ab7be078889b" category="list-text">存储系统卷的路径（` -filervol` ）</block>
  <block id="ae3b58be52c3cb73cb89875af5c5f0c2" category="paragraph">` * lor_filer_path*`</block>
  <block id="2999697fc1b1401b3973bf1fb863bd7e" category="list-text">` * -LUN*`</block>
  <block id="c1031754121cdeca537930719ecf4066" category="paragraph">` * lun_path*`</block>
  <block id="59802d381e3595d22e9ca47d1150dee1" category="paragraph">指定希望 SnapDrive for UNIX 自动在其中创建 LUN 的存储系统及其卷。</block>
  <block id="13d98ac7b5e368d3ea23f39804b86f2a" category="list-text">使用 ` -filervol` 选项指定要在其中创建 LUN 的存储系统和卷。</block>
  <block id="45e87eb5129f89cc88f0b8e7fb7bb8b4" category="paragraph">请勿指定 LUN 。当您使用此形式的 SnapDrive storage create` 命令时，适用于 UNIX 的 SnapDrive 会自动创建 LUN 。它会使用系统默认值来确定 LUN ID 以及每个 LUN 的大小。它将关联磁盘 / 卷组的名称基于主机卷或文件系统的名称。</block>
  <block id="3b7c8f9917eaf2ee487b37106f4b79e7" category="list-text">使用 ` -lun` 选项为要使用的 LUN 命名。</block>
  <block id="3718b1c9e4f599db63ed9e374d36dece" category="paragraph">文件系统类型（` -fstype` ）</block>
  <block id="e9189b749274098bd60f61ad20d4cf30" category="paragraph">` * 类型 *`</block>
  <block id="591f844c24d61a17dd63ae1c2108b3bf" category="paragraph">如果要创建文件系统，请提供表示文件系统类型的字符串。</block>
  <block id="4629148fad3a831ea39128caba89c30e" category="paragraph">SnapDrive for UNIX 可接受 Linux ： ` _ext4_` 或 `ext3`</block>
  <block id="3773d8e3089321626a2790710d6a9f98" category="admonition">默认情况下，如果主机平台只有一种文件系统类型，则 SnapDrive for UNIX 将提供此值。在这种情况下，您无需输入它。</block>
  <block id="45730516d83ee9478876e5b18a925167" category="paragraph">* 可选： * 指定用于 SnapDrive for UNIX 操作的卷管理器类型。</block>
  <block id="ae53e8c68fd4bb6884dbec90fb2bf8c7" category="paragraph">` * 选项名称和值 *`</block>
  <block id="b0cfde3a4413341e22717a531becdcd8" category="list-text">使用 ` -fsopts` 指定要传递到用于创建文件系统的 host 命令的选项。例如，您可以提供 `mkfs` 命令将使用的选项。您提供的值通常需要使用带引号的字符串，并且必须包含要传递到命令的确切文本。</block>
  <block id="c7ac8049ee5b2a7bb58c34c1c9194ad9" category="paragraph">` -mntopts` 参数是使用 `mount` command ` -o` 标志指定的文件系统 ` 类型` 选项。请勿在 ` _-mntopts_` 参数中包含 ` -o` 标志。例如，序列 ` -mntopts tmplog` 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="856a8fb68249f1c11d9c53371593c92a" category="paragraph">如果 `enable-mount-with -netdev` configuration 参数的值设置为 `off` （默认值），则必须在 SnapDrive storage create` 命令中手动指定 ` -mntets _netdev` 。但是，如果将此值更改为 on ，则在运行 SnapDrive storage create` 命令时会自动执行 ` -mntopts _netdev` 。</block>
  <block id="308e4648ad2a2df3eae59c6071a2f5d7" category="list-text">使用 ` -noper` 创建文件系统，而不向主机上的文件系统挂载表文件添加条目（例如，在 Linux 上为 `fstab` ）。默认情况下， SnapDrive storage create` 命令会创建永久性挂载。在 Linux 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。在 Linux 系统上， SnapDrive for UNIX 会在主机文件系统表中添加 UUID 。</block>
  <block id="6b7a3a957fac84cfa3295c7a98b167e7" category="list-text">使用 ` -reserve | -noreserve` 创建存储，无论是否创建空间预留。</block>
  <block id="1e742805fc45f8e8f22d96da14f5b957" category="list-text">igroup 名称（` * -igroup*` ）</block>
  <block id="995a63c93f5f4c0b98eebb5afae27dde" category="paragraph">` * ig_name*`</block>
  <block id="474df28680c5f6fc457512356b69aa0e" category="paragraph">* 可选： * NetApp 建议您使用主机的默认 igroup ，而不是提供 igroup 名称。</block>
  <block id="d278bd58400e495f3f497b6da06b37ef" category="summary">SnapDrive for UNIX 可为用户提供各种访问控制级别。这些访问级别与 Snapshot 副本和存储系统操作相关。</block>
  <block id="77ecaae43df9a55823c7338befe648da" category="doc">可用的访问控制级别</block>
  <block id="fa123f5d941e0fef8ed41c38ea458714" category="paragraph">您可以设置以下访问级别：</block>
  <block id="44c3be2ec30eef39eccc28858957be5f" category="paragraph">每个级别都是不同的。如果您仅为某些操作指定权限，则 SnapDrive for UNIX 只能执行这些操作。例如，如果指定了存储使用，则主机可以使用适用于 UNIX 的 SnapDrive 连接和断开存储连接，但它无法执行受访问控制权限管理的任何其他操作。</block>
  <block id="9d5091841c2a5ec9ff0c0bd82e454b6b" category="summary">您必须了解使用 SnapDrive for UNIX 的各种注意事项。</block>
  <block id="46e5b179add895482aad2361b1688d35" category="doc">使用 SnapDrive for UNIX 的注意事项</block>
  <block id="43feaa914d4bb459606ab3bba02502d4" category="list-text">对于由 SnapDrive for UNIX 管理的任何 LUN ，必须使用默认空间预留设置值。</block>
  <block id="fe7acb979dcad8ca00a0e64f8113df62" category="list-text">在 FC 和 iSCSI 配置中，将存储系统上每个卷的快照预留设置为 0% 。</block>
  <block id="662a91bfdacfa68ca00ca156fddb9ee1" category="list-text">将连接到同一主机的所有 LUN 置于只有该主机才能访问的专用存储系统卷上。</block>
  <block id="b69bca4f7cad45cd3b3aef02d030d32e" category="list-text">如果使用 Snapshot 副本，则不能使用存储系统卷上的整个空间来存储 LUN 。</block>
  <block id="cb8dc7bb2c465056e6c233af398e1c91" category="paragraph">托管 LUN 的存储系统卷应至少是存储系统卷上所有 LUN 的总大小的两倍。</block>
  <block id="8befa4359cf22df2dceb984f845ff009" category="list-text">Data ONTAP 使用 /vol/vol0 （根卷）管理存储系统。</block>
  <block id="2c03d956b910e67c55f6794e2215622c" category="paragraph">请勿使用此卷存储数据。如果您已将任何其他卷（ /vol/vol0 除外）配置为根卷来管理存储系统，请勿使用它来存储数据。</block>
  <block id="9011f07e702025f8d7d9667874d74656" category="summary">SnapDrive for UNIX 命令用于配置操作。</block>
  <block id="e47d376a6eb060ebd723b6e17d544232" category="doc">配置命令行</block>
  <block id="9264836dabda10079b05ad0e55b69ddd" category="paragraph">以下命令行选项用于配置操作。</block>
  <block id="8828fb8103e0e577247c591fe211701a" category="list-text">SnapDrive 配置访问 ｛ show | list ｝ _filername_`</block>
  <block id="200b7e92da4105f88e3ab4835cabc1e2" category="list-text">SnapDrive 配置检查 LUN`</block>
  <block id="fc91b510d805c4895946a90defff8b2a" category="list-text">SnapDrive 配置 delete _appliage_name [appliage_name ...]_`</block>
  <block id="31d2678af67d49722880cf7b895c8369" category="list-text">SnapDrive 配置集（ -dfm ） _user_name_ appliage_name [appliation_name ...]`</block>
  <block id="f4e20a3ccbe964c95976f41263f31627" category="list-text">SnapDrive 配置集 [-viadmin] _user_name vadmin_name_`</block>
  <block id="4c8e66296052cdedc722c1c3bef6f4d3" category="list-text">SnapDrive 配置显示 [_host_file_name_]`</block>
  <block id="fe24382edcb341497f7b4e3c0e6597aa" category="list-text">SnapDrive 配置检查集群`</block>
  <block id="56657d2233bb1eb6bbd194b3a44f049d" category="list-text">SnapDrive config migrate set _storage_system_name new_storage_system_Nam_`</block>
  <block id="bbab6d6220b1c09602415a584e22ae43" category="list-text">SnapDrive 配置迁移 delete _new_storage_system_name [new_storage_system_name …… ]_`</block>
  <block id="b74c8723d707b73c55e9d25a1a654b9b" category="list-text">SnapDrive 配置迁移列表`</block>
  <block id="6f1117ef4a44d736c5813c4cd6925ea6" category="list-text">SnapDrive portset add portset_name filername [filername ...]`</block>
  <block id="9c36f5dded5b43fdfe56bb38acf35eec" category="list-text">SnapDrive 端口集删除文件名 [filername ...]``</block>
  <block id="b7b4be7dd520520e066f305680411a5c" category="list-text">SnapDrive 端口集列表`</block>
  <block id="0a98aa74c3503881192d4af50c1ad7db" category="list-text">SnapDrive igroup add igroup_name filername [filername ...]``</block>
  <block id="d18ee7f1441e7c15c0eb455e3e56b297" category="list-text">SnapDrive igroup delete filername [filername ...]``</block>
  <block id="18070edc11f12cb34ab9c1ab974fb90b" category="list-text">SnapDrive igroup list`</block>
  <block id="32b5987c3b35b73522bd85fc250dd816" category="summary">SnapDrive for UNIX 中的故障排除工具不仅可以帮助您解决问题，还可以帮助您查找相关信息。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="0c0327f0b517c0951f2c1c0f83dea782" category="paragraph">在本版本发布时， SnapDrive for UNIX 中存在一些已知问题和限制。虽然某些问题会影响所有适用于 UNIX 的 SnapDrive 主机平台，但其他问题仅会影响特定主机平台。有关已知问题和故障排除提示的信息，请参见 _UNIX SnapDrive 发行说明 _</block>
  <block id="aae6d3072b93c2c237d14c5cc98fcbde" category="summary">在使用存储配置时，您可以使用 SnapDrive for UNIX 。SnapDrive for UNIX 可帮助您创建存储并连接到现有存储系统或实体。</block>
  <block id="0174e19a577c292022833c72dc7e2fa6" category="doc">SnapDrive for UNIX 中的存储配置</block>
  <block id="d5878910a9a66d1e8bbaf04320d684f2" category="summary">基于卷的 SnapRestore \ （ Vbsr\ ）检查失败， \ （当 NFS 尝试导出没有外部主机的列表时 \ ）位于客户端计算机 \ （ SLES 11\ ）中，该客户端计算机在 /etc/hosts 文件中具有两个不同的主机名 IP 。</block>
  <block id="c52b52646450da844d9479569c685fdf" category="doc">基于卷的 SnapRestore 检查失败</block>
  <block id="16ed636c8591174e96cd71037aba2d3f" category="paragraph">在客户端计算机（ SLES 11 ）中，基于卷的 SnapRestore （ Vbsr ）检查失败（当 NFS 尝试导出没有外部主机的列表时），该客户端计算机在 ` /etc/hosts` 文件中具有两个不同的主机名 IP 。</block>
  <block id="ff6d270f6d0a47414343ce4625e4988a" category="paragraph">要解决此问题，您必须确保在 ` /etc/hosts` 文件中的主机名只有一个 IP 。</block>
  <block id="af64763497eb625457b2be1452c75547" category="summary">您可以创建主机实体，例如文件系统，逻辑卷或磁盘组，并指定作为其一部分创建的 LUN 。</block>
  <block id="c18d9abf83d88cabd78fb81b2673e09b" category="doc">创建 LVM 实体并指定 LUN</block>
  <block id="f56ee16077ac8ae2e44a937035d4d587" category="paragraph">` * SnapDrive storage create _-host_lvm_fspec_ -lun _long_lun_name LUN_name...]_ -lunsize _size_ [-igroup _ig_name_ [_ig_name..._]] [ ｛ -reserve _ -noreserve ｝ ]*`</block>
  <block id="4a5ed0186248f00e4ff387755434d3ea" category="paragraph">此示例将根据您的主机使用文件系统创建文件系统 /mnt/Acctfs 。它会在存储系统访问存储器上设置三个 LUN 。每个 LUN 均为 10 GB ：</block>
  <block id="7f7e3be9f4e20bcdf8a035e78441ef4b" category="paragraph">`` # SnapDrive lun storage create -fs /mnt/Acctfs -fstype jfs2 -lun Acctfiler ： /vol/vol1/luna lunB lunc -lunsize 10g*`</block>
  <block id="b4a50afaea17ac74f4cf38f1f55eb4a5" category="summary">要为 Linux MPIO 设置 HBA 驱动程序，所需步骤的确切顺序取决于所使用的操作系统。设置还取决于使用的 HBA 卡。</block>
  <block id="e64fcef8448da32834047c968d4ddb7d" category="doc">设置 HBA 驱动程序参数</block>
  <block id="d92831d3f59ae18b1efa61a61e1e1bd6" category="paragraph">要为 Linux MPIO 设置 HBA 驱动程序参数，需要执行以下步骤：</block>
  <block id="edf7d41fa06147c60f957a551b25120a" category="list-text">卸载内置驱动程序。</block>
  <block id="299e60cc1915dcfdb1b945ee635598d2" category="list-text">从供应商网站安装最新驱动程序。</block>
  <block id="8990eab1aededbabbb94c23ec291e418" category="list-text">使用供应商的 CLI 配置工具设置驱动程序参数。</block>
  <block id="ea8f6ee7d8b8f6fc83da8df9e7227aa9" category="list-text">编辑 ` /etc/modprobe.conf` 文件以设置 HBA 驱动程序的默认参数。</block>
  <block id="1468721e277405a517993b2c4f83be10" category="list-text">使用 HBA 驱动程序参数重新生成 initrd （ RAM 磁盘映像）。</block>
  <block id="21cfd3dce5d97b506ccc6ea02e508174" category="list-text">重新启动主机以使新的 HBA 驱动程序设置生效。</block>
  <block id="7ef94ce210f123c066e4a4d290740ac9" category="summary">您必须在子操作系统中配置存储系统和 Virtual Storage Console 以配置 RDM LUN 。</block>
  <block id="ec203c4737fa5f0ef59062d7b1e79693" category="doc">子操作系统的 SnapDrive for UNIX 中的配置信息</block>
  <block id="2ee95e8e2f7f5967b48301471268b6bc" category="paragraph">要与 Virtual Storage Console 进行通信以配置 RDM LUN ，需要登录信息。配置完成后， SnapDrive for UNIX 允许您在子操作系统中创建 RDM LUN 。</block>
  <block id="2dfca01186890d0fe8afdce9603f808c" category="summary">如果存在多个 SnapDrive 路径，但禁用了多路径，则 storage create 命令将失败。</block>
  <block id="b6fe0cd8cdc13d57b80244a8259f54b9" category="doc">如果存在多个 SAN 路径，但禁用了多路径，则 SnapDrive storage create 命令将失败</block>
  <block id="6cc2a33b9ce638b3c3a3fdbf13dbe04e" category="paragraph">如果存在多个 SnapDrive 路径，但禁用了多路径，则 storage `create` 命令将失败。</block>
  <block id="626b9276e40baafa9b1dec0f43f1b17e" category="paragraph">例如，对于 SVM 的两个 iSCSI LIF ：</block>
  <block id="ab79004c767db77d0ff2352076d49cc4" category="paragraph">如果在 SnapDrive.conf 文件中将 `multipathing-type` 设置为 `none` 且禁用了多路径服务，则尝试使用 LVM 创建存储时，将返回以下错误：</block>
  <block id="f167093cb0041bbdbd64c67c11473dbe" category="paragraph">之所以出现这种情况，是因为 `pvcreate` 命令会使用以逗号分隔的设备作为单个设备 `pvcreate /dev/sdb ， /dev/sdc` 和一个名为 ` /dev/sdb ， /dev/sdc` 的设备，而该设备不存在。</block>
  <block id="192bd2267d92baafb90bfb286bf3279f" category="paragraph">如果要使用多个存储路径，并且需要使用 LVM ，则必须启用多路径。</block>
  <block id="285bddf69e4972261da774f9d86b891f" category="summary">预配置的角色可简化向用户分配角色的任务。</block>
  <block id="4cb43a9a57e5a66cabdae177fe0db46c" category="doc">预配置的角色，便于配置用户角色</block>
  <block id="8c0500a0b5f111612ed88636c3688b98" category="paragraph">下表列出了预定义的角色：</block>
  <block id="c1228dde877833893394a57c585e90e4" category="cell">Role name</block>
  <block id="b903ee1c0d728567b5f28ea9d0d9ed42" category="paragraph">GlobalSDStorage</block>
  <block id="07ca6dafdd5aae154481a9bbf2c8da00" category="paragraph">使用 SnapDrive for UNIX 管理存储</block>
  <block id="e3aac651e9e0a762bc5c2ca08203eeb0" category="paragraph">GlobalSDConfig</block>
  <block id="fcbd18b2ec6b6b6f18b1a47891c1ff24" category="paragraph">使用 SnapDrive for UNIX 管理配置</block>
  <block id="d61f4475bf605a0aa3bf11a1ccf83b95" category="paragraph">GlobalSDSnapshot</block>
  <block id="7c6f8a0e2e2013fb615a7deed62b7af6" category="paragraph">使用 SnapDrive for UNIX 管理 Snapshot 副本</block>
  <block id="5e961316db00eceb705a22c806fb200e" category="paragraph">GlobalSDFullControl</block>
  <block id="3586c729c9a3c4600e9510dcbf247beb" category="paragraph">充分利用适用于 UNIX 的 SnapDrive</block>
  <block id="e5f2edbe91fea5c7c95a9f5e8aa085d5" category="paragraph">在上表中， Global 是指由 Operations Manager 控制台管理的所有存储系统。</block>
  <block id="01f7f8e8a13743d923f737481c685938" category="summary">您可以使用适用于 UNIX 的 SnapDrive 在 LUN 上创建文件系统。SnapDrive for UNIX 会自动创建关联的 LUN 。</block>
  <block id="5cb71323a48e8748accf42ec859c9562" category="doc">在 LUN 上创建文件系统并自动设置 LUN</block>
  <block id="0e9b638e5d9e1218ae6bc31c1b9c105f" category="paragraph">` * SnapDrive storage create -fs _file_spec_ -nolvm （ -fstype 类型）【 -fsopts options】 【 -mntets options】 【 -noperatest] -filervol _llong_filer_path_ -lunsize &lt;-igroup _name[ig_name ...]_ ｛ -reserve _eserve _ves* ｝`</block>
  <block id="c2c1b5433aef5bbe18701699b1e82cfd" category="paragraph">SnapDrive for UNIX 将创建您指定的文件系统，并在您指定的存储系统上为其创建 LUN 。它会执行与 LUN 的主机准备和发现以及 LUN 与主机实体的映射和连接相关的所有任务。</block>
  <block id="fd05d7f6bfc90e815087880e8e915b43" category="section-title">示例</block>
  <block id="6600bd149d3ec547cda8110a3de66321" category="paragraph">* 直接在 LUN 上创建 100 MB 文件系统： *</block>
  <block id="f8681c1f438bb0af181f36e647c62fad" category="paragraph">* 在不使用任何卷管理器的原始 LUN 上创建文件系统： *</block>
  <block id="9e52d8956290d2046c09c49cc294b870" category="paragraph">* 在不使用任何卷管理器的 RDM LUN 上创建文件系统： *</block>
  <block id="225edb2dfcec79431bfd95328464d560" category="summary">在执行基于卷的 SnapRestore 之前， SnapDrive for UNIX 会执行一些检查，用户可以使用 -force 选项覆盖这些检查。要安全地使用基于卷的 SnapRestore ，必须执行这些检查。</block>
  <block id="cc0410051df2cdae7d54743d539b0257" category="doc">可由用户覆盖的检查</block>
  <block id="cc61860f3ce931c2bc6fc9c31bb21f44" category="paragraph">在执行基于卷的 SnapRestore 之前， SnapDrive for UNIX 会执行一些检查，用户可以使用 ` -force` 选项覆盖这些检查。要安全地使用基于卷的 SnapRestore ，必须执行这些检查。</block>
  <block id="0eeffad094fe0956a812f52f65129730" category="paragraph">建议您按照系统执行的各种检查进行操作，但您可以使用 ` -force` 选项来覆盖这些检查。</block>
  <block id="8e517899161e69f6b3a30d96a56c94e5" category="paragraph">对于基于卷的 SnapRestore 检查，您可以覆盖以下 SnapDrive for UNIX ：</block>
  <block id="6bf04d7cb4c61f64c682a08b58a2982f" category="list-text">SnapDrive for UNIX 会检查 Snapshot 副本中的 LUN 是否崩溃不一致。如果它在 Snapshot 副本中发现应用程序不一致的 LUN ，则会向您发出警告。</block>
  <block id="cec7896325d1af7f189bad50d05f1acd" category="list-text">SnapDrive for UNIX 会检查活动卷中是否存在在创建 Snapshot 副本后创建的其他 LUN 。如果 SnapDrive for UNIX 发现其他 LUN ，则会警告您活动卷中的这些额外 LUN 将丢失。</block>
  <block id="c7676eab34d11a9cfb3a9af06191e4fd" category="list-text">SnapDrive for UNIX 会检查是否存在新的 Snapshot 副本。这些新 Snapshot 副本不会还原，并且会丢失。</block>
  <block id="b6f6e7c17b2bc89fa19d378f96333254" category="list-text">SnapDrive for UNIX 会检查卷中的普通文件（可从本地主机查看的文件）。</block>
  <block id="716f716fe946375c0368da0e785cfe12" category="list-text">SnapDrive for UNIX 会检查 NFS 导出。</block>
  <block id="860d1648a2d9f0f2d5b8f55623bc8ddc" category="list-text">SnapDrive for UNIX 会检查 CIFS 共享。</block>
  <block id="3fc2569f8db4dd6e131830061ab7b437" category="paragraph">如果 Snapshot 副本是使用适用于 UNIX 的 SnapDrive 3.0 或更早版本创建的，则基于卷的 SnapRestore 预览将无法执行上述列表中的前两项检查。如果您提供了 ` -force` 选项，则在基于卷的 SnapRestore 执行期间，将显示一条提示消息，以覆盖这些检查并继续操作。</block>
  <block id="322a0bdae2f6a3606044f067d9e28bbc" category="summary">要使用 SnapDrive storage connect 命令连接具有磁盘组，主机卷和文件系统的 LUN ，您需要遵循以下语法。</block>
  <block id="6e5c066f5d048c4c8685139d340d0b91" category="doc">连接具有磁盘组，主机卷和文件系统的 LUN</block>
  <block id="7f2213ff65af9ddfe68a6a746b92ed62" category="paragraph">要使用 SnapDrive storage connect` 命令连接具有磁盘组，主机卷和文件系统的 LUN ，您需要遵循以下语法。</block>
  <block id="2dad850f4cea660336747c156c4febf7" category="paragraph">` * SnapDrive storage connect-fs _file_spec_ -hostvol _file_spec_ -lun _lun_name_ [_lun_name..._] [-igroup _ig_name_ [_ig_name..._]] [-noperistre] [-mntopts _options_] [-fstype _type_]` _vm_type_]`</block>
  <block id="8bf0601570f6ff18e9c7052014c89538" category="section-title">示例：连接在 LUN 上创建的文件系统</block>
  <block id="9f666df947a3c33aea40f25d3cfd7dbb" category="section-title">示例：连接在 RDM LUN 上创建的文件系统</block>
  <block id="cb5f0fe2cac059a412942698d28d8468" category="summary">在执行基于卷的 SnapRestore 之前， SnapDrive for UNIX 会对系统执行一些强制检查。要安全地使用基于卷的 SnapRestore ，必须执行这些检查。用户不能覆盖强制检查。</block>
  <block id="12a67dd1801950b408c3d4ab56fd9710" category="paragraph">以下是在实施基于卷的 SnapRestore 之前 SnapDrive for UNIX 进行的强制检查：</block>
  <block id="316f1669cd561814fbf7f56d8e04dd82" category="list-text">基于卷的 SnapRestore 仅适用于使用 SnapDrive for UNIX 创建的快照。</block>
  <block id="524e4fdbfb24a2f8b144d86813af1912" category="list-text">基于卷的 SnapRestore 中的卷不应是存储系统的根卷。</block>
  <block id="b44f73801a9d74ff49bed18b2a0e284f" category="list-text">SnapDrive for UNIX 会检查卷克隆。如果新 Snapshot 副本中存在任何卷克隆，则不允许执行卷还原操作。这是 Data ONTAP 施加的一项限制。</block>
  <block id="5e5a4f59f3433ce8839e19764cde03c1" category="list-text">基于卷的 SnapRestore 中的卷不应具有除指定 LUN （文件系统，磁盘组或主机卷中存在的原始 LUN 或 LUN ）以外的任何映射 LUN 进行还原。</block>
  <block id="6bc52e7a4983673d5db8c9901a1dd5d3" category="list-text">SnapDrive for UNIX 会检查卷是否位于 SnapMirror 关系中。</block>
  <block id="dada440aafabbc3e9353454f266eefdb" category="list-text">SnapDrive for UNIX 会检查卷是否位于 SnapVault 关系中。</block>
  <block id="1be5718703cd4cc21a8b97cf1adcf45d" category="paragraph">如果 SnapDrive for UNIX 正在使用 Operations Manager for RBAC 且用户在卷上具有 sd.snapshot.DisruptionBaseline 功能，则可以覆盖 SnapMirror 和 SnapVault 检查。有关用户覆盖这些检查的特定 RBAC 功能的详细信息，请参见 SnapDrive for UNIX 中的基于角色的访问控制。</block>
  <block id="fdd9facf4f5b5183bcd3dbfd55550c5b" category="summary">在某些操作系统上使用 SnapDrive storage disconnect 命令时，会丢失主机卷名称，文件系统挂载点，存储系统卷名称以及 LUN 名称等信息。如果没有此信息，您将难以在稍后的某个时间点重新连接到存储。</block>
  <block id="ff8ce23472ce233749e4e95b6d611a7a" category="doc">有关使用 storage disconnect 命令的提示</block>
  <block id="af713790f55f55ea4323771d805a3f68" category="paragraph">在某些操作系统上使用 SnapDrive storage disconnect` 命令时，会丢失主机卷名称，文件系统挂载点，存储系统卷名称以及 LUN 名称等信息。如果没有此信息，您将难以在稍后的某个时间点重新连接到存储。</block>
  <block id="ea915c112c3cad0bfbd207e53ca3d7e9" category="paragraph">为避免丢失信息，应先使用 SnapDrive snap create` 命令创建存储的 Snapshot 副本，然后再执行 SnapDrive storage disconnect` 命令。</block>
  <block id="3032bfb948055a42b355606ff0520959" category="paragraph">这样，如果您稍后要重新连接存储，可以使用以下临时解决策：</block>
  <block id="136b05b30167f74031857c6ede840059" category="list-text">执行以下命令：</block>
  <block id="cfdcf764f0b0df9c7b3980f3a5e6f585" category="paragraph">SnapDrive snap restore filaggrege -snapname long_snap_name`</block>
  <block id="8742388fb1418b4476337e023dab4157" category="paragraph">在此命令中包括 Snapshot 副本的完整路径。</block>
  <block id="6cf7ebacd7a3e1d15734b3744c229079" category="list-text">或者，也可以通过执行 SnapDrive snap delete` 命令来删除 Snapshot 副本。</block>
  <block id="715bbe6aad34b0fbb5aa9c0d07a17152" category="summary">SnapDrive for UNIX 会检查同时打开的文件数。如果超过此限制， SnapDrive for UNIX 将引发错误。</block>
  <block id="b6aa194f678e7914b78f5b16c786c399" category="doc">操作系统对打开的文件的限制</block>
  <block id="01fcc2b68dded3064512c7154a8143e6" category="paragraph">SnapDrive for UNIX 会检查操作系统对进程打开的文件数的限制。</block>
  <block id="4cda4b7adb62c4294f39750344c42458" category="admonition">一个进程同时打开的文件句柄数量的默认限制因操作系统而异。请查看操作系统文档以确定限制。</block>
  <block id="904007527b0961eb12afd35a8a62cfcb" category="paragraph">如果一个操作的打开 LUN 数量超过操作系统对一个进程同时打开的文件句柄数量的限制，则 SnapDrive for UNIX 将退出，并显示以下错误消息：</block>
  <block id="e78968627d657e17738baaa6b10a6645" category="paragraph">`0001-001 管理员错误：无法打开设备到设备的路径`</block>
  <block id="28a090241b630da72d46b3bde3d52fcf" category="summary">如果迁移了多路径类型，则 SnapRestore 和 SnapConnect 操作将不起作用。</block>
  <block id="247c0028d23a4d132e0c85660e8a6da4" category="paragraph">如果现有多路径类型设置为 ` _None_` ， 稍后，您可能会将多路径类型更改为 ` _NativeMPIO_` ，在对现有 Snapshot 副本执行 Snapconnect 和 SnapRestore 操作时，可能会遇到错误消息 ` " 无法找到快照中存在的多路径软件 linuxnull "` 。</block>
  <block id="648bf96237d3c4569f513d9057f0e2ad" category="paragraph">SnapRestore 操作示例</block>
  <block id="e00f39063c27a06465b4c5bff1061222" category="paragraph">Snapconnect 操作示例</block>
  <block id="939156e3699bd5b86f24109fdff2c685" category="summary">SnapDrive for UNIX 使用关键字指定 SnapDrive for UNIX 操作的目标。</block>
  <block id="dc1554c017f94cf90d2b13079b73b220" category="doc">关键字规则</block>
  <block id="179a9664be98842d552c1138e900cca3" category="paragraph">SnapDrive for UNIX 使用关键字来指定与要使用的主机和存储系统对象对应的字符串序列。以下规则适用于 SnapDrive for UNIX 关键字：</block>
  <block id="54a182705868242a769ee2032ce42b27" category="list-text">在每个关键字前面添加一个连字符（ - ）。</block>
  <block id="6e29960a4bf5c1e56693e859c0e9642c" category="list-text">请勿将关键字串联在一起。</block>
  <block id="a0186630c249d5f3f67f4511157b0edd" category="list-text">输入整个关键字和连字符，而不是缩写。</block>
  <block id="8834ee2ae75af3d9ccddb59eed033dd9" category="summary">存储系统管理员可以使用命令行界面配置 SD-admin 用户。</block>
  <block id="28f14d84b586f60dfaab1ea9b7d6908c" category="doc">使用命令行界面配置 SD-admin</block>
  <block id="5909b591988a4c2747e39ad5efa71f46" category="list-text">添加一个名为 sd-admin 的用户。</block>
  <block id="7f635f1c10e29c56325139169660ef12" category="list-text">添加一个名为 sd-admin 的管理员。</block>
  <block id="8b21fe056ee5e3ce1ef55953dc20193b" category="list-text">创建一个名为 sd-admin-role 的角色。</block>
  <block id="c63711ba81eb28b5c5ec606bb951e1bb" category="list-text">向步骤 3 中创建的角色添加功能。</block>
  <block id="3b8ab83c1bbeb3b76d214f863c505343" category="list-text">Operations Manager 管理员还可以将全局组上的 `Dfm.Database.Write` 功能授予 ` &lt;sd-admin&gt;` ，以使 SnapDrive for UNIX 能够在 Operations Manager 中刷新存储系统实体。</block>
  <block id="1b38b79da151e9369d1da09b4bdf609d" category="list-text">将 SD-admin-role 角色添加到 SD-admin 用户。</block>
  <block id="e058c965c507c36a06302161538d9e36" category="summary">您可以还原包含多个存储实体的 Snapshot 副本。</block>
  <block id="61a1a52d8338587d635cf7c8a0d836cf" category="doc">还原多个存储实体</block>
  <block id="1b963d7ef3b13636a6dcdd3c25c5537a" category="paragraph">要还原包含驻留在多个目标存储系统上的存储实体的 Snapshot 副本，必须满足以下要求：</block>
  <block id="9e2dcf8d2ba488380f64495eea3b32ec" category="list-text">在命令提示符处指定的存储实体必须位于单个存储系统或 HA 对上。</block>
  <block id="4098fff2776c3095b7652798d3a6ea6e" category="list-text">源存储系统的卷名称必须与目标存储系统的卷名称匹配。</block>
  <block id="fcf93ed88ab6df08b9463c26bf8b057d" category="list-text">您必须将 `snapdrive.conf` 文件中的 `snapmirror-dest-multily-filervolums-enabled` 参数设置为 on 。</block>
  <block id="1561b0105a38b8a6e26a7c4a541054e1" category="paragraph">您可以使用一个命令还原驻留在单个存储系统或 HA 对上的存储实体。</block>
  <block id="d32bba9407b78934a830518fb8e0829f" category="summary">在基于卷的 SnapRestore 期间，从卷到 SnapDrive for UNIX 的唯一映射信息是 LUN 的启动程序组信息。如果您使用的启动程序组始终由适用于 UNIX 的 SnapDrive 创建，则主机的完全限定域名属于启动程序组名称。</block>
  <block id="b4f6a0b7897d02b5a7f452bd0fb21ee6" category="doc">有关映射到本地或远程主机的 LUN 的信息</block>
  <block id="477ef545bbf5d0e67bff12c929b28413" category="paragraph">如果 SnapDrive for UNIX 管理员指定了 ` -igroup` CLI 选项，或者您使用手动创建的启动程序组，则 igroup 名称不一定具有主机名。由于上述所有原因， SnapDrive for UNIX 无法可靠地检测 LUN 的本地或远程绑定。因此， SnapDrive for UNIX 会在基于卷的 SnapRestore 中显示完整的 LUN 启动程序组和启动程序信息。</block>
  <block id="b958684f599a42306ba73fe70fee3855" category="summary">访问权限用于指示主机是否可以执行某些 Snapshot 副本和存储操作。访问权限不会影响任何 SnapDrive storage show 或 storage list 操作。通过 SnapDrive ，您可以为存储系统上的文件中的每个主机指定访问权限。</block>
  <block id="7f72337b55c4cd2385bc6b56da1a990f" category="doc">对存储系统的访问权限</block>
  <block id="120205e94b44c676a2b09ada70ffbf1a" category="paragraph">您还可以指定 SnapDrive 在找不到指定主机的权限文件时必须执行的操作。您可以通过在 `sall-access-if-rbac-unspecified` 的` napdrive.conf `配置文件中设置值来指定操作。您还可以通过修改访问权限来启用或禁用对存储系统的访问。</block>
  <block id="fbc13c08ce92ec5179bbbaf04a3bb398" category="admonition">在适用于 UNIX 的 SnapDrive 4.0 及更高版本中，您可以根据基于角色的访问控制功能执行存储操作。</block>
  <block id="f79a7072cda13131849e5484abbcb467" category="summary">为了确定用户访问权限， SnapDrive for UNIX 会检查存储系统根卷中的两个权限文件之一。您必须检查这些文件中设置的规则，以评估访问控制。</block>
  <block id="dbdd9ed43361b62937594d23ebc8f6b5" category="doc">什么是访问控制设置</block>
  <block id="1d75b22561e7b6ee3ec2a786cea04682" category="list-text">`sDHOST-name.prbac` file is in the directory ` /vol/vol0/sdprbac` （ SnapDrive permissions rols-based access control ） .</block>
  <block id="afcd22907a6d27e3830305606a71cb86" category="paragraph">文件名称为 `sDHOST-name.prbac` ，其中 ` host-name_` 是权限适用的主机的名称。您可以为连接到存储系统的每个主机创建一个权限文件。您可以使用 SnapDrive config access` 命令显示有关特定存储系统上主机可用权限的信息。</block>
  <block id="c490d258f0af7e2f39efc973524a7e04" category="paragraph">如果 `sDHHOST-name.prbac` 不存在，请使用 `sdgenic.prbac` 文件检查访问权限。</block>
  <block id="506874c7829a3ec9c112d1eb0d1ae959" category="list-text">`sdgenergic.prbac` file is also in the directory ` /vol/vol0/sdprbac`</block>
  <block id="a2bf9d19f0828c6ae48385b65f79af16" category="paragraph">文件名 `sdgenic.prbac` 用作无法访问存储系统上的 `sDHHOST-name.prbac` 文件的多个主机的默认访问设置。</block>
  <block id="389269c7ae05f4ae8ce27025b00a9e88" category="paragraph">如果在 ` /vol/vol0/sdprbac` 路径中同时存在 `sDHOST-name.prbac` 和 `sdgenic.prbac` 文件，则使用 `sDHOST-name.prbac` 检查访问权限，因为这会覆盖为 `sdgenic.prbac` 文件提供的值。</block>
  <block id="93b0ad4b746d264eead178d8a2c4a8cb" category="paragraph">如果您没有 `bothsdhost-name.prbac` 和 `sdgeneric.prbac` 文件，请检查在 `snapdrive.conf` 文件中定义的配置变量 ` all-access-if-rbac-unspecified _` 。</block>
  <block id="2207bbc7fa9d60d0f277d1e12bc6b438" category="paragraph">手动设置从给定主机到给定 vFiler 单元的访问控制。给定主机的访问由位于受影响 vFiler 单元根卷中的文件控制。该文件包含 ` /vol/&lt;vFiler 根卷 &gt;/sdprbac/sdhost-name.prbac` ，其中 ` host-name_` 是受影响主机的名称，由 gethostname （ 3 ）返回。您应确保此文件可从可访问它的主机读取，但不可写入。</block>
  <block id="332d7e81fa2101796b2867c5cc0f722f" category="admonition">要确定主机的名称，请运行 `hostname` 命令。</block>
  <block id="319458ab3a20b7cb04908a209f1ef6b3" category="paragraph">如果文件为空，不可读或格式无效，则 SnapDrive for UNIX 不会授予主机对任何操作的访问权限。</block>
  <block id="58f0ad70deb2c738bc7ee5b4fcbbc423" category="paragraph">手动设置从给定主机到给定 Vserver 单元的访问控制。给定主机的访问由位于受影响 SVM 单元根卷中的文件控制。此文件的名称为 ` /vol/&lt;vserver root volume&gt;/sdhost-name.prbac` ，其中 host-name 是受影响主机的名称，由 `gethostname （ 3 ）` 返回。您应确保此文件可从可访问它的主机读取，但不可写入。</block>
  <block id="1d1432a7921023620e4f23847383a7d0" category="paragraph">要在主机系统上挂载 Vserver 根卷并创建 ` * 。 prbac` 文件，请执行以下命令：</block>
  <block id="2a069fa4a409f9d42c81f4eea7102c3a" category="paragraph">` * 挂载 &lt;vservername&gt; ： / &lt;mntpoint&gt;*`</block>
  <block id="bf9e129532284da3a3f769c1e1c38069" category="paragraph">如果缺少此文件， SnapDrive for UNIX 将检查 `snapdrive.conf` 文件中的配置变量 ` 全部访问 -if-rbac 未指定 _` 。如果将变量设置为 `on` （默认值），则允许主机完全访问该存储系统上的所有这些操作。如果将变量设置为 `off` ，则 SnapDrive for UNIX 将拒绝主机对该存储系统执行由访问控制管理的任何操作。</block>
  <block id="750ef190577d40f037c687b9347581c8" category="summary">您必须将 Virtual Storage Console 配置为访问存储系统，并使用分配给存储系统的登录名和密码。</block>
  <block id="db65bdba51c4ff1f165c877221460157" category="paragraph">确保 Virtual Storage Console 安装在 VMware vCenter 所在的 Windows 系统中。</block>
  <block id="0241fe68a5b4a795e9e60e9c970f0ce5" category="list-text">在 * vCenter 主页 * 视图中的 * 解决方案和应用程序 * 下，单击 * NetApp 虚拟控制台 * 屏幕中的 * NetApp * 。</block>
  <block id="ac31ce6a238cc3e1a988bbf723565dd9" category="list-text">单击 * 备份和恢复 * ，然后单击 * 设置 * 以查看存储系统条目。</block>
  <block id="5d6624343e60b2c7c2aa4361434b26bc" category="list-text">如果没有存储系统条目，请单击 * 添加 * 以在 Virtual Storage Console 中添加所需的存储系统。</block>
  <block id="3379b09bc24e293537c46d4e38dada52" category="paragraph">此时将显示 * 添加存储系统 * 对话框。</block>
  <block id="cb5395eec3de9c0238de9c8a94ef9f68" category="list-text">在 * 添加存储系统 * 窗口中，输入存储系统的 IP 地址，用户名和密码。然后单击 * 确定 * 。</block>
  <block id="d667398314e6fbe145a44f0143907e97" category="paragraph">存储系统现在已准备好与虚拟存储控制台进行通信。</block>
  <block id="6ed7972a80a4719295f266787e3ff03c" category="paragraph"><block ref="6ed7972a80a4719295f266787e3ff03c" category="inline-xref-macro-rx"></block></block>
  <block id="229a6345fd4a47cf54b181aa6e48db3d" category="paragraph"><block ref="229a6345fd4a47cf54b181aa6e48db3d" category="inline-xref-macro-rx"></block></block>
  <block id="229cb7486449be81910bd75ecec30c5b" category="summary">如果主机设置完成，则 Linux MPIO 可以正常工作。主机设置大致分为 HBA 设置， HBA 驱动程序参数设置，多路径设置， LVM 设置和适用于 UNIX 的 SnapDrive 设置。</block>
  <block id="d4a9339f17eacf44d37d612a9961d8e6" category="doc">多路径设置</block>
  <block id="a0cc5503645337df1f4d122732e5d7c3" category="summary">您必须清理子操作系统以及 ESX 服务器中的 RDM LUN 。</block>
  <block id="a211fade2f304625fd109895933f7f5e" category="doc">清理子操作系统和 ESX 服务器中映射的 RDM LUN</block>
  <block id="f471ef936430df42744845964a4d85e1" category="section-title">清理子操作系统中映射的 RDM LUN</block>
  <block id="b5670a61ae9d733becd5c9d5fe3432f4" category="paragraph">必须在子操作系统中执行以下步骤。</block>
  <block id="86afb24ed6320727cde55cc75ee742df" category="list-text">从 * vCenter * 导航窗格中，选择执行 RDM 映射的虚拟机。</block>
  <block id="0162771adf85a17c22e53f5d58953574" category="list-text">右键单击虚拟机并关闭子操作系统。</block>
  <block id="1229fd2babe67791c8fdc65aab847e87" category="list-text">右键单击虚拟机并选择 * 编辑设置 * 。</block>
  <block id="01615bd1b20ea4080ed2cbbe82670278" category="paragraph">此时将显示 * 虚拟机属性 * 对话框。</block>
  <block id="aae57798a82a6fb67e49d26f2cea34db" category="list-text">在 * 虚拟机属性 * 对话框中，选择 * 硬件 * 选项卡。</block>
  <block id="8d164ea30944e8731f1260a269c20f48" category="paragraph">对于每个 RDM 条目，您会发现整个 RDM 映射条目均为映射的原始 LUN 。</block>
  <block id="64107571b93ca883481705bfc84d7708" category="list-text">选择 RDM 映射条目，然后单击 * 删除 * 。</block>
  <block id="c7d3967361a27639e2b9bb2ac9594293" category="paragraph">右窗格中将显示 * 删除选项 * 。</block>
  <block id="16da29012f6d4d361369ec1d845356c9" category="list-text">在 * 删除选项 * 中，选择 * 从虚拟机中删除并从磁盘中删除文件 * 。</block>
  <block id="a72cc47fad7d1846d19b085d2e77e5ba" category="list-text">单击 * 确定 * 。</block>
  <block id="fa32bcb3a975fcb8c0d64f01930fdcfe" category="paragraph">所有 RDM 映射条目都会从子操作系统中删除。</block>
  <block id="6570a9b9bc9ef06a4ddadb00ee7cd7d9" category="paragraph">从子操作系统中删除 RDM LUN 条目后，您需要从 ESX 服务器中删除这些条目。</block>
  <block id="1e6d83c2c8c41cc757aa25c167307f02" category="section-title">清理 ESX 服务器中映射的 RDM LUN</block>
  <block id="69979bd370defa06b36812760cbfd1c6" category="paragraph">要彻底清理 ESX 服务器中的所有 RDM LUN 条目，必须由 ESX 服务器管理员执行以下步骤。</block>
  <block id="869d5dd4750dbae78cf990411c0a65ee" category="paragraph">在处理虚拟机目录之前，请关闭虚拟机。</block>
  <block id="728ed43cede1f731bef1dbff54e5d505" category="list-text">转到虚拟机目录。</block>
  <block id="ead3e312fafa55098904da838a6751a0" category="list-text">切换到目录 `cd /vmfs/volumes/Data store path` 。</block>
  <block id="b312d00483b56ce3aeac16f987535556" category="paragraph">此处列出了所有文件和目录。</block>
  <block id="3f7b9c48be589cd6843b28f3e0f53e55" category="list-text">选择虚拟机所在的相应数据存储库。</block>
  <block id="1222694ae8e3d531f8232f47f1f422de" category="list-text">将目录更改为数据存储。</block>
  <block id="102ff1e56af78a55804b0e24f546cc56" category="paragraph">此时将显示虚拟机目录。</block>
  <block id="892d4beee6a063aa6191d93113161d8d" category="list-text">将目录更改为要清理 RDM LUN 映射的虚拟机。</block>
  <block id="64ac2c698f26e548dc631418f113574b" category="paragraph">所有文件都会列在虚拟机目录中。</block>
  <block id="07393325fdd2e4c900b0c8f0f4a6228f" category="list-text">删除所有嵌入了 SMVI 字符串的 `vmdk` 文件。或者，您也可以使用 LUN 名称来标识 `vmdk` 文件。</block>
  <block id="4f6ad3560d0db9d0159e67745dad1b5a" category="paragraph">或者，您也可以使用 LUN 名称来标识 `vmdk` 文件。</block>
  <block id="952141d917b2a169e72c3728ab6590a1" category="paragraph">如果您的 `vmdk` 文件名称为 ` _rdm1_` ，请仅删除 ` _rhel4u8-141-232_smvi_vol_esx3u5_rdm1-rdmp.vmvmvmdk` 和 ` rhel4u8-141-232_smvi_vol_esx3u5_mvmvm_` 文件。</block>
  <block id="69f934e8e0fbda20e9100029b7ce8993" category="paragraph">删除 ` _vlnx5U4-197-23_smvi_10.72.197.93_C4koV4XzK2HT_22-rdmp.vmdk_` 和 ` _vlnx5U4-197-23_SMVI_10.72.197.93_C4koV4XzK2HT_22.93.vmdk_VM_v4_v_v4.5_v_v4.5_v_v4.5_v4.5_v4.5_v4.5_v_v4.9_v4.5cv_v_4.9_v4.5cv_v4.9_4.c4_v_v4.v_4.`</block>
  <block id="0a686de81e51eb90dc1fe2140f625c5c" category="list-text">同时，从虚拟机配置文件（`vmx` ）中删除 `vmdk` 文件条目。</block>
  <block id="ac3df85ab29f0b3788a73e817ad9d6f4" category="paragraph">以下是从 `vmx` 文件中删除 `vmdk` 文件条目的示例。</block>
  <block id="496ee322ba138fdbc777e5ab2e30145e" category="cell">* 名称 *</block>
  <block id="f14c276c07197ebef1394a5a219087a1" category="cell">* 问题描述 *</block>
  <block id="3655b6c59bec2a1165b5afa8dd2c8b31" category="paragraph">` rhel4u8-141-232_`</block>
  <block id="f023adbf4f1d008bc257a28173c0df16" category="paragraph">虚拟机的名称</block>
  <block id="ca6c48133eccc40afcad808b45e12191" category="paragraph">` _smvi_`</block>
  <block id="2e366b6a213d0aed135f7f979179ea9b" category="paragraph">指示此 vmdk 文件由 SnapManager 为虚拟基础架构服务器创建</block>
  <block id="b20058b0290e9e2932f65e23648d79e4" category="paragraph">` vol_esx3u5_`</block>
  <block id="a45d0db4425a782bbd3d2d41914cd1d0" category="paragraph">创建 LUN 的卷的名称</block>
  <block id="448079d0b861734e75a508bade09fb5a" category="paragraph">` _ rdm1_`</block>
  <block id="c5036da7746e8773f220ab2265a236e6" category="paragraph">` _rdmp_`</block>
  <block id="290705468f2321e9312176098f6c5e08" category="paragraph">表示此 LUN 在物理上兼容</block>
  <block id="cf40f5cbf886bcf67abfc36a9eb03805" category="paragraph">` _vmdk_`</block>
  <block id="7cec1bf7508ac54bd0e84329bea53230" category="paragraph">虚拟机磁盘文件</block>
  <block id="29ca080e4b49a72643bf0ce82c3c8f55" category="list-text">删除上例中指定的条目，包括引号和逗号，但 ` _scsi3 ： 1.present_` 条目除外，您应将该条目从 ` _true_m` 更改为 ` _false_` 。</block>
  <block id="f8e83e9cc7ffb6b77df9b549a95fe9ed" category="list-text">保存并退出文件。</block>
  <block id="98ac83cff9624b1e2d769d4724fe58cd" category="list-text">打开虚拟机。</block>
  <block id="a73a611a068e5b01d2da0d2787f94c34" category="summary">SnapDrive for UNIX 支持卷迁移，通过此迁移，您可以无中断地将卷从同一控制器中的一个聚合移动到另一个聚合，以提高容量利用率，提高性能并满足服务级别协议的要求。在 SAN 环境中， FlexVol 卷和卷中的 LUN 会无中断地从一个聚合移动到另一个聚合。</block>
  <block id="eb8ed689bf2b0a87e996a75e6ad3f2bd" category="doc">支持卷迁移</block>
  <block id="dcdaddeb48e8611c1c6d3aff6644b38b" category="paragraph">要执行 SnapDrive 操作，您必须在 `snapdrive.conf` 文件中设置 ` _volmove-cutover-retry-re尝试 _` 和 ` _volmove-cutover-retry-leep_` 变量。</block>
  <block id="0fa0071d4364b9114c15a5d2758f2577" category="inline-link">《 ONTAP 9 逻辑存储管理指南》</block>
  <block id="87fcc71f88478eb81d06fbf47e4f39bb" category="paragraph"><block ref="87fcc71f88478eb81d06fbf47e4f39bb" category="inline-link-rx"></block></block>
  <block id="07dbedb35b3139fb50f031a158b7152d" category="summary">AutoSupport 消息包含以下信息。</block>
  <block id="662e167c420b91ac4a9e3384137865c3" category="doc">AutoSupport 消息的内容</block>
  <block id="f29b64878eea3dde13747d06d7524bfa" category="list-text">事件源</block>
  <block id="1be7f4094822039b4634c93c23dd7efb" category="list-text">事件 ID</block>
  <block id="b3570576ec22e966fa59d784816f82aa" category="list-text">适用于 UNIX 的 SnapDrive 版本</block>
  <block id="228dfa4ba9d9a6761dcb1aa47f2bc316" category="list-text">消息状态：日志级别消息，例如 1 表示警报， 2 表示严重， 3 表示错误， 4 表示警告， 5 表示通知， 6 表示信息， 7 表示调试</block>
  <block id="dae4a538d4ca7b6c0789932062fe718d" category="list-text">主机名</block>
  <block id="1af248136829615eac4fb39a00df1558" category="list-text">主机操作系统</block>
  <block id="95b3ea9f6f001edbf1e6fc3414c57aa7" category="list-text">主机操作系统的版本</block>
  <block id="f1e8f27c2ae7a8687dfeb19fa7e78a3e" category="list-text">存储系统的名称</block>
  <block id="5fd53260d07ac134749afbd4ac96162e" category="list-text">使用 Protection Manager/ 基于角色的访问控制</block>
  <block id="ef5c993d99e72bba09bfc0eea8acd6de" category="list-text">错误类别</block>
  <block id="88eab3f3a482148d9a96b4e4a28418ce" category="list-text">AutoSupport 将消息条目标记为 false</block>
  <block id="193fc76a5c1c33c3c0791c9daf69cb18" category="list-text">主机多路径类型：将记录在 `snapdrive.conf` file 中配置的值。如果由于配置值不正确而未加载此助手，则不会记录任何主机多路径类型。</block>
  <block id="1a7e48e17a82e9be4d6186fb47390959" category="list-text">主机虚拟化已启用：此功能仅适用于 VMware 子操作系统。</block>
  <block id="7f8db558bd7d983c884311c6f2e1339c" category="list-text">protocol ：在 `snapdrive.conf` 文件中为 `default-transport` 配置的值。</block>
  <block id="8dea89d135a6d34359044756c9d43f95" category="list-text">保护已启用：如果 OnCommand Data Fabric Manager （ DFM ）配置了适用于 UNIX 的 SnapDrive ，则会记录值是。</block>
  <block id="305d1d75241ed8801c26acf5d2a9a624" category="admonition">SnapDrive for UNIX 不会验证是否正在使用 OnCommand DFM 。</block>
  <block id="a23bdb7be179b3565daf84dce6f1eec2" category="paragraph">运行 SnapDrive storage show -all` 命令时，可以使用以下追加信息：</block>
  <block id="9c72aace1e9e33cfec337eb24e695f7c" category="list-text">协议类型（ FCP/iSCSI ）：用于创建 LUN 的协议（如果有）。</block>
  <block id="fc927ec7811357ff1c71eb79c8cd1b67" category="list-text">已连接的 LUN 数量</block>
  <block id="598f57f562510141c18d98fe2db3e001" category="list-text">磁盘或卷组的数量</block>
  <block id="948722e76a2e2e412a407fee3560709f" category="list-text">文件规范的数量</block>
  <block id="57598218044271c48692977a6aee88c7" category="list-text">主机卷的数量</block>
  <block id="0c5382ff00b60d5846b0871545f64722" category="admonition">如果在 SnapDrive for UNIX 中启用了 AutoSupport ，则在发生任何操作失败时，事件管理系统（ Event Management System ， VM ）存储系统中会记录错误消息。如果错误消息包含任何特殊字符，例如（ &lt; ， &gt; ， &amp; ， ' ， " ， \r ），在存储系统的 EMS 日志视图中会显示格式错误的值。</block>
  <block id="5f02a12468b8758f66dd09d3340564c4" category="summary">您必须了解适用于 UNIX 的 SnapDrive 配置选项并了解如何使用适用于 UNIX 的 SnapDrive 。</block>
  <block id="5dbbb956b0d42c26fdf4fb9ab4e79d51" category="doc">适用于 UNIX 的 SnapDrive 配置</block>
  <block id="9f3eb9c1bb62824aabfa909ac3026849" category="summary">使用 SnapDrive for UNIX 时，您必须了解可能会影响您环境的某些限制。</block>
  <block id="e646e16bee8b32e6ea29e30d01970a6c" category="doc">限制</block>
  <block id="39f79cd09e9d7a45e6715c94b3625942" category="section-title">一般限制</block>
  <block id="58ccc362be28e86349bfdecdc909c15f" category="list-text">SnapDrive for UNIX 要求 VM 在启动期间使用 BIOS ，以获得 SnapManager for Virtual Infrastructure （ SMVI ）支持。不支持使用统一可扩展固件接口（ Unified Extensible Firmware Interface ， UEFI ）。</block>
  <block id="cd5ee0e59db662135368e604a64109f9" category="list-text">SnapDrive for UNIX 不支持子操作系统中 RDM （原始设备映射）环境中的 MetroCluster 配置，因为虚拟存储控制台（ VSC ）不支持 MetroCluster 配置。</block>
  <block id="99d30bb50635c80c0d442ede1b93054c" category="list-text">如果使用 Kerberos 安全身份验证类型 krb5 ， krb5i 或 krb5p 导出卷，则 SnapDrive for UNIX 不支持在 NFS 挂载点上执行 Snapshot 操作。</block>
  <block id="27fa66449ed6536392de4adba86ce701" category="list-text">如果在挂载点执行快照还原操作时挂载的实体与在 Snapshot 副本中创建的实体不同，则快照操作可能不一致。</block>
  <block id="278741913e010e46854a6f2f8b601b97" category="list-text">如果文件规范或 LUN 位于 7- 模式 Data ONTAP 和集群模式 Data ONTAP 存储系统中，则 SnapDrive for UNIX 不支持对这些规范或 LUN 执行操作。</block>
  <block id="99746d8e55abdc902c95ccd986c69ef4" category="list-text">如果您使用集群模式 Data ONTAP 为 Storage Virtual Machine （ SVM ）配置 SnapDrive for UNIX ，请检查 SVM 的 LIF 的 IP 地址是否已映射到 DNS 或 ` /etc/hosts` 文件中的 SVM 名称。</block>
  <block id="11f01f113d3a64fe6fb839ad594969ec" category="paragraph">您还必须使用 SnapDrive config setvsadminVserver name` 命令检查是否已在适用于 UNIX 的 SnapDrive 中配置 SVM 名称。</block>
  <block id="90f1897c584b61945f183468d51bc399" category="list-text">在执行 VBSR 操作后， SnapDrive for UNIX 会将 qtree 的挂载点权限从非 root 用户修改为 root 用户。</block>
  <block id="9779953aef9e982e36ff06bc120b1432" category="list-text">SnapDrive for UNIX 不支持非英语环境。</block>
  <block id="4cfae28ebc2162e8c711b2bbbec56cff" category="list-text">如果从 LUN 移动到另一个卷之前创建的 Snapshot 副本还原快照还原，则快照还原操作将失败。</block>
  <block id="7db393007a77c988c001152cac7307d5" category="list-text">如果您使用的是 ONTAP 8.2 或更高版本，则如果正在进行的克隆操作使用同一个 Snapshot 副本，则对 Snapshot 副本执行的 Snapshot 操作可能会失败。</block>
  <block id="2e1c94c40bcba808685a2f14e77b1cdc" category="paragraph">您必须稍后重试此操作。</block>
  <block id="8a2fe0ddc178467588b7a2a2179a069a" category="list-text">OnCommand Unified Manager 6.0 或更高版本在集群模式 Data ONTAP 上不支持 Protection Manager 。因此，不支持 OnCommand Unified Manager 6.0 或更高版本与 SnapDrive for UNIX 之间的集成，也不支持以下 SnapDrive for UNIX 功能：</block>
  <block id="87a3c9648b90c8a3a7e529c6781990ee" category="list-text">基于角色的访问控制（ Role-Based Access Control ， RBAC ）与 ONTAP 上的 OnCommand Unified Manager 6.0 或更高版本集成</block>
  <block id="75d643bda2d62d328517e4ca50a9b3c4" category="list-text">Protection Manager 与 ONTAP 上的 OnCommand Unified Manager 6.0 或更高版本集成</block>
  <block id="7a3c7af8e29568f950d34236519f253b" category="list-text">您必须将包含 SVM 卷的聚合分配给 SVM 的聚合列表，以配置 SVM 并执行 SnapDrive for UNIX 操作。</block>
  <block id="96fb4c18f32f8d30b44e0c9d4cdd480e" category="list-text">SnapDrive for UNIX 不支持自动挂载，使用任何类型的自动挂载可能会导致发生原因 SnapDrive for UNIX 操作失败。</block>
  <block id="d35be12c4f0eb4a3a386f758cf1f89c5" category="section-title">Linux 上的限制</block>
  <block id="ed103c0bad913a2a655bd55d0d5877c3" category="list-text">在多路径环境中， SnapDrive snap list-v` 或 SnapDrive snap show-v` 操作不会显示原始 LUN 中的开发路径，而在未涉及主机 LVM 的情况下， SnapDrive storage show-all` 操作不会显示原始设备和挂载点。</block>
  <block id="a3734673a12a2713a67ba465fbf8586d" category="list-text">如果 SnapDrive for UNIX 的别名包含特殊字符 "` - ` " ，则该别名不会显示完整的别名。SnapDrive for UNIX 在别名中仅支持 "` _` " 特殊字符。</block>
  <block id="68e4fc83ca33ccfc7011568f9b09d45f" category="list-text">SnapDrive LUN 环境不支持 RDM config prepare lun` 命令。</block>
  <block id="fe3a7aefb0c3fa8dff13af78b23c15af" category="list-text">子操作系统不支持 SnapDrive lun fixpaths` 命令。</block>
  <block id="f4eb5507a12e1f2ab7802e82d01aac6f" category="summary">下表提供了使用 SnapDrive storage disconnect 命令时需要提供的信息。</block>
  <block id="77c75d516aa45cab1ecc9c4487c992ca" category="doc">使用 SnapDrive storage disconnect 命令所需的信息</block>
  <block id="e5cf54a597fdb41625a40480c0a09995" category="paragraph">下表提供了使用 SnapDrive storage disconnect` 命令时需要提供的信息：</block>
  <block id="1f8a976c67e0040bd7cde35e885ef523" category="paragraph">根据您输入的命令，您可以从以下任意位置删除映射：</block>
  <block id="a2bc3d3a36ccc9e7c951d54d629ff878" category="paragraph">如果断开一个或多个 LUN 的连接，则第一个参数必须使用长形式的 LUN 名称，此名称用于指定存储系统名称，卷名称以及卷中 LUN 的名称。</block>
  <block id="9b2b09330ef384aada27f523c6102df4" category="list-text">LUN 上的文件系统</block>
  <block id="a84a32ed565db59b973682cc089d9382" category="paragraph">为 ` -FS` 指定的 `file_specs` 是文件系统挂载点的名称。SnapDrive for UNIX 会自动查找并断开与指定文件系统关联的 LUN 。</block>
  <block id="3edfe155952b481b995e61882a735d7c" category="list-text">磁盘或卷组上的文件系统</block>
  <block id="514875590ddc3711813524511f3da467" category="paragraph">为 file_spec. 参数输入的值必须标识要断开连接的存储实体。</block>
  <block id="5a12a00b54230c0ea55d0c2e25c98334" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` -vg _file_spec_ ）</block>
  <block id="b2d1d039bd0f5eedac6c574923e5a075" category="paragraph">磁盘或卷组的名称</block>
  <block id="a7c6021d48778593508aed1e3f32e58f" category="paragraph">主机或逻辑卷的名称</block>
  <block id="d4e98a3f3a12cdef0ed64a3c2fd4ed08" category="paragraph">如果您希望 SnapDrive for UNIX 断开您指定的存储，即使您在命令提示符处包含具有其他实体（例如具有一个或多个主机卷的磁盘组）的主机端实体，也可以在命令提示符处包含 ` -full` 选项。</block>
  <block id="2a1592f5bcfc63676802ca6fa20f8adb" category="paragraph">如果不包含此选项，则只能指定空的主机端实体。</block>
  <block id="226d75f98c4433418d61f12d885ab3aa" category="paragraph">如果要禁止节点或主机集群共享文件系统，请执行此操作</block>
  <block id="18ef39e005c22d8b4c091d01c36940ba" category="summary">SnapDrive for UNIX 允许您在多个存储系统卷上执行许多存储操作，前提是这些操作不会操控逻辑卷管理器（ LVM ）。这样，您就可以使用多个存储系统卷中的 LUN 列表。</block>
  <block id="1093129f649521a2a05b27ea1821f788" category="doc">跨多个存储系统卷的存储操作</block>
  <block id="273913bc1624ab5a71bb5c69d6088a39" category="paragraph">SnapDrive for UNIX 允许您在多个存储系统卷上执行许多存储操作，前提是这些操作不会操控逻辑卷管理器（ LVM ）。这样，您就可以使用多个存储系统卷中的 LUN 列表。</block>
  <block id="b56c2830795a33ca8307dabd045c4427" category="summary">SnapDrive for UNIX 会分配一个默认守护进程密码，您可以稍后更改该密码。此密码存储在一个加密文件中，其中只会为 root 用户分配读取和写入权限。更改密码后，必须手动通知所有客户端应用程序。</block>
  <block id="8321483b3f0c14b3ce52a4de8e33fba3" category="doc">更改默认守护进程密码</block>
  <block id="747604b8d5b73b719b46a675f300ab0b" category="paragraph">您必须以 root 用户身份登录。</block>
  <block id="e84f02f864ea78b4d4f6679c73ad8842" category="list-text">更改默认密码：</block>
  <block id="aa3f94a3942c8fb855b2071d3b365df1" category="paragraph">` * 快照密码 *`</block>
  <block id="1a411806f1f54597b7259137d2e753db" category="list-text">输入密码。</block>
  <block id="a6c0b6a2a24a0c1b8eae5c86ec89d045" category="list-text">确认密码。</block>
  <block id="dd83098dff20e30ed8c02fbfc0bb0caf" category="summary">如果 SnapDrive for UNIX 操作因配置问题而失败，则以太网光纤通道 \ （ FCoE\ ）环境中可能会遗留陈旧设备。这些陈旧设备不会自动删除，因此您需要了解临时解决策。</block>
  <block id="e872bee631c43ec5dba76e4072c53489" category="doc">SnapDrive for UNIX 不会自动删除 UNIX 中陈旧的设备</block>
  <block id="5a189249dbb17250a2edcbba756824d9" category="paragraph">如果 SnapDrive for UNIX 操作因配置问题而失败，则以太网光纤通道（ FCoE ）环境中可能会遗留陈旧设备。这些陈旧设备不会自动删除，因此您需要了解临时解决策。</block>
  <block id="bfca9bea2821c8b14047a6ea9cb93439" category="paragraph">运行供应商提供的原生重新扫描脚本以删除所有旧条目，或者使用 SG3 软件包附带的 `rescan-scsibus.sh -r` 命令运行重新扫描脚本。</block>
  <block id="e89ed338b11202ee376cf01516b5266a" category="summary">基于卷的 SnapRestore \ （ VBSR\ ）将还原卷及其所有存储对象。基于卷的还原速度快于单独还原的每个存储对象。VBSR 还可与 FlexClone 卷和 vFiler 配置配合使用。适用于 vFiler 的 VBSR 适用于 Data ONTAP 7.3 及更高版本。</block>
  <block id="3ad3837e63d7dcdbe6dff93e91320419" category="doc">什么是基于卷的 SnapRestore</block>
  <block id="f26506a68d731dd1adb372f091fe59e5" category="paragraph">基于卷的 SnapRestore （ VBSR ）可还原卷及其所有存储对象。基于卷的还原速度快于单独还原的每个存储对象。VBSR 还可与 FlexClone 卷和 vFiler 配置配合使用。适用于 vFiler 的 VBSR 适用于 Data ONTAP 7.3 及更高版本。</block>
  <block id="d02da480b0d2753f8f1eba88774df013" category="paragraph">SnapDrive 3.0 for UNIX 及更早版本可以从应用程序一致的快照还原主机端实体（例如文件系统，磁盘组和主机卷）的 LUN ，或者通过 NFS 创建的正常文件。SnapDrive for UNIX 使用在 Data ONTAP 中实施的单文件快照还原 SFSR 。SFSR 的工作原理如下：</block>
  <block id="70f79a82b2068f8ad978b0c678c9b973" category="list-text">对于正常文件，在 SFSR 进行期间，尝试更改此文件的任何操作都会暂停，直到 SFSR 完成为止。</block>
  <block id="e5f218d397f4c569ff3ac620fb86a2e6" category="list-text">对于 LUN ，当 SFSR 继续运行时， LUN 可用，并且允许 I/O （读取和写入）。正常文件和 LUN 的 SFSR 可能需要很长时间，具体取决于 LUN 的大小或要还原的文件。</block>
  <block id="1c8d21f301d0650fb8b7aa2d8a2822d0" category="paragraph">因此，对于某些环境， SFSR 是一种障碍。</block>
  <block id="c641566c15c42cfbff0d4951cda40c49" category="paragraph">SnapDrive 4.0 for UNIX 及更高版本可用于创建基于卷的 Snapshot 副本。VBSR 速度更快，所需的 CPU 和存储资源更少。它会还原活动文件系统上的所有数据。如果用户希望从同一 Snapshot 副本还原卷上的所有 LUN 或正常文件，则可以使用此功能。</block>
  <block id="2ac0cf4b4afbfc1b84ad697ccb5659e2" category="paragraph">应谨慎使用基于卷的 Snapshot 副本，因为在用于还原操作的卷 Snapshot 副本之后创建的所有 Snapshot 副本都将被删除。必须删除在此卷上创建的所有新文件和新 LUN 。</block>
  <block id="9941e7b0359ff891992554c3162f0ae9" category="summary">以下输出显示了在存储系统由多个 Operations Manager 控制台管理时您可能会收到的错误消息。</block>
  <block id="79229c1c99fee80498ded58d8b4eb3a7" category="doc">使用多个 Operations Manager 控制台服务器管理存储系统的操作</block>
  <block id="9111a71abb1eb276cdd48cc41fe1f14c" category="paragraph">storage_array1 由 ops_mngr_server1 管理， storage_array2 由 ops_mngr_server2 管理。unix_host 的管理员无权在 storage_array1 和 storage_array2 上创建文件名。在上述示例中， SnapDrive for UNIX 将显示用于确定访问权限的 Operations Manager 控制台。</block>
  <block id="0185957acce6928a27617c00fc21c4bd" category="summary">SnapDrive for UNIX 为 SnapDrive storage create 命令提供了一些基本格式，以便于创建所需的存储。存储创建操作分为多个常规类别。</block>
  <block id="e5a5292f83ae128a860af898ac0832b7" category="doc">创建存储的方法</block>
  <block id="1f4a8d53573db17503a127ee75a9e93c" category="paragraph">SnapDrive for UNIX 为 SnapDrive storage create` 命令提供了一些基本格式，以便于创建所需的存储。存储创建操作分为多个常规类别。</block>
  <block id="acef79c29217a16bf1e874c6460df450" category="list-text">创建 LUNs--lun storage create` 命令会自动在存储系统上创建 SnapDrive ，但不会创建任何其他存储实体。SnapDrive for UNIX 将执行与主机准备和为每个 LUN 创建存储发现以及映射和连接相关的所有任务。</block>
  <block id="b1303ff56583208710bcdabe77a851fb" category="list-text">直接在 LUN 上创建文件系统并自动设置 LUN — SnapDrive for UNIX 将执行设置文件系统所需的所有操作。您无需指定任何 LUN 即可创建它。</block>
  <block id="2149c07529228a4198d6e590aed3ce52" category="list-text">直接在 LUN 上创建文件系统并指定要与其关联的 LUN —在这种情况下，您可以使用 SnapDrive storage create` 命令指定要设置的文件系统以及要与文件系统关联的 LUN 。</block>
  <block id="7b46f3e20ed6fe086770ce732bf3eec9" category="list-text">创建 LVM 并自动设置 LUN —使用 SnapDrive storage create` 命令可以在主机上创建文件系统，逻辑卷或磁盘组。SnapDrive for UNIX 会执行设置实体所需的所有操作，包括自动创建所需的磁盘组和 LUN 。您无需指定任何 LUN 即可创建它。</block>
  <block id="535575cafb767761f2bcfc782a1d575b" category="list-text">在主机上创建 LVM 实体并指定要与其关联的 LUN — 在这种情况下，您可以使用 SnapDrive storage create` 命令指定要设置的实体（文件系统，逻辑卷或磁盘组）以及要与该实体关联的 LUN 。</block>
  <block id="3768e0b04d83154ddb94477d257a1b07" category="list-text">在主机集群环境中的共享主机上创建文件系统—在这种情况下，您可以在共享主机上创建文件系统，逻辑卷或磁盘组。</block>
  <block id="568c3ff54aa293727466fa71bb33653d" category="summary">本章提供有关 SnapDrive for UNIX 命令，格式，选项，关键字和示例的信息。</block>
  <block id="d51e1b182cdfc839d3ea459ee5e93f2e" category="doc">收集 SnapDrive for UNIX 命令所需的信息</block>
  <block id="fa41f59ff252e76de18394220da01c9e" category="summary">SnapDrive storage resize 命令仅适用于存储系统磁盘组和卷组。如果要增加主机卷或文件系统的大小，必须使用 LVM 命令。</block>
  <block id="aee762269fa958f03def233a578bfcb9" category="doc">主机卷和文件系统大小调整操作</block>
  <block id="a620f22a65ca8d127c924accd62921a4" category="paragraph">SnapDrive storage resize` 命令仅适用于存储系统磁盘组和卷组。如果要增加主机卷或文件系统的大小，必须使用 LVM 命令。</block>
  <block id="498bb49a2d131621a710fc6505700d07" category="paragraph">下表总结了可在不同平台上使用的 LVM 命令。有关这些命令的详细信息，请参见其手册页。</block>
  <block id="8acbcc0895cb6b6e455362c1e4d97d60" category="cell">* 卷管理器 *</block>
  <block id="5ca30129221a9e692c8cd4da81214e85" category="cell">* 主机卷 *</block>
  <block id="5540d4e7152b674cbe9715b774c0128f" category="cell">* 文件系统 *</block>
  <block id="79108baeeebee1e7e29495491c9d6366" category="paragraph">LVM</block>
  <block id="f4e47385c73d9210038f4b9b2b16b98c" category="paragraph">`lvextend`</block>
  <block id="96b6513caf6dbba6f5a2b95d54f61faf" category="paragraph">`resize2fs`</block>
  <block id="270cd825127d1e890d7a1c61392deddd" category="summary">与 SG3_utils 软件包捆绑的重新扫描脚本 /usr/bin/rescan-scsi-bus.sh 无法在运行 Red Hat Enterprise Linux 6.6 及更高版本的 SnapDrive for UNIX 中添加新映射的 LUN 。</block>
  <block id="99a2856361e1ded7a5ede92c51927bdd" category="doc">SnapDrive 无法在 RHEL 6.6 及更高版本中添加新映射的 LUN</block>
  <block id="d5c77223d08e25b2bfc9a88bf7789195" category="paragraph">与 SG3_utils 软件包捆绑的重新扫描脚本 ` /usr/bin/rescan scsi-bus.sh` 无法在运行 Red Hat Enterprise Linux 6.6 及更高版本的 SnapDrive for UNIX 中添加新映射的 LUN 。</block>
  <block id="5447349ed1b0a2561ce98d58d1d4812c" category="list-text">在 ` /root` 目录中创建一个名为 `dvory-lun-rescan .sh` 的文件，并为该文件提供完全权限。</block>
  <block id="ef48a9a6225ad1ed5d2be436f64e4247" category="list-text">将命令 ` /usr/bin/rescan-scsi-bus.sh -a -r` 添加到 `dvory-lun-rescan.sh` 文件中。</block>
  <block id="265883a1b6dd7d4d47b4fbf50c326f7d" category="summary">如果 SnapDrive snap connect 命令失败，并显示 iscsi64 SnapDrive 0001-666 致命错误，请参见下面的临时解决策。</block>
  <block id="1f7793553367b04bd3d2aecc10145ffb" category="doc">收到错误 iscsi64 SnapDrive ： 0001-666 致命错误</block>
  <block id="24ea4c98301a6b55636e513d5e75a997" category="paragraph">如果您的 SnapDrive snap connect` 命令失败，并显示 `iscsi64 SnapDrive ： 0001-666 致命错误` ：，请参见下面的临时解决策。</block>
  <block id="8ce1ddf2b405e74b7e6de3b69e839ad3" category="list-text">如果尚未指定筛选器，请将 `filter =` "r=/dev/ccis/.*"] ` 作为第一个筛选器添加到` /etc/lvm/lvm.conf 文件中。</block>
  <block id="770eb7eaa4fb099daf593cc1b7e92ad8" category="list-text">删除 ` /etc/lvm/.cache` 和问题描述 `pvscan` 以确认 ` /dev/cciss/*` 条目均未显示。</block>
  <block id="638de090a8f611dbd33cf14a40fc48d7" category="summary">在脚本中使用退出状态值来确定 SnapDrive for UNIX 命令是否成功。</block>
  <block id="c74b8de98cfa223b930de53245cd133e" category="doc">使用退出状态值</block>
  <block id="d5ebe59a183be5f129d784a4fc431e01" category="list-text">值为零表示命令已成功完成。</block>
  <block id="94b1fb9cf50eeb3a1e25dfcc485b4005" category="list-text">如果值不为零，则表示命令未完成，并提供有关发生原因和错误情况严重性的信息。</block>
  <block id="8a2c0afc0149e00072f55d588b70d54e" category="summary">要使用 SnapDrive storage disconnect 命令删除指定 LUN 的映射，请使用以下语法。</block>
  <block id="3742dd9439e5dbbed1384e8f01945d7a" category="doc">用于从主机断开 LUN 连接的命令语法</block>
  <block id="1c46c9ee4dd220044104ee7c174423d6" category="paragraph">要使用 SnapDrive storage disconnect` 命令删除指定 LUN 的映射，请使用以下语法：</block>
  <block id="ac9cbffeb73ae9526d123b245464f698" category="paragraph">SnapDrive storage disconnect -lun long_lun_name LUN_name...]``</block>
  <block id="abb7a7a89d749715ea5de6887e2ccb8c" category="summary">SnapDrive 数据收集实用程序是一个故障排除工具，用于收集信息以诊断问题。</block>
  <block id="f7659e3c98e05fc72566bc690e5d9318" category="paragraph">SnapDrive for UNIX 提供了一个数据收集实用程序（ SnapDrive.dc ），用于收集有关 SnapDrive for UNIX ， SnapDrive 配置检查程序和系统设置的诊断信息。</block>
  <block id="44b928a0abc376cbacd73b427cd75ced" category="summary">要运行数据收集实用程序，您需要完成几个步骤。</block>
  <block id="b28304868b85987f282c2f86d0485e4a" category="doc">正在执行数据收集实用程序</block>
  <block id="0a56404f6dc5b9ce2ba0e0fafbe5c10d" category="list-text">更改为 SnapDrive for UNIX 诊断目录。路径为： `install_directory/diag`</block>
  <block id="e047186826eae542f74cae2815b2279c" category="paragraph">`install_directory` 是主机操作系统的 SnapDrive for UNIX 安装目录。此目录可能因主机操作系统而异。</block>
  <block id="065cda062e77638d55c6e3eee34360db" category="list-text">在命令提示符处，输入以下命令：</block>
  <block id="82e95f93a4958f098a2567fab1e931cc" category="paragraph">` * SnapDrive.dc （ -d 目录） [-n file_name] （ -f） *`</block>
  <block id="32e4b03870208e8a31f6bc64117026e6" category="paragraph">` -ddirectory` 指定此实用程序创建的压缩文件的位置。默认位置为 ` /tmp/netapp` 。</block>
  <block id="aff611dcf48ebaedc501b8e567a95820" category="paragraph">` -nfile_name` 指定要包含在目录和压缩输出文件的名称中的字符串。如果您为此参数提供了一个值，则 `snapdrive.dc` 实用程序将创建一个名为 `ntap_SnapDrive_name` 的目录和一个名为 `ntap_SnapDrive_name.tar.Z` 的文件名，默认路径名称为 ` /tmp/netapp/ntap_SnapDrive_info.tar.Z`</block>
  <block id="b456d8f566ebc6cb34f0e6b2c21f2537" category="list-text">将 `diDirectory /ntap_SnapDrive_name.tar.Z` 文件发送给 NetApp 技术支持进行分析。</block>
  <block id="d6b271960156ca3b1c9027118fa3caec" category="summary">通过 SnapDrive for UNIX ，您可以控制每个主机对主机所连接的每个存储系统的访问级别。</block>
  <block id="5e94442ebc2adf8ea96e176e39733874" category="doc">SnapDrive for UNIX 中的访问控制</block>
  <block id="6546d8c68c1c3401b1494b4d8f1e4e57" category="paragraph">SnapDrive for UNIX 中的访问级别指示当主机面向给定存储系统时允许执行的操作。除了 show 和 list 操作之外，访问控制权限可能会影响所有 Snapshot 和存储操作。</block>
  <block id="f744b08b3f4faab325b641ec29710e4f" category="summary">您可以连接包含多个存储实体的 Snapshot 副本。</block>
  <block id="900bd5e93d5421e71559305e1832b9e3" category="doc">连接多个存储实体</block>
  <block id="a2c57b15bc4feddaa7bf92d4335b3b91" category="paragraph">要连接包含驻留在多个目标存储系统上的存储实体的 Snapshot 副本，必须满足以下要求：</block>
  <block id="69ccb089398a6d283a8d0467184983a0" category="list-text">您必须将 SnapDrive.conf 文件中的 ` snapmirror-dest-multily-filervolums-enabled_` 变量设置为 "`on` " 。</block>
  <block id="b597300a0846bef1140477d8cea43870" category="paragraph">您可以使用一个命令来连接驻留在单个存储系统或 HA 对上的存储实体。</block>
  <block id="a52708613839e82803333bae03f3a818" category="summary">SnapDrive for UNIX 5.0 及更高版本支持集群模式 Data ONTAP 的某些功能。</block>
  <block id="d1f11d0e3d5dd06dd03d27cd3f0a4cc0" category="doc">SnapDrive for UNIX 中提供的集群模式 Data ONTAP 功能</block>
  <block id="92ab72b3b8d5a9b78cb5ed604b10043a" category="paragraph">支持以下功能：</block>
  <block id="f094fdd1ff33d53f9180e4e35ace68f1" category="list-text">端口集</block>
  <block id="b73733e57edbb3f1929ce8038f24f089" category="list-text">vserver</block>
  <block id="4b6479ec79e6523116991bb7576885a2" category="list-text">使用适当的配置变量处理因卷迁移而导致的错误</block>
  <block id="fc535e9e7bf6f563bee56e1a6903ef84" category="list-text">崩溃状态一致的（一致性组） Snapshot 副本</block>
  <block id="6645e0ebb53d4b6e68be7936af3a8039" category="list-text">AutoSupport</block>
  <block id="0cbfd58785d577a847160705c20b43c5" category="list-text">SVM 的原始设备映射（ Raw Device Mapping ， RDM ）逻辑单元号（ Logical Unit Number ， LUN ）</block>
  <block id="47db1855d3214d29544c6c7476b1b108" category="list-text">使用 Operations Manager 控制台进行基于角色的访问控制（ Role-Based Access Control ， RBAC ）</block>
  <block id="e12b2a386a89bd84ab14ac5588ed5d11" category="list-text">负载共享镜像（ LSM ）</block>
  <block id="a38e2b4518173a39dd3c07b2384b8d9a" category="inline-link-macro">《集群模式 Data ONTAP 逻辑存储管理指南》</block>
  <block id="d56a6d42fbf8c530c7bec9d8a982c518" category="paragraph">负载共享镜像可通过为客户端提供额外的只读访问来减少 FlexVol 卷的网络流量。您可以创建和管理负载共享镜像，以便将只读流量分发到 FlexVol 卷之外。负载共享镜像不支持无限卷。一组负载共享镜像由一个源卷组成，该源卷可以与一个或多个目标卷连接。该集中的每个负载共享镜像必须与该集中的源卷属于同一个 Storage Virtual Machine （ SVM ）。此外，还应在不同聚合上创建负载共享镜像，并由集群中的不同节点进行访问，以便对客户端请求进行适当的负载平衡。有关详细信息，请参见 <block ref="9018e40dc3da97921066f5bc5dfe5603" category="inline-link-macro-rx"></block>。</block>
  <block id="cc7a8accd3b9183fc6b746dea114ed25" category="list-text">集群模式 Data ONTAP 8.2 及更高版本的 ONTAP 支持 LSM 。但是，如果您使用的是集群模式 Data ONTAP 8.2.2 及更低版本，则必须使用 SnapDrive config set-cserver` 命令配置集群管理员。</block>
  <block id="3a06caa77f31ab31716fcc1d1d616c6b" category="list-text">即使已配置集群管理员， ONTAP 8.2 之前的任何版本也不支持 LSM 。</block>
  <block id="d686186657dc867241ca2a0f2a61422f" category="list-text">IP 空间</block>
  <block id="33d0dd1b4a7e12d53abd3bf65127bb3c" category="inline-link-macro">《集群模式 Data ONTAP 网络管理指南》</block>
  <block id="ddac5cc5baea0e160940d70daf80d245" category="paragraph">IP 空间定义了一个不同的 IP 地址空间，可在其中创建 Storage Virtual Machine （ SVM ）。系统会为 IP 空间中的每个 SVM 维护一个路由表；不会发生跨 SVM 或跨 IP 空间的流量路由。有关详细信息，请参见 <block ref="67a1cc1a368a5c25f68ec805c7f10e13" category="inline-link-macro-rx"></block>。</block>
  <block id="7dbcbcf9d7cb24e9aca3dbee31d8cd63" category="admonition">只有在使用集群模式 Data ONTAP 8.3 时，才支持此功能。</block>
  <block id="f3d7f2a86b9b8ba6ebadd1b26aa2f2c8" category="list-text">MetroCluster 设置</block>
  <block id="6ae055a686a1303373bcae5706ce8ebb" category="inline-link-macro">《集群模式 Data ONTAP MetroCluster 安装和配置指南》</block>
  <block id="f7ac72057589ae95a9f43c52b81fb6e7" category="paragraph">只有在使用集群模式 Data ONTAP 8.3 时，才支持此功能。有关 MetroCluster 设置的信息，请参见 <block ref="f9ee08d3faac3676c845a13b1896348d" category="inline-link-macro-rx"></block>。</block>
  <block id="cdebf8837bbc4b27cac769866d689378" category="list-text">用于在节点上预留空间以创建 FlexClone 文件和 FlexClone LUN 的令牌</block>
  <block id="873a9e800265735ee714a4c95296fd47" category="paragraph">如果要使用此功能，您必须拥有 FlexClone 许可证。有关详细信息，请参见 <block ref="9018e40dc3da97921066f5bc5dfe5603" category="inline-link-macro-rx"></block>。</block>
  <block id="78f4335755213f90facf13ac37efb999" category="list-text">自定义 qtree 导出</block>
  <block id="03837ec488f592482236afff2167d6bc" category="paragraph">qtree 可以具有与父卷不同的 Exportfs 策略。</block>
  <block id="67f4ed8bf1f119183e38b10f40fc9fd3" category="admonition">只有在使用集群模式 Data ONTAP 8.2.1 及更高版本时，才支持此功能。</block>
  <block id="d8f8b230d5874d7a09ee21b40ad0e6f0" category="list-text">联邦信息处理标准（ FIPS ）合规性</block>
  <block id="92b5030265006f066aa912e5f78a8731" category="paragraph"><block ref="92b5030265006f066aa912e5f78a8731" category="inline-link-macro-rx"></block></block>
  <block id="8e4222ddbe63e1e52a51bad144fd1be1" category="paragraph"><block ref="8e4222ddbe63e1e52a51bad144fd1be1" category="inline-link-macro-rx"></block></block>
  <block id="9df44dc727794e61c83bf5dce5faef48" category="paragraph"><block ref="9df44dc727794e61c83bf5dce5faef48" category="inline-link-macro-rx"></block></block>
  <block id="9176f8ceb7f819211f09cbc39a8aa53d" category="summary">在使用 SnapDrive storage delete 命令之前，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="92dc6702d4d235418e337c73e019b650" category="doc">使用 SnapDrive storage delete 命令所需的信息</block>
  <block id="eb373892ec57cf6320e1974032544458" category="paragraph">在使用 SnapDrive storage delete` 命令之前，您需要提供一些信息。此信息有助于您正确使用命令。</block>
  <block id="0a0d2c6f15da2849a43fe65e237da4f1" category="paragraph">根据您输入的命令，您可以删除以下任何类型的存储：</block>
  <block id="940feb772ade4a29aee9fc740a6862df" category="paragraph">指定要从存储系统中删除的一个或多个 LUN 。</block>
  <block id="1b93a48ab388b2a153ff3002221f3232" category="paragraph">如果删除一个或多个 LUN ，则第一个参数必须使用长形式的 LUN 名称，此名称用于指定存储系统名称，卷名称以及卷中 LUN 的名称。</block>
  <block id="710008e8167c02a395665471c74a3bcc" category="list-text">磁盘或卷组上的文件系统</block>
  <block id="3803e0f49ff9f83855845f7f1b35adc0" category="paragraph">为 file_spec. 参数输入的值必须标识要删除的存储实体。</block>
  <block id="4dabb89326a43e171a833ce6ebefc239" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` - vg _file_spec_` ）</block>
  <block id="da4e7aafc764836bdeb513b1378b26cb" category="paragraph">磁盘组或卷组的名称</block>
  <block id="26ce328020098039d49fbdd0491fe1ae" category="paragraph">主机卷或逻辑卷的名称</block>
  <block id="4bf0ef1dbcad3d78bb0bc33e380e0991" category="admonition">您必须同时提供请求的卷及其所在的磁盘组；例如， ` - hostvol dg3/Acct_volume` 。</block>
  <block id="3a1ba21526415da5ffbbabac0f8235eb" category="paragraph">如果您希望 SnapDrive for UNIX 删除您指定的存储，即使您在命令提示符处包含具有其他实体（例如具有一个或多个主机卷的磁盘组）的主机端实体，也可以在命令提示符处包含 ` -full` 选项。</block>
  <block id="524f430e2c556e82732a87d03c12f286" category="paragraph">指定要删除存储的共享主机实体。</block>
  <block id="53cfeb35f80c885f39f46c1363c7e768" category="summary">通过 SnapDrive for UNIX ，您可以创建驻留在相同或不同存储系统上的多个存储系统卷中的 Snapshot 副本。</block>
  <block id="da7513bbe95f226e0ca2807730b1e024" category="doc">跨存储系统或卷的 Snapshot 副本</block>
  <block id="35eb8582d768a6e3021daf5be9fbd73b" category="paragraph">SnapDrive for UNIX 允许您创建跨多个存储系统卷或多个存储系统的 Snapshot 副本。这些卷可以位于同一个存储系统或不同的存储系统上。尽管 SnapDrive snap create` 命令会为构成您请求的实体的所有卷创建一个 Snapshot 副本，但 SnapDrive for UNIX 仅会还原您在 SnapDrive snap create` 命令中指定的实体。</block>
  <block id="2ebfcc5a00f67b14f69d862982af2874" category="paragraph">使用 SnapDrive snap create` 命令创建跨多个卷的 Snapshot 副本时，无需在命令提示符处为卷命名。SnapDrive for UNIX 可从您指定的 `file_specs` 参数获取此信息。</block>
  <block id="55610cc5000494c5b937bf1d5f79beaa" category="list-text">如果您输入的 `file_specs` 请求磁盘组，文件系统或主机卷驻留在磁盘组上，则 SnapDrive for UNIX 会自动创建一个 Snapshot 副本，其中包含您指定的磁盘组，卷或文件系统的所有存储系统卷。</block>
  <block id="c9869ebd1b5aa37ed8ff65979a6a1a62" category="list-text">如果您输入的 `file_specs` 请求 LUN ，则 SnapDrive for UNIX 将为包含该 LUN 的存储系统卷创建一个 Snapshot 副本。</block>
  <block id="24263c0ac899b1f60d892f7f5915738c" category="list-text">如果您输入的 `file_specs` 请求的文件系统直接驻留在 LUN 上，则 SnapDrive for UNIX 将为包含您指定的 LUN 和文件系统的存储系统卷创建一个 Snapshot 副本。</block>
  <block id="74cbc39100df954f6b62fb67dc84ac77" category="list-text">如果您输入的 `file_specs` 请求 NFS 目录，则 SnapDrive for UNIX 将为包含 NFS 目录树的卷创建一个 Snapshot 副本。</block>
  <block id="6482cc7c603ed74c7659f44138c4be8a" category="paragraph">除了使用基于多个存储系统和存储系统卷中的实体构建的 `file_specs` 参数之外，您还可以组合使用 `file_specs` 参数，其中每个值都基于单个存储系统或存储系统卷。例如，假设您设置了一个磁盘组 dg1 跨越存储系统存储系统 2 和存储系统 3 ， DG2 位于存储系统 2 上， dg3 位于存储系统 3 上。在这种情况下，以下任一命令行都是正确的：</block>
  <block id="4aea943a21596e54e2d08fb0d42ffd36" category="paragraph">SnapDrive snap create -dg dg1 -snapname snapdg1`</block>
  <block id="9f0dd6cf99d764651c9ee29e819f8248" category="paragraph">SnapDrive snap create -dg dg2 dg3 -snapname snapdg23`</block>
  <block id="d6e85c690fec311d1a965411355655e4" category="paragraph">SnapDrive snap create -dg dg1 dg2 dg3 -snapname snapdg123`</block>
  <block id="26d187d54d302329b28cb98545b05dbd" category="paragraph">在创建跨存储系统和卷的 Snapshot 副本时，需要注意的一点是， SnapDrive for UNIX 会使用短名称在每个存储系统卷上创建 Snapshot 副本。它不会在名称中包含完整路径名称，即使卷位于不同的存储系统上也是如此。这意味着，如果稍后重命名 Snapshot 副本，则必须转到每个存储系统和卷并在其中重命名它。</block>
  <block id="eed3429f7f1698c58d86cda8e7ccc70f" category="summary">如果已从旧 Vserver 迁移到新 Vserver ，则必须确保在主机系统上配置新的 Vserver 名称，以便在 Vserver 上执行任何 SnapDrive 操作。</block>
  <block id="0a123f0908aa9f659205b6e0c4e6e95b" category="paragraph">每当迁移到新的 SVM 名称时，必须在主机系统上执行以下步骤：</block>
  <block id="0fdf4643c6e2d916e5ccc33cbdcbf662" category="list-text">删除使用以下命令配置的旧 Vserver 名称：</block>
  <block id="d04c9b40e5dfae420820877ba6e055af" category="paragraph">` * SnapDrive 配置 delete _appliation_name_*`</block>
  <block id="e9c5762c9023000e100130524f695056" category="paragraph">旧配置的 Vserver 名称将从主机系统中删除。</block>
  <block id="0965e9f5eed4ba28954d84442a4a9a02" category="list-text">使用以下命令删除分配给已配置的旧 SVM 的端口集：</block>
  <block id="992b11a5329bc29e12244d3d1046edf0" category="list-text">使用以下命令配置新的 SVM 名称：</block>
  <block id="7fbc1de74c7f0858934d1061fb349faa" category="paragraph">` * SnapDrive 配置集 _vsadmin 文件名 _ _filername..._]*`</block>
  <block id="6b7616c48318c73064c449ea1a3bc71e" category="list-text">使用以下命令分配端口集：</block>
  <block id="b66d5ab86eda313e9dfcf9c0df28d873" category="paragraph">` * SnapDrive 端口集 add _portset_name_ filername [_filername..._]*`</block>
  <block id="2d927fd22c43eb113c4183a42de73506" category="list-text">使用以下命令迁移新的 SnapDrive 名称： ` * vserver config migrate set _old_entrynew_entry_*`</block>
  <block id="2acdc715ca0a3dbfd66714c1aec22d26" category="paragraph">迁移到新的 Vserver 后，您便可在主机系统中对此新 Vserver 名称执行 SnapDrive 操作了。</block>
  <block id="aefe9065c5776ca462962da2b88b1c24" category="paragraph"><block ref="aefe9065c5776ca462962da2b88b1c24" category="inline-xref-macro-rx"></block></block>
  <block id="461e86c2d6b387e1475b5df64f599873" category="summary">您可以运行 SnapDrive config show 命令来确定当前可配置的变量及其设置。</block>
  <block id="7b5cc9b46846a3fd7a1802fededa713d" category="paragraph">您可以运行 SnapDrive config show` 命令来确定当前可配置的变量及其设置。</block>
  <block id="0e645cf45bca9103afff485cae16dc1a" category="paragraph">支持的可配置项及其默认设置可能因主机操作系统和不同版本的 SnapDrive for UNIX 而异。例如，在 Linux 上，默认路径为 ` /var/log/` ……</block>
  <block id="083af7a014e7960f976ed36c270213aa" category="paragraph">下表介绍了 `snapdrive.conf` 文件中的参数：</block>
  <block id="d0a50317af560c2ae6b368a660d631dc" category="paragraph">`lunpath-monitor-frequency`</block>
  <block id="9efbc6d9ca205573fb19e9a9064b9b36" category="paragraph">用于指定 SnapDrive for UNIX 自动修复 LUN 路径的频率。默认值为 24 小时。</block>
  <block id="b1e1094a391b25feb798a69cc33172da" category="paragraph">`黑名单接口`</block>
  <block id="4f66280a22a9aa21ad189a4d9c9efd70" category="paragraph">用于在存在多个以太网接口时指定不想使用的接口，以缩短操作时间。</block>
  <block id="6f670159a6f0f0087226eaaa82c9db6f" category="paragraph">如果此配置具有多个以太网接口，则 SnapDrive for UNIX 有时会搜索接口列表以确定此接口是否可以 ping 。如果接口无法 ping ，则会先尝试五次，然后再检查下一个接口。因此，该操作需要额外的时间来执行。</block>
  <block id="06a474a01a42cfa52a2c5511fd8d6040" category="paragraph">如果您希望 SnapDrive 忽略某些接口，可以在 `blacklist-interfaces` 参数中指定这些接口。这样可以缩短操作时间。</block>
  <block id="40cbff1996a578d8d9fa094d08006b2b" category="paragraph">`enable-mount-with netdev`</block>
  <block id="ad8131541828042a4c908b2a54205969" category="paragraph">在 Linux 环境中在 iSCSI 中运行时，可用于在 ` /etc/fstab` 文件中包含 ` _netdev` file system 选项。</block>
  <block id="05d3a3d0a9b0e024bd4e1334a528de72" category="admonition">` _netdev` 文件系统选项仅适用于 Linux 环境中的 iSCSI 传输协议。</block>
  <block id="acc45310e9179789ee0adee469cbbda3" category="paragraph">为 `enable-mount-with -netdev` 设置的默认值为 `off` ，这要求您在 SnapDrive storage create` 命令中手动指定 ` -mntets _netdev` 。但是，如果将值更改为 `on` ，则在运行 SnapDrive storage create` 命令时会自动执行 ` -mntopts _netdev` 。</block>
  <block id="2f7f19b7babade7f6e91caa5dbde1600" category="paragraph">`all-access-if-rbac unspecified = on`</block>
  <block id="4c37d715b9fe361d4f63930bada09387" category="paragraph">通过在访问控制文件中输入权限字符串，为运行 SnapDrive for UNIX 的每个主机指定访问控制权限。您指定的字符串用于控制主机可能在存储系统上执行的 SnapDrive for UNIX Snapshot 副本和其他存储操作。（这些访问权限不会影响显示或列表操作。）</block>
  <block id="4dae6fdfead373cf69b13c001dc913fc" category="paragraph">将此值设置为 `on` 或 `off` ，其中：</block>
  <block id="ccacf81c2f65031a733a65a0710951da" category="list-text">`on` 指定 SnapDrive for UNIX 在存储系统上不存在访问控制权限文件时启用所有访问权限。默认值为 `on` 。</block>
  <block id="e488548efd383d1f19656929dc726881" category="list-text">`off` 指定存储系统仅允许主机使用访问控制权限文件中提及的权限。</block>
  <block id="6359af05fb88acb128fc1e40cae842eb" category="paragraph">如果您提供了访问控制文件，则此选项不起作用。</block>
  <block id="4e917a3cdb3fe892c9ac09abc0dfef15" category="paragraph">`allow-partial-clone-connect=on`</block>
  <block id="42792432ab1d443a18ed390e54a9d86a" category="paragraph">通过 SnapDrive for UNIX ，您可以连接到部分文件系统或仅连接到克隆磁盘组的主机卷。</block>
  <block id="9a8ef2f2a1b93b93fcf33379b066a4bc" category="paragraph">将此值设置为 `on` 或 `off` ：</block>
  <block id="9f56fa50c4a5585c75d36f9e3f2c168a" category="list-text">`on` 指定 SnapDrive for UNIX 允许您连接到一部分文件系统或仅连接到克隆磁盘组的主机卷。</block>
  <block id="63122aee378457bc9c546115f40414a5" category="list-text">`off` 确定 SnapDrive for UNIX 不能连接到文件系统的子集，也不能仅连接到克隆磁盘组的主机卷。</block>
  <block id="1d3a10a351efb03dc05131a52a476d85" category="paragraph">`audit-log-file="/var/log/sd-audit.log" audit-log-file=/var/SnapDrive/sd-audit.log`</block>
  <block id="3fd512a136679db1da946925bbdb134c" category="paragraph">指定 SnapDrive for UNIX 写入审核日志文件的位置。</block>
  <block id="b9acac79c1820f0150f598b85cf720ce" category="paragraph">默认值取决于主机操作系统。此示例中显示的路径是 Linux 主机的默认路径。</block>
  <block id="f5fa9d7fcb8a38a04a4288dc17a5ab99" category="paragraph">`audit-log-max-size=20480`</block>
  <block id="f3b270b1bfcd3ee3b757d7a70ca88d1d" category="paragraph">指定审核日志文件的最大大小（以字节为单位）。当文件达到此大小时， SnapDrive for UNIX 将重命名该文件并启动新的审核日志。默认值为 `20480` 字节。由于 SnapDrive for UNIX 在操作期间不会启动新的日志文件，因此正确的文件大小可能与此处指定的值稍有不同。</block>
  <block id="231fa2f4b02863314cbcc30d3d1118b7" category="admonition">您应使用默认值。如果决定更改默认值，请记住，过多的日志文件可能会占用磁盘上的空间，最终可能会影响性能。</block>
  <block id="39796e861150c68530a8c8ced609c61f" category="paragraph">`audit-log-save=2`</block>
  <block id="b04815ce3e2a1bdfdabe3af2270ecd08" category="paragraph">确定 SnapDrive for UNIX 应保存的旧审核日志文件数。达到此限制后， SnapDrive for UNIX 将丢弃最旧的文件并创建一个新文件。</block>
  <block id="2257464d0489d6a49cd39d42d3a02aff" category="paragraph">SnapDrive for UNIX 会根据您在 `audit-log-save` 变量中指定的值轮换此文件。默认值为 `2` 。</block>
  <block id="b1c1c9d434569a8d1c365c01e3fef0d0" category="paragraph">`autosupport-enabled`</block>
  <block id="662de07fb6d3b22e343b001840598f6d" category="paragraph">确定默认情况下选项 `autosupport-enabled` 为 `on` 。</block>
  <block id="4552f070b3aaeab7ac48e678398dc3c9" category="paragraph">默认情况下，此选项处于启用状态，用于将 AutoSupport 信息存储在存储系统的事件管理系统（ EMS ）日志中。</block>
  <block id="5c1f1ce725a39783f1956ce7fd6f0446" category="admonition">SnapDrive 4.2 for UNIX 及更高版本没有选项 `autosupport-filer` 。</block>
  <block id="ef1e9ec8c8760d4c1984286f03a9ca6a" category="paragraph">`available-lun-reserve=8`</block>
  <block id="d1b88b64fa9f2f0b77d7b3f5eb85bc3b" category="paragraph">指定当前 SnapDrive for UNIX 操作完成时主机必须准备好创建的 LUN 数量。如果可用于创建指定数量的 LUN 的操作系统资源很少，则 SnapDrive for UNIX 会根据 ` enable-implicate-host-preparation_m` 变量中提供的值请求更多资源。</block>
  <block id="85320f9aafe014533ab34ac9d9f14bae" category="paragraph">默认值为 `8` 。</block>
  <block id="327b59aad098068d1623c93817608844" category="paragraph">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。Linux 主机需要进行此准备。</block>
  <block id="29409fcef6932e1476527c6a652d3c14" category="paragraph">此变量用于包含 LUN 的配置。</block>
  <block id="ada2da2c2e3997788b724a02dd6933f4" category="paragraph">`bypass-SnapDrive-clone-genered-check`</block>
  <block id="a696bddf97656e6c76ba3c3e45cf4516" category="paragraph">指定删除 SnapDrive 生成的 FlexClone 或非 SnapDrive 生成的 FlexClone 。</block>
  <block id="94552919e1660074029c2aeab24a9900" category="list-text">`on` - 指定 SnapDrive for UNIX 允许删除 SnapDrive 生成的和非 SnapDrive 生成的 FlexClone 的 FlexClone 卷。</block>
  <block id="24762ba29f83f49ea0e1ad0e82a69d02" category="list-text">`off` —指定 SnapDrive for UNIX 仅允许删除 SnapDrive 生成的 FlexClone 卷。默认值为 `off` 。</block>
  <block id="09801fbdcdcef34f6a5bf88bb04e5946" category="paragraph">`check-export-permission-nfs-clone`</block>
  <block id="53eaba2bafc5675516b8a9e051f1d5ba" category="paragraph">确定设置 NFS 导出权限允许 / 禁用在二级主机（对父卷没有导出权限的主机）或存储系统中创建克隆。</block>
  <block id="60ed0b97297f23b20aba71a6cf62292f" category="list-text">`on` - SnapDrive for UNIX 将检查二级主机卷上的适当导出权限。默认值为 `on` 。</block>
  <block id="55e9787c50ed9273872545737baede91" category="list-text">`off` — SnapDrive for UNIX 不会检查二级主机在卷上的适当导出权限。</block>
  <block id="5bf1b7fc2ce050977dce39899498b4d2" category="paragraph">如果 NFS 实体中的卷没有导出权限，则 SnapDrive for UNIX 不允许克隆。要克服这种情况，请在 `snapdrive.conf` 文件中禁用此变量。克隆操作会导致 SnapDrive 对克隆的卷提供适当的访问权限。</block>
  <block id="cf7996ada96d4c06851550b1893094f2" category="paragraph">如果将此值设置为 `off` ，则可以在集群模式 Data ONTAP 中使用二级保护。</block>
  <block id="b637ed6a8e80643299c50cc453dc8204" category="paragraph">`cluster-operation-timeout-secs=600`</block>
  <block id="52341fc1a2562419992e457290f74751" category="paragraph">指定主机集群操作超时（以秒为单位）。在使用远程节点和 HA 对操作时，应设置此值，以确定 SnapDrive for UNIX 操作何时应超时。默认值为 `600` 秒。</block>
  <block id="9f9e75d33c9b98613ed4a1c42bcc800f" category="paragraph">如果从非主节点启动 SnapDrive for UNIX 操作，则主机集群主节点也可以是远程节点。</block>
  <block id="8cd1723118e5dcd042f5622878221bca" category="paragraph">如果主机集群中任何节点上的 SnapDrive for UNIX 操作超过您设置的值或默认值 `600` 秒（如果未设置值），则此操作将超时，并显示以下消息：</block>
  <block id="10a9fee8f385e8c058a661e776ba3eec" category="paragraph">`contact-http-port=80`</block>
  <block id="50db0fbeb2df7c1934f633b867d7f092" category="paragraph">指定用于与存储系统通信的 HTTP 端口。默认值为 `80` 。</block>
  <block id="06ac5e3a2a40ed49cc6395fe30c30997" category="paragraph">`contact-ssl-port=443`</block>
  <block id="cf2719b6a5746d277a527b472a4e1da3" category="paragraph">指定用于与存储系统通信的 SSL 端口。默认值为 `443` 。</block>
  <block id="18f20f923c517b40cdf15621fbcf06a5" category="paragraph">`contact-http-port-sdU-daemon = 4094`</block>
  <block id="5efe6c600bb71502ef8fc9bf034db924" category="paragraph">指定用于与 SnapDrive for UNIX 守护进程通信的 HTTP 端口。默认值为 `4094` 。</block>
  <block id="3994ab3a185eb7c65db6e2a907767f77" category="paragraph">`contact-http-dfm_port=8088`</block>
  <block id="b21be04f016c6f322a445f6bef5535f2" category="paragraph">指定用于与 Operations Manager 服务器通信的 HTTP 端口。默认值为 `8088` 。</block>
  <block id="05f641a367a5f3893ffdb5282838928f" category="paragraph">`contact-ssl-dft-port=8488`</block>
  <block id="1fdc4fb63a43aeb1f26106feadf8b00b" category="paragraph">指定用于与 Operations Manager 服务器通信的 SSL 端口。默认值为 `8488` 。</block>
  <block id="d21b2e53241c6f8004da1d95a49e93ce" category="paragraph">`contact-viadmin-port=8043`</block>
  <block id="8c5d4ae3d060344180f3ee0eb2bfb31f" category="paragraph">指定与虚拟管理服务器通信的 HTTP/HTTPS 端口。默认值为 `8043` 。</block>
  <block id="feb299b8bb955e846db24e20b0f2d883" category="admonition">此变量可用于 RDM LUN 支持。</block>
  <block id="69346492e3c4bac9682d920600508339" category="paragraph">`datamotion-cutover-wait = 120`</block>
  <block id="9cb7d79eb4a7b7f550aa82ad1203ac1b" category="paragraph">指定 SnapDrive for UNIX 等待 DataMotion for vFiler （转换阶段）操作完成并重试 SnapDrive for UNIX 命令的秒数。默认值为 `120` 秒。</block>
  <block id="3d96f4e217a9e1b787cd7650c00018e4" category="paragraph">`dft-api-timeout=180`</block>
  <block id="193d972aabd0e49575322c2e089c829d" category="paragraph">指定 SnapDrive for UNIX 等待 DFM API 返回的秒数。默认值为 `180` 秒。</block>
  <block id="0dc5c2ab7e1653c33155a2cc66ee1e54" category="paragraph">`dft-rbac 重试次数 =12`</block>
  <block id="e0d1731eb5c2460df5feaec7cf41b50a" category="paragraph">指定 SnapDrive for UNIX 在 Operations Manager 刷新时检查访问重试次数。默认值为 `12` 。</block>
  <block id="2edacaff1698c8cfc0ebf78d5009b3e1" category="paragraph">`dft-rbac - retry-sept-secs=15`</block>
  <block id="288e5c15cab051da39ef5e29e64a8bc1" category="paragraph">指定 SnapDrive for UNIX 在重试访问检查以刷新 Operations Manager 之前等待的秒数。默认值为 `15` 。</block>
  <block id="57ed7e94deb77456c753925157feb6f3" category="paragraph">`default-noprompt=off`</block>
  <block id="4c81d98371f3edf7ae42c6e19a193604" category="paragraph">指定是否要使用 ` -noprop` 选项。默认值为 `off` （不可用）。</block>
  <block id="47b178e9eafdb97e97a23c1b396ae2a3" category="paragraph">如果将此选项更改为 `on ，则` SnapDrive for UNIX 不会提示您确认 ` -force` 请求的操作。</block>
  <block id="318cc00fb6e81cddfea5c1af72c060ea" category="paragraph">`device-retries=3`</block>
  <block id="ade8da36790ac84cf11d86b598729354" category="paragraph">指定 SnapDrive for UNIX 可以对 LUN 所在的设备进行的查询数。默认值为 `3` 。</block>
  <block id="77e7d30b667482fd0465b8ac5a8c1538" category="paragraph">在正常情况下，默认值应足以满足要求。在其他情况下，对快照创建操作的 LUN 查询可能会失败，因为存储系统异常繁忙。</block>
  <block id="3e9a0516e15fcf895ecaa947fec00ba0" category="paragraph">如果即使 LUN 处于联机状态且配置正确， LUN 查询仍会失败，则您可能需要增加重试次数。</block>
  <block id="5ee2f6a2a8c8e35f7c8583a2d8f41bc2" category="admonition">您应在主机集群中的所有节点上为 `device-retries` 变量配置相同的值。否则，涉及多个主机集群节点的设备发现可能会在某些节点上失败，而在其他节点上成功。</block>
  <block id="901ad3607578d7d401c26cd96d00c508" category="paragraph">`device-retry-page-secs=1`</block>
  <block id="4687b36d49788868e69aabb35c8e0048" category="paragraph">指定 SnapDrive for UNIX 在查询 LUN 所在设备之间等待的秒数。默认值为 `1` 秒。</block>
  <block id="4ca4d4374450060a8fa6e5d12196930b" category="paragraph">如果即使 LUN 已联机并配置正确， LUN 查询仍会失败，则您可能需要增加两次重试之间的秒数。</block>
  <block id="7ede1b16e53d76d42409bdd06a99e081" category="admonition">您应在主机集群中的所有节点上为 `device-retry-host-secs` 选项配置相同的值。否则，涉及多个主机集群节点的设备发现可能会在某些节点上失败，而在其他节点上成功。</block>
  <block id="a4decaea42f600a1161e45fc4b14f758" category="paragraph">`default-transport=iscsi`</block>
  <block id="698f449ef853fb97ab8cccc5087a5e5f" category="paragraph">指定 SnapDrive for UNIX 在创建存储时用作传输类型的协议（如果需要做出决定）。可接受的值为 `iSCSI` 或 `FCP` 。</block>
  <block id="0444009c1f9cf841d52862d3513e9f8d" category="paragraph">FC 和 FCoE 配置均接受 `default-transport` value `FCP` 。</block>
  <block id="f0d4ab5aeb9e4bbbf8abc90b451755bd" category="admonition">如果主机仅配置了一种传输类型，并且 SnapDrive for UNIX 支持该类型，则 SnapDrive for UNIX 将使用该传输类型，而不管在 `snapdrive.conf` 文件中指定的类型如何。</block>
  <block id="9b9fe0eac4e874f0bc1136d80c69ad64" category="paragraph">`enable-alua=on`</block>
  <block id="27c3fab9efc25b9c9d5795037f3c68cd" category="paragraph">确定 igroup 上的多路径支持 ALUA 。存储系统必须为 HA 对，且 HA 对在 ` _single 映像 _` 模式下的故障转移状态。</block>
  <block id="b9dbd801910c8725e6a45eab8f444efd" category="list-text">默认值为 `on` ，以支持 igroup 的 ALUA</block>
  <block id="f87ffa27156996d8eaf2099e0eb7a5fc" category="list-text">您可以通过设置选项 `off` 来禁用 ALUA 支持</block>
  <block id="372c2c0333e82c66f10993d23c6baf24" category="paragraph">`enable-fcp-cache=on`</block>
  <block id="3a5746c703a93c673c63ad4cc0271fa0" category="paragraph">指定是启用还是禁用缓存。SnapDrive 会保留可用活动端口和端口名称（ WWPN ）信息的缓存，以便更快地发送响应。</block>
  <block id="3061bcba174c00e5528759d507bdb0bc" category="paragraph">在极少数情况下，如果没有连接到端口的 FC 缆线或在端口中使用了换行插头，则 SnapDrive for UNIX 可能会在提取有关 FC 接口及其相应 WWPN 的信息时出现长时间延迟。缓存有助于解决 / 提高此类环境中 SnapDrive 操作的性能。</block>
  <block id="619fb440a194df1d40ed1613db08d721" category="paragraph">`enable-implicate-host-prepare=on`</block>
  <block id="d678700c0b5dffc76a2c2add4e1978c5" category="paragraph">确定 SnapDrive for UNIX 是否隐式请求主机准备 LUN 或通知您 LUN 是必需的并退出。</block>
  <block id="50b80946bf59fba77e8d044c2bccf7ac" category="list-text">`on` —如果可用资源不足，无法创建所需数量的 LUN ，则 SnapDrive for UNIX 会隐式请求主机创建更多资源。创建的 LUN 数量在 ` _available-lun-reserve_` 变量中指定。默认值为 `on` 。</block>
  <block id="fce4fc2a496c6a221d37033205a2e941" category="list-text">`off` —如果创建 LUN 需要进行额外的主机准备，则 SnapDrive for UNIX 将向您发出通知， SnapDrive 将退出此操作。然后，您可以执行必要的操作以释放创建 LUN 所需的资源。例如，您可以执行 SnapDrive config prepare lun` 命令。准备完毕后，您可以重新输入当前的 SnapDrive for UNIX 命令。</block>
  <block id="33b841fac4ca5d2fa92f683ff599ab75" category="admonition">此变量仅适用于需要主机准备才能为需要准备的 Linux 主机创建 LUN 的系统。此变量仅用于包含 LUN 的配置。</block>
  <block id="6a1d45291359553260df84aaedbbb6d6" category="paragraph">`enable-migrate-nfs-version`</block>
  <block id="e6ec9f3e2c63a8cbee06dee661833565" category="paragraph">允许使用较高版本的 NFS 克隆 / 还原。</block>
  <block id="0d3b1a656ba93ae21694c05154a27149" category="paragraph">在纯 NFSv4 环境中，如果在 NFSv3 上创建 Snapshot 副本时尝试执行克隆和还原等快照管理操作，则快照管理操作将失败。</block>
  <block id="dd44cf65e8e028f00880d47e11a2b79b" category="paragraph">默认值为 `off` 。在此迁移期间， SnapDrive for UNIX 仅会考虑协议版本，而不会考虑 `RW` 和 `largefiles` 等其他选项。</block>
  <block id="2432aee497fe608529b849e3cddc992b" category="paragraph">因此，在 ` /etc/fstab` 文件中仅添加对应 NFS 文件规范的 NFS 版本。使用 ` -o vers=3` （对于 NFSv3 ）和 ` -o vers=4` （对于 NFSv4 ），确保使用适当的 NFS 版本来挂载文件规范。如果要迁移包含所有挂载选项的 NFS 文件规范，建议在快照管理操作中使用 ` -mntopts` 。在集群模式 Data ONTAP 中迁移期间，必须在父卷的导出策略规则中的访问协议属性值中使用 `NFS` 。</block>
  <block id="233760a3d0b9266422d686debdc1abb5" category="admonition">请确保仅使用 `nfsvers` 或 `veRS` 命令作为挂载选项来检查 NFS 版本。</block>
  <block id="5d03d565f40710d2d05fb99a1c05c753" category="paragraph">`enable-ping-on-check-filer-reachability`</block>
  <block id="007e6f85e3a1b528eb6d31e3427ee698" category="paragraph">如果在部署了 SnapDrive for UNIX 的主机和存储系统网络之间禁用了 ICMP 协议访问或丢弃了 ICMP 数据包，则必须将此变量设置为 `off` ，以便 SnapDrive for UNIX 不会通过 ping 命令来检查存储系统是否可访问。如果将此变量设置为 `on` ，则只有 SnapDrive snap 连接操作因 ping 失败而不起作用。默认情况下，此变量设置为 `on`</block>
  <block id="f58e227f7e3ef0ea256626e168780afc" category="paragraph">`enable-split-clone=off`</block>
  <block id="7d1f7e3b0777cd01c35fdd9af9166492" category="paragraph">如果将此变量设置为 `on` 或 `sync` ，则可以在 Snapshot 连接和 Snapshot 断开操作期间拆分克隆的卷或 LUN 。您可以为此变量设置以下值：</block>
  <block id="9b1b92ecfd0b652885be3709d07e4551" category="list-text">`on` —启用克隆卷或 LUN 的异步拆分。</block>
  <block id="531b4ffbb9bf147ce44e22e69781ec7f" category="list-text">`sync` —对克隆的卷或 LUN 进行同步拆分。</block>
  <block id="896f3154af74b98be8c5f489d670b5b2" category="list-text">`off` —禁用克隆卷或 LUN 的拆分。默认值为 `off` 。</block>
  <block id="a2612d41ba53f1f0aa8732be2bed7ad0" category="paragraph">如果在 Snapshot 连接操作期间将此值设置为 `on` 或 `sync` ，在 Snapshot 断开操作期间将此值设置为 `off` ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="0458a528a535d5eb0c5a5bfe6b1a1629" category="paragraph">您也可以使用 ` 拆分` 选项拆分克隆的卷或 LUN 。</block>
  <block id="353b7e16f8176791a2760bcf516341dd" category="paragraph">`enfy-Strong-ciphers=off`</block>
  <block id="4627edace32d8ff7970771fef67767b1" category="paragraph">将此变量设置为 on ，以便 SnapDrive 守护进程强制 TLSv1 与客户端进行通信。</block>
  <block id="f1465fe6e706615dbf8188dcd16d38bd" category="paragraph">它通过更好的加密功能增强了客户端与 SnapDrive 守护进程之间通信的安全性。</block>
  <block id="e40488969a2072f8f4a08dbea91e7b1b" category="paragraph">默认情况下，此选项设置为 `off` 。</block>
  <block id="4555e119f12acc4c2c398a62ec550833" category="paragraph">`filer-restore-retries=140`</block>
  <block id="17ad9da3a1d3240fdd601b97a9002581" category="paragraph">指定在还原期间发生故障时 SnapDrive for UNIX 尝试在存储系统上还原 Snapshot 副本的次数。默认值为 `140` 。</block>
  <block id="791095f58029524a7e0124f568ca9956" category="paragraph">在正常情况下，默认值应足以满足要求。在其他情况下，此操作可能会失败，因为存储系统异常繁忙。如果即使 LUN 处于联机状态并已正确配置，它仍会失败，则您可能需要增加重试次数。</block>
  <block id="5d6902f6a4c4bc3d5aba43dadb79ddc3" category="paragraph">`filer-restore-retry-page-secs=15`</block>
  <block id="fe321f947f33861a9cc4c78d80e32335" category="paragraph">指定 SnapDrive for UNIX 在尝试还原 Snapshot 副本之间等待的秒数。默认值为 `15` 秒。</block>
  <block id="98b5df4eff41f7c182b19fa9e77d7ee9" category="paragraph">在正常情况下，默认值应足以满足要求。在其他情况下，此操作可能会失败，因为存储系统异常繁忙。如果即使 LUN 已联机并配置正确，它仍会失败，则您可能需要增加两次重试之间的秒数。</block>
  <block id="befcc3abf57d89aefc6d25fa3315b681" category="paragraph">`filesystem-free-timeout-secs=300`</block>
  <block id="adfdf0516d8d0e8dab0b0de31dae2eb2" category="paragraph">指定 SnapDrive for UNIX 在两次尝试访问文件系统之间等待的秒数。默认值为 `300` 秒。</block>
  <block id="dbe2ed621053dd2dadbbc7e0d9751ffb" category="paragraph">此变量仅用于包含 LUN 的配置。</block>
  <block id="1ece0a554c3b25f893e2b344e7bf6e90" category="paragraph">`flexclone-writeerserve-enabled" = 启用`</block>
  <block id="bd6db15cd02da8c1f080f3bb381c758f" category="paragraph">它可以采用以下任一值：</block>
  <block id="7129f015e9fbc6311629501ba5098dce" category="list-text">`在` 上</block>
  <block id="350d871ee78bfc8b1a589b7dde157b7f" category="list-text">`关闭`</block>
  <block id="d334ee13894d7c5b3d8b2b9963158ae4" category="paragraph">确定所创建的 FlexClone 卷的空间预留。根据以下规则，可接受的值为 `on` 和 `off` 。</block>
  <block id="21dd51c722d4e15095b0755b69a283e5" category="list-text">Reservation ：启用</block>
  <block id="673ee3f5f692bb07dcbbd0863a3b1bb6" category="list-text">optimal ： file</block>
  <block id="a5fa48daea7b3ae567f433c4ace7c6fb" category="list-text">unrestricted ： volume</block>
  <block id="8f11a6bb48d7dbb29c5ff9d4d105612a" category="list-text">Reservation ：关闭</block>
  <block id="226291dbae7e8d5aa5f8a70008e386ff" category="list-text">unrestricted ：无</block>
  <block id="355e596aa9ce652fe6004a7569bf113d" category="paragraph">`fsttype=ext3`</block>
  <block id="cbb7868290143e080b6bdbc435c73a2b" category="paragraph">指定要用于 SnapDrive for UNIX 操作的文件系统类型。文件系统类型必须为 SnapDrive for UNIX 操作系统支持的类型。</block>
  <block id="d12a0c28544e94d7c25d3969f034b5de" category="paragraph">Linux 的可接受值为 `ext4` 或 `ext3` 。</block>
  <block id="caca1eebfe7fd818e2a3bba59e20f2c7" category="paragraph">您也可以通过命令行界面使用 ` -fstype` 选项指定要使用的文件系统类型。</block>
  <block id="caa5d0876aa34e3d1a6455815d61a02a" category="paragraph">`lun-onlining-in-progress-page-secs=3`</block>
  <block id="0e4bd23911a59ac73d2e0edd06f35186" category="paragraph">指定在基于卷的 SnapRestore 操作后尝试将 LUN 恢复联机期间两次重试的秒数。默认值为 `3` 。</block>
  <block id="b7a0af4183f88ac7cd4e2127a243060b" category="paragraph">`lun-on-onlining-in-progress-retries=40`</block>
  <block id="be1b603cc889e8ffde343a9750e4c5d9" category="paragraph">指定在执行基于卷的 SnapRestore 操作后尝试将 LUN 恢复联机期间的重试次数。默认值为 `40` 。</block>
  <block id="d20c4dba30acb728994018ac662e16b6" category="paragraph">`mGMT-retry-sept-secs=2`</block>
  <block id="7f89f020261592a9142b0a7c107245c8" category="paragraph">指定 SnapDrive for UNIX 在重试管理 ONTAP 控制通道上的操作之前等待的秒数。默认值为 `2` 秒。</block>
  <block id="c937f895c4b62c9c6bfb39f4e96379b7" category="paragraph">`mGMT-retry-seption-long-secs=90`</block>
  <block id="3efedea1723290094d3a2ef6d2e51c17" category="paragraph">指定发生故障转移错误消息后 SnapDrive for UNIX 在管理 ONTAP 控制通道上重试操作之前等待的秒数。默认值为 `90` 秒。</block>
  <block id="9adceddee091f7c288e9da3bd9668c85" category="paragraph">`m多路径类型 = 无`</block>
  <block id="1218a1e256d05ebf102d357fd8a5e083" category="paragraph">指定要使用的多路径软件。默认值取决于主机操作系统。只有在以下陈述之一为 true 时，此变量才适用：</block>
  <block id="5698bceac3f92800af3ad083b4b7291e" category="list-text">有多个多路径解决方案可用。</block>
  <block id="b3246a204e0fafc4074f656c54b9181c" category="list-text">这些配置包括 LUN 。</block>
  <block id="efe9945b43b5e3a2af24411782432a49" category="paragraph">可接受的值为 `none` 或 `nativempio` 。</block>
  <block id="3c6f85b2137db712be637febf63c6554" category="paragraph">Linux ：对于适用于 UNIX 的 SnapDrive 4.1.1 及更高版本， Linux 主机支持原生 MPIO 多路径。</block>
  <block id="f41f46393a960f218f5ae5960be1192c" category="paragraph">`override-vbsr-snapmirror-check`</block>
  <block id="c499697cddb7402fdfb5b2a4e14a786c" category="paragraph">在基于卷的 SnapRestore （ VBSR ）期间，如果要还原的 Snapshot 副本早于 SnapMirror 基线 Snapshot 副本，则可以将 ` override-vbsr-snapmirror-check_` 变量的值设置为 `on` 以覆盖 SnapMirror 关系。只有在未配置 OnCommand 数据网络结构管理器（ DFM ）的情况下，才能使用此变量。</block>
  <block id="f43fc4baf0bca00d90558b5168741754" category="paragraph">默认情况下，此值设置为 `off` 。此变量不适用于集群模式 Data ONTAP 8.2 或更高版本。</block>
  <block id="99b5d4de73dd76b30d0fd6ac552fb272" category="paragraph">`override-vbsr-snapvault-check`</block>
  <block id="72457b6b1a4d6d0f85a0696dd26ca592" category="paragraph">在 VBSR 期间，如果要还原的 Snapshot 副本早于 SnapVault 基线 Snapshot 副本，则可以将 ` override-vbsr-snapvault-check_` 变量的值设置为 `on` 以覆盖 SnapVault 关系。只有在未配置 OnCommand 数据网络结构管理器（ DFM ）的情况下，才能使用变量。</block>
  <block id="16fa7a3c8406e8e9fd59104a0737cbce" category="paragraph">默认情况下，此值设置为 `off` 。此变量仅适用于在 7- 模式下运行的 Data ONTAP 。</block>
  <block id="64004b4716c86c610b02e00521ed9349" category="paragraph">`path="/sbin ： /usr/sbin ： /bin ： /usr/lib/vxvm/ bin ： /usr/bin ： /opt/NTAPontap/SANToolkit/bin ： /opt/NTAPsanlun/bin ： /opt/vrt/bin ： /etc/vx/bi n"`</block>
  <block id="3983c841d123d81b0aa67c30e2a4b2d3" category="paragraph">指定系统用于查找工具的搜索路径。</block>
  <block id="6beec9df94bb9d37e36eeed209f85143" category="paragraph">您应验证此设置是否适用于您的系统。如果不正确，请将其更改为正确的路径。</block>
  <block id="1e55943a76880f2f61c03030d1220788" category="paragraph">默认值可能因操作系统而异。此路径是 Linux 主机的默认路径。</block>
  <block id="23c8477241686c231478a7f6f8e1c3c0" category="paragraph">` /opt/NetApp/SnapDrive/.pwfile`</block>
  <block id="fd84155e77efeb11de91c9fd4d841681" category="paragraph">指定用于存储系统用户登录的密码文件的位置。</block>
  <block id="e9462ea2011c7e067719583593ea7f3a" category="paragraph">默认值可能因操作系统而异。</block>
  <block id="c8c20720bf64747f707e3dfe991e61e9" category="paragraph">Linux 的默认路径为 ` /opt/NetApp/SnapDrive/.pwfile/opt/ontap/SnapDrive/.pwfile`</block>
  <block id="18387367f9569a6bfd1f3150e153ec47" category="paragraph">`ping-interface-with -same-octet`</block>
  <block id="8ce7bbe1792ef08ecabcacce55ae8a40" category="paragraph">避免通过主机中可能配置了不同子网 IP 的所有可用接口执行不必要的 ping 操作。如果此变量设置为 `on` ，则 SnapDrive for UNIX 仅会考虑存储系统的相同子网 IP ，并对存储系统执行 Ping 操作以验证地址响应。如果将此变量设置为 `off` ，则 SnapDrive 将获取主机系统中的所有可用 IP ，并对存储系统执行 ping 操作，以验证每个子网的地址解析，而这可能会在本地检测到 ping 攻击。</block>
  <block id="a623ba6d3a3479b01172266b03f73f85" category="paragraph">`prefix-filer-lun`</block>
  <block id="6fe9adbd3c1607623bdb6c3b40e67aad" category="paragraph">指定 SnapDrive for UNIX 适用场景在内部生成的所有 LUN 名称的前缀。此前缀的默认值为空字符串。</block>
  <block id="2577239ed7e5c297757b0ceed32318ed" category="paragraph">此变量允许从当前主机创建但未在 SnapDrive for UNIX 命令行上明确命名的所有 LUN 的名称共享初始字符串。</block>
  <block id="43ab3530decfe11372f86254b71b0460" category="paragraph">`prefix-clone-name`</block>
  <block id="5365d054b6c15dcc7ff7e4ff690821e7" category="paragraph">给定的字符串将附加原始存储系统卷名称，以便为 FlexClone 卷创建一个名称。</block>
  <block id="cc78ff70bda4c4da5657b15151f4e748" category="paragraph">`prepare-lun-count=16`</block>
  <block id="2a3adff1f23624b91953af5b74b4c917" category="paragraph">指定 SnapDrive for UNIX 应准备创建的 LUN 数。当 SnapDrive for UNIX 收到准备主机创建其他 LUN 的请求时，它会检查此值。</block>
  <block id="be294ab8cf6e89cf578771cc6285ee2c" category="paragraph">默认值为 `16` ，这意味着系统能够在准备完成后再创建 16 个 LUN 。</block>
  <block id="597d67fe38df8d91352a8a6320ce2ca0" category="admonition">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。此变量仅用于包含 LUN 的配置。Linux 主机需要进行这种准备。</block>
  <block id="d7060a01bd91ad24f3df48d1195ad874" category="paragraph">`rbac 方法 =dfm`</block>
  <block id="a2223e39f740b893b72ee0a4bd71225a" category="paragraph">如果将变量设置为 `原生` ，则访问检查将使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac` 或 ` /vol/vol0/sdprbac/sdgenergic-name.prbac` 中的访问控制文件。</block>
  <block id="a6127fb9d0ae11a98e3f83a62be316b8" category="paragraph">如果将此变量设置为 `dFM` ，则前提条件是 Operations Manager 。在这种情况下， SnapDrive for UNIX 会向 Operations Manager 发出访问检查。</block>
  <block id="a9918cdf42ea888df428d79b553e0125" category="paragraph">`rbac 缓存 = 关闭`</block>
  <block id="86325e07f15749b62161001be837dd6a" category="paragraph">指定是启用还是禁用缓存。SnapDrive for UNIX 会保留一个访问检查查询以及相应结果的缓存。只有当所有已配置的 Operations Manager 服务器均已关闭时， SnapDrive for UNIX 才会使用此缓存。</block>
  <block id="9d34a1b8c8b65d3b3f90d1e4c514a3de" category="paragraph">您可以将变量的值设置为 `on` 以启用缓存，也可以设置为 `off` 以禁用缓存。默认值为 `off` ，用于将适用于 UNIX 的 SnapDrive 配置为使用 Operations Manager ，并将 ` RBAC 方法 _` 配置变量设置为 `dFM` 。</block>
  <block id="8c2fbb50e506b3dd411250f3dabda36f" category="paragraph">`rbac 缓存超时`</block>
  <block id="a6900c40f6108060f01950d719afc969" category="paragraph">指定 RBAC 缓存超时期限，仅当启用了 ` RBAC 缓存 _` 时才适用。默认值为 `24` 小时。只有当所有已配置的 Operations Manager 服务器均已关闭时， SnapDrive for UNIX 才会使用此缓存。</block>
  <block id="4d05dfae5aff9bb69ecf387456e12005" category="paragraph">`recovery-log-file=/var/log/sdrecovery.log`</block>
  <block id="5604893195196fa8b56a83dfbc93deee" category="paragraph">指定 SnapDrive for UNIX 写入恢复日志文件的位置。</block>
  <block id="25d69fa9953c64afa3ff8bca112d68f4" category="paragraph">默认值取决于主机操作系统。此示例中显示的路径是 Linux 主机的默认路径。</block>
  <block id="3267be01bcca000164509f656d31e2fa" category="paragraph">`recovery-log-save=20`</block>
  <block id="756f41cec078a9fd33094bd711d24f63" category="paragraph">指定 SnapDrive for UNIX 应保存的旧恢复日志文件数。达到此限制后， SnapDrive for UNIX 将在创建新文件时丢弃最旧的文件。</block>
  <block id="45499dc9d9b762234a2e4610818bd8b6" category="paragraph">SnapDrive for UNIX 会在每次启动新操作时轮换此日志文件。默认值为 `20` 。</block>
  <block id="7f1cf82cde1e209c992c87e8ff14dedf" category="admonition">您应使用默认值。如果决定更改默认值，请记住，如果日志文件过多，可能会占用磁盘空间，最终可能会影响性能。</block>
  <block id="b72bb2f31cd9f04034c70713099223c2" category="paragraph">`san-clone-method`</block>
  <block id="4d9f195fa31e20b94e3fcf4c53e294ba" category="paragraph">指定可以创建的克隆类型。</block>
  <block id="209f7fd635912026c278d636cfec5d76" category="paragraph">它可以采用以下值：</block>
  <block id="ea2a0471ddad33d35761cb88c71d660b" category="list-text">`lunclone`</block>
  <block id="d0e88dd37d7a2aefec733bf8926acd38" category="paragraph">通过在同一存储系统卷中创建 LUN 的克隆来允许连接。默认值为 `lunclone` 。</block>
  <block id="2e56cd3173ab04feefd7af03b27c113f" category="list-text">`最佳`</block>
  <block id="0a98fb33f416a01dc7fe2cb7ec154e82" category="paragraph">通过为存储系统卷创建受限的 FlexClone 卷来允许连接。</block>
  <block id="f21785c614dc6037996b8565ceaced3b" category="list-text">`无限制`</block>
  <block id="dfc15219aef97b6d33364258580f857b" category="paragraph">通过为存储系统卷创建不受限制的 FlexClone 卷来允许连接。</block>
  <block id="f892e0973ae37624df421609667bf265" category="paragraph">`secure-communication-amongst clusternodes=on`</block>
  <block id="56366d44877339c98aec1589abdd4599" category="paragraph">指定主机集群节点内的安全通信，以便远程执行 SnapDrive for UNIX 命令。</block>
  <block id="b2c865b8cb0604c1d4dd78571e4d82e7" category="paragraph">您可以通过更改此配置变量的值来指示 SnapDrive for UNIX 使用 RSH 或 SSH 。SnapDrive for UNIX 在远程执行时采用的 RSH 或 SSH 方法仅由以下两个组件的 `snapdrive.conf` 文件的安装目录中设置的值决定：</block>
  <block id="e38876e88939e6bf46b63f60cbfa29d4" category="list-text">执行 SnapDrive for UNIX 操作的主机，用于获取远程节点的主机 WWPN 信息和设备路径信息。</block>
  <block id="c11f7d3c079b5929060141696ea3f3a3" category="paragraph">例如，在主主机集群节点上执行的 SnapDrive storage create` 仅使用本地 `snapdrive.conf` 文件中的 RSH 或 SSH 配置变量执行以下任一操作：</block>
  <block id="8612af7fd0c9808bbd34883ef6c6de9d" category="list-text">确定远程通信通道。</block>
  <block id="1139c7842beb67bcae758f7a4dab1d0c" category="list-text">在远程节点上执行 `devfsadm` 命令。</block>
  <block id="31aa06d86eb5fe99448eafca52e8d4cc" category="list-text">如果要在主主机集群节点上远程执行 SnapDrive for UNIX 命令，则为非主主机集群节点。</block>
  <block id="b225c3c1303432313f0bfe38f208eff5" category="paragraph">要将 SnapDrive for UNIX 命令发送到主主机集群节点，需要查看本地 `snapdrive.conf` 文件中的 RSH 或 SSH 配置变量，以确定用于远程执行命令的 RSH 或 SSH 机制。</block>
  <block id="c611719756d6b05f51bafd9dcd9a4044" category="paragraph">默认值 `on` 表示使用 SSH 执行远程命令。值 `off` 表示使用 RSH 执行。</block>
  <block id="63efc28412cba6b81d1cdea48ba66101" category="paragraph">`snapcreate-cg-timeout= 宽松`</block>
  <block id="1ae5547507fba4374568d20bf4673679" category="paragraph">指定 SnapDrive snap create` 命令允许存储系统完成隔离的时间间隔。此变量的值如下：</block>
  <block id="261dec8f3480bc9de97ebe3d17ab293a" category="list-text">`Urgent` —指定一个短间隔。</block>
  <block id="bad8112c8a2b0703f2d7b49468e1ecba" category="list-text">`medium` —指定紧急和宽松之间的间隔。</block>
  <block id="56446b21ef9166fa3c1d10745dde5a6e" category="list-text">`relaxed` —指定最长间隔。此值为默认值。</block>
  <block id="2a19de4597155feca25856aec7a73563" category="paragraph">如果存储系统未在允许的时间内完成隔离，则 SnapDrive for UNIX 将使用适用于 7.2 之前的 Data ONTAP 版本的方法创建 Snapshot 副本。</block>
  <block id="c8b7b7d5bc069cdd313e29475290f7e5" category="paragraph">`snapcreate-check-nonpersistent-nfs=on`</block>
  <block id="bb4791e40988c7ca85421f481a53f380" category="paragraph">启用和禁用 Snapshot 创建操作以使用非持久 NFS 文件系统。此变量的值如下：</block>
  <block id="41544bd0cd91fe2faf129cc30617d427" category="list-text">`on` - SnapDrive for UNIX 会检查文件系统挂载表中是否存在在 SnapDrive `snap create` 命令中指定的 NFS 实体。如果 NFS 实体未通过文件系统挂载表持久挂载，则 Snapshot 创建操作将失败。这是默认值。</block>
  <block id="9334dbfdb9f61cc6087c477cc6c1db49" category="list-text">`off` — SnapDrive for UNIX 将为文件系统挂载表中没有挂载条目的 NFS 实体创建 Snapshot 副本。</block>
  <block id="75e4300c759db4d9d96fb04fbcdb8c11" category="paragraph">Snapshot 还原操作会自动还原和挂载您指定的 NFS 文件或目录树。</block>
  <block id="6587e73aa2b7c9ddc5f1156cda1370a0" category="paragraph">您可以在 SnapDrive snap connect` 命令中使用 ` -noperit` 选项来防止 NFS 文件系统在文件系统挂载表中添加挂载条目。</block>
  <block id="e6b35b01090a1eb249af5957bcca5189" category="paragraph">`snapcreate-consistency retry-休眠 =1`</block>
  <block id="15aee80ba920af1f824a0b1a2e6b2aa5" category="paragraph">指定尽力而为的 Snapshot 副本一致性两次重试之间的秒数。默认值为 `1` 秒。</block>
  <block id="0004603a7fcadb830d8bcae7c2899d27" category="paragraph">`snapconnect-nfs-removedirectories=off`</block>
  <block id="0ece6f02a211448618740808c31bc247" category="paragraph">确定 SnapDrive for UNIX 在 Snapshot 连接操作期间是否从 FlexClone 卷中删除或保留不需要的 NFS 目录。</block>
  <block id="bea857188ea9aabc069de77ce1bb6ca1" category="list-text">`on` —在 Snapshot 连接操作期间从 FlexClone 卷中删除不需要的 NFS 目录（ SnapDrive snap connect` 命令中未提及的存储系统目录）。</block>
  <block id="123711a318476b121d8c3d969e70e367" category="paragraph">如果在 Snapshot 断开连接操作期间此 FlexClone 卷为空，则此卷将被销毁。</block>
  <block id="81c4700cbe5c9c94732537ae304a37bd" category="list-text">`off` —在 Snapshot 连接操作期间保留不需要的 NFS 存储系统目录。默认值为 `off` 。</block>
  <block id="d4b731e529aaa039c57fa97fff2f803d" category="paragraph">在 Snapshot 断开连接操作期间，只会从主机卸载指定的存储系统目录。如果主机上的 FlexClone 卷未挂载任何内容，则在 Snapshot 断开操作期间， FlexClone 卷将被销毁。</block>
  <block id="607d7ea06e6c07d0ce24e4b5fb959e25" category="paragraph">如果在连接操作期间将此变量设置为 `off` 或在断开操作期间将其设置为 on ，则不会销毁 FlexClone 卷，即使该卷包含不需要的存储系统目录且不为空。</block>
  <block id="84e3fc5636d7fc765bf9d0f3c491a6ad" category="paragraph">`snapcreate-must make-snapinfo-on-qtree=off`</block>
  <block id="0aac2691caabb0a6ec8431ebaad5f8ae" category="paragraph">将此变量设置为 `on` ，以启用 Snapshot 创建操作来创建有关 qtree 的 Snapshot 副本信息。默认值为 `off` （禁用）。</block>
  <block id="39f23cc993911c03033d2e4d33144d60" category="paragraph">如果 LUN 仍为 snapped 且位于 qtree 上，则 SnapDrive for UNIX 始终会尝试在 qtree 的根目录下写入 snapinfo 。如果将此变量设置为 `on` ，则 SnapDrive for UNIX 将在无法写入此数据时失败 Snapshot 创建操作。如果要使用 qtree SnapMirror 复制 Snapshot 副本，则只应将此变量设置为 `on` 。</block>
  <block id="5726c1112c43a512503c02b221ddae8a" category="admonition">qtree 的 Snapshot 副本的工作方式与卷的 Snapshot 副本相同。</block>
  <block id="5d9b6b8608fc7b90abc0563d62a46ad9" category="paragraph">`snapcreate-consistency retries=3`</block>
  <block id="4af010252e90ffbceb652e21516444e5" category="paragraph">指定 SnapDrive for UNIX 在收到一致性检查失败的消息后尝试对 Snapshot 副本执行一致性检查的次数。</block>
  <block id="8923ca07ca0b2629487a0a286f67faa2" category="paragraph">此变量在不包含冻结功能的主机平台上尤其有用。此变量仅用于包含 LUN 的配置。</block>
  <block id="665ee4a68083b2262a167d699711f3df" category="paragraph">默认值为 `3` 。</block>
  <block id="02b6b286d4900f03041d502bbd0cc41c" category="paragraph">`snapdelete-delete-rollback-withsnap=off`</block>
  <block id="c4853ae1545165395d26ecb29fb6ddc9" category="paragraph">将此值设置为 on 可删除与 Snapshot 副本相关的所有回滚 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` 。</block>
  <block id="b738243f079c4eb1e7a3f0db6aeea883" category="paragraph">此变量仅在 Snapshot 删除操作期间生效，如果您遇到操作问题，此变量将由恢复日志文件使用。</block>
  <block id="faa3a3bd0e9c24b78f636d6f041beb7c" category="paragraph">最好接受默认设置。</block>
  <block id="ccc7011e0c8780b7f6df6558cabcbcda" category="paragraph">`snapmirror-dest-Multiple filervolumesenabled=off`</block>
  <block id="ede213ad045e399432b197c09855a20e" category="paragraph">将此变量设置为 on 可还原跨多个存储系统或（镜像）目标存储系统上的卷的 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` 。</block>
  <block id="a2c31abe30c89e921e359be6391bbe9c" category="paragraph">`snaprestore-delete-rollback-afterrestore=off`</block>
  <block id="c550292aa7b27303a4213316fd81ad28" category="paragraph">将此变量设置为 `on` ，以便在成功执行 Snapshot 还原操作后删除所有回滚 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` （已启用）。</block>
  <block id="15f4d7fac4987cf55ce115c5fc78a01f" category="paragraph">如果您遇到操作问题，恢复日志文件将使用此选项。</block>
  <block id="400355ee348a0ecf3314e07c4d59d82f" category="paragraph">最好接受默认值。</block>
  <block id="f08b5da6e11125b02bc7d90d71f66d5d" category="paragraph">`snaprestore-make-rollback=on`</block>
  <block id="a51ba06d3eda956b09890c04c26c6994" category="paragraph">将此值设置为 `on` 以创建回滚 Snapshot 副本，或设置 `off` 以禁用此功能。默认值为 `on` 。</block>
  <block id="b3cfa8666165bdb9b9ce6fccf539c3ac" category="paragraph">回滚是 SnapDrive 在开始 Snapshot 还原操作之前在存储系统上创建的数据的副本。如果在 Snapshot 还原操作期间发生问题，您可以使用回滚 Snapshot 副本将数据还原到操作开始之前的状态。</block>
  <block id="426273a73c1f1fc5ea1251a28d4a99c4" category="paragraph">如果您不希望在还原时回滚 Snapshot 副本提供额外的安全性，请将此选项设置为 off 。如果您希望回滚，但如果无法执行回滚，则无法使 Snapshot 还原操作失败，请将变量 `snaprestore-mode-makerollback` 设置为 `off` 。</block>
  <block id="429f28d5aa2156ddaedc6dd4bf8a97d6" category="paragraph">此变量由恢复日志文件使用，如果遇到问题，您可以将该文件发送给 NetApp 技术支持。</block>
  <block id="aecf7c794bc1313410fa2fcaa4ee94a8" category="paragraph">`snaprestore-must make-rollback=on`</block>
  <block id="e862ed909b204d32f9dd99119794c3e6" category="paragraph">将此变量设置为 `on` ，以便在回滚创建失败时对 Snapshot 还原操作执行发生原因操作失败。将其设置为 `off` 可禁用此功能。默认值为 `on` 。</block>
  <block id="c4a118b03a1ee553d6f41ed0b2714c17" category="list-text">`on` - SnapDrive for UNIX 会在开始 Snapshot 还原操作之前尝试为存储系统上的数据创建回滚副本。如果无法为数据创建回滚副本， SnapDrive for UNIX 将暂停 Snapshot 还原操作。</block>
  <block id="4f4bda040bbcece3dd2d7e2f137864a8" category="list-text">`off` —如果您希望在还原时为回滚 Snapshot 副本提供额外的安全性，但如果无法执行 Snapshot 还原操作，则此值不足以使此还原操作失败。</block>
  <block id="ce86677b2ffcf14a9159b4f3568135c2" category="paragraph">如果您遇到操作问题，恢复日志文件将使用此变量。</block>
  <block id="c3666c2b7527e360b71014f523ba73b8" category="paragraph">`snaprestore-snapmirror-check=on`</block>
  <block id="7e129e6fc80b9ac60d8ff3ace6e83adb" category="paragraph">将此变量设置为 `on` ，以启用 SnapDrive snap restore` 命令来检查 SnapMirror 目标卷。如果设置为 `off` ，则 SnapDrive snap restore` 命令无法检查目标卷。默认值为 `on` 。</block>
  <block id="e7da4a72504e6356633173ec4236e3d2" category="paragraph">如果此配置变量的值为 on ，而 SnapMirror 关系状态为 `broken-off` ，则还原仍可继续。</block>
  <block id="b7a20a0c63190dcc60153a8d7c795221" category="paragraph">`spage-reservation-enabled" = 启用`</block>
  <block id="4138baff2d0313561d8aacc36efa6b7d" category="paragraph">创建 LUN 时启用空间预留。默认情况下，此变量设置为 `on` ；因此， SnapDrive for UNIX 创建的 LUN 具有空间预留。</block>
  <block id="9795a28f5262bb7d1d9f700b2e34411d" category="paragraph">您可以使用此变量为 SnapDrive snap connect` 命令和 SnapDrive storage create` 命令创建的 LUN 禁用空间预留。最好使用 ` -reserve` 和 ` -noreserve` 命令行选项在 SnapDrive storage create` ， SnapDrive snap connect` 和 SnapDrive snap restore` 命令中启用或禁用 LUN 空间预留。</block>
  <block id="81fb8272d1cba7a1e5842c71606cbbeb" category="paragraph">SnapDrive for UNIX 可创建 LUN ，调整存储大小，创建 Snapshot 副本，并根据此变量中指定的空间预留权限或使用 `or-reserve` 或 ` -noreserve` 命令行选项连接或还原 Snapshot 副本。在执行上述任务之前，它不会考虑存储系统端精简配置选项。</block>
  <block id="ac20a0667f95ee6845023650b284d65e" category="paragraph">`trace-enabled" = 启用`</block>
  <block id="d5c5e2a23bfb4de6b97c3cba9d01fb57" category="paragraph">将此变量设置为 `on` 以启用跟踪日志文件，或将其设置为 `off` 以禁用它。默认值为 `on` 。启用此文件不会影响性能。</block>
  <block id="45681e04b168f45b98dabf32f1cfb738" category="paragraph">`trace-level=7`</block>
  <block id="3441e4c80db31bac294863b09506304c" category="paragraph">指定 SnapDrive for UNIX 写入跟踪日志文件的消息类型。此变量接受以下值：</block>
  <block id="d418b46a491b312a88fb431c795969b4" category="list-text">`1` —记录致命错误</block>
  <block id="f6791916b30c0a3fbe2e75d42a285302" category="list-text">`2` —记录管理员错误</block>
  <block id="c775dbd7688f7bec0c25caae7df0a292" category="list-text">`3` —记录命令错误</block>
  <block id="172beeabcf70e7a02917a75b9a5014ed" category="list-text">`4` —记录警告</block>
  <block id="c89667814756fa67ed029bdaf101b12b" category="list-text">`5` —记录信息消息</block>
  <block id="1f095b19478ef296edfe050d7e8b8d86" category="list-text">`6` —详细模式下录制</block>
  <block id="0d6a691fe7c4b669a6e24599f3a7c3dd" category="list-text">`7` —完整诊断输出</block>
  <block id="dcd5c224db44a53333494b7625e7c88c" category="paragraph">默认值为 `7` 。</block>
  <block id="44e1456033fb2165a35a2d496bbf0881" category="admonition">最好不要更改默认值。如果将此值设置为 `7` 以外的值，则无法收集足够的信息来成功进行诊断。</block>
  <block id="707fc541387611a11d3823500755bfc4" category="paragraph">`trace-log-file=/var/log/sd-trace.log`</block>
  <block id="f100394c717452c0d74eb189c323f0c2" category="paragraph">指定 SnapDrive for UNIX 写入跟踪日志文件的位置。</block>
  <block id="b4b79c740b04a8564f8658d53a20096d" category="paragraph">默认值因主机操作系统而异。</block>
  <block id="4d951a1ae6e345f2cb6cefafcaf22368" category="paragraph">此示例中显示的路径是 Linux 主机的默认路径。</block>
  <block id="21bb6d048f7522a6b189966209736698" category="paragraph">`trace-log-max-size=0`</block>
  <block id="721ddf4c04599700a4e45289058fff13" category="paragraph">指定日志文件的最大大小（以字节为单位）。当日志文件达到此大小时， SnapDrive for UNIX 将重命名它并启动新的日志文件。</block>
  <block id="0d18e8b788d6f47a140883064365394e" category="admonition">但是，当跟踪日志文件达到最大大小时，不会创建新的跟踪日志文件。对于守护进程跟踪日志文件，在日志文件达到最大大小时会创建新的日志文件。</block>
  <block id="7a66acec5b727760585c4b57cd4f99ff" category="paragraph">默认值为 `0` 。SnapDrive for UNIX 在操作期间不会启动新的日志文件。文件的实际大小可能与此处指定的值稍有不同。</block>
  <block id="1420f2bb1951b54bf6437c4df2cc5d2c" category="admonition">最好使用默认值。如果更改默认值，请记住，太多的大型日志文件可能会占用磁盘上的空间，最终可能会影响性能。</block>
  <block id="c6e59b7fd729fbd6c6615466d4d558e6" category="paragraph">`trace-log-save=100`</block>
  <block id="048005ad686514fb05dfac744d40a496" category="paragraph">指定 SnapDrive for UNIX 应保存的旧跟踪日志文件数。达到此限制后， SnapDrive for UNIX 将在创建新文件时丢弃最旧的文件。此变量与 ` _tracelog-max-size_` 变量配合使用。默认情况下， ` trace-logmax-size=0_` 会在每个文件中保存一个命令，而 ` trace-log-save=100_` 会保留最后的 `100` 日志文件。</block>
  <block id="e8f123be351fd066b8b388c4b1d4e7ce" category="paragraph">`use-https-to-dfm=on`</block>
  <block id="874cfae26275169deb17f3d8a77545a6" category="paragraph">指定是否希望 SnapDrive for UNIX 使用 SSL 加密（ HTTPS ）与 Operations Manager 进行通信。</block>
  <block id="da73b48c8d655831ca6b862d6ca2dd28" category="paragraph">`use-https-to-filer=on`</block>
  <block id="4401c3896d37f7c168d3a5be99248124" category="paragraph">指定是否希望 SnapDrive for UNIX 在与存储系统通信时使用 SSL 加密（ HTTPS ）。</block>
  <block id="309fb9bf5f3894d31610edabd260ae07" category="admonition">如果您使用的 Data ONTAP 版本低于 7.0 ，则启用 HTTPS 后，性能可能会降低。如果您运行的是 Data ONTAP 7.0 或更高版本，则性能较慢不是问题描述。</block>
  <block id="057e29b7e704654d91cb5b09b72b128c" category="paragraph">`use-https-to-viadmin=on`</block>
  <block id="97463746aec52cce5971da176a46941c" category="paragraph">指定要使用 HTTP 还是 HTTPS 与 Virtual Storage Console 进行通信。</block>
  <block id="84c6d249e6b18f225c0395d04d23b292" category="admonition">此变量用于支持 RDM LUN 。</block>
  <block id="cabbe34fc425d30d19c0a432263382cc" category="paragraph">`vif-password-file=/opt/NetApp/SnapDrive/.vifpw`</block>
  <block id="37dfd842a6a8dcd011963c4f2cf4f5aa" category="paragraph">指定 Virtual Storage Console 密码文件的位置。</block>
  <block id="3c9dc0274fa0baa17e113b4340df27e6" category="paragraph">Linux 的默认路径为 ` /opt/NetApp/SnapDrive/.vifpw`</block>
  <block id="bc6b38072a8c4cf5b7a3c41c8259b87f" category="paragraph">`virtual-operation-timeout-secs=600`</block>
  <block id="44435ba4cc902555632659786be2beb9" category="paragraph">指定 SnapDrive for UNIX 等待适用于 VMware vSphere 的 NetApp 虚拟存储控制台响应的秒数。默认值为 `600` 秒。</block>
  <block id="e0440621fff82ad72fc36150bf9ba7ec" category="paragraph">`vmtype=lvm`</block>
  <block id="aa3a53745a89b3aebf86a8af8ce2cb06" category="paragraph">指定要用于 SnapDrive for UNIX 操作的卷管理器类型。卷管理器必须是 SnapDrive for UNIX 支持您的操作系统的类型。以下是可为此变量设置的值，默认值因主机操作系统而异：</block>
  <block id="3cb7a22dcd93af2c1c9338a06100bcec" category="list-text">Linux ： `lvm`</block>
  <block id="17f9c1186c1290623a0e4b31734065e0" category="paragraph">您也可以使用 ` -vmtype` 选项指定要使用的卷管理器类型。</block>
  <block id="bb1445f3af434c6bdc86109f413dc626" category="paragraph">`vol-restore`</block>
  <block id="f40abbd1dc882fe3f5e75867eb11ac5e" category="paragraph">确定 SnapDrive for UNIX 应执行基于卷的快照还原（ vbsr ）还是单文件快照还原（ SFSR ）。</block>
  <block id="e7f41ea673c18caf741867d501ba88a2" category="paragraph">以下是可能的值。</block>
  <block id="c29a212b2cd0fc5767d4535e17cc54bf" category="list-text">`preview` —指定 SnapDrive for UNIX 为给定的主机文件规范启动基于卷的 SnapRestore 预览机制。</block>
  <block id="e7acb9cc807b4774b4e5fa2e11d56132" category="list-text">`execute` —指定 SnapDrive for UNIX 继续对指定文件规范使用基于卷的 SnapRestore 。</block>
  <block id="5222d73c3af3c4d8fca0982e9d655855" category="list-text">`off` —禁用 vbsr 选项并启用 SFSR 选项。默认值为 `off` 。</block>
  <block id="571b92a4af1384c3597e3cfe831087eb" category="admonition">如果将变量设置为预览 / 执行，则不能使用 CLI 执行 SFSR 操作来覆盖此设置。</block>
  <block id="2459e6844bf68a6558765032f3a558b6" category="paragraph">`volmove-cutover-retry=3`</block>
  <block id="1ce32455d25b1a2838fcfd4ff9a3ac3e" category="paragraph">指定 SnapDrive for UNIX 在卷迁移转换阶段重试此操作的次数。</block>
  <block id="af0a5c7c9d3cda7138112b40a28b4af1" category="paragraph">`volmove-cutover-retry-leep=3`</block>
  <block id="672f4010e511b7a22237052953a2590b" category="paragraph">指定 SnapDrive for UNIX 在 volume-move-cutover-retry 操作之间等待的秒数。</block>
  <block id="b823f5b940324b1a7d66a4ab0fc4a150" category="paragraph">`volume-clone-retry=3`</block>
  <block id="d5a01b7d029ab6b5a3d8962f97e48f23" category="paragraph">指定 SnapDrive for UNIX 在创建 FlexClone 期间重试此操作的次数。</block>
  <block id="1d42d901cf8d55422dc8c2747340f0ae" category="paragraph">`volume-clone-retry-leep=3`</block>
  <block id="725bc646dc90cd8f83ddb427aa46a7ec" category="paragraph">指定在创建 FlexClone 期间 SnapDrive for UNIX 在两次重试之间等待的秒数。</block>
  <block id="4c3fda546079de0c92b0837d9b0d0276" category="paragraph"><block ref="4c3fda546079de0c92b0837d9b0d0276" category="inline-link-macro-rx"></block></block>
  <block id="db9301e6f7363df4360c5a5c760bbf8a" category="paragraph"><block ref="db9301e6f7363df4360c5a5c760bbf8a" category="inline-link-macro-rx"></block></block>
  <block id="825c6cc95e24e675113a499e41914756" category="summary">使用 SnapDrive for UNIX 创建 Snapshot 副本时，请考虑以下事项。每个卷最多可以保留 255 个 Snapshot 副本， SnapDrive for UNIX 仅支持其创建的 Snapshot 副本，无法创建根磁盘组的 Snapshot 副本以及启动设备或交换设备， SnapDrive for UNIX 需要执行冻结操作以保持崩溃一致性。</block>
  <block id="00ed0ccde886e834ff091b1ca071a832" category="doc">创建 Snapshot 副本的准则</block>
  <block id="7c45eb764d428d402c15624a27125f43" category="paragraph">使用 SnapDrive for UNIX 创建 Snapshot 副本时，请考虑以下事项： 每个卷最多可以保留 255 个 Snapshot 副本， SnapDrive for UNIX 仅支持其创建的 Snapshot 副本，无法创建根磁盘组的 Snapshot 副本以及启动设备或交换设备， SnapDrive for UNIX 需要执行冻结操作以保持崩溃一致性。</block>
  <block id="567bf634a4318fb27b83423faed2e76c" category="paragraph">输入用于创建 Snapshot 副本的命令时，请遵循以下准则：</block>
  <block id="6a1ab4c8dbe802dc8fa4773c4a7a44d2" category="list-text">每个存储系统卷最多可以保留 255 个 Snapshot 副本。此限制由存储系统设置。总数可能因其他工具是否使用这些 Snapshot 副本而异。</block>
  <block id="daa928eed566129d06ba86638dfd1dd1" category="paragraph">当 Snapshot 副本数量达到最大限制时， Snapshot 创建操作将失败。您必须先删除一些旧的 Snapshot 副本，然后才能使用 SnapDrive for UNIX 再使用。</block>
  <block id="8163c9b84ca1fafb3e8e01483e829520" category="list-text">SnapDrive for UNIX 不支持不创建的 Snapshot 副本。例如，它不支持从存储系统控制台创建的 Snapshot 副本，因为这种做法可能会导致文件系统内部不一致。</block>
  <block id="b1e04df7d843fa5d05fcd08c4a370c46" category="list-text">不能使用 SnapDrive for UNIX 创建以下 Snapshot 副本：</block>
  <block id="8f8d5035ddc9916c28af81a2af52e1b8" category="list-text">根磁盘组</block>
  <block id="5acd628edfece4da5e5f371bc0fda289" category="paragraph">当您尝试为 LVM 创建根磁盘组的 Snapshot 副本时， Snapshot 创建操作将失败。</block>
  <block id="07c7e17304eafe95576585d36d9f4b34" category="list-text">启动设备或交换设备</block>
  <block id="bd338a1c2ab0ee16fe9bcc7152cf548b" category="paragraph">SnapDrive for UNIX 不会为系统启动设备或系统交换设备创建 Snapshot 副本。</block>
  <block id="14021f3d3b4ec96032fcf69eeb8bede7" category="list-text">当 Snapshot 副本跨越多个存储系统或存储系统卷时， SnapDrive for UNIX 需要执行冻结操作以确保崩溃一致性。有关在未提供冻结操作的配置上创建 Snapshot 副本的信息。</block>
  <block id="ca1207343958e85fc1ad27fdd7241289" category="summary">SnapDrive for UNIX 不会删除 Linux LVM2 上具有导出磁盘组的 LUN 。</block>
  <block id="2523ba1b0fd4fdbfc784ea2c8e67b7db" category="doc">在 Linux LVM2 上删除具有导出磁盘组的 LUN 失败</block>
  <block id="2b7f288559fcabf3acbe7d55b8f75f38" category="paragraph">如果您在 Linux LVM2 上导出磁盘组（ DG ）并尝试删除 LUN ，则删除操作将失败。</block>
  <block id="13ff393992ed28e6cd922b47af9f4feb" category="paragraph">您必须使用 `vgimport &lt;dgname&gt; 导入磁盘组，然后使用以下命令删除磁盘组和 LUN ： # SnapDrive lun storage delete - dg &lt;dgname&gt; [-full]`</block>
  <block id="3f77a0b0e73db8a19c08b9d60b040539" category="summary">SnapDrive for UNIX 支持 SVM 。Vserver 是一种安全的虚拟存储服务器，支持多种协议和统一存储。SVM 包含数据卷和一个或多个 LIF ，用于向客户端提供数据。</block>
  <block id="ec8ce37571e15f8e38421aa3b48ef9ad" category="paragraph">Vserver 可以安全地隔离共享虚拟化数据存储和网络，并显示为客户端的一个专用服务器。每个 Vserver 都有一个单独的管理员身份验证域，可由 Vserver 管理员独立管理。</block>
  <block id="e4f953d21201d4a67d458b0ba05ca2ae" category="paragraph">每个 SVM 的卷都通过接合关联起来，并挂载在接合路径上。每个卷的文件系统似乎已挂载在接合处。Vserver 的根卷位于命名空间层次结构的顶层；其他卷将挂载到 Vserver 的根卷以扩展全局命名空间。SVM 的数据卷包含文件和 LUN 。</block>
  <block id="77e97fa18bf4bd64974ce9c766ee8b69" category="list-text">您可以使用 SnapDrive for UNIX 在 SVM 上执行存储配置， Snapshot 副本操作和配置操作。</block>
  <block id="6f1c5818014d3d841a4c262bb13d5430" category="list-text">应用程序数据不会存储在 SVM 的根卷中。</block>
  <block id="d89de23295b62b7a7c4c41d2c18db777" category="list-text">如果 SVM 的根目录为 qtree ，则不支持 Snapshot 副本操作。</block>
  <block id="c9fc031a94e84f04dd950db1be2dc4c1" category="list-text">在 SVM 上创建的每个卷都必须挂载在一个接合路径上。</block>
  <block id="f5f068b697f1a8e4bb4ac78bd71c1fdd" category="paragraph"><block ref="f5f068b697f1a8e4bb4ac78bd71c1fdd" category="inline-link-macro-rx"></block></block>
  <block id="b3db532f9ba447afe5135313f0c7a167" category="paragraph"><block ref="b3db532f9ba447afe5135313f0c7a167" category="inline-link-macro-rx"></block></block>
  <block id="1d4df68f2297e08d9000b5f058ef9ca3" category="paragraph"><block ref="1d4df68f2297e08d9000b5f058ef9ca3" category="inline-link-macro-rx"></block></block>
  <block id="e170a73c9fdac01103d2d369b67d97f2" category="paragraph"><block ref="e170a73c9fdac01103d2d369b67d97f2" category="inline-link-macro-rx"></block></block>
  <block id="2a4f547c7b73b569b09f737f8754554f" category="inline-link-macro">《 ONTAP 9 软件设置指南》</block>
  <block id="035c147f3241d95651d9551cff478b40" category="paragraph"><block ref="035c147f3241d95651d9551cff478b40" category="inline-link-macro-rx"></block></block>
  <block id="90253471e574d4291f1966be33ca6dbd" category="summary">在使用 Snapshot 副本时，应牢记一些注意事项，例如 SnapDrive for UNIX 仅适用于其创建的 Snapshot 副本，或者 Snapshot 副本自动从存储系统复制到主机等。</block>
  <block id="1afd405e24f6fda3c93db952e4096796" category="doc">使用 Snapshot 副本时的注意事项</block>
  <block id="02cc6ea96394a5a04a7100feb97bc650" category="paragraph">使用 Snapshot 操作时，应考虑以下事项：</block>
  <block id="bc022766abb3bc298b1811abc532b540" category="list-text">SnapDrive for UNIX 仅适用于其创建的 Snapshot 副本。</block>
  <block id="533dc90402e67a7c3e554ad4ac04e280" category="paragraph">它无法还原未创建的 Snapshot 副本。</block>
  <block id="5a8a547fa707a5b77bfc73ef0d462d5f" category="list-text">在目标存储系统上创建 Snapshot 副本时， Snapshot 副本会自动从创建该副本的源存储系统复制到目标存储系统。</block>
  <block id="acf0a95db08cf827502b88b6f2a77ea0" category="paragraph">通过 SnapDrive for UNIX ，您还可以还原目标存储系统上的 Snapshot 副本。</block>
  <block id="b066dfcd59fa77d8bf5701df458548dc" category="list-text">如果您使用 SnapDrive snap connect` 命令在上次连接（或仍连接）的主机上的新位置连接到 Snapshot 副本，则会连接到源主机。</block>
  <block id="e394ddb63b108aac9115ba6a52acd462" category="list-text">在 Linux 主机上， SnapDrive 3.0 for UNIX 及更高版本支持在发起主机上执行 Snapshot 连接操作，除非具有文件系统的 LUN 或 LUN 属于 Linux LVM1 卷管理器。</block>
  <block id="7768b68fea9af848c49edba310e921d7" category="list-text">在以 7- 模式运行的 Data ONTAP 中， SnapDrive 支持驻留在挂载点内的符号链接。</block>
  <block id="2786c20921c4a35cdfde250e23a4d4ad" category="list-text">对跨多个存储系统卷或多个存储系统的存储实体的 Snapshot 支持仅限于不允许在软件堆栈中执行冻结操作的配置。</block>
  <block id="3940adf547aaaadc3568e18876b29ecc" category="list-text">通过 NFS 协议导出卷时，必须将匿名用户 ID 选项设置为 0 ， SnapDrive for UNIX 命令才能正常运行。</block>
  <block id="89c7efc057d748acb43b6a769682ec59" category="list-text">在创建 Snapshot 副本后立即执行单文件 SnapRestore （ SFSR ）操作失败。</block>
  <block id="b04ec2bad49ac0578867cd0f98855535" category="paragraph">必须在经过一段时间后重试此操作。有关详细信息，请参见 <block ref="9018e40dc3da97921066f5bc5dfe5603" category="inline-link-macro-rx"></block>。</block>
  <block id="57b03f63d34560c640eb8b08f249a1d2" category="summary">基于角色的访问控制允许根据分配给您的功能执行存储操作。如果您没有执行存储操作的适当功能，则会收到一条错误消息。</block>
  <block id="f77b2c167a5ff04ebdca1314d945700d" category="doc">RBAC 和存储操作示例</block>
  <block id="a7f470c8d4c26267bd5da00001eac98a" category="summary">您可以在 NFS 环境中使用 SnapDrive config list 命令查看管理接口的所有数据接口。</block>
  <block id="7269bdbbd7e47cf90992b258f569f9dd" category="doc">查看管理接口的所有数据接口</block>
  <block id="5533ab8f25e5c080cf20c8920065b3e3" category="paragraph">您可以在 NFS 环境中使用 SnapDrive config list` 命令查看管理接口的所有数据接口。</block>
  <block id="e0a2a25ef13aea10f6aec503504ab872" category="summary">使用 SnapDrive snap connect 命令时，它会克隆指定实体的存储并将其导入到主机中。</block>
  <block id="05da8c3f8055b6ba5b501f76b357f2fe" category="doc">SnapDrive snap connect 命令的工作原理</block>
  <block id="7ca4f2c14892856f2f8515c4af88bcc2" category="paragraph">使用 SnapDrive snap connect` 命令时，它会克隆指定实体的存储并将其导入到主机：</block>
  <block id="dc1100bdfe335872d1d138e5c84bb149" category="list-text">如果您指定的 Snapshot 副本包含 LUN （` -lun` ），则 SnapDrive for UNIX 会将 LUN 的新副本映射到主机。您不能使用 SnapDrive snap connect` 命令在与其他存储实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` -hostvol` ）相同的命令行上指定 LUN 。</block>
  <block id="7e0d5cd4b105c96091da3f2f51a5f951" category="list-text">如果您指定的文件系统直接驻留在 LUN 上，则 SnapDrive for UNIX 会将 LUN 映射到主机并挂载文件系统。</block>
  <block id="89d7cd2230c2fea25bb03d95b60b4ddc" category="list-text">如果在 `snap connect` 命令中将源挂载点指定为相对路径名，则 SnapDrive for UNIX 将忽略在命令行界面中指定的目标挂载点，并使用格式为 `ssource_mount_point_&lt;N&gt;` 的内部命名约定来命名目标挂载点。</block>
  <block id="24f39e1b07ccbdc68744755daa1b5376" category="list-text">如果您指定的 Snapshot 副本包含磁盘组，或者主机卷或文件系统属于磁盘组，则 SnapDrive snap connect` 命令会连接整个目标磁盘组。为了建立连接， SnapDrive for UNIX 会重新激活目标磁盘组的所有逻辑卷，并将所有文件系统挂载到逻辑卷上。</block>
  <block id="ab995aa721f20a3aada765b0d527d19a" category="list-text">如果使用 `snap connect` 命令指定 `autorename` 选项，则主机卷和文件系统始终会重命名。只有当磁盘组已位于主机上时，才会对其进行重命名。</block>
  <block id="f5e0c7025db0a92520364165eb6676f8" category="list-text">如果您指定的 Snapshot 副本包含 NFS 目录树，则 SnapDrive for UNIX 将为包含 NFS 目录树的 FlexVol 卷创建一个克隆。然后， SnapDrive for UNIX 会将卷连接到主机并挂载 NFS 文件系统。在目录树中， SnapDrive for UNIX 会删除您在创建 Snapshot 副本后创建的任何新 NFS 文件或目录。如果将 `snapconnect-nfs-removedirectories` 配置选项设置为 on ，则 SnapDrive for UNIX 将从 FlexVol 卷中删除您连接的 NFS 目录以外的任何文件或目录。</block>
  <block id="0d9a9b5ba675559b85703542bee5b735" category="list-text">如果您使用 `readonly` 选项连接包含 NFS 目录树的 Snapshot 副本，则 SnapDrive for UNIX 将直接挂载该目录的 Snapshot 副本，而不创建克隆。您不能使用 SnapDrive snap connect` 命令在与非 NFS 实体相同的命令行上指定 NFS 挂载点，即使用选项 ` -vg` ， ` -DG` ， ` -FS ， ` -lvol 或 ` - hostvol` 。</block>
  <block id="467b5829b326c51da2e4c4973d936109" category="admonition">Data ONTAP 7.3 及更高版本支持在 vFiler 环境中使用 ` -split` 选项执行 `snap connect` 操作。</block>
  <block id="a42c240972bba8219ab507098e06c88f" category="summary">要使用 SnapDrive storage disconnect 命令删除具有存储实体的 LUN 的映射，请使用以下语法。</block>
  <block id="19dcdfa85bfdd8555dc2fe4fe8a64b34" category="doc">用于从主机断开 LUN 和存储实体连接的命令语法</block>
  <block id="772cc2f0e7693335271d930dd72adcdf" category="paragraph">要使用 SnapDrive storage disconnect` 命令删除具有存储实体的 LUN 的映射，请使用以下语法：</block>
  <block id="80d43a5422dbf6d858c37ab404ff5c95" category="paragraph">` * SnapDrive storage disconnect ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._] （ ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._]...] 【 -full】 【 -fstype _type_】 【 -vmtype _type_】 *`</block>
  <block id="17b582d02d95f668a06f22398414dca4" category="summary">Operations Manager 控制台管理员可以使用 Operations Manager 控制台在存储系统上创建 SD 主机名用户。完成这些步骤后， Operations Manager 控制台管理员必须手动将凭据发送给 SnapDrive for UNIX 管理员。您可以使用任何名称来替代 sd-hostname ；但最好使用 sd-hostname 。</block>
  <block id="2a2167513d93d0d84c68fec8f24645b5" category="doc">将 SD 主机名添加到存储系统</block>
  <block id="a28f29827a66118519f75373725afad5" category="list-text">获取存储系统的根密码并存储该密码。</block>
  <block id="91d1424364e5188cd85f5801f4b69040" category="paragraph">要添加存储系统的密码，请选择 * 管理 * &gt; * 存储系统 * 。</block>
  <block id="879fa675291292f40a896508f2068727" category="list-text">为每个 UNIX 系统创建一个 SD 主机名用户。</block>
  <block id="3d0e9091ecd5ffd10a39a417df2f122e" category="list-text">将功能 `API-*` 和 `login-*` 分配给某个角色，例如 SD-role 。</block>
  <block id="00f4c2df22d2154ba712764f3399c08f" category="list-text">将此角色（ sd-role ）包括在新用户组中，例如 sd-usergroup 。</block>
  <block id="1c1f02e0ee5c935f52c375b187ea0cec" category="list-text">将此用户组（ sd-usergroup ）与存储系统上的 sd-hostname 用户关联。</block>
  <block id="d30d4702ff937bd7dc780f473a64ba8d" category="summary">您可以强制此守护进程重新启动。强制重新启动守护进程将停止执行所有正在运行的命令。</block>
  <block id="d06dade9d84a50468f5a74dfaffc4375" category="doc">强制守护进程重新启动</block>
  <block id="b5a6765afd17d4a5524e26f52c33938a" category="list-text">输入以下命令强制重新启动守护进程：</block>
  <block id="d221a0996ae94117ada46b1a0f97359b" category="paragraph">` * snapdrived -force restart*`</block>
  <block id="fb502aa930588b826ee837fce537b573" category="paragraph">收到强制重新启动请求后，守护进程将停止所有正在执行和正在排队的命令。只有在取消执行所有正在运行的命令后，守护进程才会重新启动。</block>
  <block id="92e5d050506df07f28ac21e4daa272a6" category="summary">在使用 SnapDrive storage create 命令执行存储创建操作时，应遵循特定准则。</block>
  <block id="490a290d10ee13d515afff1e6357b393" category="paragraph">在使用 SnapDrive storage create` 命令执行存储创建操作时，应遵循特定准则。</block>
  <block id="4744fcc5fbb04fb3b4a41717f604e93b" category="list-text">如果使用 -lun 选项列出不同存储系统卷中的 LUN ，则不能在命令提示符处包含 ` -dg` ， ` -hostvol` 或 ` -fs` 选项。</block>
  <block id="a81c2b62e239588cdb5e59fe1f7b410a" category="list-text">` -nolvm` 选项直接在 LUN 上创建文件系统，而不激活主机 LVM 。</block>
  <block id="687fed0d712144ece3512471560a33af" category="paragraph">使用此选项时，无法指定主机卷或磁盘组。</block>
  <block id="2fc2670f6c0588e776da030d13a8c7d9" category="list-text">不能对 NFS 文件或目录树使用 SnapDrive for UNIX 存储配置命令。</block>
  <block id="00e1ec63512ab5b8d8e0f8b5465f53c6" category="list-text">如果使用 lun storage create` 命令直接在 SnapDrive 上创建文件系统，则不能指定多个 lun 。</block>
  <block id="2abf652a0b61708edf58dcfe3f2c47eb" category="paragraph">使用此形式的命令时， SnapDrive for UNIX 始终会创建新的 LUN 。</block>
  <block id="80ef3038d0c7439277a0822dcb185518" category="list-text">某些操作系统会限制您可以创建的 LUN 数量。</block>
  <block id="dc15aa9533a043d0db79675ab3777fd1" category="paragraph">如果主机运行的是其中一个操作系统，则可能需要运行 SnapDrive config check lun` 命令。</block>
  <block id="8ee3bc0b4b4fbb2d57c63b0983fe8b65" category="list-text">支持在具有 DMP 多路径的原始 LUN 上创建文件系统。</block>
  <block id="5a111a221a9386109b252cbb278e26fd" category="list-text">使用 `enable-mount-with -netdev` 参数，您可以在 ` /etc/fstab` 文件中包含 ` netdev` file system 选项。</block>
  <block id="d9ef8b0a0b61b9e3e0d570abb836c5a7" category="paragraph">如果此值设置为 off （默认值），则必须在 SnapDrive storage create` 命令中手动指定 ` -mntopts _netdev` 。但是，如果将此值更改为 on ，则在运行 SnapDrive storage create` 命令时会自动执行 ` -mntopts _netdev` 。</block>
  <block id="1c00d8aad8a9e4ee28b2f88abe8e564f" category="paragraph"><block ref="1c00d8aad8a9e4ee28b2f88abe8e564f" category="inline-xref-macro-rx"></block></block>
  <block id="c9cd43bc97db252049b56fcbb29965fa" category="summary">您可以使用作业 ID 或文件规范查看已完成克隆拆分操作的结果。</block>
  <block id="5e556e63e13fb98f222d35ac3ae6fa55" category="doc">使用作业 ID 或文件规范查看克隆拆分操作的结果</block>
  <block id="3ad2153257dd719d6ace7175bc1adf6c" category="list-text">输入以下命令以使用文件规范查看克隆拆分结果：</block>
  <block id="85b0c078a5e2051ec8aab1870784ef92" category="paragraph">` * SnapDrive 克隆拆分结果（ -lun ） _lun_name_ [_lon_lun_name..._] ：（ ｛ -dg _ -vg _ -fs _ hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]] ：（ -job _&lt;jobid&gt;_]*`</block>
  <block id="e3af6a33c3488ab665ac90a8d239f4c6" category="paragraph">SnapDrive for UNIX 将显示文件规范已完成或失败的克隆拆分的结果，然后从作业中删除文件规范并从作业队列中删除作业。</block>
  <block id="d3cd71055fd491ab99647b105ee53a94" category="paragraph">以下示例显示了已成功完成的作业 ID 的克隆拆分结果。</block>
  <block id="1fa9c6e663f172202ee24917e19f8451" category="paragraph">如果存在两个文件规范，其中一个文件规范因存储系统中空间不足而失败，则克隆拆分操作的结果将显示为一个文件规范失败，另一个文件规范已成功完成。</block>
  <block id="dea2aa6293b5d009ad1350ace5d27d03" category="paragraph">以下示例显示了已成功完成的文件规范的克隆拆分结果。</block>
  <block id="2aa6ee70e637c65f3854da455d58b3c8" category="paragraph">以下示例显示了克隆拆分操作仍在进行且尚未完成时的克隆拆分结果。</block>
  <block id="7c21a50ccd1aaba9a9b92250393efe40" category="paragraph">以下示例显示了从作业集中永久删除的作业，当您尝试使用文件规范查看结果时， SnapDrive for UNIX 将遇到错误消息 " 不属于任何作业 " 。</block>
  <block id="b59ffdce803d9075cb4764ee3af0e64a" category="paragraph">以下示例显示了从作业集中永久删除的作业，当您尝试使用作业 ID 查看结果时， SnapDrive for UNIX 将遇到错误消息 " 作业 ID 无效 " 。</block>
  <block id="d094e36d7df81c00fa5e31abf3f4e9e1" category="paragraph">以下示例显示了克隆拆分结果，其中一个克隆拆分正在进行中，另一个克隆拆分失败。</block>
  <block id="81fe6906dac85a506e1cc9cba28b0e1d" category="summary">SnapDrive for UNIX 命令用于配置，存储配置，主机端管理和 Snapshot 操作。</block>
  <block id="1e55fdb8a0e5a62dc90a94b3915cd703" category="doc">SnapDrive for UNIX 命令摘要</block>
  <block id="941b808d622574011c4be57aa8608bb8" category="summary">SnapDrive for UNIX 支持各种类型的日志文件，这些日志文件有助于您在 SnapDrive for UNIX 未按预期工作时进行故障排除。</block>
  <block id="4ef3ca19f89ab1ea0e346fafc887afbb" category="doc">日志类型</block>
  <block id="9a0fd8208acdc142faf1e8499e5086ce" category="list-text">审核日志</block>
  <block id="29d01e3e80fca1589aef34ad51da8f32" category="paragraph">SnapDrive for UNIX 会将所有命令及其返回代码记录在审核日志中。SnapDrive for UNIX 会在您启动命令时创建一个条目，并在命令完成后创建另一个条目。后面的条目既包括命令的状态，也包括完成时间。</block>
  <block id="6aa4ef6fd2daa51ef317d6339ee6f7df" category="list-text">恢复日志</block>
  <block id="483c3f5e314e8d14c79d966e85fd9962" category="paragraph">如果中断，某些 SnapDrive for UNIX 操作可能会使系统处于不一致或不可用的状态。如果用户终止程序，或者主机在操作期间崩溃，则可能会发生这种情况。恢复日志包含 Snap 还原操作的步骤。本文档将记录所采取的步骤和所取得的进展，以便技术支持能够帮助您完成手动恢复过程。</block>
  <block id="3118f761e183959e9234593053d89228" category="list-text">跟踪日志</block>
  <block id="e86669b70644add84b5c54f226a976b2" category="paragraph">SnapDrive for UNIX 会报告有助于诊断问题的信息。如果您遇到问题， NetApp 技术支持可能会请求此日志文件。</block>
  <block id="c04dfab768aa9e3b770ace73bf2d4f6f" category="paragraph">SnapDrive 4.0 for UNIX 引入了 SnapDrive for UNIX 守护进程服务。要运行 SnapDrive for UNIX 命令，必须运行守护进程。必须对每个命令执行守护进程跟踪，即使命令并行运行也是如此。日志文件的位置和名称是 ` /var/log/sd-trace.log` 。这些跟踪文件只有命令专用的跟踪条目。用于执行守护进程的跟踪日志记录在另一个跟踪文件 `` /var/log/sd-daemon-trace.log` 中。</block>
  <block id="d5ccdb67b2ea215f1b4c145c50b7e527" category="doc">对多个文件规范和存储对象执行的操作</block>
  <block id="f5445c2c3069875f1dc060cf3f9085f1" category="paragraph">在此示例中，三个 LUN 位于两个存储系统卷 vol1 和 vol2 上。用户 mc 属于 nis_domain ，无权在 vol1 和 vol2 上创建文件规范。SnapDrive for UNIX 在上一示例中显示了两条错误消息。错误消息显示用户必须对 vol1 和 vol2 具有 `s .D Storage.Write` 访问权限。</block>
  <block id="8562d5860e28e2e4b14c0a819a9db7cd" category="summary">挂载 FlexVol 卷时， /etc/exports 文件中会添加一个条目。在 NFS 环境中， SnapDrive for UNIX 失败，并生成错误消息。</block>
  <block id="072c332063440b0c5eac60a4ecfdd1ee" category="doc">在 NFS 环境中挂载 FlexVol 卷失败</block>
  <block id="0da03c7fa7ae466e1a5dc43ab4ba0d1b" category="paragraph">挂载 FlexVol 卷时，会在 ` /etc/exports` 文件中添加一个条目。在 NFS 环境中， SnapDrive for UNIX 失败，并生成错误消息。</block>
  <block id="2c30a96a7a03866588f3ca0d31e30038" category="paragraph">此错误消息为</block>
  <block id="2d7c9d431268006144a1fec5ca5281c8" category="paragraph">由于选项 `nfs.export.auto-update` 设置为 `off` ， SnapDrive for UNIX 可能会遇到此错误消息。选项 `nfs.export.auto-update` 用于控制是否对 ` /etc/exports` 文件执行自动更新。</block>
  <block id="894251bfb5643eee944ced15cfc4cbfe" category="admonition">如果 NFS 环境中的 FlexVol 卷发生故障，则 AutoSupport 不会向存储系统发送此消息。</block>
  <block id="8f29fc1ce012c6de0493db6e5fd1e769" category="list-text">将 `nfs.export.auto-update` 选项 `设置为 on` ，以便自动更新 ` /etc/exports` 文件。</block>
  <block id="51aaff5efc3210bb0bd226bdf9dd9413" category="paragraph">SnapDrive for UNIX 现在可以挂载 FlexVol 卷。</block>
  <block id="f679e3268b3d9cbe0edda257a7a2ca28" category="paragraph">在 HA 对主动 / 主动配置中，确保为两个存储系统设置 NFS 导出选项 `on` 。</block>
  <block id="e961c5e26ebe732f0fa0e3c0450d9162" category="summary">在 RHEL 5.11 中运行 storage show 或 snap create 命令时，该命令会显示以下错误消息。对 SDU 守护进程的状态调用失败，并且在 SLES11SP3 主机中使用– nolvm 选项调用，而不涉及主机 LVM 。</block>
  <block id="248b5a7aaafd97f22e8fb7ed419608f8" category="doc">由于使用别名设备时多路径设置不正确， SnapDrive for UNIX 操作失败。</block>
  <block id="cfd056456dae79d1b65cfbb1e86ce96d" category="paragraph">在 RHEL 5.11 中运行 `storage show` 或 `snap create` 命令时，该命令将显示以下错误消息：</block>
  <block id="58ee54fc275206266bf6669875c5978b" category="paragraph">`s对 SDU 守护进程的状态调用失败，并且在 SLES11SP3 主机中使用 -nolvm 选项调用，而不涉及主机 LVM 。`</block>
  <block id="3c6437ef3d6408a3fa2513ba0fcc2ac9" category="list-text">* SnapDrive storage show -all` 命令无法显示正确的别名 *</block>
  <block id="76a0c3df7254841259db9c148bb74029" category="paragraph">SnapDrive for UNIX 不会为映射器设备显示正确的别名。如果在 `multipath.conf` 文件中的 multipaths ｛ ｝ 部分不正确，则会发生此问题描述。</block>
  <block id="c4bd0e395846fa37206c2bd11c042697" category="list-text">* 临时解决策 *</block>
  <block id="9583a4df02b71da5fea5a3a99a2e16ea" category="paragraph">您必须确保在多路径设置中输入右括号。</block>
  <block id="bf2652c0a2f3c75d38e2cd023f0806dd" category="list-text">为映射器设备 * 设置了别名后， * SnapDrive 操作失败，并显示以下错误</block>
  <block id="54420b6ccc7e689a36ef777a6f080e70" category="paragraph">如果与设备的别名映射不正确，则会出现此问题描述。</block>
  <block id="6174180c8f9f20c49a7e32ba0594f104" category="paragraph">执行 `multipath-ll` 并确保与设备的别名映射正确无误，然后执行 SnapDrive for UNIX 操作。</block>
  <block id="f3cedd51beac7e8cec8d33146334545a" category="summary">您可以使用 SnapDrive snap connect 命令连接到 LUN 以外的共享存储实体的 Snapshot 副本。</block>
  <block id="4bc2aa3a26061aa8f9b93c9814c40450" category="doc">连接到 LUN 以外的共享存储实体的 Snapshot 副本</block>
  <block id="c1fc7cef9bc97b14d4ab738b2360b638" category="paragraph">您可以使用 SnapDrive snap connect` 命令连接到 LUN 以外的共享存储实体的 Snapshot 副本。</block>
  <block id="8edaf71cad86d9ba07c6da5ac8ed58f2" category="paragraph">` * SnapDrive snap connect _fspec_set_ [_fspec_set..._] -snapname _long_snap_name_*`</block>
  <block id="5db03198a59591109b04bc55558b12fd" category="paragraph">` * _fspec_set_ [_fspec_set..._] -snapname _long_snap_name_ [-DeviceType shared] [-sparate]*`</block>
  <block id="b5bba77b6207c827df8f5df03f2ea004" category="paragraph">在此语法中， ` fspec_set_` 为： ` ｛ -dg _ -fs ｝ _src_file_spect [dest_file_spec_ ] [-destdg _dgename_]``</block>
  <block id="24f2990b740dcddbe05a9c0eea412a6b" category="summary">在使用 SnapDrive for UNIX 的 Linux MPIO 设置中，自动检测不适用于原始 LUN 上的文件系统。</block>
  <block id="62060d97b88a83ced6315eaea2fc1681" category="doc">对于通过原始 LUN 创建的 FS ，自动检测不适用于 MPIO 设置</block>
  <block id="ca1c68079b889a44bfda5e47b08c9d9a" category="paragraph">对所有 SnapDrive 操作使用选项 ` -FS` 。</block>
  <block id="9a0d28779c287b1d638708d16bb32f59" category="summary">您无法执行 SnapDrive for UNIX 命令，因为 SnapDrive for UNIX 不接受通过命令 Shell 设置的环境变量，并且 $LD_library_path 和 snapcreate-check-nonpersistent-nfs 参数设置为 off 。</block>
  <block id="859569f6ed24d543ab843fcff23e24a1" category="doc">使用命令 Shell 设置环境变量时， SnapDrive for UNIX 命令失败</block>
  <block id="32881469fca772c7813dd2f4ed1b3e5e" category="paragraph">您无法执行 SnapDrive for UNIX 命令，因为 SnapDrive for UNIX 不接受通过命令 Shell 设置的环境变量，并且当 ` * $LD_library_path*` 和 ` * snapcreate-check-nonpersistent-nfs*` 参数设置为 off 时。</block>
  <block id="05193f1202bff453710d08e6aa363a00" category="paragraph">对 SnapDrive for UNIX 二进制文件使用包装程序脚本，并将环境变量设置为对二进制文件可见。</block>
  <block id="306adfcc5287244bf55c1530f2ec2fb1" category="summary">您可以使用 SnapDrive portset list 命令查看主机上在 SnapDrive 中配置的所有端口集。</block>
  <block id="8ba46f0e8ace7417d8ce47f87170b857" category="doc">查看端口集列表</block>
  <block id="da1a1ce15d9df862ed3a0aa4f7f1ed4e" category="paragraph">您可以使用 SnapDrive portset list` 命令查看主机上在 SnapDrive 中配置的所有端口集。</block>
  <block id="6100ada01157d292e2dec29cf8255a05" category="paragraph">` * SnapDrive 端口集列表 *`</block>
  <block id="8ee97ff3ec1f97b672a782f5e50256b8" category="summary">您可以在 LUN 上创建文件系统，并指定在其中创建的 LUN 。</block>
  <block id="f2198fea2f4ce9e7edce6144616229c8" category="doc">在 LUN 上创建文件系统并指定 LUN</block>
  <block id="659508bc317b3603ea5e1370c762c303" category="list-text">请使用以下命令格式完成此操作：</block>
  <block id="0b6882612e4440ef524d7fcf386563c9" category="paragraph">` * SnapDrive storage create _-fsfile_spec_ -nolvm （ -fstype 类型） "-vmtype _type_] （ -fsopts _options_） （ -mntopts _options_） （ -noperacuse] -lun _long_lun_name_ -lun _size sizeig_name_ （ _ig_name_ ）（ _noresreserve_`</block>
  <block id="0bf57623a05bf00de31a58dfb97e0f96" category="paragraph">SnapDrive for UNIX 会在您指定的存储系统，卷和 LUN 上创建文件系统。它会执行与 LUN 的主机准备和发现以及 LUN 与主机实体的映射和连接相关的所有任务。</block>
  <block id="374fae264ee9e33403a5ca04e22c5148" category="section-title">示例：在 Acctfiler ： /vol/vol1 中的 luna 上创建 100 MB 的文件系统</block>
  <block id="c4c529ba6aba4d7407f9b6c25a371586" category="paragraph">` # SnapDrive lunsize 100m -nolvm`</block>
  <block id="d532a3e9ab40c7191e26ff20b83a3e6a" category="summary">在卷还原预览报告中， SnapDrive for UNIX 会显示 LUN 映射信息。显示的信息与检查相关，正常文件将还原。查找基于特定卷上的 LUN 的所有主机文件名非常耗时，并且会减慢卷还原过程的速度。</block>
  <block id="fdec3f84472cbc3bb136351a39d76d21" category="doc">特定卷的主机文件规范信息</block>
  <block id="1ea8a963aafba6217f1a55dc971cd777" category="paragraph">如果您希望知道本地主机的主机文件规范信息已映射到特定存储系统卷，则可以使用 SnapDrive storage show -filervol &lt;full-volume-name&gt;` 。下面显示了一个示例。</block>
  <block id="c68fb257830cdf8f75b8f59ba7fda96b" category="summary">通过 SnapDrive 配置向导，您可以根据环境配置适用于 UNIX 的 SnapDrive 以及 NFS 或 SAN 设置。或者，您也可以打开 SnapDrive.conf 文件并编辑配置变量。</block>
  <block id="c403eef55d01f6f4597600544a39275e" category="doc">SnapDrive 配置向导的功能</block>
  <block id="49f5e2fd4c207dd574bc6ac40d9117ba" category="paragraph">通过 SnapDrive 配置向导，您可以根据环境配置适用于 UNIX 的 SnapDrive 以及 NFS 或 SAN 设置。或者，您也可以打开 `snapdrive.conf` 文件并编辑配置变量。</block>
  <block id="549119e0350a504aa43fe39a9cba6d15" category="summary">命令 SnapDrive snap show 或 list 可显示创建 Snapshot 副本的存储系统的名称，主机名，日期和时间等。</block>
  <block id="173d1615106c28d71eb3caf15620e694" category="doc">显示 Snapshot 副本</block>
  <block id="571d2c9a9fbf4c8e85cfd9d84de3a403" category="paragraph">命令 SnapDrive snap show` 或 `list` 可显示创建 Snapshot 副本的存储系统的名称，主机名，日期和时间等。</block>
  <block id="532477e20fdb5f66a787b3bbaf33d983" category="list-text">输入以下命令语法以显示 Snapshot 副本：</block>
  <block id="d7e5edf61b7919988fc7c317bca94642" category="paragraph">` * SnapDrive snap show （ -snapname] lor_snap_name ） 【 -verbose 】 *`</block>
  <block id="5950f401471686f4ac9b37f5b256c4a1" category="paragraph">此操作至少会显示有关 Snapshot 副本的以下信息：</block>
  <block id="32850b32fcecb0a905c0974f41a8e40f" category="list-text">创建 Snapshot 副本的存储系统的名称</block>
  <block id="23acc77cbe95afe7a7ed6f7041581be6" category="list-text">创建 Snapshot 副本的主机的名称</block>
  <block id="576b068635e5b008b28b1953490e6763" category="list-text">存储系统上 LUN 的路径</block>
  <block id="7619ea89dfbcab71c9162c183e36932b" category="list-text">创建 Snapshot 副本的日期和时间</block>
  <block id="2b1c3d302025b2556b1b069865195886" category="list-text">Snapshot 副本的名称</block>
  <block id="aa15757410e30cfd9d473c5d54da1eb3" category="list-text">Snapshot 副本中包含的磁盘组的名称</block>
  <block id="446a1f419b69bb03f46a82f7ed79e862" category="paragraph">* 示例 * ：以下是 SnapDrive snap show` 命令的示例：</block>
  <block id="2313fd8538748493d03a6e9b367da220" category="paragraph">* 示例 * ：此示例使用通配符显示有关特定卷上可用 Snapshot 副本的信息：</block>
  <block id="ecf1b5fbb33bd130b0409bc696ee08c3" category="paragraph">* 示例 * ：此示例显示了使用带有 ` - verbose` 选项的 SnapDrive snap list 命令在 Linux 主机上为 NFS 挂载的目录树创建的 Snapshot 副本：</block>
  <block id="195efed1354972b0cb28ddae226611b6" category="paragraph">* 示例 * ：此示例将在 Linux 主机上执行 SnapDrive snap show 命令：</block>
  <block id="61049a5d1c3abcfce03ec9d37cd147d2" category="paragraph">* 示例 * ：以下示例使用通配符：</block>
  <block id="f2ae5ae2811370f7b8e3674069abb515" category="paragraph">* 示例 * ：在此示例中，使用通配符无效，因为通配符位于名称中间，而不是置于末尾：</block>
  <block id="c0a4a7506d98780f501ea252d2dc45d9" category="summary">删除 LUN 和克隆可能会在 UNIX 中留下陈旧设备，并且 SnapDrive for UNIX 不会删除这些陈旧设备。</block>
  <block id="116f42abfaafe197915ecebfd59e1089" category="doc">删除 LUN 和克隆会使 UNIX 中的设备陈旧</block>
  <block id="59e64d659160ec526d6854b4bd8b6723" category="paragraph">在手动或使用适用于 UNIX 的 SnapDrive 从 Snapshot 副本为 LUN 和 LUN 克隆创建设备时，系统会自动在 UNIX 中创建设备条目。使用 SnapDrive for UNIX 从 Snapshot 副本中删除 LUN 的设备和 LUN 克隆可能会导致 UNIX 中的设备陈旧。</block>
  <block id="05cd4fc4c9c8046260da423ed9e49a5f" category="paragraph">删除陈旧设备是最终用户的责任，必须由 UNIX 管理员执行。</block>
  <block id="b903c29e494cea184fcd929bba40c1e7" category="summary">通过 SnapDrive for UNIX ，您可以为主机数据创建 Snapshot 副本。</block>
  <block id="f262ab7c1aa14c58a7b453666d45bbce" category="doc">在 SnapDrive for UNIX 中创建和使用 Snapshot 副本</block>
  <block id="3518913b4de7463c903a478fafc6809b" category="summary">您可以更改 SnapDrive.conf 文件中的值或添加新的名称 - 值对。</block>
  <block id="e06ccf38dcfa14ddeb386467da09ab60" category="doc">设置 SnapDrive.conf 文件中的值</block>
  <block id="0007e9a1f03bc10e9edc296663ff8837" category="paragraph">您可以更改 `snapdrive.conf` 文件中的值或添加新的名称 - 值对。</block>
  <block id="9787479248e35a6e554fc389bea1738c" category="list-text">备份 `snapdrive.conf` 文件。</block>
  <block id="cfdded2aacb8c0bfba57249beeaa0aed" category="list-text">要添加名称 - 值对，请使用以下格式：</block>
  <block id="ff011ce9af763b48cf9479610f357717" category="paragraph">` * config-option-name= 值 # 可选注释 *``</block>
  <block id="7fb50f71b7ce2d55bee9bb7b4a88d27e" category="paragraph">` config-option-name_` 是要配置的变量的名称；例如， audit-log-file 。` 值 _` 是要分配给此选项的值。</block>
  <block id="2abe337aabe48d50baab57d96ddf0df2" category="paragraph">如果要在名称 - 值对中包含注释，请在注释前面添加一个数字符号（ # ）。</block>
  <block id="230b2ae88f7ebb5b4ec16d269f8b1fad" category="paragraph">每行只能输入一个名称 - 值对。</block>
  <block id="5272c728c9c0d00f1e6fa4d0f6d1f955" category="paragraph">如果名称或值使用字符串，请将该字符串用单引号（ '` ）或双引号括起来。您可以将引号放在整个名称 - 值对周围，也可以仅放在值周围。以下示例显示了如何对名称 - 值对使用引号和注释：</block>
  <block id="adf3a2e44245f6cc9ae32081d5663057" category="paragraph">` *` "config-option-one=string with white space" # 双引号 *`</block>
  <block id="745d0b4df6aa2d5b6515f9b4112f2181" category="paragraph">` * config-option-tw="string with white space" # 双引号将值 *` 括起来</block>
  <block id="e09c8d3bb972eb7e69f44e918e58de0c" category="paragraph">` * config-option-2b=`'tring with white space` ' # single quito*``</block>
  <block id="63f4b1d09d671752ad7c66497d0516bf" category="list-text">要修改名称 - 值对，请将当前值替换为新值。</block>
  <block id="6032214b234affb2a9df64f6583512b5" category="paragraph">按照以下步骤操作，确保默认值记录在文件中。</block>
  <block id="317275048b6770b7b82df30e23e8186f" category="list-text">将符号（ # ）添加到要修改的行。</block>
  <block id="7754acc7cd209f6493414072def4ca27" category="list-text">复制此行。</block>
  <block id="7fdbb65f45df1452ba02ab157677fc8d" category="list-text">删除数字符号（ # ）以激活复制的文本。</block>
  <block id="ba63adeb7ca7349cb1598a8fa9e2be10" category="paragraph">如果要指定空值（例如，禁用审核日志文件），请输入一对双引号（ "" ）。</block>
  <block id="f53da22070a749ae5d15725200659ad3" category="paragraph">SnapDrive for UNIX 会在每次启动此文件时自动对其进行检查。所做的更改将在下次启动时生效。</block>
  <block id="587c070f4a6be8ece006e6df17b2059a" category="list-text">使用 `snapdrived restart` 命令重新启动 SnapDrive for UNIX 守护进程。</block>
  <block id="508ffc830920939bde635b80cbcffccd" category="paragraph">要使 `snapdrive.conf` 文件更改生效，必须重新启动守护进程。</block>
  <block id="61e0e72bb0fbf4da3b5a5aed31611da7" category="summary">要成功执行 SnapDrive for UNIX 操作，您必须设置 Storage Virtual Machine （ SVM ，以前称为 Vservers\ ）</block>
  <block id="9c3bfbb4258153b74c0020a62e4cd796" category="list-text">您必须已将包含卷的聚合分配给 SVM 聚合列表，才能执行适用于 UNIX 的 SnapDrive 操作。</block>
  <block id="eb384912c3be9db5d6660d46264838ed" category="list-text">您必须创建一个或多个 SVM 才能从集群提供数据。</block>
  <block id="57aec4ff903084462b15d55ca74af37d" category="paragraph">SVM 管理逻辑接口（ LIF ）的 IP 地址必须与 SVM 名称进行映射，可以在域名服务（ DNS ）或 ` /etc/hosts` 文件中进行映射。</block>
  <block id="5270cc68e85de42a2888fd5a3a47981f" category="list-text">如果您运行的是 ONTAP 8.2.2 或更早版本，请在集群管理服务器上创建一个用户，也称为 adminSVM ： +</block>
  <block id="3bcf8c1a64b0bb423c747574ad73fa3c" category="paragraph">` * SnapDrive 配置集 -cserver _csadmin_name cserver_name_*`</block>
  <block id="dfdb2046a90a16a55d367932ee482619" category="paragraph">如果您运行的是 ONTAP 8.2.3 或更高版本，请跳过此步骤。</block>
  <block id="624dd461537c07029c019223bd1ea847" category="list-text">在数据 SVM 上创建用户：</block>
  <block id="6c36362c418d90842a961aeae5857ea5" category="list-text">验证是否已在适用于 UNIX 的 SnapDrive 中配置 SVM ：</block>
  <block id="651306054b05d1f189f40b4e67b7b862" category="paragraph">命令可列出集群管理服务器和数据 SVM 的用户名和 IP 地址。</block>
  <block id="df778a34ed8a84341d0f871565fc04eb" category="list-text">修改 SVM 数据接口路径的管理接口路径：</block>
  <block id="967626690b4fc921e9651e2f22234782" category="list-text">从 NetApp 支持站点 http ： //mysupport.netapp.com/NOW/cgi-bin/software[NetApp Downloads ： software] 下载适用于 UNIX for Linux 的 SnapDrive 安装程序，并将文件复制到 Linux 主机。</block>
  <block id="d69a9b293ea2660bf4a4c3baaea4d76c" category="list-text">在 `snapdrive.conf` 文件中，必须将 `default-transport` 设置为 `fcp` ，并且必须重新启动 SnapDrive for UNIX 守护进程。</block>
  <block id="58775db219522935068db004c9eb577a" category="paragraph">` * SnapDrive 配置集 -viadmin _user viadmin_name_*`</block>
  <block id="23b1a419a108b5e30bcfd5b8cab43ed8" category="paragraph">` * storage show-all _command_*`</block>
  <block id="9d6db04e6322ccf718c0f25596cf92ff" category="paragraph">` * SnapDrive storage connect-lun _long_lun_name_*`</block>
  <block id="74b77c72c36c85da4faf787b7c3d1648" category="list-text">如果传输协议为 FC ，则必须安装 `libHBAAPI` 软件包或供应商专用的软件包，以便 SnapDrive for UNIX 能够在主机上运行。</block>
  <block id="a94dfc2bf3fcd97999df07b0b4d40ff6" category="list-text">使用集群模式 Data ONTAP Snapshot 技术创建 Snapshot 副本。</block>
  <block id="c5c5e3b41ee271d63ef42d6b16d8063e" category="image-alt">SDU 部署工作流 cmode</block>
  <block id="6401f0c236877bfd823b734c3cd1e971" category="summary">介绍在 Linux 环境中使用集群模式 Data ONTAP 部署 SnapDrive for UNIX 所需执行的初始任务。</block>
  <block id="c5970de0e734eb01650d6dace50201e3" category="doc">《适用于集群模式 Data ONTAP 的 Linux ® 安装和设置指南》</block>
  <block id="db1e43c1f891d684ec1369694c767f69" category="paragraph">本指南介绍在 Linux 环境中使用集群模式 Data ONTAP 部署 SnapDrive 5.3.2 for UNIX 时需要执行的初始任务。</block>
  <block id="64986547d743f4f309ff6390c2c423cd" category="paragraph">证书路径在 `snapdrive.conf` 文件中的 `sdu-demoncertificate-path` 配置变量中定义。</block>
  <block id="510d833a42876a59237aaa66d0c27578" category="list-text">链接。</block>
  <block id="e8a2fecf9ddd2ebca3f58c88d97aa662" category="inline-link">《适用于集群模式 Data ONTAP 的 UNIX 的 SnapManager 3.4 for Oracle 安装和设置指南》</block>
  <block id="b769bea0134376a234fe2e3b8ee41d16" category="list-text"><block ref="b769bea0134376a234fe2e3b8ee41d16" category="inline-link-rx"></block></block>
  <block id="e0aae12d8a1221979d822400ae48c08b" category="paragraph">介绍在 UNIX 环境中使用集群模式部署 SnapManager for Oracle 时必须执行的初始任务。主题包括如何安装和配置产品以及如何备份数据库。</block>
  <block id="f68b3e29e3fc98f3af5522c3a9d2aca6" category="inline-link-macro">NetApp 技术报告 4212 ：《适用于 UNIX 的 SnapDrive 5.3 最佳实践指南》</block>
  <block id="c2b08c368fd8d3c62c5836306c1fbf9f" category="list-text"><block ref="c2b08c368fd8d3c62c5836306c1fbf9f" category="inline-link-macro-rx"></block></block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="de6edae22bc37b97b38a15c7f8af62e2" category="paragraph"><block ref="de6edae22bc37b97b38a15c7f8af62e2" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="547ea2e305891e64d8e744949b0aca2c" category="paragraph"><block ref="547ea2e305891e64d8e744949b0aca2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="50921fca0d376fca62102a5e608994e2" category="paragraph"><block ref="50921fca0d376fca62102a5e608994e2" category="inline-link-rx"></block></block>
  <block id="24efa7ee4511563b16144f39706d594f" category="section-title">通知</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="05f1d2a916caf49bc30c7dd544012adb" category="inline-link-macro">适用于 Unix 5.3.2 的 SnapDrive 的注意事项</block>
  <block id="0aa8707c79f3b12272fe871378ecacbf" category="paragraph"><block ref="0aa8707c79f3b12272fe871378ecacbf" category="inline-link-macro-rx"></block></block>
  <block id="9149f8e039fba2f050be8617f04af65f" category="doc">SnapDrive for UNIX 5.3.2 文档</block>
  <block id="0326ace07ede585cf6f8d908d7874ca4" category="paragraph">欢迎使用 SnapDrive for UNIX 信息库。您可以在此处找到有关 SnapDrive for UNIX 软件 5.3.2 的文档，其中包括如何安装，配置，使用和管理适用于 Linux ， Solaris 和 AIX 的 SnapDrive 。</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link-macro">NetApp 支持站点</block>
  <block id="4c363f55ef8b6222790065d113148e8f" category="paragraph">有关早期版本的 SnapDrive for Unix 的文档，请参见 <block ref="ebf0284ef7850184bea93509f030f217" category="inline-link-macro-rx"></block>。</block>
  <block id="e64583d97617292579e22e31a6d99a2f" category="paragraph"><block ref="e64583d97617292579e22e31a6d99a2f" category="inline-xref-macro-rx"></block></block>
  <block id="dc22d4453043bf23ff39312c9da5f0d1" category="paragraph"><block ref="dc22d4453043bf23ff39312c9da5f0d1" category="inline-xref-macro-rx"></block></block>
  <block id="46d0b30e1f563f7b48ed7c4295573bbe" category="summary">虽然光纤通道协议（ FCP ）和 Internet 小型计算机系统接口（ iSCSI ）曾经作为单独的实用程序分发，但您可以在 AIX Host Utilities 中找到 FCP 和 iSCSI 配置支持。</block>
  <block id="faddc9c3815a629b0d7ef52e3628fe35" category="doc">FC 或 iSCSI 配置检查</block>
  <block id="df5ccf44e1c51e83a813e8eeff359895" category="paragraph">虽然光纤通道协议（ FCP ）和 Internet 小型计算机系统接口（ iSCSI ）曾作为单独的实用程序分发，但您可以在 AIX Host Utilities 中找到 FCP 和 iSCSI 配置支持。</block>
  <block id="7def2fe82aee024fe094c2a442c34717" category="paragraph">如果您的配置使用 FC 或 iSCSI ，则必须在安装 SnapDrive for UNIX 之前完成以下任务：</block>
  <block id="9d113198ceb4be55d377bc7f59050316" category="list-text">确保已在主机系统上安装 AIX Host Utilities 。</block>
  <block id="0e1260b132fbf2c498f999854308e8a3" category="list-text">设置主机和存储系统。</block>
  <block id="cbf253dfe1631a4d826eb25b81351d06" category="paragraph">要使用此主机，请按照存储系统的主机实用程序随附的文档中的说明进行操作。包含多路径或卷管理器软件的配置必须使用 AIX Host Utilities 和 SnapDrive for UNIX 支持的软件。</block>
  <block id="115a4180c66732826598868a329d9b19" category="admonition">有关 SnapDrive for UNIX 及其要求的最新信息，请参见互操作性表。</block>
  <block id="7d5d545a7e647d6f4b4fa997fb098665" category="paragraph">在转换阶段执行任何 SnapDrive 命令时， SnapDrive for UNIX 可以重试 `snapdrive.conf` 文件中变量 ` _volmove-cutover-retry_` 和 ` volmove-cutover-retry-leep_` 中定义的操作。</block>
  <block id="d63c868843bdb51b628b3c32806b78be" category="summary">SnapDrive for UNIX 会安装诊断文件，以帮助检测 SnapDrive for UNIX 中的问题。</block>
  <block id="2cf313e2948bfc651b1e5fbfa6862238" category="doc">SnapDrive for UNIX 安装的诊断文件</block>
  <block id="9e8ce84dee121963c9e3360c43788d71" category="list-text">` /opt/NetApp/SnapDrive/diag/SnapDrive.dc`</block>
  <block id="da9a1c4baed46a5c50437d50aa0d2418" category="list-text">` /opt/NetApp/SnapDrive/diag/filer_info`</block>
  <block id="5fe04e26c6385255f453e17636f317e8" category="list-text">` /opt/NetApp/SnapDrive/diag/Brocade_info`</block>
  <block id="9d1c3df99683c172e642cef670772d6f" category="list-text">` /opt/NetApp/SnapDrive/diag/Cisco_info`</block>
  <block id="82f246049c5de9f82326f3b8e24820e7" category="list-text">` /opt/NetApp/SnapDrive/diag/McData 信息`</block>
  <block id="3349bfc866a3f5546df1d62ce24179e8" category="list-text">` /opt/NetApp/SnapDrive/diag/SHsupport.pm`</block>
  <block id="52bd097e441ee083240d1836a2fd587d" category="list-text">` /opt/NetApp/SnapDrive/diag/Telnet.pm`</block>
  <block id="083bb0776e1660d454022bf135193c13" category="list-text">` /opt/NetApp/SnapDrive/diag/aix_info`</block>
  <block id="d9e8ceb15afa5883e6672dd273ebb261" category="summary">您可以使用系统管理接口工具（ SMIT\ ）在 AIX 主机上安装 SnapDrive for UNIX 。</block>
  <block id="61ba5309e0b9bd619908d6b8381c0926" category="doc">在 AIX 主机上安装 SnapDrive for UNIX</block>
  <block id="8ccaf1438fc16ab11e32faddadebc311" category="paragraph">您可以使用系统管理接口工具（ SMIT ）在 AIX 主机上安装 SnapDrive for UNIX 。</block>
  <block id="376cc1513c1645c8489d84c52aace4a2" category="paragraph">您必须确保以 root 用户身份登录。</block>
  <block id="df3f3798acfb33ff9d6e40e6b8cc65c5" category="admonition">不应删除安装 SnapDrive for UNIX 的目录。如果删除目录，则启动和停止守护进程可能会出现问题。</block>
  <block id="74499a91d9e3325d58742c6187ebb258" category="list-text">从 NetApp 支持站点下载软件。</block>
  <block id="a86680e98ccd8b5f34d8a7220824957e" category="list-text">更改为放置未压缩的 `NetApp.SnapDrive_AIX_5_2.z 文件的目录` 。</block>
  <block id="7be129947a3b5340f4bc18adb64fa28a" category="list-text">运行以下命令启动 SMIT ：</block>
  <block id="d9a1aff23629f33e995da674016766e1" category="paragraph">` * smit *`</block>
  <block id="9f4e623417d85d2c39b3cd225f190cda" category="list-text">选择 * 软件安装和维护 * 选项。</block>
  <block id="797894d805b594066b1c2ac5e0a9f8ee" category="list-text">在下一屏幕中，选择 * 安装和更新软件 * 菜单选项。</block>
  <block id="fc411c4ac12aa388334b115d8e2f0e1f" category="list-text">在安装软件屏幕中，通过以下方式之一指定软件的位置：</block>
  <block id="0d6b858dfa4ae879935bb02b77b8424b" category="list-text">手动输入软件位置的路径。</block>
  <block id="8a77efd636d55ea0540119cd0b52e9bc" category="list-text">按 "F4" 显示选项列表。</block>
  <block id="6e7efcb58f3cc186f2f3d8bdb724f1a6" category="paragraph">如果要使用 f4 方法，请完成以下步骤：</block>
  <block id="6d5facb34bccbce71f324fcbf8445392" category="list-text">按 "F4" 。</block>
  <block id="1292ced9e69b47ccd1f3c8016b5c17ce" category="list-text">在询问要安装的软件的提示符处，输入：</block>
  <block id="df5a8ce16f02b213fd943c87c454509e" category="paragraph">` * NetApp.SnapDrive*` 。</block>
  <block id="5068b00352f823c9991c99ed5a901ecb" category="list-text">在询问您要继续还是取消的提示符处，按 Enter 键完成安装。</block>
  <block id="537259b8608ef9504b7fc99a371815aa" category="list-text">使用 `lslpp -l netapp.snapdrive` 命令验证软件包安装。</block>
  <block id="9f9b701eca11b43723d440c9023cfdfb" category="list-text">通过为系统配置 SnapDrive for UNIX 来完成设置。</block>
  <block id="7e2747399814d7772331e36ddde22888" category="paragraph">默认情况下，大多数信息都已设置；但是，您需要指定以下信息：</block>
  <block id="5d0bf4d313f0999c12b848634908e14b" category="list-text">存储系统的登录信息</block>
  <block id="a7e53a17849abef3aec440a32b2fa939" category="list-text">AutoSupport 设置</block>
  <block id="6eedd214525360b3c63eea7ebb5e3c03" category="list-text">根据您使用的是 FC 协议还是 iSCSI 协议，为以下选项 SnapDrive for UNIX 设置正确的配置值：</block>
  <block id="029893f89019683abe325365ed50f1f1" category="list-text">`default-transport`</block>
  <block id="6e628d32ae488ce7f647be2abb176adf" category="paragraph">根据协议，选择 `FCP` 或 `iSCSI` 。</block>
  <block id="0cb4e4cecbf691fdc0068910ac838478" category="list-text">`m多路径类型`</block>
  <block id="dfceb5b81f71f6a55c451d2ecca06800" category="paragraph">对于 FC ，请将其设置为以下任一值：</block>
  <block id="9956d013f8650f6d50d00396e511d51b" category="list-text">`NativeMPIO`</block>
  <block id="99e2d0fb79d48f0b83718dcccf43a18e" category="list-text">`dMP`</block>
  <block id="9000370feaff66a87bcd229b8dbecb15" category="paragraph">对于 iSCSI ，请将其设置为 `NativeMPIO` 或 `DMP` 。</block>
  <block id="2bdfb125359f93763e70c034dd085850" category="admonition">您不能使用存储实体指定特殊字符，例如 ` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 和 ` -hostvol` 。但是， ` -FS` ， ` -lvol` 和 ` -hostvol` 等存储实体允许使用斜线（ / ）。</block>
  <block id="d6007d52513227f6fdae3c9a978a9bc4" category="paragraph">磁盘组（` -dg file_specs` ）或卷组（` -vg file_specs` ）</block>
  <block id="c6a5788ddb265df843cf6cc6fd9486c4" category="paragraph">主机卷（` -hostvol file_specs` ）或逻辑卷（` -lvol file_specs` ）</block>
  <block id="38a711987adf8a4f27507d0458b45890" category="paragraph">Snapshot 副本名称（` -snapname snap_name` ）</block>
  <block id="0b08a18be5fbf646bd0acfa4953f7059" category="paragraph">如果设置了 RBAC 方法 ` RBAC 方法 = dfm_` 且 Operations Manager 控制台不可用，则 SnapDrive for UNIX 将显示以下错误消息：</block>
  <block id="30e5431049152f18d1f733c43152ee96" category="paragraph">要在 Operations Manager 控制台不可用的情况下使用 SnapDrive for UNIX ，服务器管理员必须在 `snapdrive.conf` 文件中将基于角色的访问控制（ Role-Based Access Control ， RBAC ）方法重置为 ` RBAC 方法 = 原生` 。更改 `snapdrive.conf` 文件后，必须重新启动 SnapDrive for UNIX 守护进程。如果设置了 ` RBAC 方法 = UNIX_` ，则只有 root 用户可以使用 SnapDrive for 原生。</block>
  <block id="a7d16860b31f39e4e1af98a0b0ec637d" category="paragraph">启用跟踪日志文件不会影响系统性能。默认情况下，此文件处于启用状态。您可以通过将 `snapdrive.conf trace-enabled` 变量设置为 `off` 来禁用。</block>
  <block id="ac2c026c7d43a6669dbae27d64df4fd8" category="summary">根据您的存储系统，您可以配置光纤通道 \ （ FC\ ）， Internet 小型计算机系统接口 \ （ iSCSI\ ）或使用 NFS 目录树的网络文件系统 \ （ nfs\ ）配置。</block>
  <block id="800f7da804cf784ad962d085fbc70486" category="doc">硬件和软件配置</block>
  <block id="088b92dce3e5d9b01232fc1674508769" category="paragraph">根据您的存储系统，您可以配置光纤通道（ Fibre Channel ， FC ）， Internet 小型计算机系统接口（ Internet Small Computer System Interface ， iSCSI ）或使用 NFS 目录树的网络文件系统（ Network File System ， NFS ）配置。</block>
  <block id="9618f88c6d157ad03317ba71131989ba" category="paragraph">` * SnapDrive snap create ｛ -lun _ -dg _ -fs | -hostvol ｝ _file_spec[file_spec...]_ （ ｛ -lun _dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec_...]] -snapname _snap_name_ [ -force [-noprompt]]-unrelated ] [-nodfilerfencet] [-fstype _type_][-vmtype _type_]*`</block>
  <block id="864e111b22430d086572b66c5587dc9b" category="paragraph">` _file_spec_` 参数表示一个或多个存储系统上的一组存储实体。Snapshot 创建操作会为包含这些实体的存储系统卷创建一个 Snapshot 副本，并为其提供在 `snap_name` 参数中指定的名称。</block>
  <block id="f59fc3d95e8f1aa9e1d809a269d8857d" category="summary">您可以使用系统管理接口工具（ SMIT\ ）从 AIX 系统卸载 SnapDrive for UNIX 。</block>
  <block id="b15e9fa3e07f49a2d75b1a850ae7f028" category="doc">从 AIX 主机卸载 SnapDrive for UNIX</block>
  <block id="32f7d1b8ee262c2af3e97a0fd711ca55" category="paragraph">您可以使用系统管理接口工具（ SMIT ）从 AIX 系统卸载 SnapDrive for UNIX 。</block>
  <block id="8f2b9e6db6b7e16b8cbe1a3aeb9865af" category="list-text">输入以下命令以启动 SMIT ：</block>
  <block id="d6bcf7184fa200bf831d1b63d3765d1d" category="list-text">选择 * 软件安装和维护 * 菜单选项。</block>
  <block id="9a4779d82078b0861532d27f5aeb6774" category="list-text">在显示的屏幕上，选择 * 软件维护和实用程序 * 菜单选项。</block>
  <block id="434fb695ec2593a0867471bb7f27dc35" category="list-text">在下一屏幕中，选择 * 删除已安装软件 * 菜单选项。</block>
  <block id="9934359dff5eb94cd09dc779fb99d848" category="list-text">通过以下方式之一删除软件：</block>
  <block id="3e316d665f996995bc982626a59c90f6" category="list-text">输入软件包名称 `NetApp.SnapDrive` 。确保 `仅预览` 选项设置为 `否` 。</block>
  <block id="612449755093acd91b0e816e2e838121" category="list-text">按 "F4" 显示名称列表。</block>
  <block id="c51e9b4a62d84b94f9e26ad6064ed88f" category="list-text">向下滚动名称列表，直到显示 `NetApp.SnapDrive` 。</block>
  <block id="d94c92dee664869fdf24ba76e6b0d7d6" category="list-text">选择 `NetApp.SnapDrive` ，然后按 Enter 键。</block>
  <block id="b61341de953746951c9f4cc5a3f97938" category="paragraph">此时将显示一条提示消息。</block>
  <block id="ed72f6f5b67ac365c9b76d97ed6bb9e7" category="list-text">选择 `Continue` 或 `cancel` 。</block>
  <block id="1e023e66cc9609730c5119e37a9211f6" category="list-text">按 Enter 键完成卸载。</block>
  <block id="a80d65acf25c2be0645f4dbd288d6ba4" category="paragraph">卸载过程会将日志文件放置在以下位置： ` /tmp/SnapDrive_uninstall` 。</block>
  <block id="c38c2cad03beab6125d5489575a7117b" category="paragraph">如果值为 `原生` ，则访问检查将使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac` 中的访问控制文件。</block>
  <block id="71a53a8de0e5ef9a1497e668370c4e75" category="paragraph">指定 RBAC 缓存超时期限，并且仅在启用 ` RBAC 缓存 _` 时才适用。默认值为 `24` 小时。</block>
  <block id="b2c2b6e43c6dcf6933b8303444675957" category="paragraph">通过此变量，您可以将适用于 UNIX 的 SnapDrive 设置为在与 Operations Manager 控制台通信时使用 SSL 加密（ HTTPS ）。默认值为 `on` 。</block>
  <block id="5de923b50166edb21a721c48a7ecde25" category="paragraph">` * SnapDrive snap connect -lun _s_lun_name d_lun_name_ [-lun] _s_lun_name d_lun_name_... -snapname _long_snap_name_ "-igroup _ig_name_ [_ig_name_...]] 【拆分】 *`</block>
  <block id="e4af1b7e2e7d258aca8846c6456aaa72" category="admonition">_s_lun_name_ 和 _d_lun_name_ 的格式应为 lun_name 或 qtree_name/lun_name 。</block>
  <block id="2267b307aed4e4434bac77a557ee5bb9" category="paragraph">Operations Manager 控制台管理员创建一个名为 sd-admin 的用户，该用户能够对全局组（全局 `Dfm.core.AccessCheck` ）执行核心访问检查。在 Operations Manager 控制台管理员配置了 SD-admin 用户后，您必须手动将凭据信息发送给 SnapDrive for UNIX 管理员。有关使用 Operations Manager 控制台配置用户和角色的详细信息，请参见 _Operations Manager 控制台管理指南和联机帮助。</block>
  <block id="7c55f98f6c8648677118c189e9eb781d" category="summary">在安装 SnapDrive for UNIX 之前，您必须验证存储系统是否已准备就绪并检查某些软件的许可证。</block>
  <block id="9f4571126136a3cec31f1e85ad11aa84" category="doc">验证存储系统就绪情况和许可证</block>
  <block id="65ac70b2787abfaf135067ac5ef6b778" category="paragraph">您必须确保满足以下条件：</block>
  <block id="f8c2700ff3b8add909f2fa63b4205abb" category="list-text">存储系统已联机。</block>
  <block id="28695573c0afb14361d83222f1b10756" category="list-text">存储系统满足 SnapDrive for UNIX 的最低系统要求。</block>
  <block id="ca05342d3747bee6391e1faffa2f934a" category="list-text">存储系统中的 HBA 或网络接口卡（ NIC ）可满足主机操作系统的要求。</block>
  <block id="c1360681254f2ea5b5d2b4fa64d556a1" category="paragraph">有关 HBA 卡的详细信息，请参见互操作性表。</block>
  <block id="d288c6a0017565fbcf000ce3a7e36407" category="list-text">主机和存储系统可以使用 Internet 协议（ IP ）进行通信。</block>
  <block id="6dc8b3aa74d41d093f31924c5d508c0b" category="list-text">以下许可证有效：</block>
  <block id="7022553426cc52869db9178306f300bf" category="list-text">MultiStore 软件</block>
  <block id="8d00c5ee136d72f659c98ad41d38f118" category="list-text">对存储系统的安全 HTTP 访问</block>
  <block id="88fe50fe06fb05b9faa3e0fed8020ff2" category="paragraph">通过 HTTPS 功能，您可以通过管理 ONTAP 界面为与存储系统的所有交互指定 SSL 加密，包括发送密码。这种行为是 SnapDrive 4.1 for UNIX 以及 AIX 主机更高版本中的默认行为；但是，您可以通过将 `use-https-to-filer` 配置变量的值更改为 `off` 来禁用 SSL 加密。</block>
  <block id="7d2d0cc0c100d9ea7ffdab412bfcc6cc" category="paragraph">` * SnapDrive snap restore -snapname _snap_name_ ｛ -lun |-dg _-fs | - hostvol _-file ｝ file_specs [file_spec...] [ ｛ -lun | -dg | -fs ； -hostvol ； -file ｝ _file_spec_ 【 _file_spec_ 】 [-force [-noprompt]] [-mntopts _options_]] （ ｛ -reserve ； -noreserve ｝ ） *`</block>
  <block id="99ca397b962b2794a602b7365c7d9539" category="paragraph">_filesSpec ： filesSpec 可以是文件系统，主机卷，磁盘组或 LUN_ 。</block>
  <block id="7e6bb0931a72759d39514aa924b420bc" category="paragraph">AIX</block>
  <block id="eb44eff0eaccd484ea5bc1a16cdc1019" category="paragraph">`etc/filesystems`</block>
  <block id="0f6bab779d332fe73eb5735930c5cdef" category="list-text">如果您在 Snapshot 连接操作期间将 ` 启用拆分克隆 _` 配置变量值设置为 "`on` " 或 " `sync` " ，并在 Snapshot 断开连接操作期间将 "`off` " ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="c0c0209855f96fcfcb8048707e267053" category="list-text">您必须设置 Data ONTAP 7.2.2 配置选项 vFiler 的值。`vol_clone_zapi_allow` to "`on` " 以连接到 vFiler 单元中卷或 LUN 的 Snapshot 副本。</block>
  <block id="41ed417a928ee4ef6a085e464f9c5460" category="paragraph">` * SnapDrive 克隆拆分状态（ -lun ） _lun_name_ （ _lon_lun_name_... ） [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec_...]] 【 -job _&lt;jobid&gt;_ 】【 -all]*`</block>
  <block id="83ff57399411fbd7f5a55d6369d91633" category="paragraph">` * SnapDrive storage show -fs /mnt/my_mn*`</block>
  <block id="371ca4f5391e3bf4b06fff9f2c14e7e7" category="paragraph">` * 卷克隆拆分状态 _vol_name_*` ` * LUN 克隆拆分状态 _lun_name_*`</block>
  <block id="d2b0345b4fd3a4ac87854a31da3d6228" category="paragraph">`当前未对给定资源执行拆分`</block>
  <block id="9ac60d117df69ec3caad5a43d59b116d" category="summary">通过适用于 UNIX 的 SnapDrive ，您可以配置存储系统上的 igroup 。配置的 igroup 用于映射存储系统上的 LUN 。您必须为存储系统配置 igroup ，以便在虚拟化环境中无缝迁移。</block>
  <block id="1dbc0c64165149a9f1f5fd1ed3fdd9bb" category="paragraph">对于 FC</block>
  <block id="6c77804f7aceb8ab2bfad8b7fc9162b4" category="list-text">NativeMPIO</block>
  <block id="55e4e1b391831960d8b7e4b61fdfaf7c" category="list-text">DMP</block>
  <block id="740570922d5d888fae19bdffec0e5957" category="summary">出现一条通用消息，指出适用场景 any SnapDrive for UNIX 主机操作系统具有主机集群监控功能。即使您的系统不提供主机集群监控或您已关闭此功能，也会显示此消息。</block>
  <block id="b6243fbdd6a0ce9b3b7349c576e2101f" category="doc">在 SnapRestore 期间会显示集群消息</block>
  <block id="d57da1d4e614a69e46cabba1a7cc6bb2" category="paragraph">执行 snap restore 命令 ` # SnapDrive snap restore -vg clusstervg -snapname mysnap` 时，将显示以下消息</block>
  <block id="7e389600f1e4389ceb10c73be1b5b0d0" category="paragraph">`您似乎正在使用高可用性主机集群软件。为了避免可能发生的集群故障转移，请在还原之前对要还原的资源禁用集群监控。是否要继续？（ y/n ）` ：出现此问题的原因是 SnapDrive snap restore` 命令临时关闭卷组。如果此时正在运行集群监控过程，则执行 SnapDrive SnapRestore 操作可能会对集群故障转移执行发生原因。</block>
  <block id="2c30eeeb2ecd69743531f16f8aca9404" category="paragraph">在运行 HACMP 的 AIX 主机上，此问题不应出现，因为 HACMP 不会为卷组和应用程序提供默认资源监控。</block>
  <block id="5ff458cb56a8d3604fda6c003fbd4a09" category="paragraph">如果您自定义了一个应用程序以在 HACMP 下提供存储监控，则必须先禁用该应用程序和监控，然后再执行 SnapDrive snap restore` 命令</block>
  <block id="97731d8e5f04da6c731a771be72449fc" category="summary">在 AIX 上，卷管理器称为原生 LVM 和 Veritas 卷管理器（ VxVM ）。</block>
  <block id="4ad1fc987ca0beb7d846d33157e9d759" category="paragraph">在 AIX 上，卷管理器称为原生 LVM 和 Veritas 卷管理器（ VxVM ）。</block>
  <block id="b3b48a25e65a10456e3800471b5a2d79" category="paragraph">原生 LVM</block>
  <block id="7294c97e1792e665f7fa6d3382bafe78" category="paragraph">`dev/lvol`</block>
  <block id="27df6af42e5ea6abc6542a335402e63c" category="paragraph">所有逻辑卷都共享同一命名空间</block>
  <block id="af11e6add7cf91bc298bb6186a712c62" category="paragraph">iSCSI 不支持 ` /dev/hdisk` （仅 FC ）多路径</block>
  <block id="649520bd651ce0d55a411c4e5a5f50dc" category="paragraph">Veritas Volume Manager （ VxVM ）</block>
  <block id="2c1d18776a4520d4870634d8d2a7560a" category="paragraph">` dev/vx/dsk/ dG/lvol`</block>
  <block id="45336b31e1255981d6f09437411a00bc" category="paragraph">` /dev/vx/dmp/Disk_1`</block>
  <block id="2b185f25efc01871edafedaf5a86d03e" category="paragraph"><block ref="2b185f25efc01871edafedaf5a86d03e" category="inline-xref-macro-rx"></block></block>
  <block id="a23e9f119e228953d01b4d57f2828d4a" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器和文件系统的组合）。选项包括 `原生` ， `veritas` 和 `none` 。</block>
  <block id="e218ee05aa5667a7ae69052580988293" category="paragraph">SnapDrive 不支持 Veritas for iSCSI 传输协议。</block>
  <block id="c3548e937ea7f6b3d07c89a6c1b4e5a2" category="list-text">选择 `原生` 以使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac 或 /vol/vol0/sdprbac/sdgenergicname.prbac` 中的控制文件检查主机的访问权限。</block>
  <block id="907e78b7c11d0dd2c529babd7a9179e1" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器，文件系统的组合）。选项包括 `原生` ， `veritas` 和 `none` 。</block>
  <block id="c2e7e09b87eb6df5cd6e86804b8b9776" category="list-text">输入 SSL 服务器端口以访问 DataFabric Manager 。默认值为 8488. 。</block>
  <block id="8dedfa510ae6295d70d2e61b6ad7c24c" category="list-text">选择 `原生` 以使用存储在 ` /vol/vol0/sdprbac/sdhost-name.prbac` 或 ` /vol/vol0/sdprbac/sdgenergicname.prbac` 中的控制文件检查主机的访问权限</block>
  <block id="e246deb26eb8cdc17d09de54620948df" category="paragraph">您可以使用 `snapdrive.conf` file 更改审核日志文件的日志记录参数，例如审核日志文件的最大大小和旧审核文件的最大数量。</block>
  <block id="06135e1c571107d336bdc5aa3984b796" category="paragraph">使用 `snapdrive.conf` 文件可以为审核日志记录设置以下值：</block>
  <block id="7be789fd3f08daccfc6b34feaf967155" category="list-text">审核日志文件的最大大小。默认大小为 20K 。在文件大小达到 `snapdrive.conf` 文件中指定的值后， SnapDrive for UNIX 将通过在名称中添加任意数字来重命名当前审核日志文件。然后，使用 `audit-log-file` 值指定的名称启动新的审核文件。</block>
  <block id="2c3187157b45b6e0aa09f6b5700e9fd5" category="paragraph">第二对线表示操作失败。返回代码 "4" 表示 "`已存在。` 查看这两个命令行，您可以看到第一个创建了名为 `snap_rdg1` 的 Snapshot 副本。第二行尝试执行相同操作，但名称已存在，因此操作失败。</block>
  <block id="3e466156ba5201f3ac27b930ee7e21b4" category="paragraph">您可以使用 SnapDrive snap create` 命令创建 Snapshot 副本。</block>
  <block id="9067c59e1d79afa94cf079cf3c119ae4" category="paragraph">有关为您的主机和所使用的存储系统建议配置的详细信息，请参见 AIX Host Utilities 文档。</block>
  <block id="60435f4f39988d923bc1ad513b808c21" category="summary">如果您的配置需要 AIX Host Utilities ，则必须安装它们并确保系统设置正确。</block>
  <block id="1677bade87b8d78a9e17903200fc98b0" category="doc">安装 AIX Host Utilities</block>
  <block id="7fa05d75ed660dfdb36e9b5184a4cbf9" category="paragraph">您应使用 AIX Host Utilities 附带的文档。其中包含有关卷管理器，多路径以及在安装 SnapDrive for UNIX 之前必须设置的其他功能的信息。</block>
  <block id="f87a4092665b3d623d8874fa9fa39c0d" category="summary">您必须验证主机是否已准备就绪。要启动验证操作，您应首先输入 ping filername 命令来测试主机是否已连接到存储系统。</block>
  <block id="8f6622fd17a70078b72485235a88bfe5" category="doc">验证主机是否已准备就绪</block>
  <block id="626270dcd0c79c98f92cd5059f6762dd" category="paragraph">您必须验证主机是否已准备就绪。要启动验证操作，您应首先输入 `ping filername` 命令，以测试主机是否已连接到存储系统。</block>
  <block id="b54eba6ffcf1487cfc397b1f76902460" category="paragraph">此外，还必须确认主机和存储系统可以彼此通信。要确认此问题，请执行 SnapDrive storage show -all` 命令并检查主机和存储系统是否正在通信。通过执行某些操作验证主机是否已准备就绪：</block>
  <block id="18f71341cf822410d2fc1395f2b30dba" category="list-text">确认您已按照主机的 Host Utilities 文档中的说明正确设置主机和存储系统。</block>
  <block id="62eb9e079a0996e45ab1da6573ce63da" category="list-text">确认您的配置使用 NFS ，并配置导出文件。</block>
  <block id="f826ba90d6fb7f147e3655091c749288" category="list-text">确认主机满足 SnapDrive for UNIX 的最低要求，包括所需的操作系统修补程序。</block>
  <block id="8e0d3ec0d1f540e701cd404d7ce55f1d" category="inline-link">《 ONTAP 9 NFS 参考》</block>
  <block id="9e82342da41d824e21e055ead4699422" category="paragraph"><block ref="9e82342da41d824e21e055ead4699422" category="inline-link-rx"></block></block>
  <block id="20514f4ef4b2ecf02e2a9ed04cc6f36d" category="inline-link">《 Data ONTAP 8.2 7- 模式文件访问和协议管理指南》</block>
  <block id="aba2a038af5308e0da7cd807af65286c" category="paragraph"><block ref="aba2a038af5308e0da7cd807af65286c" category="inline-link-rx"></block></block>
  <block id="3d6ed2162d1cf15a760935ac9be44b62" category="inline-link">《 AIX Host Utilities 6.0 安装和设置指南》</block>
  <block id="e2180d34601dd4cf3d3da91dfe18b6c9" category="paragraph"><block ref="e2180d34601dd4cf3d3da91dfe18b6c9" category="inline-link-rx"></block></block>
  <block id="25e181ad3e342042b1a27a003b85f4e5" category="summary">SnapDrive for UNIX 会安装多个文件，例如可执行文件，配置文件，卸载文件，诊断文件和手册页， 在主机上。通过这些文件，您可以在 SnapDrive for UNIX 中检测问题，存储产品当前版本的配置信息等。</block>
  <block id="8cce86dbb0f5ae27f68404a6829773b5" category="doc">SnapDrive for UNIX 安装的文件</block>
  <block id="ff160906506d64b6c9f3b087076303bb" category="paragraph"><block ref="ff160906506d64b6c9f3b087076303bb" category="inline-xref-macro-rx"></block></block>
  <block id="ecae8c68c40345d93a99ccb247dc97e7" category="paragraph">从非源主机连接到包含使用默认挂载 `QIO` 选项挂载的 VxFS 文件系统的 Snapshot 副本时，您应安装 Veritas File Device Driver （ VxFDD ）许可证。</block>
  <block id="efe3672e1ef86f5b7fd650177f6be427" category="paragraph">` * SnapDrive snap connect -snapname fspec_set [_fspec_set_...] -snapname _long_snap_name_ "-igroup _ig_name_ [_ig_name_...]] [-AutoExpand] [-autosename] [-noperesit] [ ｛ -reserve | -noreserve ｝ ] [-readonly] [-splone]*`</block>
  <block id="749f6094eb276f7dee86aaaf7f77e3ba" category="paragraph">此命令必须始终以要连接的存储实体的名称开头（例如， ` -DG` ， ` -hostvol 或 ` -FS` ）。如果指定 NFS 挂载点，则不能在同一命令行上指定非 NFS 实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` -hostvol` ）。</block>
  <block id="d827ae1a62f64a03c050eceffc148bf1" category="paragraph">以下示例将连接到文件系统 Snapshot 副本，即 LVM 堆栈上创建的磁盘组：</block>
  <block id="d4fc93673388201861452557b198f051" category="admonition">在除 Red Hat Enterprise Linux 6 之前的所有版本中，即使使用 ` -mntets` 命令对 NFS 从非 Linux 操作系统执行的 SnapDrive 操作也会失败。</block>
  <block id="0574963415461d50b9d52a09d4b94c98" category="paragraph">在以下示例中，管理接口为 `10.72.197.91` ，数据接口为 `a10.72.220.91` 。</block>
  <block id="32195a61445fe8f7c7123095e67c7d49" category="list-text">配置 ` /etc/ssl/openssl.cnf` 以创建 CA 私钥和证书 vi ` /etc/ssl/openssl.cnf` 。</block>
  <block id="3bc3a1a6a29a36e038c754bb29989aff" category="summary">在系统上安装 SnapDrive for UNIX 之前，您必须准备主机。在主机准备过程中，您必须安装 AIX Host Utilities 。</block>
  <block id="70be6f5da44f99214f6327b61334acce" category="doc">主机准备安装 SnapDrive for UNIX</block>
  <block id="d8f7d69a5c9e6e531ae21cd014a483ef" category="doc">支持 NetAppDataMotion for vFiler</block>
  <block id="1b8f0fa67430d4c191d51a19351dae39" category="summary">要在主机系统上安装 SnapDrive for UNIX ，您必须执行某些任务。开始安装之前，您应了解各种系统要求和配置注意事项。</block>
  <block id="e9ba7409e8d347e8bb678e89f666ea98" category="doc">安装或升级 SnapDrive for UNIX</block>
  <block id="069c43556e66148f1f1eeabd7e9e7872" category="list-text">AIX Host Utilities</block>
  <block id="faf27002a22a0dfdc5836d9ea608986d" category="paragraph">JFS2</block>
  <block id="21cbd81ec38ce8db13ac6780dc770a8a" category="paragraph">JFS</block>
  <block id="b1bb0d4d54712672d197eae2ce34105a" category="paragraph">VxFS</block>
  <block id="20c4c016014cab76f3d6c9780657294b" category="paragraph">VxVM</block>
  <block id="9ac8f2dd457cf11352df633928fbf7e3" category="list-text">已安装主机操作系统以及适用于 AIX 的相应修补程序。</block>
  <block id="138ceb252d5cb82ba0614792498d3baf" category="list-text">适用于 AIX 的卷管理器为 LVM 或 VxVM 。</block>
  <block id="3cc52ce91a30845c504e3ad6b3baa142" category="list-text">Host Utilities 安装在 AIX 中</block>
  <block id="ef860ba7a362ae7c0f3713c609ba1d90" category="paragraph">例如，如果在 AIX 主机上使用适用于 UNIX 的 SnapDrive 使用多路径，则必须为该主机设置 AIX Host Utilities 所需的功能。</block>
  <block id="f6cda8f8a87867cac26308871d9f2a13" category="list-text">所有访问—主机可以访问上述所有 SnapDrive for UNIX 操作。其中每个权限字符串都是离散的。如果指定快照使用，则主机可以删除或重命名 Snapshot 副本，但不能创建 Snapshot 副本，还原或执行任何存储配置操作。</block>
  <block id="7da575504adaec93d43868ac74fe96b7" category="paragraph">` * SnapDrive 配置访问 show _filer_name_*`</block>
  <block id="a0662bdef5f6b6127c526f18cd66cf9c" category="paragraph">使用格式 SnapDrive type_name operation_name [_&lt;keyword/option&gt; &lt;switches&gt;_]` ；例如，如果要从主机文件系统 ` /mnt/dir` 创建名为 ` snap_hr_` 的 Snapshot 副本，则应输入以下命令行：</block>
  <block id="b6ebe77498ea31da3866b8d80e831dde" category="paragraph">` * SnapDrive snap create -fs /mnt/dir -snapname _snap_hr_.*`</block>
  <block id="33db4d23b8d5268206635154408fc142" category="paragraph">` -dg _dg1_ -hostvol dg1/HV1`</block>
  <block id="e62d6ae279aa951c526ffae3fa0ddb49" category="paragraph">` -hostvol dg1/HV1 -fs/fs1`</block>
  <block id="4c0245ce6f0757a453938c11904822f6" category="admonition">` -dg` 和 ` -vg` 选项是同义词，反映了以下事实：某些操作系统引用磁盘组，而其他操作系统引用卷组。此外， ` lvol` 和 ` -hostvol` 也是同义词。本指南使用 ` -DG` 来指代磁盘组和卷组，使用 ` -hostvol` 来指代逻辑卷和主机卷。</block>
  <block id="4963d26437d6aace043a9771da31ff74" category="paragraph">要创建文件系统，请使用以下格式： ` -fs file_spec. （ -fstype _type_） "-ffsopts _options_] （ -hostvol _file_spec_） （ -dg _dG_name_） 要创建逻辑卷或主机卷，请使用以下格式： "-hostdg _file_spec_] （ -dg ）` _vol_file_name_s_ ``</block>
  <block id="c932c4c1257a62f92fa88de08e3988a1" category="paragraph">如果指定 SnapDrive for UNIX 创建文件系统，则必须指定 SnapDrive for UNIX 在主机 LVM 中支持的类型。这些类型包括 `JFS2` 或 `VxFS` 。</block>
  <block id="e05358fe207e5f2535cbd262c5b35467" category="paragraph">存在主机实体时， SnapDrive for UNIX 会自动检测主机实体的类型。在这种情况下，您只需要提供主机实体的名称，而不必指定类型。SnapDrive snap 命令和某些 `storage` 命令也只需要主机实体的名称；您不必指定类型。</block>
  <block id="f1cbaa3ffa1936d90dbc5700e7b22df4" category="paragraph">为 ` -FS` 提供的 ` file_spec_` 是连接直接在 LUN 上创建的文件系统时文件系统挂载点的名称。</block>
  <block id="cfe75bd0cafab0b6a252c9f5a5a09502" category="paragraph">要连接主机卷上的文件系统，请执行以下操作：</block>
  <block id="42b8fff765e977b239e9ccd2f23c0cd2" category="paragraph">您提供的 ` -fs _file_spec_` 和 ` -hostvol _file_spec_` 用于标识要连接到新主机的 LVM 文件系统，磁盘组和主机卷。</block>
  <block id="70867381c3307c03fa008b035073c353" category="paragraph">可选：使用 ` -nt操作` 选项将存储连接到新位置，而无需在主机文件系统表中创建条目。默认情况下， storage connect 命令会创建永久性挂载。这意味着，在 AIX 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。</block>
  <block id="f551358c1ecab3adabe0a6d7cd30aa83" category="list-text">` -mntopts_` 参数是一个文件系统 ` 类型` 选项，使用 `mount` command ` -o` 标志指定。请勿在 ` _-mntopts_` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="1591015763f0402211bb57887262bd91" category="paragraph">SnapDrive for UNIX 会将有关主机的用户身份验证信息存储在一个加密文件中。默认情况下，在 AIX 主机上， SnapDrive 会对密码信息进行加密并通过网络发送。SnapDrive for UNIX 通过标准 IP 连接使用 HTTPS 进行通信。</block>
  <block id="d11cc9372d1ac30199091c0646cd1e72" category="paragraph">以下步骤显示了快照断开操作步骤：</block>
  <block id="ba4291b135ac2e8b303c4276866e3137" category="summary">在 FC 或 iSCSI 环境中使用 Data ONTAP 时，应使用 FilerView 将快照预留选项重置为 0% 。</block>
  <block id="9a666aee7c72564a3443c1eccfb84436" category="doc">使用 FilerView 重置快照预留选项</block>
  <block id="8afcc352d28744dd34c1545b6290ccb9" category="list-text">打开一个 FilerView 会话，该会话将连接到存储系统，其中包含要更改其 `snap reserve` 设置的卷。</block>
  <block id="cdc1f7bc10835eb2446a7aa8a9284d55" category="list-text">在 FilerView 主菜单中，导航到 * 卷 * &gt; * 快照 * &gt; * 配置 * 。</block>
  <block id="3106dcda95f96f4937dd7a2ff2be50cf" category="list-text">在 * 卷 * 字段中，选择要更改其 `snap reserve` 设置的卷。</block>
  <block id="f2505fe8e263e2b9809d1988b43e2bd8" category="list-text">在 * Snapshot Reserve* 字段中，输入 0 。</block>
  <block id="400fae8e788b3721b9ac25fe01f04f50" category="list-text">单击 * 应用 * 。</block>
  <block id="ef74d93d965114b38db6ad13f9105871" category="summary">SnapDrive for UNIX 可简化数据管理，并通过简化的存储配置和文件系统一致的 Snapshot 副本提高应用程序数据的可用性和可靠性。</block>
  <block id="dd6dd8020bf0808fb7f7bc951dea3515" category="doc">SnapDrive for UNIX 概述</block>
  <block id="d6002ab2df2fc49d786069e0491ce20e" category="paragraph">SnapDrive for UNIX 可简化数据备份，因此即使删除或修改了数据，您也可以恢复数据。SnapDrive for UNIX 使用 Snapshot 技术在连接到 UNIX 主机的共享或非共享存储系统上创建数据映像。还原 Snapshot 副本时，它会将存储系统上的当前数据替换为 Snapshot 副本中的数据。</block>
  <block id="3e00067c97558e1c76777717eeab4d5f" category="paragraph">SnapDrive for UNIX 提供了一些存储功能，可用于管理整个存储层次结构，例如主机端应用程序可见文件，卷管理器和存储系统端逻辑单元号（ LUN ）。</block>
  <block id="893e285683705d7881ac0e148956b245" category="paragraph">SnapDrive for UNIX 支持基于角色的访问控制。存储管理员使用 RBAC 根据用户执行的角色和任务限制用户对存储系统的访问。</block>
  <block id="bf6d024dfa111ce8ade8d5d03cfdb6bd" category="admonition">要使用 RBAC ，必须使用 Operations Manager 控制台 3.7 或更高版本。</block>
  <block id="9a9a5c43c0fe31a702683f90453f2c15" category="paragraph">` * # SnapDrive 克隆拆分起始值（ -lun ） _lun_name_ [_lon_lun_name_...] | [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec_ ...]] [-force][-noprompt] [-dump | -dumpall]*`</block>
  <block id="595a5aae58a086acd874d6a5c5983b1a" category="paragraph">以下示例显示了如何使用 ` _-force_` 选项拆分克隆：</block>
  <block id="9e5a9d048223a769d591c397b3453c69" category="paragraph">以下示例显示了如何使用 ` _-nopromptl_` 选项直接启动克隆，这意味着没有确认消息：</block>
  <block id="3573baa74f40e35107f9a102d3fc28a2" category="list-text">` _protocol_` 是 `FCP` 或 `iSCSI` ，具体取决于主机使用的协议。</block>
  <block id="03dd8d90884e51c78ae818ea135d1e14" category="paragraph">` lvol` 或 ` - hostvol`</block>
  <block id="798d70df63c988ef9951ca68f6c9d9d1" category="paragraph">` * $ openssl genrsa 1024 &gt; host.key $ chmod 400 host.key*``</block>
  <block id="9a553bda73a547289e9780349482b431" category="list-text">` -dg` 和 ` -vg` 选项是同义词，反映了以下事实：某些操作系统引用磁盘组，而其他操作系统引用卷组。本指南使用 ` -DG` 来指代磁盘组和卷组。</block>
  <block id="1867fcbcf42646e74c800b1c33f876ee" category="paragraph">在此示例中，权限文件不在存储系统上，因此 SnapDrive for UNIX 会检查 `snapdrive.conf` 文件中的变量 ` _all-access-if-rbac unspecified _` 以确定主机具有哪些权限。此变量设置为 on ，相当于创建一个权限文件，并将访问级别设置为 all access 。</block>
  <block id="3e75f90ab019f90761f330456aca8e91" category="list-text">如果在 Snapshot 连接操作期间将 ` enable-split-clon_` 配置变量值设置为 `on` 或 `sync` ，并在 Snapshot 断开操作期间将其设置为 `off` ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="a76ab0a568477ab65bc04828f3ec8f85" category="paragraph">在 Linux 主机上运行的 SnapDrive for UNIX 返回一条错误消息，显示为 ` "HBA assistant not found"` 。</block>
  <block id="f56e9452ab4e790834164bc0e04e4e14" category="paragraph">要执行 SnapDrive for UNIX ， iSCSI 服务必须正在运行。如果此服务暂停，则 SnapDrive for UNIX 将返回错误消息。例如，如果在 iSCSI 服务未运行时执行 SnapDrive storage show` 命令，则可能会查看类似以下内容的输出： ` # HBA storage show -dg toaster1 0001-877 管理错误：未找到 SnapDrive 助手。涉及 LUN 的命令应失败` 。</block>
  <block id="2144ec8557d126894b020fa56d1c058a" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._] ｛ -dg _ FS _ -hostvol ｝ file_spect [file_spec...]] 【 -full】 【 -fstype type】 【 -vmtype 类型】【 -ssplit 】 *`</block>
  <block id="314a82c36936ade8481c18527f0fbe84" category="list-text">如果指定 LUN （` -lun` ），则必须输入长 LUN 名称。您不能在与其他存储实体（` -vg` ， ` -dg` ， ` -fs` ， ` -lvol` 或 ` -hostvol` options ）相同的命令行上使用 ` -lun` 选项指定 LUN 。</block>
  <block id="e6a7f0f8c8fe29e1d00744e876d709c1" category="paragraph">以下示例将断开 Snapshot 副本与 Veritas 堆栈上的文件系统磁盘组的连接：</block>
  <block id="7579954f2c80ac6e2e542a425ca9aae5" category="paragraph">` * SnapDrive storage create -lun _long_lun_name_ -lunsize _[lun_name ...]_ -lunsize_size_ _ [ ｛ -reserve _ -noreserve ｝ ] -igroup 名称 [ig_name ...]_ig_name [ig_name ...]_ig_name ...]_*`</block>
  <block id="16a81d205ee58f4fc28b803752f68997" category="summary">要安装 SnapDrive for UNIX 的主机必须满足特定的软件，硬件，浏览器，数据库和操作系统要求。有关这些要求的最新信息，请参见互操作性表。</block>
  <block id="567b49d8b2be27baec65abbcd4655c2f" category="doc">准备安装 SnapDrive for UNIX</block>
  <block id="dd8b64417b38e3c9c00d9842082a38de" category="paragraph">` /mnt/fs1_0` 的布局如下所示。</block>
  <block id="c6a9911a7f679348a35b266b0465d2cb" category="paragraph">以下输出显示了如何断开文件系统 ` /mnt/fs_1_0` 的连接：</block>
  <block id="3e0ad302f63157aaf4fc4144463d0d9e" category="paragraph">断开文件系统 ` /mnt/fs_1_0` 后，如果满足以下条件， SnapDrive for UNIX 还会删除克隆的卷 `Snapdrive_vol1_0_volume_clone_from_snap2_snapshot` ：</block>
  <block id="b702447dbe51ecc03c95909b2207911e" category="summary">SnapDrive for UNIX 将安装适用于 AIX 操作系统的可执行文件。</block>
  <block id="6c1186bcc584b9f48ffce480b1c8a4be" category="doc">SnapDrive for UNIX 安装的可执行文件</block>
  <block id="643c1ccc6ee77c1733a758e84ce10359" category="paragraph">这些可执行文件安装在 ` /opt/NetApp/SnapDrive/bin/SnapDrive` 中。</block>
  <block id="cfb5fc49514ed8930c02f2154c1e003a" category="paragraph">如果在 `snapdrive.conf` 文件中将 ` napdrive.conf` 选项设置为 on ，则 AutoSupport 消息将记录在存储系统的 EMS 日志视图中。默认情况下，在 `snapdrive.conf` 文件中，此选项设置为 ` _on_` 。SnapDrive for UNIX 会将 AutoSupport 消息发送到存储系统，而这些消息会记录在事件管理系统（ EMS ）中。</block>
  <block id="e200a58d36af88bc29ae94b2b9c641f1" category="list-text">执行 SnapDrive storage show -all` 命令后， AutoSupport 消息将发送到所有已配置的存储系统。</block>
  <block id="0430cf9a11cb03fd52b9fbd7aabf8f66" category="paragraph">您可以显示存储系统，存储系统卷， LUN 和其他存储实体的 Snapshot 副本。使用命令 SnapDrive snap show` （或 `list` ）显示 Snapshot 副本。</block>
  <block id="c5338108430e79fe5d74c495fc32bbb3" category="paragraph">` * SnapDrive 克隆拆分停止符（ -lun ） _lun_name_ （ _lon_lun_name_... ） _[ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec_...]] 我们提供了一个或` 一个或一个或一个或一个或一个或一个或一个或两个</block>
  <block id="94ba73f847c26d2e073e735f125009e0" category="list-text">`Astorage create`</block>
  <block id="53b6ca34b27d38f47da51cf896dbfd6a" category="paragraph">通过 SnapDrive for UNIX ，您可以将存储系统的特定 igroup 添加到主机中，并使用配置的 igroup 执行 SnapDrive 操作。</block>
  <block id="515bb5c3055428d1d00bbd5c8da11bb8" category="paragraph">要将 igroup 添加到主机，必须执行以下操作：</block>
  <block id="8d2b9d46287623099230a81785fcbc05" category="list-text">使用 SnapDrive igroup add` 命令</block>
  <block id="5db43c85e40a9b9c61f92c7beb718799" category="list-text">验证 igroup 在存储系统中是否可用</block>
  <block id="61ab4e880a14fb5860e57860acb9d10f" category="list-text">在主机上输入以下命令以添加 igroup ：</block>
  <block id="a8a801928501c9de3f97cbcdcd66b675" category="paragraph">` * SnapDrive igroup add _igroup_name filer_name [filer_name...]_*`</block>
  <block id="a4eca741d3ab132691ac44007be9a4ae" category="paragraph">以下示例输出显示了已成功为存储系统面包机添加的 igroup ：</block>
  <block id="948eee60ff996871591d6026c29e2fed" category="paragraph">` * SnapDrive snap create -fs /mnt/fs3 _-snapname_ nfs_snap _-nodfilerfence_*`</block>
  <block id="a5aa24f332a7ad6e87994b1d35f6b956" category="list-text">通过在 `snapdrive.conf` 文件中设置配置变量 `rbac 路由方法 ="dfm"` ，将 SnapDrive for UNIX 配置为使用 Operations Manager 控制台基于角色的访问控制（ RBAC ）。</block>
  <block id="5c3847a334151f413b95aff32e69ed89" category="paragraph">您可以使用 SnapDrive snap delete` 命令删除存储系统上的 Snapshot 副本。</block>
  <block id="aeda1dee489ce6f50b45d259a696a2ac" category="paragraph">` * SnapDrive 端口集 delete _filername [filername...]_*`</block>
  <block id="a8a527d0a3f7f88b2d49a9f2cde12909" category="summary">SnapDrive 配置检查程序工具可帮助您确定和验证 SnapDrive for UNIX 支持的配置。</block>
  <block id="8f52e06b7f328e8f06bc14aebd8b6283" category="doc">什么是配置检查程序</block>
  <block id="b27ac660cb9b830d6665cdf4a7370e32" category="paragraph">配置检查程序工具可通过验证 NAS 和 SAN 环境中的用户配置来解决多种支持配置的问题。</block>
  <block id="7a884427c2feb5fbf99aefc3263a49d9" category="paragraph">SnapDrive 配置检查程序工具支持在 SnapDrive for UNIX 中执行以下配置检查：</block>
  <block id="8b974cbb49cefc4681f74fb74ffb3ef0" category="list-text">检查在 `snapdrive.conf` 文件中指定的配置，该文件位于默认位置。</block>
  <block id="132f48672a1b2b4dcde44f9aeddf434a" category="list-text">使用命令行界面检查指定的配置。</block>
  <block id="aa665309d18f6b525838a785e587587d" category="paragraph">SnapDrive storage create-lun _long_lun_name_ [_lun_name ..._] -lunsize _size_ [ ｛ -dg _ -vg ｝ _dg_name_] （ -igroup _ig_name _ ） ] （ ｛ -reserve _ noreserve ｝ ））【 -fstype _type_vm_type_]`</block>
  <block id="0c16e4b96b9859c1464f5aff7b3dc3b5" category="paragraph">SnapDrive storage create _host_lvm_fspec_ -lun _long_lun_name_ [_lun_name ..._] -lunsize _size_ [-igroup _ig_name_ [_ig_name ..._]] [ ｛ -reserve | -noreserve ｝ ]`</block>
  <block id="4396518ae85019c213faaca4df07fa5d" category="paragraph">SnapDrive storage connect -fs_file_spec_ ｛ -hostvol _ -lvol ｝ _file_spec_ -lun _lon_name_ [_lun_name..._] 【 -noperesist] 【 -mntopts 选项】【 -fstype _type_] 【 -vmtype _type_] 】`</block>
  <block id="3293e4f39d551cbae65647feb8786056" category="paragraph">SnapDrive 存储调整大小 ｛ -dg _ -vg ｝ _file_spec_ [_file_spec_ ...] ｛ -growby _ - -growto ｝ _size_ [-addlun_ [-igroup _ig_name_ [_ig_name ..._]]] ｛ -reseserve _ -noreserve ｝ ]] 【 -fstype _type _type_____type__________type_&lt;____&lt;_______________`</block>
  <block id="0fefe2b3293fff44a8aa32c31ecab6a3" category="paragraph">SnapDrive 存储 ｛ show| list ｝ -lun _long_lun_name_ [_lun_name ..._] [-verbose ] [-quiet ] [-status] [-capitalies]`</block>
  <block id="4b6470ba367524025e16631a10f88cb3" category="paragraph">SnapDrive 存储 ｛ show | list ｝ ｛ -filer _filer_name_ [_filer_name_ ...] _ -filervol _lor_filer_path_ _filer_path _ ] ｝ （ -verbose ）【功能】（ -quiet ）`</block>
  <block id="335e333d0d2f9c377f56a20e641d9dd8" category="paragraph">SnapDrive 存储 ｛ show | list ｝ -lun _lon_name_ [_lun_name ..._] 【详细信息】【 -status] 【 -fstype _type_】 【 -vmtype _type_】 【功能】【静默】`</block>
  <block id="247a8dac202b1f0428ad3432aeae74d8" category="paragraph">SnapDrive 存储删除项（ -vg _ -dg _ -fs _ -lvol _ -hostvol] _file_spec_ [_file_spec_..._] ）（ ｛ -vg _ -dg _ -fs _ lvol _ -hostvol ｝ _file_spec_ [_file_..._]...] 【 -full】 【 -fstype 类型】【 -vmtype 类型】`</block>
  <block id="0d89331861f86bd609f39aed07ab1d5d" category="paragraph">SnapDrive snap ｛ show | list ｝ ｛ -verbose ｝ ｛ -vg | -dg | -fs | -lvol | -hostvol ｝ _file_spec_ [_file_spec_...] 【 -fstype type】 【 -vmtype 】`</block>
  <block id="74f3a734045f67bfc38059ae34478ecb" category="paragraph">SnapDrive snap ｛ show-list ｝ ｛ -verbose ｝ ｛ -lun _ -vg _ -dg _ -fs _ -lvol _ -hostvol] _file_spec_ [file_spec...]`</block>
  <block id="bcb9f767e851a054d3995c0011117678" category="paragraph">SnapDrive snap connect -lun _s_lun_name d_lun_name_ [-lun] _s_lun_name d_lun_name_ ...] -snapname _long_snap_name_ -sparate] （ -clone ｛ lunclone _ optimal _ unrestricted ｝ ）（ -prefixfvprefixstr] （ -verbose ）`</block>
  <block id="9c315f4d25c52ec89e68dcf437710ef0" category="paragraph">` （ -vg _ -dg_ -fs _ -lvol _ -hostvol] _src_file_spec_[_dest_file_spec_] （ ｛ -destdg _ -destvg ｝ dgname ） [ ｛ -destlv _ -desthv ｝ lvname]`</block>
  <block id="23840b5b4388c0dce99f907cc8c3f02e" category="paragraph">SnapDrive snap rename -[snapname ]_old_long_snap_namenew_snap_name_ [-force [-noprompt]]`</block>
  <block id="01e47fde11065cce1239bc5e7326f1fb" category="paragraph">SnapDrive snap disconnect ｛ -dg| -vg | -hostvol | -lvol | -fs ｝ _file_spec_ [file_spec...] [ ｛ -DG _ -vg _ -hostvol _ -lvol _ -fs ｝ _file_spec_ [file_spec...] …… ] 【 -full】 【 -fstype type】 【 -vmtype 类型】【 -ssplit 】`</block>
  <block id="dd2a391e0673693fc488b15cbc07abc2" category="paragraph">` * SnapDrive portset add _portset_name filername [filername...]_*`</block>
  <block id="83d1f3da2e9bd949576ca0e596cfd235" category="summary">SnapDrive for UNIX 可简化您的存储管理任务。SnapDrive for UNIX 使用 Snapshot 技术为共享或非共享存储系统上存储的数据创建映像。SnapDrive 还可以帮助您配置存储。</block>
  <block id="98f4e64c8a6b83bca49bdbc8172ddcc0" category="doc">SnapDrive for UNIX 的功能</block>
  <block id="5bbfc5e0526e20978cd579d2142db1be" category="paragraph">您可以使用 SnapDrive for UNIX 执行以下任务：</block>
  <block id="281c630c3962b84e55028b03a74499da" category="list-text">* 备份和还原数据： * 使用 SnapDrive for UNIX ，您可以使用 Snapshot 技术为存储系统上存储的主机数据创建映像（ Snapshot 副本）。此 Snapshot 副本可为您提供一份数据副本，您可以稍后还原这些数据。Snapshot 副本中的数据可以位于一个存储系统上，也可以跨越多个存储系统及其卷。这些存储系统可以位于 HA 对或节点本地文件系统或磁盘组中，也可以位于主机集群环境中的 LUN 中。</block>
  <block id="abeeccda7d6e994abd62186527ba1669" category="list-text">* 管理存储： * 您可以在主机集群和非集群环境中创建和删除存储组件，包括磁盘组，主机卷，文件系统和 LUN 。通过 SnapDrive for UNIX ，您可以通过扩展此存储，将其连接到主机并断开其连接来管理此存储。</block>
  <block id="a9a298558b8ec20f6407785a64139db3" category="list-text">"** 基于角色的访问控制： "SnapDrive for UNIX" 提供基于角色的访问控制（ RBAC ）。RBAC 允许 SnapDrive 管理员在执行各种 SnapDrive 操作时限制对存储系统的访问。此存储操作访问权限取决于分配给用户的角色。RBAC 允许存储管理员根据分配的角色限制 SnapDrive 用户可以执行的操作。</block>
  <block id="23b061bf805367d41b57efbdd59b2cca" category="list-text">如果您使用的是 SAN 环境，请确保按照 AIX 矩阵堆栈中提供的 `snapdrive.conf` 文件中指定适当的可接受值。然后，重新启动守护进程。</block>
  <block id="58dc2b32bc0a39b2f919f11dac9232f2" category="paragraph">`host connect` ， `host disconnect`</block>
  <block id="6c49a4303618a17a195babe8d5ab6438" category="paragraph">`config set -dfm` ， `config set -mgmtpath` ，</block>
  <block id="9ef0ad03f38013a5346027f4676052aa" category="paragraph">`config delete dfm_appliance` ， `config delete -mgmtpath`</block>
  <block id="fff16b615f9d128261defb5bdb4cddc0" category="paragraph">以下示例将 ` _vsadmin_` 显示为 ` _StorageSystem_` 。</block>
  <block id="ba83474306c908d7ba3da09f264f9275" category="summary">对于使用网络文件系统（ NFS\ ）的配置，在设置主机和存储系统之前，您必须检查 NFS 客户端是否运行正常。</block>
  <block id="c21dd603906f2780c11db935e95ad41a" category="doc">NFS 配置检查</block>
  <block id="3c69931113c0b9d38a611f49319b2e2e" category="paragraph">对于使用网络文件系统（ NFS ）的配置，在设置主机和存储系统之前，您必须检查 NFS 客户端是否运行正常。</block>
  <block id="9845e9d40e1e6ecd78a25b6daa95137a" category="paragraph">如果您的配置使用 NFS ，则必须完成以下任务：</block>
  <block id="f3313549a5ff58423eba51e46fbcb540" category="list-text">确保 NFS 客户端正常运行。</block>
  <block id="2e83e3cf8f5b12f97e16c3c95670e632" category="inline-link-macro">《 7- 模式文件访问和协议管理指南》</block>
  <block id="d0d8a043d4f493ed9e8f98e3b0d1bd7f" category="inline-link-macro">NFS 文件访问管理指南</block>
  <block id="98865f9edd5b685ab773d7eb7cc4452f" category="paragraph">有关管理 NFS 协议的详细信息，请参见 <block ref="339681fcc5506812fd328c474268eca3" category="inline-link-macro-rx"></block> 如果您使用的是 Data ONTAP 7- 模式；请参见 <block ref="21ae3a47266a853cbfb5543fcb7c6fd7" category="inline-link-macro-rx"></block> 如果使用的是集群模式 Data ONTAP 。</block>
  <block id="510bf8cb76a40914406433515d8696f5" category="paragraph">要在存储系统上将 SnapDrive for UNIX 与 NFS 挂载的目录结合使用，必须确保将存储系统目录正确导出到主机。如果主机具有多个 Internet 协议（ IP ）接口以及存储系统的数据和管理接口，则必须确保将目录正确导出到数据和管理接口。SnapDrive for UNIX 会发出警告，除非所有此类接口都具有读取或写入权限，或者如果使用带有 -readonly 选项的 SnapDrive snap connect 命令，则至少具有只读权限。如果这些接口均无权访问目录，则 SnapDrive snap restore 和 SnapDrive snap connect 命令将失败。</block>
  <block id="3149c45a082bff080ee1fa4deee68489" category="paragraph">` * SnapDrive config migrate deleteenew_storage_system_name [new_storage_system_name...]*`</block>
  <block id="f4c4619e1b219b43e673170dd65b8b33" category="inline-link">《 Data ONTAP 8.2 7- 模式 MultiStore 管理指南》</block>
  <block id="b673b4febf28375426e665271b7341c6" category="paragraph"><block ref="b673b4febf28375426e665271b7341c6" category="inline-link-rx"></block></block>
  <block id="fa8929a48cd96afd994026292802bac0" category="paragraph">例如， onAIX 是 ` _aix_info_` 实用程序。</block>
  <block id="c0945b7ad6f8dc40505f9e234f9ab4fe" category="summary">从 NetApp 支持站点下载适用于 UNIX 的 SnapDrive 软件包后，您应解压缩该文件以提取要安装的软件。</block>
  <block id="75fd59ffd1bdb7fb1d7d81ce3c6409bc" category="doc">解压缩下载的软件</block>
  <block id="79fdf7a8000ae247e3e579ef5be318a4" category="list-text">在命令行界面（ CLI ）提示符处，输入以下命令：</block>
  <block id="394382ef87844c106c47e16d9ff5aaa1" category="paragraph">` * 解压缩 NetApp.SnapDrive_AIX_5_2.Z*`</block>
  <block id="bd1cbbc9d803d8fa723ea255187a6601" category="paragraph">要下载此软件，请参见 NetApp 支持站点。</block>
  <block id="280494cd4ca560436ce76cf8fdf11e4c" category="paragraph">您可以输入 SnapDrive version` 命令来验证 SnapDrive for UNIX 的版本。</block>
  <block id="87fa01580682a70e7a38d7fdc81a88b3" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun]_long_lun_name_ __lun_name_...] | [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec_...]] | "-snapname _long_snap_name_] ｛ -volclone]-lunclone ｝ ] （ -v | -verbose ） *`</block>
  <block id="107ca6b82d19604cd0c5042933b358b0" category="list-text">将 ` use-https-to_filer_` 变量的值更改为 `off` 。</block>
  <block id="e27c34968eb485baf00dfdc5812100d8" category="paragraph">` * SnapDrive config migrate set _old_storage_system_name new_storage_system_name_*`</block>
  <block id="c99d4eec874cccd2e46aac7bc7cb2158" category="paragraph">` * SnapDrive storage create _host_vxvm_fspec_ -filervol _lor_filer_path_ -dgsize "-igroup _ig_name [ig_name ...]__ [ ｛ -reserve _ -noreserve ｝ ]*`</block>
  <block id="6ba4a58cc6c582e2feb05342501c31ed" category="paragraph">` * sdconfcheck import -file ./confcheck_data.tar.gz*``</block>
  <block id="8469faba6eefdfba8bd9ab000d583e1e" category="summary">如果使用 SnapDrive for UNIX 使用 LVM 创建逻辑卷或文件系统，则 SnapDrive for UNIX 会自动创建所需的磁盘组。SnapDrive for UNIX 会根据主机卷管理器支持的类型创建文件系统。对于 AIX ，它包括 JFS2 ， JFS 和 VxFS 。</block>
  <block id="1d652cf6729dec2fe049d0af4913ba87" category="cell">已为存储系统 &lt;storage-system-name&gt; 配置 `datapath 。请使用 SnapDrive config delete -mgmtpath 命令将其删除，然后重试。`</block>
  <block id="9d019d4ff7a63331ebbca15ee34f1448" category="cell">`无法使用 https 连接到存储系统： 10.72.197.213 。确保 10.72.197.213 是有效的存储系统名称 / 地址， 如果您配置的存储系统正在 7- 模式 Data ONTAP 上运行，请将主机添加到可信主机（选项 trusted.hosts ）并在存储系统 10.72.197.213 上启用 SSL ，或者修改 SnapDrive.conf 以使用 http 进行通信并重新启动 SnapDrive 守护进程。如果您配置的存储系统正在集群模式 Data ONTAP 上运行，请确保 Vserver 名称已映射到 Vserver 管理 LIF 的 IP 地址。`</block>
  <block id="5922543f4adaa14a4cca50abb6796aea" category="cell">在子操作系统中执行 SnapDrive snap disconnect` 操作时会发生这种情况。检查 ESX 服务器中是否存在任何 RDM LUN 映射，或者 ESX 服务器中是否存在陈旧的 RDM 条目。在 ESX 服务器以及子操作系统中手动删除 RDM 映射。</block>
  <block id="6c87961d87bfe5f9c2294c869fa6df7d" category="list-text">使用带有 -all 选项的 SnapDrive storage show` 命令获取有关设备的信息。</block>
  <block id="ecfd5d456f0ee265cb55d1b8a6fddf6c" category="list-text">AIX 原生 lvm 上所需的最小空间约为 12.58 MB ，其他空间则需要 ~8.39 MB 。</block>
  <block id="f1c80dcab04870b00346255e8617ea41" category="cell">`由于 &lt;Filer- Name&gt;` 中的存储空间不足，无法拆分 "`FS-Name` "</block>
  <block id="502f9fcda00d437c57e2c71c11ef343f" category="list-text">使用 ` -lun` 关键字为命令指定 `lun_name` 参数。</block>
  <block id="cfe062756c894381f6c1404a68b38739" category="cell">如果将 ` -lun` 关键字与 ` -fs` 或 ` -dg` 关键字组合使用，则会发生此错误。这是一个语法错误，表示命令使用无效。操作：仅使用 ` -lun` 关键字重新执行命令。</block>
  <block id="1e214e3d2fe1e4feb49b546a982aced7" category="cell">`0001-046` 和 `0001-047`</block>
  <block id="8612a5d0cb59a459590aa39ad994026a" category="cell">SnapDrive for UNIX 不能在命令行中接受多个 Snapshot 名称来执行任何 Snapshot 操作。操作：使用一个 Snapshot 名称重新执行命令。</block>
  <block id="80f6b25069f4b72eeb0703377a5bfb78" category="list-text">在命令行中将 ` lvol` 选项更改为 ` - hostvol` 选项，反之亦然。</block>
  <block id="73c9ec37df0003210425bb9d76ea6130" category="cell">这是一个语法错误，表示命令使用无效，在该命令中，尝试执行 Snapshot 操作时不提供 snap_name 参数。操作：使用适当的 Snapshot 名称执行命令。</block>
  <block id="5423133c11ab2517a98bb6f11f980406" category="list-text">使用 SnapDrive snap list - filer _&lt;filer-volume-name&gt;_` 命令获取 副本列表。</block>
  <block id="36dd04b334796ea397bf46b37e1ebfba" category="paragraph">出现此问题的原因可能如下：如果主机上的 iSCSI 守护进程或 FC 服务已停止或出现故障，则即使主机上已配置 LUN ， SnapDrive storage show -all` 命令也会失败。</block>
  <block id="202c81c4fca5a0853d6ff01de49c1a9c" category="cell">如果指定的主机实体不存在，则会发生此错误。操作：再次使用带有 ` -all` 选项的 SnapDrive storage show` 命令查找主机上存在的主机实体。</block>
  <block id="1fe5b31bb447ebe963a36a1330e0a7d0" category="paragraph">SnapDrive for UNIX 会尝试通过安全 HTTP 协议连接到存储系统。如果主机无法连接到存储系统，则可能会发生此错误。操作：完成以下步骤：</block>
  <block id="78586c4d3a336b9d7f6f587768d83b11" category="cell">如果指定路径包含不存在的存储系统卷，则会发生此错误。操作：请与存储管理员联系以获取可供使用的存储系统卷列表。</block>
  <block id="852d755278aeabb35d8f6bf364cdcc2f" category="cell">`LUN 名称错误：：` ` &lt;/vol/vol1/SCE_lun2a&gt; - 无法识别格式`</block>
  <block id="ac93861b69d0e6e1a27c22663f141075" category="paragraph">使用 - autorename 选项执行命令</block>
  <block id="6303170189535a907e706db87e00e679" category="cell">`snapshot snap2_5vg_SINGLELUN_ remote 不包含磁盘组 "gBAD"`</block>
  <block id="5e6188993bd791640ac72c816899ab24" category="cell">主机上不存在指定的磁盘组，因此对指定磁盘组执行的删除操作失败。操作：使用带有 `all` 选项的 SnapDrive storage show` 命令查看主机上的实体列表。</block>
  <block id="162263fe5116dac6be8f8f6773ce9359" category="list-text">使用命令 SnapDrive storage delete -dg _&lt;dgname&gt;_` 删除磁盘组。</block>
  <block id="59081129f9c7217bb858a2d022f2ec7f" category="list-text">在 `snapdrive.conf` 文件中，确保 ` _all-access-if-rbacunspecified _` 配置变量设置为 "`on` " 。</block>
  <block id="d90ce1019bf6307a64e7440090277480" category="cell">如果您尝试创建 Snapshot 副本，而对文件规范执行并行输入 / 输出操作，并且将 ` _snapcreate-cg-timeout_` 的值设置为紧急，则会发生此错误。操作：将 ` _snapcreate-cg-timeout_` 的值设置为宽松，以增加一致性组超时的值。</block>
  <block id="eb7eea4435a06b7587046550cf90675a" category="list-text">使用 ` lor_snap_name_` 参数执行命令。</block>
  <block id="b5356a56bad158bea6579e9f2963af84" category="paragraph">AIX ： /etc/filesystems</block>
  <block id="917adddd9e06c60d2bc996008590a916" category="paragraph">要安装压缩实用程序，请输入以下命令： rpm -ivh ncompress-4.2.4-47.i386.rpm</block>
  <block id="31a2da4697bc31930bbbfb8e41792efe" category="paragraph">` * 网络 int modify -vserver _vserver_name LIF_name-firewall-policy_mgmt_*`</block>
  <block id="7a1d1ebd3dc54fdd9814337bf51078e0" category="paragraph">` * SnapDrive 配置准备 LUN-_count count_value_*`</block>
  <block id="4d92fa0a118e44264f01f20cc5a38ff7" category="paragraph">* 示例： * 此示例使用 `1s` 命令显示有关系统上日志文件的信息。</block>
  <block id="d208184cc466214ba9b40b78f5474080" category="paragraph">` * SnapDrive clone split *`</block>
  <block id="9e68bf4f6f044850b90c5148863367de" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun ） _lun_name_ 【 lon_lun_name_...】 | [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec_...]] | "-snapname _lort_snap_name_] ｛ -volclone]-v | -verbose ）【 -dump | -dumpall]*`</block>
  <block id="e2c6e6e17be1635f6ebae67a9324a45e" category="paragraph">` * SnapDrive snap rename （ -snapname] _old_long_snap_name_ _new_snap_name_ （ -force （ -noprompt]） *`</block>
  <block id="b0af49916a83bbb2e5af75ac26a0a0ca" category="paragraph">` * SnapDrive snap create -fs /mnt/test -snapname _snapshotName_ -f -noprompts*` 。</block>
  <block id="a2762cf75f8551500a5d591e19475eec" category="paragraph">在要启用的日志文件的名称 - 值对中指定一个文件名作为值。只有当 SnapDrive for UNIX 具有要写入的文件的名称时，它才会写入日志文件。日志文件的默认名称如下：</block>
  <block id="6a9e4f52a2da4cc33c60215ef78e1cf6" category="paragraph">请勿为日志文件名参数输入值。如果不提供值，则 SnapDrive for UNIX 不会向其写入日志信息。</block>
  <block id="3bc09915005d443d2a160f9fa0a0ef1d" category="summary">在安装 SnapDrive for UNIX 之前，您应考虑网络文件系统（ NFS\ ）服务的运行位置以及存储系统目录的导出位置。您应检查 NFS 客户端权限和接口读写权限。</block>
  <block id="3418d7269189a36cbe4a8750ffd2881a" category="doc">NFS 配置准则</block>
  <block id="cdef30769a6a6867320a54b1238ad50b" category="paragraph">在安装 SnapDrive for UNIX 之前，您应考虑网络文件系统（ NFS ）服务的运行位置以及存储系统目录的导出位置。您应检查 NFS 客户端权限和接口读写权限。</block>
  <block id="d2a2e3d591a6fb174f8205b0e95eaf9f" category="paragraph">使用 SnapDrive for UNIX 还原或连接到 NFS 挂载的目录时，必须确保将存储系统目录正确导出到主机。如果主机具有多个可访问存储系统的 IP 接口，则必须确保已将目录正确导出到其中每个接口。</block>
  <block id="88f6e6182b09794fa02de0f6b1d0bc42" category="paragraph">SnapDrive for UNIX 会发出警告，除非所有此类接口都具有读写权限，或者在使用 SnapDrive snap connect` 时具有 ` -readonly` 选项或至少具有只读权限。如果这些接口均无权访问目录，则 SnapDrive snap restore` 和 SnapDrive snap connect` 命令将失败。</block>
  <block id="7971bee57da120e9e632e9d6c4e155da" category="paragraph">以 root 用户身份执行单文件系统（ Single File SnapRestore ， SFSR ）时，必须确保存储系统目录在主机上以读写权限导出，并且必须设置以下导出规则：</block>
  <block id="a988bfa92bfbf4f5f723e9a25334ed1b" category="list-text">在 7- 模式 Data ONTAP 中， `rw=&lt; 主机名 &gt; ， root=&lt; 主机名 &gt;`</block>
  <block id="ad2ed3b242e3357332065a8baa37d0cc" category="list-text">在集群模式 Data ONTAP 中， `rwrule = sys ， rorule=sys ， superuster= sys`</block>
  <block id="1c9c1ac17638485842f5e126b3c925a8" category="summary">在光纤通道 \ （ FC\ ）或 Internet 小型计算机系统接口 \ （ iSCSI\ ）环境中使用 Data ONTAP 时，应将包含 SnapDrive for UNIX LUN 的所有存储系统卷上的快照预留选项重置为 0% 。</block>
  <block id="87e51b7b137a7ffb6913490d90620206" category="doc">重置快照预留选项</block>
  <block id="316fe693494c1d97f3b8fc1b564375be" category="paragraph">在光纤通道（ FC ）或互联网小型计算机系统接口（ iSCSI ）环境中使用 Data ONTAP 时，应在包含 SnapDrive for UNIX LUN 的所有存储系统卷上将 `snap reserve` 选项重置为 0% 。</block>
  <block id="2822ef684fda948d42c10c70c46646b2" category="paragraph">默认情况下， Data ONTAP 7.1.x 的 `snap reserve` 选项为 20% 。</block>
  <block id="1ac51f2d27376ccf7f9bec63bbf350e6" category="paragraph">要创建受限的 FlexClone ，您需要在 `snapdrive.conf` 文件中设置 `san-clone-method = unrestricted` ，或者在连接到多个文件规范之前设置 ` -clone unrestricted` 。此示例显示了要连接到卷 vol1 中 snap1 中的多个 filSpec ` /mnt/fs_1` 和 ` /mnt/fs_2` 时的结果。</block>
  <block id="b531094ca16e149788bc6c843150eed0" category="paragraph">在这种情况下， SnapDrive for UNIX 已从 Snapshot snap2 创建了一个不受限制的 FlexClone `Snapdrive_vol1_0_volume_clone_from_snap2_Snapshot` 。然后，该虚拟机将连接到 LUN testlun1 和 testlun2 ，分别创建克隆的主机文件系统 ` /mnt/fs1_0` 和 ` /mnt/fs2_0` 。</block>
  <block id="d53c7f7a1ec34c35bc751dae421403d3" category="paragraph">` * SnapDrive config delete -mgmtpath _data_interface_*`</block>
  <block id="dadc4da1d2bb449e29540e921c9ab4ca" category="summary">SnapDrive for UNIX 将安装 SnapDrive.conf 文件，该文件用于存储当前版本产品的配置信息。</block>
  <block id="d92be209cd433a2d6c1c66770c423260" category="doc">SnapDrive for UNIX 安装的配置文件</block>
  <block id="a9553bba63ffb719707428fa3eddbb81" category="paragraph">SnapDrive for UNIX 会安装 `snapdrive.conf` 文件，该文件用于存储当前版本产品的配置信息。</block>
  <block id="ab495ca9b6889e2520a963a79ecb63f0" category="paragraph">您应修改系统的 `snapdrive.conf` 文件。如果您升级 SnapDrive for UNIX 版本，则它会保留当前的 `snapdrive.conf` 文件。此配置文件位于以下位置：</block>
  <block id="4ab2e4e11ff90ffc6dedb220591ef5d1" category="paragraph">` /opt/NetApp/SnapDrive/SnapDrive.conf`</block>
  <block id="e04abdca0738b7a50d31801a18acfc46" category="list-text">将 ` space-reservations enabled_s` 配置变量值设置为 on 。</block>
  <block id="29a5b865a250773b005bf6d611b68856" category="paragraph">参数会覆盖 ` _-space-reservations — enabled"` 变量中提及的值。</block>
  <block id="335ca359dddaf490dae85af3999724e5" category="paragraph">以下示例是从名为 ` _aix207-116_` 的主机发送的消息：</block>
  <block id="87c4a87ec5fd9b3bb2a9c1fd8a259160" category="paragraph">重新启动守护进程时， SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="cec1c744930ed6fbb7dd3e0bffe7c6c7" category="paragraph">当存储连接操作失败时， SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="cb087d9d1f54fa6621d15c08c8ea7fce" category="summary">介绍如何在 AIX 平台上安装，配置和使用 SnapDrive for UNIX 。</block>
  <block id="d89a7ef99db1462a7bc8243071fe467d" category="doc">《 IBM AIX 安装和管理指南》</block>
  <block id="f3075c293efccb76036c575c0b4bf0ec" category="paragraph">本指南介绍如何在 AIX 平台上安装，配置和使用适用于 UNIX 的 SnapDrive 5.3.2 。</block>
  <block id="70fb98fb5e7f76132a85b1e247f7a7e8" category="summary">FC IBM AIX Host Utilities 的 MPIO 环境对 cfmodes 的支持有限。如果您运行的是 Data ONTAP 7.1.x ，则仅支持单个映像或 cfmode 。在 Data ONTAP 7.2.4 或更高版本中，支持单映像 cfmode 和配对 cfmode 。</block>
  <block id="3f7e6d9992b3cf5179ea4b75c9116837" category="doc">（ AIX ） MPIO cfmode 支持受限</block>
  <block id="17e9ff9150e0b2381eb85572a6d52729" category="paragraph">主机卷（ -hostvol ` _file_spec_` ）或逻辑卷（ -lvol ` _file_spec_` ）</block>
  <block id="0bc4e6d4c0a3f037814b707ef2b1c944" category="paragraph">您必须验证所需数量的路径是否已启动且正在运行。您可以使用 Host Utilities 软件附带的 sanlun 实用程序验证路径。例如，在 FC 多路径配置中，您可以使用 `sanlun fcp show adapter -v` 命令。</block>
  <block id="5066ca4aee3a18c76140d880ccacfc5e" category="list-text">安装并设置相应的 FC 或 iSCSI 交换机。</block>
  <block id="dc4d53aa0d117d8b189b36d161af4e96" category="paragraph">绝对</block>
  <block id="614ffbca01dc46d13a4d6c50514d1b4f" category="paragraph">JFS2 或 jfs</block>
  <block id="62568609a56c624866dba97854be05cf" category="paragraph">DMP</block>
  <block id="4fd44043de77bc34c682afef8be431bb" category="list-text">确保同一主机上未并行运行任何其他会话。在这种情况下， `snapdrived restart` 命令将挂起系统。</block>
  <block id="fe947421b78e02133cfc3f1cedebb537" category="paragraph">SnapDrive for UNIX 无法执行更新，因为已禁用主机自动配置准备，因为 `snapdrive.conf` 变量 ` _enable-implicate-host-preparation_` 设置为 "`off` " 。在禁用自动主机准备的情况下，您应使用 lun config prepare SnapDrive 命令来准备主机以配置 LUN ，或者手动执行准备步骤。</block>
  <block id="cb5c3f9610cbe76baa8f724681c94f11" category="paragraph">` * SnapDrive storage resize -dg _file_spec_ ｛ -growby | -growto ｝ 大小为 "-addlun （ -igroup _ig_name_ ） _[_ig_name_ ...]] [ ｛ -reserve | - noreserve ｝ ]] "-fstype _type_] "-vmtype _type_]*`</block>
  <block id="148b25afbc774a50e2259a292082c78e" category="image-alt">SDU RBAC Process 01 AIX</block>
  <block id="d566315b9012f2d13e26e23506878fc5" category="paragraph">` * SnapDrive storage connect -fs _file_spec_ -lun _lon_lun_name_ LUN_name...] [-mntets options]*`</block>
  <block id="75822175efefb75cf0e89a582d841e54" category="summary">SnapDrive for UNIX 配置检查程序工具可帮助您确定和验证运行 SnapDrive for UNIX 所支持的配置。</block>
  <block id="86cbe4fdd10a8d3502042f2d76fac2f6" category="doc">验证支持的配置</block>
  <block id="f0a9e5f6ad1a6b2fc10100aeae59e552" category="paragraph">包含更新数据文件的配置检查程序工具可检查 SnapDrive for UNIX 支持的配置，并列出系统中所有受支持和不受支持的组件。</block>
  <block id="99ee7fb7e40f1ffec874ec0dfcdc803a" category="paragraph">该工具有助于在使用 SnapDrive for UNIX 之前确认主机中是否提供了所有必要的组件和正确的版本。</block>
  <block id="59232fe15c1e4ac277eb16950b515010" category="list-text">查找主机中可用的端口。然后，在 `snapdrive.conf` 文件的选项 ` contact-http-port-sdU-daemor_` 中指定端口。</block>
  <block id="10c30bc6db445b0e8fb94f88132faaa5" category="summary">通过 iSCSI 或 FC 查询具有虚影设备句柄的 AIX 设备（处于已定义或故障状态的设备句柄）可以使用发生原因 SCSI 命令等待 AIX 默认超时时间，即大约 30 秒。</block>
  <block id="798e42132060c2fe182010d1114e7fe1" category="doc">AIX 发生原因中的虚影设备句柄在 iSCSI 命令上的返回时间较长</block>
  <block id="36c2d63ac1bba458e95422f331445709" category="paragraph">通过 iSCSI 或 FC 查询具有虚影设备句柄的 AIX 设备（处于定义或故障状态的设备句柄）可以使用发生原因 SCSI 命令等待大约 30 秒的 AIX 默认超时。</block>
  <block id="f932b37f313dd5855ea435db2a9ffe24" category="paragraph">如果未清理 FC 子设备句柄或 FC HBA 未连接到交换机，则在将 AIX 系统从使用 FC 切换到使用 iSCSI 后，您可以看到此问题描述。</block>
  <block id="b8fcf461e669eb6f8b097d6e49fad828" category="paragraph">* 临时解决策： *</block>
  <block id="c42a17f366df55679f708e50581c8f7d" category="list-text">如果光纤通道 HBA 未连接到交换机，请在未连接到光纤通道交换机的所有光纤通道启动程序中安装光纤通道 IOA 包装插头。</block>
  <block id="1d1b0c9689fcebf31210a63115cb217a" category="list-text">如果光纤通道 HBA 已连接到交换机，但出现故障或将设备句柄定义为子设备，请使用 `rmdev` 命令删除陈旧的虚影设备句柄。</block>
  <block id="6c7985445f68e7d31c33e6128a99f45f" category="paragraph">要传递给创建新文件系统的主机操作的选项。根据您的主机操作系统，此主机操作可能是 mkfs 命令等命令。</block>
  <block id="19d3a14cbf4b8e01a03b8fd4d8caea84" category="paragraph">要用于 SnapDrive for UNIX 操作的文件系统类型。文件系统类型必须为 SnapDrive for UNIX 操作系统支持的类型。您可以为此变量设置的当前值为 "`jfs` " ， "`JFS2` " 或 "`VxFS` "</block>
  <block id="727037344d0d21738f1c04184576a126" category="paragraph">您提供的 ` -mntopts` 参数是一个文件系统类型选项，使用 mount 命令 "` - o` " 标志指定。请勿在 ` -mntopts` 参数中包含 "` "` - o` " 标志。例如，序列 ` _-mntopts tmplo_g` 会将字符串 ` -o tmplog_` 传递到挂载命令行，并在新命令行中插入文本 "`tmplog` " 。</block>
  <block id="8a298a834a5e0fe5e9b012f4ea8b660b" category="paragraph">生成克隆卷名称时要使用的前缀。新卷的名称格式为 &lt;pre-`fix&gt;_&lt;original_volume_name&gt;` 。</block>
  <block id="95ceb7c2cb2bfce8a4f896c0c58a415e" category="paragraph">卷管理器必须是 SnapDrive for UNIX 支持您的操作系统的类型。可以为此变量设置的当前值为 VxVM 或 lvm 。</block>
  <block id="c39497360380773a166f415e46dc34ea" category="paragraph">您也可以使用 `vmtype` 配置变量指定要使用的卷管理器类型。</block>
  <block id="e7ee94763d2b3a3536a6b960607970dc" category="summary">在运行任何 SnapDrive for UNIX 命令之前，您必须了解 Web 服务和守护进程以及如何使用它们。所有 SnapDrive for UNIX 命令均使用守护进程服务运行。在 AIX 主机上使用 SnapDrive for UNIX 之前，必须启动守护进程，以便 SnapDrive for UNIX 能够与其他 NetApp 和非 NetApp 产品无缝安全地集成。</block>
  <block id="a0157bf8246b78dd6e231fcf963aba06" category="summary">通过独立 UNIX 系统上的 SnapDrive for UNIX ，您可以创建存储并管理 LUN ，文件系统，逻辑卷和磁盘组的 Snapshot 副本。</block>
  <block id="8b0432aa495da4a044ca058dde88dbf0" category="doc">在独立 UNIX 系统上执行的操作</block>
  <block id="95f72195fe6c3402ade0ef9d89530734" category="paragraph">通过独立 UNIX 系统上的 SnapDrive for UNIX ，您可以创建存储并管理 LUN ，文件系统，逻辑卷和磁盘组的 Snapshot 副本。</block>
  <block id="9bba9fe693fa2fffee9b25f9034c8a8e" category="list-text">创建包含 LUN ，文件系统，逻辑卷和磁盘组的存储。</block>
  <block id="7f25fe99e0a465dfe4a139590b877807" category="paragraph">创建存储后，您可以增加或减少存储容量，将存储连接到主机或断开其连接，以及显示有关存储的配置信息。</block>
  <block id="77105706b26401df2acf460f12e816b2" category="list-text">为存储系统上的一个或多个卷组创建 Snapshot 副本。</block>
  <block id="2e601ec36364c452fb1bbf5c4b06d797" category="paragraph">Snapshot 副本可以包含文件系统，逻辑卷，磁盘组， LUN 和 NFS 目录树。创建 Snapshot 副本后，您可以重命名，还原或删除此 Snapshot 副本。您也可以将 Snapshot 副本连接到同一主机或不同主机上的其他位置。连接 Snapshot 副本后，您可以查看和修改内容，也可以断开连接。您还可以显示有关创建的 Snapshot 副本的信息。</block>
  <block id="ae1023a0e68d0ca903e9cc6501853472" category="paragraph">AutoSupport 允许 SnapDrive for UNIX 将因 SnapDrive 发送到存储系统的 EMS 日志视图中的 ` /etc/log/EMS` 文件而发生的任何操作故障发送到 EMS 日志视图。</block>
  <block id="68185e2d22cb83030cedc5db5a865a47" category="paragraph">要拆分 FlexClone 卷，还需要使用 `snap connect` 命令指定 ` 拆分` CLI 选项。要断开连接，应使用 `disconnect` 命令提供 ` -split` 选项以断开拆分的 FlexClone 卷。此处有效的是启动 ` 拆分` 操作的阻止和非阻止模式。</block>
  <block id="5868efbae90f2f86a5ed062e24cabc9d" category="cell">* 然后 ...*</block>
  <block id="800de49164d31409225a7341849b6054" category="paragraph">` 设备名称 _` 是要删除其用户登录信息的存储系统的名称。</block>
  <block id="04071b7131da81f9fe9c072809a34ae6" category="paragraph">_filesSpec ： filesSpec 可以是文件系统，主机卷，磁盘组或 LUN_ 的任何人</block>
  <block id="56b58f360977c301c220874061ede75c" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs ｝ _file_spec_ [_file_spec..._] ｛ -dg _ -fs ｝ _file_spec_ [_file_spec..._]...] _long_snap_name_ [-full] [-fstype _type_] [-vmtype _type_] [-split]*`</block>
  <block id="10deaa3ebf1d3062705566bb0a0c736f" category="paragraph">您可以使用 SnapDrive snap show` （或 list ）命令显示有关 SnapDrive for UNIX 创建的每个 Snapshot 副本的信息。您可以使用此命令显示有关以下内容的信息：</block>
  <block id="0534d18ed67bcc35d637186cdcf17ed2" category="paragraph">您可以从 ` /opt/netapp/SnapDrive/setup/config_wizard` 运行配置向导。</block>
  <block id="73569348e81a327d04ec8df76ba0cdad" category="list-text">` -mntopts_` 参数是使用 mount 命令 ` -o` 标志指定的文件系统 ` 类型` 选项。请勿在 ` _-mntopts_` 参数中包含 -o 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="3705ed3e064ff2f7b4b96d7ad3c89de4" category="paragraph">SnapDrive snap show -filer filername [filername...] 【 -verbose 】`</block>
  <block id="f8b698bc31bd216249088fb5eec9e873" category="admonition">`snap connect` 操作要求在 AIX 上使用 Veritas 为 vximport 提供 Storage Foundation Enterprise 许可证。</block>
  <block id="26e726560c784fbfdfdc198eb8a70cd2" category="list-text">使用 ` -noperit` 选项，您可以将 Snapshot 副本连接到新位置，而无需在主机文件系统表中创建条目。默认情况下， SnapDrive for UNIX 会创建永久性挂载。这意味着：</block>
  <block id="0c4cd5d7ffb05cc5bd944ed5ca74676a" category="list-text">在 AIX 主机上连接 Snapshot 副本时， SnapDrive for UNIX 会挂载文件系统，然后在主机的文件系统表中为构成文件系统的 LUN 放置一个条目。</block>
  <block id="0274157986c768198f53197d383ccd8b" category="paragraph">如果在不使用 ` -autosename` 选项的情况下使用 ` -AutoExpand` 选项，则在使用 LVM 实体的目标副本的默认名称时， `snap connect` 命令将失败。如果包含 ` -autorename` 选项，则 SnapDrive for UNIX 会在使用默认名称时重命名实体。这意味着，在命令提示符处使用 -autorename 选项时，无论所有必要名称是否可用， Snapshot 连接操作都会继续进行。</block>
  <block id="9701920a9fcb7c64ff4b3f1f8ad849a8" category="list-text">` -mntopts_` 参数是使用 mount 命令 ` -o` 标志指定的文件系统 ` 类型` 选项。请勿在 ` _-mntopts_` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="74c631b2da710c1b71bf4bdcafc30c6a" category="paragraph">如果在 LUN 上创建文件系统，则第一个参数必须为 ` -FS` 挂载点。要在存储系统和卷中的 LUN 上创建文件系统，请使用 ` -filervol_` 参数并指定存储系统和卷的名称。要在特定 LUN 上创建文件系统，请使用 ` _-lun_` 参数并指定存储系统名称，卷名称和 LUN 名称。您还必须包括 ` -nolvm` 选项，才能在 LUN 上创建文件系统，而无需激活主机 LVM 。</block>
  <block id="ecbb6e2da1b91ae95a7f944c4c0e7414" category="paragraph">对于 AIX ， SnapDrive for UNIX 接受： `JFS2` 或 `VxFS` 。</block>
  <block id="240b92c32216e5a00196bc0f11ec057c" category="admonition">在 AIX 主机上，存储操作不支持 JFS 文件系统类型，但 Snapshot 操作支持 JFS 文件系统类型。</block>
  <block id="6c0655679d49f71af82177252be19191" category="list-text">使用 ` -noper` 创建文件系统，而不向主机上的文件系统挂载表文件添加条目。默认情况下， SnapDrive storage create` 命令会创建永久性挂载。在 AIX 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。</block>
  <block id="448ae5aeba3779bf9d77d4fde402733b" category="list-text">在 FC 和 iSCSI 配置中，将存储系统上的 `snap reserve` 设置为每个卷的 0% 。</block>
  <block id="a0d4988cae70add69ce9427af1f1cbe2" category="list-text">Data ONTAP 使用 ` /vol/vol0` （根卷）管理存储系统。</block>
  <block id="f547afe98aeb230fe92c66adc4c2fa06" category="paragraph">请勿使用此卷存储数据。如果您已将 ` 卷（非` 卷 /vol/vol0 ）配置为根卷来管理存储系统，请勿使用它来存储数据。</block>
  <block id="36d939dd5cba57de264fdcd612741e3e" category="list-text">SnapDrive 配置集（ -dfm]_user_name_ appliation_name [appliage_name ...]`</block>
  <block id="db58974f5372620a38f1435d41e6e489" category="list-text">SnapDrive 配置显示 _[host_file_name]_`</block>
  <block id="8ecb21a64c1967ed148f7c1b30ea1d01" category="list-text">SnapDrive 配置 migrate set _storage_system_name new_storage_system_name_`</block>
  <block id="b61f91b540d3c0c9c818058a17f4d2d7" category="list-text">SnapDrive igroup add igroup_name filername [filername ...]`</block>
  <block id="61a4c51289e35177e2b993809780f07d" category="list-text">SnapDrive igroup delete filername [filername ...]`</block>
  <block id="c6d0c0c54dd7f589b2d99833783ad069" category="summary">默认情况下，不能使用系统管理界面工具（ SMIT\ ）在 AIX 上安装 SnapDrive for UNIX 修补程序版本。</block>
  <block id="5dd00b5a4f10ede5f33e34f551087487" category="doc">默认情况下，无法在 AIX 上安装 SnapDrive for UNIX 修补程序</block>
  <block id="95c43f9ac40923c6e8a83b5777cd6cce" category="paragraph">默认情况下，不能使用系统管理界面工具（ SMIT ）在 AIX 上安装 SnapDrive for UNIX 修补程序版本。</block>
  <block id="a5cafe74e22ed7b084230822499f23fe" category="paragraph">安装适用于 AIX 的 SnapDrive for UNIX 修补程序版本时，请确保在 SMIT 中选择 `overwrite` 选项。</block>
  <block id="8b9f0e91b87f55602bf60fb2e651b4d8" category="paragraph">` * SnapDrive storage create _-host_lvm_fspec_ -lun _long_lun_name_ [_lun_name..._] -lunsize _size_ [-igroup _ig_name_ [_ig_name..._]] （ ｛ -reserve | -noreserve ｝ ） *`</block>
  <block id="33c90b7003a99a4572a059ba849fbf09" category="paragraph">` ## SnapDrive storage create -fs /mnt/Acctfs -fstype JFS2 -lun Acctfiler ： /vol/vol1/luna lunB lunc -lunsize 10g*`</block>
  <block id="b6ba07147e7cd26c8b3dd6007843c159" category="summary">SnapDrive for UNIX 提供了多种格式的手册页。</block>
  <block id="3ec7e58d7f7e95678ebefcbf4b0761e1" category="doc">SnapDrive for UNIX 安装的手册页</block>
  <block id="eca66272ace3524778de484e5be0a733" category="paragraph">手册页位于以下位置：</block>
  <block id="cb5ee90229c24fbda650949530c6b59a" category="list-text">` /opt/NetApp/SnapDrive/docs/SnapDrive.dc.1`</block>
  <block id="69222a2446d4ba4b9ec39a5b0f9aa02c" category="list-text">` /opt/NetApp/SnapDrive/docs/SnapDrive.1`</block>
  <block id="a9d69070b808d6c34cb83ad74327cf08" category="list-text">` /opt/NetApp/SnapDrive/docs/SnapDrive.1.html`</block>
  <block id="45f154763f82a0e7677be3d47bc37da9" category="list-text">` /opt/NetApp/SnapDrive/docs/Brocade_info.1`</block>
  <block id="bd51b654a538136b58a33b4ae5c482d4" category="list-text">` /opt/NetApp/SnapDrive/docs/McData 信息 1`</block>
  <block id="698904a5cfece9fca4890ab08aa7b7a6" category="list-text">` /opt/NetApp/SnapDrive/docs/cisco_info.1`</block>
  <block id="6b62c9101d52f375a03d56e284311d92" category="list-text">` /opt/NetApp/SnapDrive/docs/filer_info.1`</block>
  <block id="4de2ea20375dd4b7c69908c064886ef1" category="list-text">` /opt/NetApp/SnapDrive/docs/aix_info.1`</block>
  <block id="fe90012b8abdb97f95ef86e6a9c45c10" category="paragraph">` * SnapDrive storage create -fs _file_spec_ -nolvm （ -fstype 类型）【 -fsopts options】 【 -mntets options】 【 -filervol _long_filer_path_ -lunsize _size_ 【 -igroup _name ...]_〔 ｛ -esreserve ｝ _noresreserve ｝ _eserve`</block>
  <block id="2523c56d0cbb6b46413fb89c7fe19c19" category="summary">您可以在 FC 和 Internet 小型计算机系统接口 \ （ iSCSI\ ）环境中优化卷的使用情况，方法是在同一个卷上放置主机专用逻辑单元号 \ （ lun\ ）。</block>
  <block id="0f044b3706fbae2263597dbc6662af4b" category="doc">在 FC 或 iSCSI 环境中进行卷优化</block>
  <block id="eb540ced56454cc8e45507cf4b3a8590" category="paragraph">您可以在 FC 和 Internet 小型计算机系统接口（ iSCSI ）环境中通过在同一个卷上放置主机专用逻辑单元号（ Logical Unit Number ， LUN ）来优化卷的使用情况。</block>
  <block id="592006658b487c705a5e757abf05c051" category="paragraph">此外，您还可以通过执行其他一些任务来优化卷：</block>
  <block id="67d9220271eda0c05554fc77981070bd" category="list-text">如果多个主机共享同一个存储系统，则每个主机都应具有自己的专用存储系统卷，以容纳连接到该主机的所有 LUN 。</block>
  <block id="4f317093fe5204f1c32fe9e87c09823a" category="list-text">如果存储系统卷上存在多个 LUN ，则最好在 LUN 所在的专用卷上仅包含单个主机的 LUN 。不能包含任何其他文件或目录。</block>
  <block id="67454d9fc337dc6687159511454c8944" category="paragraph">` * SnapDrive storage connect -fs _file_spec_ -hostvol _file_spec_ -lun _lon_lun_name_ [_lun_name_...] [-igroup _ig_name_ [_ig_name_...]] 【 -noperisture] 【 -mntets _options】 【 -fstype _type_】 【 -vmtype _type_]*`</block>
  <block id="3916e90f00f7a2af3e28e5fe653562fe" category="summary">您可以使用 SnapDrive for UNIX 配置检查程序工具来确定主机平台上安装的组件。</block>
  <block id="a6c9a49108d57228a116144e7c66e62d" category="doc">确定已安装的组件</block>
  <block id="f0483f5693cb902b6afce55fb8cf8769" category="list-text">确定已安装的组件：</block>
  <block id="79e86f4f9794fc0eefe1fcfe5228d978" category="paragraph">` * sdconfcheck detect"`</block>
  <block id="9bd8fe5e86d4f63b45528c201a0c0604" category="paragraph">`sdconfcheck.out` 日志文件用于标识 ` /var/log` 文件中已安装的组件。日志文件将逐渐重命名为 `sdconfcheck.out` ， `sdconfcheck.out 2` 等。</block>
  <block id="ff246b0e0b7e47f700c6f112034834dd" category="paragraph">在 Red Hat Enterprise Linux 6 环境中， SnapDrive for UNIX 配置检查程序工具不会检测 Ext3 文件系统。您应运行 `modprobe -v ext3` 命令来加载 Ext3 文件系统。</block>
  <block id="2075c58abf85c0672380b6a4e2ec099f" category="list-text">运行 `sdconfcheck detect` 命令后，您可能需要安装或配置列出的组件。</block>
  <block id="88d5361f3578a814bc9b89be5f9f0996" category="paragraph">如果 SnapDrive for UNIX 管理员指定了 ` -igroup` CLI 选项，或者您使用手动创建的启动程序组，则 `igroup` name 不一定需要主机名。由于上述所有原因， SnapDrive for UNIX 无法可靠地检测 LUN 的本地或远程绑定。因此， SnapDrive for UNIX 会在基于卷的 SnapRestore 中显示完整的 LUN 启动程序组和启动程序信息。</block>
  <block id="c7f47ceb51652b7577160e917060ba65" category="paragraph">您还可以指定 SnapDrive 在找不到指定主机的权限文件时必须执行的操作。您可以通过在 `snapdrive.conf` 配置文件中为 ` all-access-if-rbac-unspecified _` 设置值来指定操作。您还可以通过修改访问权限来启用或禁用对存储系统的访问。</block>
  <block id="2f28f5ff4f7a36d54e4457f2361e634a" category="summary">您可以轻松地将 SnapDrive for UNIX 升级到最新版本。在升级过程中， SnapDrive.conf 文件中的几个变量会发生变化。要确保 SnapDrive for UNIX 正常运行，请检查 SnapDrive.conf 文件中的各种默认值。</block>
  <block id="598d3ae4fd129e7a59622c1afc43a6a6" category="doc">将适用于 UNIX 的 SnapDrive 升级到最新版本</block>
  <block id="c3fd3e2626af09f0e9d33f2de018aeb5" category="paragraph">您可以轻松地将 SnapDrive for UNIX 升级到最新版本。在升级过程中， `snapdrive.conf` 文件中的变量很少。要确保 SnapDrive for UNIX 正常运行，请检查 `snapdrive.conf` 文件中的各种默认值。</block>
  <block id="afe2e78389e161c67e7af287ae3879db" category="paragraph">要升级当前版本的 SnapDrive for UNIX ，您无需卸载它。而是应在当前版本之上安装最新版本的软件。</block>
  <block id="fa4e0dc227abf315591ad2501ae2b14b" category="paragraph">安装新版本时， SnapDrive for UNIX 会检查您是否已安装某个版本。否则，它会保留当前的 `snapdrive.conf` 文件，并将所安装文件的版本重命名为 `snapdrive.conf.x` 。这样可以避免覆盖 `snapdrive.conf` 文件，因此您不会丢失该文件中的任何自定义设置。</block>
  <block id="0644234de068eabd30c188184e891a5e" category="paragraph">默认情况下， SnapDrive for UNIX 会将 `snapdrive.conf` 文件中的变量注释掉。这意味着它会自动对所有变量使用默认值，但您自定义的变量除外。如果要更改这些值，必须将变量添加到当前的 `snapdrive.conf` 文件中并指定所需的值。</block>
  <block id="f5ccaac3013be6cca679335f398d1d39" category="admonition">执行修补程序升级时， `snapdrive.conf` 文件中的 SnapDrive 版本不会更改。但是， SnapDrive version` 命令会提供相应的版本。</block>
  <block id="e8284cb96c7aef914048b282826b78b6" category="summary">在安装 SnapDrive for UNIX 之前，您必须通过确保存储系统满足某些要求来准备存储系统。</block>
  <block id="da3e21694115730ff43dd32cb15df269" category="doc">正在准备存储系统</block>
  <block id="25894f7fc6bb6e072ba332174efbd066" category="paragraph">您必须通过检查以下条件来准备存储系统：</block>
  <block id="f05f4f37b2e927a124d7b67826bb6d66" category="list-text">存储系统就绪</block>
  <block id="1e496ca2f7a66d863132588473f14de2" category="list-text">系统要求</block>
  <block id="2ad1cda2c7856cd5fc0315ed5f4f5804" category="list-text">存储系统配对节点 IP 地址</block>
  <block id="4b6075b8cf295d387fb4f35c0c00cc50" category="list-text">NFS 环境中的 SnapDrive for UNIX 配置</block>
  <block id="1fdcf8b7992569fbbfa753ab22afe704" category="list-text">UNIX LUN 和 NFS 实体的卷准备</block>
  <block id="7abcb0795ac30bc0490d342c36406d24" category="list-text">`snap reserve` 选项设置为 0</block>
  <block id="91f68636cd5da2cd1ac283eb0e1c81b8" category="list-text">在以 7- 模式运行的 Data ONTAP 中， `vfiler.vol_clone_zapi_allow` 配置变量设置为 `on` ，以连接到 vFiler 单元中卷或 LUN 的 Snapshot 副本。</block>
  <block id="ed2ea541cbc5a57852c967872657557e" category="summary">在存储系统上运行设置程序时，系统会提示您提供配对存储系统的 IP 地址或接口名称，以便在发生故障转移时使用。如果不提供此信息，则 SnapDrive for UNIX 将无法在接管的存储系统上搜索存储实体。</block>
  <block id="45730aa39eb01ff858b9df46f2c2a24f" category="doc">确认存储系统配对节点 IP 地址或接口名称</block>
  <block id="99518028cb60356bed5e02a67a19c0fa" category="paragraph">配对 IP 地址或接口名称是 HA 对设置中配对存储系统的 IP 地址或接口名称。如果主存储系统发生故障，配对存储系统将接管主存储系统的运行。</block>
  <block id="bb6c76d134a785a7a65eea1dfb822998" category="section-title">示例：存储系统设置脚本</block>
  <block id="1a8011544dd8194a28f9ca4001ccdc9a" category="paragraph">以下存储系统设置脚本输出示例将请求 IP 地址：</block>
  <block id="365fddc10f45457f0f45d4e0e7919a69" category="paragraph">此示例使用 IP 地址 10.2.2.21.35 。</block>
  <block id="a018b6484abca15a3cced3ea5b3f5b4c" category="paragraph">如果您没有 `sDHOST-name.prbac` 和 `sdgeneric.prbac` 文件，请检查在 `snapdrive.conf` 文件中定义的配置变量 ` all-access-if-rbac-unspecified _` 。</block>
  <block id="5fc4ef8b8c6c45f92d527b0229a7e8b6" category="paragraph">手动设置从给定主机到给定 vFiler 单元的访问控制。给定主机的访问由位于受影响 vFiler 单元根卷中的文件控制。该文件包含 ` /vol/&lt;vFiler 根卷 &gt;/sdprbac/sdhost-name.prbac` ，其中 ` host-name_` 是受影响主机的名称，由 `gethostname （ 3 ）` 返回。您应确保此文件可从可访问它的主机读取，但不可写入。</block>
  <block id="8f88da390d153144a35f14b1448e84c3" category="summary">安装完成后，您必须执行一些任务以确保 SnapDrive for UNIX 安装成功。</block>
  <block id="a5eef00b597c47cde156a369f20f80c7" category="doc">执行安装后检查</block>
  <block id="9bc8a4579c5a9b636c53b4fb4fd0b3c6" category="list-text">验证安装程序是否已在主机上安装所有必要的文件。</block>
  <block id="15821b0b82220a162938b0e660ae1df7" category="list-text">确认 `snapdrive.conf` 文件中的配置变量设置正确。</block>
  <block id="ef1f7502e5f8b4d7c156756a7ac50af9" category="paragraph">对于大多数这些变量，应使用默认值。</block>
  <block id="1e7190a28e3b200ee1c679a958d2b516" category="list-text">为 SnapDrive for UNIX 提供当前存储系统登录信息。</block>
  <block id="20d58e825132062323518dd5769f8436" category="paragraph">设置存储系统时，您提供了该系统的用户登录名。SnapDrive for UNIX 需要使用此登录信息才能与存储系统配合使用。</block>
  <block id="c5dce7b835fed50f2f35ff906a44e1c6" category="list-text">要使用基于角色的访问控制（ Role-Based Access Control ， RBAC ），请在 `snapdrive.conf` 文件中设置 ` _rbac 方法 =dfm_` 变量。</block>
  <block id="45d444a7b5643bd0f411dc2d86aa8c69" category="paragraph">默认情况下， SnapDrive 4.0 for UNIX 及更高版本使用根凭据访问存储系统。未打开 RBAC 功能。</block>
  <block id="ab4a423caf5b7b2bd76e9fd166bf0c23" category="list-text">要使用 HTTPS 与存储系统和守护进程服务建立安全连接，请在 `snapdrive.conf` 文件中设置 ` _use-https-to_sdU-daemon=on_` 。</block>
  <block id="0c74a505b122fc49d6ae6ac85379e331" category="list-text">在中安装 SnapDrive for UNIX 使用的服务器证书</block>
  <block id="cc989e052ed7700b9dfafbe40e52ba0a" category="paragraph">在 SnapDrive.conf` 文件中指定的 `sdu-daemon-certificate-path=/opt/NetApp/SnapDrive/SnapDrive.pem 路径。</block>
  <block id="ef80296ea698b3eca9984ec690ec4af7" category="list-text">运行以下命令，更改 SnapDrive for UNIX 守护进程服务的默认密码：</block>
  <block id="dc44b71fc08e792fe37786202d09ebb2" category="list-text">在 ` /var/log/sdconfcheck.out` 中检查已安装配置组件的详细信息。</block>
  <block id="21ef98ba556224071da85b4d810ddbca" category="inline-link">《 Data ONTAP 8.2 7- 模式 SAN 管理指南》</block>
  <block id="c04ae46a3d1c63299fd0948e9dd0ce82" category="paragraph"><block ref="c04ae46a3d1c63299fd0948e9dd0ce82" category="inline-link-rx"></block></block>
  <block id="27769c40de15e3b92636065c2634f1f6" category="list-text">protocol ：在 `snapdrive.conf` 文件中为 ` 默认传输 _` 配置的值。</block>
  <block id="902b7fc420d145ede0a36e2202325778" category="list-text">保护已启用：如果 OnCommand Data Fabric Manager （ DFM ）配置了 SnapDrive for UNIX ，则会记录值 ` _Yes_` 。</block>
  <block id="9a03a8c0fecbb9fd61a774904b150411" category="paragraph">您还必须使用 SnapDrive config set _vsadmin vserver name_` 命令检查是否已在适用于 UNIX 的 SnapDrive 中配置 SVM 名称。</block>
  <block id="b326d2638bfa3dfdccd9686af252be73" category="section-title">AIX 上的限制</block>
  <block id="9edbd65ebf9c7c1ddc4b55f0ee93a298" category="list-text">如果一个或多个 FC 端口链路关闭或不可用，则 SnapDrive for UNIX 守护进程需要较长时间才能重新启动。</block>
  <block id="2c872b77fe04e04c98dad785868c5a49" category="paragraph">但是，无论 FC 端口的状态如何， SnapDrive for UNIX 守护进程都可以启动。</block>
  <block id="b372a1f7f8e7a54f766bf0a2acdfed1e" category="list-text">默认情况下， SnapDrive for UNIX 会使用非并发设置创建磁盘组；您必须手动更改或提供存储配置操作。</block>
  <block id="b599a53af3d310c8ce662cc55d5f5874" category="list-text">SnapDrive for UNIX 在 AIX 上不支持 iSCSI 传输协议。</block>
  <block id="f0473015e820b78a52f34a46c04cf96b" category="paragraph">为 ` -FS` 指定的 ` file_spec_` 是文件系统挂载点的名称。SnapDrive for UNIX 会自动查找并断开与指定文件系统关联的 LUN 。</block>
  <block id="c02e59812bed5a845f9ad71e67b636a7" category="paragraph">运行供应商提供的原生重新扫描脚本以删除所有旧条目，或者使用 `sg3` 软件包附带的 `rescan-scsibus.sh -r` 命令运行重新扫描脚本。</block>
  <block id="328a7cc6d2c2fd8b4e59b89df8177fae" category="summary">您可以在 SnapDrive for UNIX 中找到有关功能和支持的配置的信息。</block>
  <block id="f9199ed592fa6a3a9d5867a596b07f1b" category="doc">SnapDrive for UNIX 中支持的功能</block>
  <block id="313370799e4327591a349e5b4d267762" category="paragraph">SnapDrive for Unix 具有以下功能，并支持以下功能：</block>
  <block id="373c9e881a4d44dc9b4ef6e6ea621288" category="list-text">SnapDrive for UNIX 配置检查程序</block>
  <block id="7e3575bb5a54f6d7523217403a7aa445" category="list-text">基于角色的访问控制（ Role-Based Access Control ， RBAC ）权限</block>
  <block id="6507da604bc10ba5dcc56a017a092923" category="list-text">SnapDrive for UNIX 向导</block>
  <block id="21689b7e4e8f9c22c6c2f398eb49c671" category="list-text">创建和使用 Snapshot 副本</block>
  <block id="e631130299f2b7ca3153ec97f9422b3b" category="list-text">已修改 SnapDrive 操作中存储系统的系统名称支持</block>
  <block id="e9c3bb8a1957deedae7d98469d28592a" category="list-text">对卷迁移和适用于 vFiler 的 NetAppDataMotion 导致的错误进行透明处理；使用适当的配置变量控制相同的错误</block>
  <block id="38db12fc225b32075e824f5e9e4216d5" category="paragraph">`extendlv`</block>
  <block id="f00b92c3e3e26bbaf9fa0c8e234c1dbe" category="paragraph">`chfs`</block>
  <block id="066ecd17a7a7f1a61011ddc10804c447" category="paragraph">VxVM</block>
  <block id="e1020839a4cb0f86b672881efcc21445" category="paragraph">`vxassist`</block>
  <block id="8d9fa9ef9e15329ab587080bea3cdd51" category="paragraph">`fsadm`</block>
  <block id="8f0ce4172ce1650bc191b09946ca5619" category="paragraph">SnapDrive storage disconnect -lun long_lun_name LUN_name...]`</block>
  <block id="4f17b1cf9aeafaec4d91020a144dde16" category="paragraph">` -d directory` 指定此实用程序创建的压缩文件的位置。默认位置为 ` /tmp/netapp` 。</block>
  <block id="6ec938f6d1b1ef3acf61e1a0f1248c4a" category="paragraph">` -n file_name` 指定要包含在目录和压缩输出文件的名称中的字符串。如果您为此参数提供了一个值，则 `snapdrive.dc` 实用程序将创建一个名为 `ntap_SnapDrive_name` 的目录和一个名为 `ntap_SnapDrive_name.tar.Z` 的文件名，默认路径名称为 ` /tmp/netapp/ntap_SnapDrive_info.tar.Z`</block>
  <block id="f034a05ff1ca73be1e0b6022501473cd" category="paragraph">` * SnapDrive 配置集 _vsadmin 文件名 [filername...]_*`</block>
  <block id="6cf500de34e4884b64d23ca51134c4b9" category="list-text">使用以下命令迁移新的 SVM 名称：</block>
  <block id="1c2ddbed65b2e19ad62969700751567e" category="paragraph">` * SnapDrive config migrate set _old_entry new_entry_*`</block>
  <block id="73b1415dc6a246db321de62966fc399b" category="paragraph">支持的可配置项及其默认设置可能因主机操作系统和不同版本的 SnapDrive for UNIX 而异。例如，在 AIX 上，默认路径为 ` /var/log/` ……</block>
  <block id="d9c8a2681ad80cf1541c55b5e0b5f48a" category="paragraph">用于在有多个以太网接口时指定不想使用的接口，以缩短操作时间。如果配置有多个以太网接口，则 SnapDrive for UNIX 有时会搜索接口列表以确定接口是否可以 ping 。如果接口无法 ping ，则会先尝试五次，然后再检查下一个接口。因此，该操作需要额外的时间来执行。</block>
  <block id="7cdad89bdc1e6d5254edb4624d7c300f" category="paragraph">`audit-log-file="/var/log/sd-audit.log"`</block>
  <block id="28e77211af073e559eadd2a36ba32a07" category="paragraph">默认值取决于主机操作系统。此示例中显示的路径是 AIX 主机的默认路径。</block>
  <block id="5d6292a13da0d6b1356439a39f9f69a6" category="paragraph">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。主机需要进行此准备。</block>
  <block id="85255d77fc89709b0f0d6eb5f9e9a384" category="list-text">`on` - SnapDrive for UNIX 将检查二级主机卷上的适当导出权限。默认值为 on 。</block>
  <block id="bf33672c5a95a1504b63323784bf006c" category="paragraph">如果将此值设置为 off ，则可以在集群模式 Data ONTAP 中使用二级保护。</block>
  <block id="38588642e71400e8cfe9cab7c34c9b8f" category="paragraph">如果将此选项更改为 onSnapDrive for UNIX ，则不会提示您确认 ` 强制` 请求的操作。</block>
  <block id="5cc395cb6f4826fe02de4b13fff05ac9" category="paragraph">在 AIX 主机上，确保 `multipathing-type` 选项设置正确。如果指定 FCP ，则必须将 `multipathing-type` 设置为以下值之一：</block>
  <block id="1ef3ddbb8585b101a06629c06d18bf31" category="admonition">此变量仅适用于需要进行主机准备的系统，然后才能为需要进行准备的主机创建 LUN 。此变量仅用于包含 LUN 的配置。</block>
  <block id="768fa59747bf6994b5b7118d46fc02f1" category="paragraph">`enable-mountguard — support`</block>
  <block id="653855e762a36015becdb630555bd25a" category="paragraph">启用 SnapDrive for UNIX 对 AIX 的挂载防护功能的支持，以防止同时挂载或并发挂载。如果在一个节点上挂载了文件系统并启用了变量，则 AIX 会阻止在另一个节点上挂载同一文件系统。默认情况下， ` _enable-mountGuard 支持 _` 变量设置为 `off` 。</block>
  <block id="7d53101d2fe4a22f2afc0cc2cafbfb96" category="paragraph">如果在部署了 SnapDrive for UNIX 的主机和存储系统网络之间禁用了 ICMP 协议访问或丢弃了 ICMP 数据包，则必须将此变量设置为 `off` ，以便 SnapDrive for UNIX 不会通过 ping 命令来检查存储系统是否可访问。如果将此变量设置为 on ，则由于 ping 失败， SnapDrive snap 连接操作将不起作用。默认情况下，此变量设置为 `on`</block>
  <block id="3bfb817f0f65bf30470eb329a37c96c3" category="paragraph">将此变量设置为 `on` ，以便 SnapDrive 守护进程强制 TLSv1 与客户端进行通信。</block>
  <block id="f8ba60de7557e1ddac7ad1664a49edc9" category="paragraph">`fsttype=JFS2`</block>
  <block id="f7174925f60fc1a954a3bd8c35fcdb95" category="paragraph">AIX ： `jfs` ， `jfs3` 或 `VxFS`</block>
  <block id="a431b49ef0a59ce6a43543b00ada1d69" category="paragraph">默认值为 `JFS2` 。</block>
  <block id="cf7437bd04c7df3eb1bd5b0404ea12a4" category="admonition">JFS 文件系统类型仅支持 Snapshot 操作，而不支持存储操作。</block>
  <block id="10950aa17d6b0bf0d92468bd3a6f4897" category="paragraph">`m多路径类型 = NativeMPIO`</block>
  <block id="8aaf30d92741d4bb0c1848762266911a" category="paragraph">您可以为此变量设置以下值：</block>
  <block id="dc630248c5e46b9c02a26b7a605b9dd3" category="paragraph">AIX ：您为 AIX 设置的值取决于您使用的协议。</block>
  <block id="cd4a729ddc9ba7927b25e76185249272" category="list-text">如果使用的是 FCP ，请将其设置为以下任一值：</block>
  <block id="126f3ab431b50a28533cabcea7cde20f" category="list-text">NativeMPIO 的默认值为 `none` 。</block>
  <block id="935cdf0e4a97cbbced593a543f7c06ea" category="list-text">此外，将 `default-transport` 选项设置为 fcp 。</block>
  <block id="ce401d890dcf046cfacd65838cdc2dcd" category="list-text">如果使用的是 iSCSI ，请将此值设置为 `none` 。此外，将 ` default-transport_` 选项设置为 `iscsi` 。</block>
  <block id="e70bb471483aa55541fc10153ddffc83" category="paragraph">默认值可能因操作系统而异。此路径是的默认路径</block>
  <block id="afd1bb8b0328710c7094950d0d77eda4" category="paragraph">AIX 主机不使用此变量，因为它们以不同方式处理命令。</block>
  <block id="c61a7ff286d0ab3465bc5ad63192f3da" category="admonition">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。此变量仅用于包含 LUN 的配置。主机需要进行这种准备。</block>
  <block id="af168e0ae5cd99e018bd595290d72fac" category="paragraph">您可以将变量的值设置为 `on` 以启用缓存，也可以设置为 `off` 以禁用缓存。默认值为 off ，用于将 SnapDrive for UNIX 配置为使用 Operations Manager ，并将 ` _rbac 方法 _` 配置变量设置为 `dFM` 。</block>
  <block id="77900ee5eb9bd5dc89fa8bee98a45661" category="paragraph">默认值取决于主机操作系统。此示例中显示的路径是 AIX 主机的默认路径。</block>
  <block id="150323e30b20d2547b23508f1ccd43eb" category="list-text">`on` - SnapDrive for UNIX 会检查在 SnapDrive snap create` 命令中指定的 NFS 实体是否存在于文件系统挂载表中。如果 NFS 实体未通过文件系统挂载表持久挂载，则 Snapshot 创建操作将失败。这是默认值。</block>
  <block id="c17bcdc106f730dea5531a2153002007" category="paragraph">如果 LUN 仍为 snapped 且位于 qtree 上，则 SnapDrive for UNIX 始终会尝试在 qtree 的根目录下写入 snapinfo 。如果将此变量设置为 `on` ，则 SnapDrive for UNIX 将在无法写入此数据时失败 Snapshot 创建操作。只有在使用 qtree SnapMirror 复制 Snapshot 副本时，才应将此变量设置为 on 。</block>
  <block id="a1a6d7303e14ba59303a812b7aa63249" category="paragraph">将此值设置为 `on` 可删除与 Snapshot 副本相关的所有回滚 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` 。</block>
  <block id="1812683cfe72ca136ed0711bd521aecb" category="paragraph">将此变量设置为 `on` 可还原跨多个存储系统或（镜像）目标存储系统上的卷的 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` 。</block>
  <block id="c2e90ec5a66d8a7823dc6fb19f26d470" category="paragraph">如果您不希望在还原时回滚 Snapshot 副本提供额外的安全性，请将此选项设置为 `off` 。如果您希望回滚，但如果无法执行回滚，则无法使 Snapshot 还原操作失败，请将变量 `snaprestore-mode-makerollback` 设置为 `off` 。</block>
  <block id="9119cf5b9c064f61e5a394315c035a2b" category="paragraph">如果此配置变量的值为 `on` ，而 SnapMirror 关系状态为 `broken-off` ，则还原仍可继续。</block>
  <block id="c545fc38136bec3c9b2ba7badf86e098" category="paragraph">SnapDrive for UNIX 可创建 LUN ，调整存储大小，创建 Snapshot 副本，并根据此变量中指定的空间预留权限或由 ` -reserve` 或 ` -noreserve` 命令行选项指定的空间预留权限连接或还原 Snapshot 副本。在执行上述任务之前，它不会考虑存储系统端精简配置选项。</block>
  <block id="8dee5ad8945e98a6c787ae0bd2481ae5" category="paragraph">此示例中显示的路径是 AIX 主机的默认路径。</block>
  <block id="7b3159f04c44eaf6658d08489b9a64d8" category="list-text">AIX ： `vxVM` 或 `lvm`</block>
  <block id="01896400bb613cef42072cfd769b15c7" category="paragraph">默认值为 `lvm`</block>
  <block id="37e779f2e8dadb47cc45fa1c5854975e" category="summary">SnapDrive for UNIX 支持多路径。SnapDrive for UNIX 不支持对使用 mnod 和 / 或 rendev 命令创建的设备使用别名。</block>
  <block id="571b128e1371abc6537242e1e2b7f7c5" category="doc">SnapDrive for UNIX 中的多路径</block>
  <block id="ffd144d6b517b16882d2fb7fdd5d4d85" category="paragraph">SnapDrive for UNIX 支持多路径。SnapDrive for UNIX 不支持对使用 `m节` 和 / 或 `rendev` 命令创建的设备使用别名。</block>
  <block id="217235102267f7a7225d5fa65a617040" category="summary">在光纤通道或 Internet 小型计算机系统接口 \ （ iSCSI\ ）环境中使用 Data ONTAP 时，应将存储系统上的快照预留选项重置为 0% ，以便进行卷优化。</block>
  <block id="d7a2f76390326db21d0e3f4a13ba4472" category="doc">在存储系统上重置 snap reserve 选项</block>
  <block id="d45c76b0d87097bc823426f92a8ef943" category="paragraph">在光纤通道或互联网小型计算机系统接口（ iSCSI ）环境中使用 Data ONTAP 时，应将存储系统上的 `snap reserve` 选项重置为零，以实现卷优化。</block>
  <block id="d9c50bbc87ce99d4753b9d23a370905b" category="list-text">通过从主机或存储系统控制台运行 `telnet` 命令来访问存储系统。</block>
  <block id="b0085ee83d5d6e75dbc7a78ac0928325" category="paragraph">` * snap reserve _vol_name 0_*`</block>
  <block id="c862e821737dc8936e87e3b73fa7e013" category="paragraph">` vol_name_` 是要设置 `snap reserve` 选项的卷的名称。</block>
  <block id="6064a375666a143a04f5bdd04d8bb6cb" category="paragraph"><block ref="6064a375666a143a04f5bdd04d8bb6cb" category="inline-xref-macro-rx"></block></block>
  <block id="6a4e7b6f23e33db2d2c77700091f60ed" category="paragraph"><block ref="6a4e7b6f23e33db2d2c77700091f60ed" category="inline-xref-macro-rx"></block></block>
  <block id="4630e22a0fa6faa588664737cc718e38" category="paragraph"><block ref="4630e22a0fa6faa588664737cc718e38" category="inline-xref-macro-rx"></block></block>
  <block id="2b7caab36f829cf83d79214b5e599180" category="paragraph"><block ref="2b7caab36f829cf83d79214b5e599180" category="inline-xref-macro-rx"></block></block>
  <block id="4175f44ec2e3e0ebe4110bc03e9ee71c" category="paragraph"><block ref="4175f44ec2e3e0ebe4110bc03e9ee71c" category="inline-link-rx"></block></block>
  <block id="844e4b6d84052245aec4124340dc06a8" category="list-text">如果一个磁盘组中有两个 JFS 文件系统（ JFS 和 JFS2 ），则 SnapDrive for UNIX 仅支持对 JFS2 文件系统执行操作。</block>
  <block id="3e0852f51db1492bcfe5a0454c2dbd72" category="list-text">通过 SnapDrive for UNIX ，您可以创建并发卷组的 Snapshot 副本，以及使用相同属性克隆或还原。</block>
  <block id="d5e1ae248d7a379d7b9c5151e7d094b0" category="paragraph">必须在经过一段时间后重试此操作。有关详细信息，请参见 <block ref="09960d5ca6faf051a981a5e15d0aa5f8" category="inline-link-macro-rx"></block>。</block>
  <block id="d5b4cafe669b522d28889852398058d2" category="summary">在具有 FC 和 DMP 配置的主机上， SnapDrive storage delete - lun 命令可能会挂起。</block>
  <block id="6178168a44f9d323c3be35a757558f65" category="doc">刷新 DMP 路径的原因</block>
  <block id="5c105873c45670b9c0f3c2de1addd584" category="paragraph">在具有 FC 和 DMP 配置的主机上， SnapDrive storage delete - lun` 命令可能会挂起。</block>
  <block id="073d61e1ffeacca58c35694851ec1c00" category="paragraph">命令可能会因以下组件安装或配置不当而挂起：</block>
  <block id="3171c3d90ab34ada849a6af98fd20322" category="list-text">NTAPI</block>
  <block id="57794b20145d400ef33197c001a8b55b" category="list-text">Veritas 堆栈（存储基础）</block>
  <block id="a8785179c4ce154227a3e44f19364afc" category="list-text">多路径许可证</block>
  <block id="7dba0e9adeb9c6b6ef8c48af12c6b8a8" category="paragraph">启用，禁用或添加任何 FC 路径后，您必须正确刷新 DMP 路径信息。要刷新 DMP 路径，请按顺序执行以下命令，如下所示。</block>
  <block id="b86f7ac7010a768aee36fc0e592eceed" category="cell">* 平台 *</block>
  <block id="a5a7c10af9ced01d0bffa3240d13330f" category="cell">* 命令 *</block>
  <block id="fa879389d54ac101033653db5bc1bb8d" category="list-text">`cfgmg`</block>
  <block id="0d6f14fe7a14f721bba56dcde773a366" category="list-text">`vxdisk scandisk`</block>
  <block id="b9e15f4e23e3ff8cc78a25cf0113f857" category="list-text">如果您指定的 Snapshot 副本包含 LUN （` -lun` ），则 SnapDrive for UNIX 会将 LUN 的新副本映射到主机。您不能使用 SnapDrive snap connect` 命令在与其他存储实体（` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` - hostvol` ）相同的命令行上指定 LUN 。</block>
  <block id="36e0a0b87c418f22bb36f0d9d798af8d" category="list-text">如果使用 ` readonly` 选项连接包含 NFS 目录树的 Snapshot 副本，则 SnapDrive for UNIX 将直接挂载该目录的 Snapshot 副本，而不创建克隆。您不能使用 SnapDrive snap connect` 命令在与非 NFS 实体相同的命令行上指定 NFS 挂载点，即使用选项 ` -vg` ， ` -DG` ， ` -FS` ， ` -lvol` 或 ` - hostvol` 。</block>
  <block id="cbc712f1790bee59db69e07bbd1a5ea0" category="paragraph">` * SnapDrive storage disconnect ｛ -dg | -fs | -hostvol ｝ _file_spec_ [_file_spec_...] [ ｛ -dg | -fs | -hostvol ｝ _file_spec_ [_file_spec_...] …… ] 【 -full】 【 -fstype _type_】 【 -vmtype _type_】 *`</block>
  <block id="8f8e9e1e42f614c9f0a714b67a97eec1" category="list-text">如果使用 ` -lun` 选项列出不同存储系统卷中的 LUN ，则不能在命令提示符处包含 ` -dg` ， ` -hostvol` 或 ` -fs` 选项。</block>
  <block id="fcb7c7c99de72ff33a7a65a29057cf92" category="paragraph">` * SnapDrive 克隆拆分结果（ -lun] _lun_name_ [_lon_lun_name_...] _[ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ file_spec&lt; 文件 _规范 ...]] 我们提供了一个或` 一个或一个或一个或一个或一个或一个或一个或两个</block>
  <block id="0b5ee828a0d2ca850b7dfa59082b403a" category="paragraph">SnapDrive 4.0 for UNIX 引入了 SnapDrive for UNIX 守护进程服务。要运行 SnapDrive for UNIX 命令，必须运行守护进程。必须对每个命令执行守护进程跟踪，即使命令并行运行也是如此。日志文件的位置和名称是 ` /var/log/sd-trace.log` 。这些跟踪文件只有命令专用的跟踪条目。用于执行守护进程的跟踪日志记录在另一个跟踪文件 ` /var/log/sd-daemon-trace.log` 中。</block>
  <block id="0dac19c7c53ad2a450c12db0e5598fb7" category="paragraph">在 HA 对主动 / 主动配置中，确保为两个存储系统设置 NFS 导出选项。</block>
  <block id="35e250bb1830643e04b982d6aebd14f8" category="summary">在设置存储系统之前，您必须考虑其要求。</block>
  <block id="01daf2e1aa68b244ac348f9c567ca493" category="doc">存储系统的要求</block>
  <block id="2cb05e4bb7830be982f0922fed86b4cd" category="cell">组件</block>
  <block id="47fb2ebe9040c03bb0d18ee05e0c3d87" category="paragraph">Data ONTAP 7.3.5 或更高版本。</block>
  <block id="891e44eb282cd0cfeefa182b483ba7bc" category="list-text">SnapDrive for UNIX 支持 FlexVol 卷，但不使用所有 FlexVol 卷功能。</block>
  <block id="34c51c8d066ba9f18ec360336cc038a5" category="list-text">使用 NFS 的配置必须使用 Data ONTAP 7.3.5 或更高版本，而 FlexVol 卷必须使用 SnapDrive snap connect` 来读写连接的 NFS 文件或目录树。</block>
  <block id="66d9bece29ccbbe20fb333a524788f58" category="paragraph">使用传统卷的配置可以对 NFS 文件和目录树进行只读访问。</block>
  <block id="d7629a98c5ec636d5d7d94762aa6d54d" category="paragraph">存储系统设置</block>
  <block id="7c78bb150916db2f6beeddb105813178" category="paragraph">您必须指定 HA 对中的配对 IP 地址，以便在发生存储系统故障转移时使用。</block>
  <block id="cbbc964c897aab171044f4c1b92485a0" category="admonition">您可以在存储系统上运行设置程序时指定 IP 地址。</block>
  <block id="f6aca2dcfee051b254bbcb878dc70d09" category="paragraph">licenses</block>
  <block id="9bd5c66fda4263352a285d9e8a321aad" category="list-text">FC ， iSCSI 或 NFS ，具体取决于主机平台</block>
  <block id="5afd10f5bdaa34b6b65c5633ebf7a18c" category="list-text">FlexClone 许可证</block>
  <block id="88d0bc27a70ead6e2550735a8d856b5f" category="admonition">要执行 SnapDrive for UNIX ，存储系统上必须运行相应的协议。</block>
  <block id="52ed07218d1e2242bda35dd783a6b304" category="list-text">SnapRestore 软件</block>
  <block id="f5880cdec530bb4d3fab4402de781335" category="paragraph">您应在设置存储系统时设置 SnapRestore 和 MultiStore 许可证。如果要设置 vFiler 环境，您需要 MultiStore 许可证。</block>
  <block id="cea3549c6318dffc509c2f670a2e4c13" category="list-text">对存储系统的安全 HTTP 访问。</block>
  <block id="bd3e303a1fe8117a79efc3cc91c28e8f" category="paragraph">SnapDrive for UNIX 操作对于存储系统主机名不区分大小写，您必须确保在配置存储系统时 IP 地址是唯一的。</block>
  <block id="f1c3fd920c9545936af3750707df7899" category="admonition">有关最新的 SnapDrive 要求，请参见互操作性表。</block>
  <block id="8afbc5d79279d7ccaebc6e140ac12a1a" category="paragraph">` * SnapDrive snap connect _fspec_set_ [_fspec_set_...] -snapname _long_snap_name_*`</block>
  <block id="1492bb63ff5b1ae83f0b03810e8e6463" category="paragraph">` * _fspec_set_ [_fspec_set_...] -snapname _long_snap_name_ [-DeviceType shared] [-sparate]*`</block>
  <block id="35470c823ea993e2d3d9e69e1c4ea59f" category="paragraph">在此语法中， ` fspec_set_ 为： ` ｛ -dg _ -fs ｝ _src_file_spec_ [_dest_file_spec_ ] [-destdg _dgname_]`</block>
  <block id="ec3ab129b672f4f1c70435695c59fe00" category="paragraph">您无法执行 SnapDrive for UNIX 命令，因为 SnapDrive for UNIX 不接受通过命令 Shell 设置的环境变量，并且当 ` * $LD_library_path*` 和 ` * snapcreate-check-nonpersistent-nfs*` 参数设置为 `off` 时。</block>
  <block id="a14667ca1aa56da4871f42aae4ecae4a" category="paragraph">` * SnapDrive storage create -fs _file_spec_ -nolvm "-fstype _type_] （ -vmtype _type_] ）（ -fsopts _options_） （ -mntopts _options_） （ -noperess） -lun _long_lun_name_ -lunsize _size ig_name_ （ _ig_name_ ）（ _norig_name_reserve ）`</block>
  <block id="24c0c197f87ac6ad5ffc983ca6b434c9" category="paragraph">* 示例： * 此示例将在原始 LUN 上的 AIX 主机上创建一个 JFS2 文件系统： ` # SnapDrive storage create -fs /mnt/jfs1 -fstype JFS2 -lun snoop ： /vol/vol1/lunlvm1 -lunsize 100m -nolvm`</block>
  <block id="b4a3258601691089b8a17c6ba346e0ff" category="summary">您可以在存储系统上使用命令提示符，也可以使用 FilerView 选项创建存储系统卷以专用于 SnapDrive for UNIX 。</block>
  <block id="f11e8844a84febc268f0ea1c846d4c7b" category="doc">存储系统卷准备</block>
  <block id="313cb924972056913347f02908f432f1" category="paragraph">您必须在存储系统上完成以下任务，才能创建一个卷，该卷可容纳连接到单个主机的 SnapDrive for UNIX 逻辑单元号（ LUN ）或网络文件系统（ NFS ）实体：</block>
  <block id="e4391ccd5200d3a86ca3d1ac1de08cba" category="list-text">创建存储系统卷。</block>
  <block id="202db8c0381012534cb872151a7d8c44" category="list-text">如果您使用的是光纤通道或 Internet 小型计算机系统接口（ iSCSI ）环境，请将存储系统卷上的 SnapDrive snap reserve` 选项重置为 0% ，以优化卷。</block>
  <block id="35fa10af61ebf94a001521d3e307b94b" category="paragraph">在存储系统上创建卷以存放 LUN 或 NFS 目录树时，应注意以下事项：</block>
  <block id="4810f93db9e15a7cacf4d504b3a672eb" category="list-text">您可以在一个存储系统卷上创建多个 LUN 或 NFS 目录树。</block>
  <block id="024f3416d20d400caae9a6353ebec912" category="list-text">不应将用户数据存储在存储系统或 vFiler 单元上的根卷中。</block>
  <block id="317cc66bdad307e3f5a71cd3dcd8cd7d" category="paragraph">` * SnapDrive snap show （ -snapname] _long_snap_name_ [_snap_name_...] 【 -verbose 】 *`</block>
  <block id="ce04594ba8171127e1b8d7d97d556377" category="paragraph">* 示例 * ：在此示例中， AIX 主机的命令行使用了 ` -verbose` 选项：</block>
  <block id="a26d919bccb8832548e48e4936639776" category="paragraph">* 示例 * ：此示例包含有关 AIX 主机上未使用 SnapDrive for UNIX 创建的 Snapshot 副本的消息：</block>
  <block id="0393e15ec3c01283b68b2ba53d4c7692" category="paragraph">此示例使用 SnapDrive snap show` 命令和 ` - verbose` 选项显示 AIX 主机上基于 LVM 的文件系统的 Snapshot 副本：</block>
  <block id="b0725e5a577738fafadbc06f49e49760" category="paragraph">` * config-option-name= 值 _value_ # 可选注释 *`</block>
  <block id="6f721a859ccaba774aa22f7d7a92e364" category="paragraph">` *"config-option-one=string with white space" # 双引号 *`</block>
  <block id="cffe924f7b60ffcdb7f50e6a760cbdd5" category="paragraph">` * config-option-2b=`'tring with white space` ' # single quito*`</block>
  <block id="9f7274082e624e2475ff45de7f9974b9" category="summary">虽然光纤通道协议（ FCP ）和 Internet 小型计算机系统接口（ iSCSI ）曾经作为单独的实用程序分发，但您可以在 Solaris Host Utilities 中找到 FCP 和 iSCSI 配置支持。</block>
  <block id="17b36d923ca6e471b1599bb116b68ec8" category="paragraph">虽然光纤通道协议（ FCP ）和 Internet 小型计算机系统接口（ iSCSI ）曾作为单独的实用程序进行分发，但您可以在 Solaris Host Utilities 中找到 FCP 和 iSCSI 配置支持。</block>
  <block id="d6e62967f579cdfdb79a9b78e66ee7fc" category="list-text">确保已在主机系统上安装 Solaris Host Utilities 。</block>
  <block id="edf944785f58b98d2914ae5592738b79" category="paragraph">要使用此主机，请按照存储系统的主机实用程序随附的文档中的说明进行操作。包含多路径或卷管理器软件的配置必须使用 Solaris Host Utilities 和 SnapDrive for UNIX 支持的软件。</block>
  <block id="3d40081dba9c489d7337643918475668" category="paragraph">` * SnapDrive snap disconnect -lun _long_lun_name_ [_lun_name ..._] （ -DeviceType ｛ shared _ dedicated ｝ ） ] （ -split ） *`</block>
  <block id="4db82a78cbfd2dd9e3ad1b38016c7dbb" category="list-text">` /opt/NTAPsnapdrive/diag/SnapDrive.dc`</block>
  <block id="4184a86aee360d15aeaa37f96f4254b4" category="list-text">` /opt/NTAPsnapdrive/diag/solaris` …</block>
  <block id="d5e0ed6948ececa27ce50c138eb1aae4" category="list-text">` /opt/NTAPsnapdrive/diag/filer_info`</block>
  <block id="43379bcd29897344c31af42ba6bd24c8" category="list-text">` /opt/NTAPsnapdrive/diag/Brocade_info`</block>
  <block id="27c2e14b208fcc3d15a68732958b95eb" category="list-text">` /opt/NTAPsnapdrive/diag/Cisco_info`</block>
  <block id="108e7a94b497fe529453ed77895bff89" category="list-text">` /opt/NTAPsnapdrive/diag/McData 信息`</block>
  <block id="7bf6865a2bd7ef74f9e7e9001fa9a3fa" category="list-text">` /opt/NTAPsnapdrive/diag/SHsupport.pm`</block>
  <block id="7de41e37c5e6663f9a708e63e3cca0d5" category="list-text">` /opt/NTAPsnapdrive/diag/Telnet.pm`</block>
  <block id="7271f22f9b5e34c8a3dd912af3d652c8" category="paragraph">主机卷（` -hostvol file_specs` ）或逻辑卷（` -lvol file_specs` ）</block>
  <block id="b552751cf54a866d0b83712e6e41e466" category="admonition">您必须同时提供请求的卷及其所在的磁盘组；例如 -hostvol dg3/Acct_volume 。</block>
  <block id="13a559140c9731936d2abb7efef84cc8" category="paragraph">` 设备类型`</block>
  <block id="5e4a7947c65dd5215162dea2f0b88837" category="paragraph">可选：指定用于 SnapDrive for UNIX 操作的设备类型。这可以是将 LUN ，磁盘组和文件系统的范围指定为集群范围的主机的 " `s共享` " ，也可以是 `d将 LUN ，磁盘组和文件系统的范围指定为本地的 " 已创建` " 。</block>
  <block id="526f4256422296035895bdec45ea0e35" category="paragraph">如果指定了 ` -DeviceType dedicated` 选项，则 SnapDrive 2.1 for UNIX 中当前支持的所有 SnapDrive snap create` 命令选项将一如既往地正常运行。</block>
  <block id="17bbe63db7b8fecccda6572852753d63" category="paragraph">如果使用 ` -DeviceType shared` 选项从主机集群中的任何非主节点启动 SnapDrive snap create` 命令，则该命令将发送到主节点并执行。为此，您必须确保为主机集群中的所有节点配置 root 用户的 `rsh` 或 `ssh` access-without 密码提示符。</block>
  <block id="ed9a80e37931aa97f5f2eeb416286844" category="summary">SnapDrive for UNIX 使用卸载文件删除 SnapDrive for UNIX 。</block>
  <block id="4d7b91c04399afc002da60d41fd33da1" category="doc">卸载 SnapDrive for UNIX 安装的文件</block>
  <block id="98ddf5a9a5a19bf927da28462e250e6d" category="paragraph">这些文件安装在以下位置：</block>
  <block id="d8301f92202b7619860d06403ad2539a" category="paragraph">` /opt/NTAPsnapdrive/SnapDrive.conf`</block>
  <block id="f9404d9a2b5921760b712275bcf12da6" category="paragraph">` * SnapDrive snap create ｛ -lun _ -dg _ -fs _ -hostvol ｝ _file_spec_[_file_spec_ ...] [ ｛ -lun |-dg | -fs | -hostvol ｝ _file_spec_ [_file_spec_...]] -snapname _snap_name_ [ -force [-noprompt]]-unrelated ] [-nodfilerfencet] [-fstype _type_][-vmtype _type_]*`</block>
  <block id="538ace3e2d98bf7018080e086304f0dd" category="paragraph">您可以将此值设置为 `on` 来启用缓存，也可以将其设置为 `off` 来禁用。默认值为 `off` ，因此您可以将 SnapDrive for UNIX 配置为使用 Operations Manager 控制台，并将 `rbac 方法` 配置变量设置为 `dfm` 。</block>
  <block id="70990d85d6bbd270d32dd5fbd92b856f" category="paragraph">` * SnapDrive snap connect -lun _s_lun_name d_lun_name_ [-lun] _s_lun_name d_lun_name..._ -snapname _long_snap_snap_name_ [-igroup _ig_name_ [_ig_name..._]]]*`</block>
  <block id="7cf7a05f7e30549179073284c53f9f72" category="summary">您可以连接包含单个存储实体的 Snapshot 副本。</block>
  <block id="19deb0f008e638a2437964775e3b62b1" category="doc">连接存储系统或存储系统 HA 对上的单个存储实体</block>
  <block id="4df16636715935d9278a5510dc7a81a6" category="paragraph">您可以连接包含驻留在存储系统或存储系统 HA 对上的单个存储实体的 Snapshot 副本。目标存储系统上的卷名称必须与源存储系统上的卷名称匹配。</block>
  <block id="ebd2f5b4b15c2f7dd43b8b073c2314d4" category="paragraph">SnapDrive snap delete 命令可从存储系统中删除您指定的 Snapshot 副本。此命令不会对主机执行任何操作。只有当您有权从存储系统中删除 Snapshot 副本时，它才会删除此副本。（如果要保留 LUN 和映射。）</block>
  <block id="24dd477904fb410de49e06ce2c28ecfe" category="paragraph">通过 HTTPS 功能，您可以通过管理 ONTAP 界面为与存储系统的所有交互指定 SSL 加密，包括发送密码。这种行为是 SnapDrive 4.1 for UNIX 以及更高版本中适用于 Solaris 主机的默认行为；但是，您可以通过将 `use-https-to-filer` 配置变量的值更改为 off 来禁用 SSL 加密。</block>
  <block id="0cb6440937732216f8614bd8d9a2532c" category="paragraph">` * SnapDrive snap restore -snapname _snap_name_ ｛ -lun |-dg _-fs | - hostvol _-file ｝ _file_spec_ [_file_spec_...] [ ｛ -lun | -dg | -fs ； -hostvol ； -file ｝ _file_spec_ [_file_spec_ ...]...] 【 -force 】【 -mntopts _options_】 】【 ｛ -reserve ； -noreserve ｝ 】【 -DeviceType ｛ shared ： dedicated ｝ 】 *`</block>
  <block id="768cb6daf6cf645d143c128a72b759f0" category="paragraph">_filesSpec ： filesSpec 可以是文件系统，主机卷，磁盘组或 LUN_</block>
  <block id="eaf36c98b91893b7f79bd5184a23d377" category="paragraph">Solaris</block>
  <block id="0fb0159365dac844665e3eb7826a49de" category="paragraph">`etc/vfstab`</block>
  <block id="e76d0d88987fd5b20b773874e6e4679a" category="paragraph">` * SnapDrive 克隆拆分状态 "-LUN] _long_lun_name_ [_long_lun_name..._] （ ｛ -dg _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [file_spec...]]-job _&lt;jobid&gt;_] 【 -all]*`</block>
  <block id="a5da8d90ca5492994c587cf02fcfdb0b" category="summary">要验证 Veritas 堆栈配置，必须运行 SnapDrive storage connect 和 vxdisk list 命令。</block>
  <block id="129b271fad98af03877261314fdd759e" category="doc">验证 Veritas 堆栈配置</block>
  <block id="b2de9573da2d356bd8a0a36109679563" category="paragraph">要验证 Veritas 堆栈配置，必须运行 SnapDrive storage connect` 和 `vxdisk list` 命令。</block>
  <block id="a09cba4698f9c4a7ac8b551bd91b233d" category="paragraph">要验证 Veritas 堆栈配置，必须先确认已按以下顺序安装：</block>
  <block id="83d42f94cf00863ba1f0b95047624f6d" category="list-text">NTAPI 库</block>
  <block id="fc9c67d53e05dd8d4742a390600e0895" category="list-text">Veritas 许可证</block>
  <block id="348d6aa1c63c4e45f11d63f99743d87d" category="list-text">SnapDrive for UNIX 软件</block>
  <block id="e9d5a2da848a64684681eaf8d7b18086" category="paragraph">然后执行以下步骤：</block>
  <block id="e7820d78834ed820c1327bcaa1e071b9" category="list-text">输入以下命令以连接到操作系统特定的设备：</block>
  <block id="2149bb1f0378db3fbba4fb2fae84984f" category="paragraph">其中 lLong LUN 名称是 LUN 名称。</block>
  <block id="010ee8a919661a571c05bce8694b5434" category="list-text">输入以下命令以获取设备信息：</block>
  <block id="aa1ec54c8637577b9dc59077e70d1277" category="paragraph">` * vxdisk list*`</block>
  <block id="80d5e06f2f985533b8c77e31b3ee461e" category="paragraph">您可能会获得以下结果之一：</block>
  <block id="efc2b9b52255483f7fb52da3c965efc1" category="list-text">如果主机上的 Veritas 配置正确，则设备状态的预期输出为</block>
  <block id="2ce2feaccb98d1f12e87115e92843390" category="paragraph">`联机无效。`</block>
  <block id="4107aeade7a7a1210432c158a1a7f2cd" category="list-text">如果主机上的 Veritas 配置不正确，则设备状态的预期输出为</block>
  <block id="5b82c97a00a2591053e14b9878c2a0fb" category="paragraph">`错误。`</block>
  <block id="dbc726a96085bad55419351c5b9d423e" category="paragraph">如果在安装 Veritas 堆栈时未安装 NTAPasl 库，则会出现此错误消息。要更正此错误消息，您必须安装 NTAPasl 库并执行 `vxinstall` 命令以使 LUN 和磁盘组联机。</block>
  <block id="cdfd79e32ab8a821a843e89d91bdcd8d" category="list-text">MPxIO</block>
  <block id="389904b251e95d6c62704a006d3e3a86" category="summary">在 Solaris 平台上，您可以使用 VxVM 或 Solaris 卷管理器 \ （ SVM\ ）。SVM 作为 Solaris 操作系统的一部分捆绑在一起。</block>
  <block id="c934d63a8f2c2b6f2a22c537fb2f91b1" category="paragraph">在 Solaris 平台上，您可以使用 VxVM 或 Solaris Volume Manager （ SVM ）。SVM 作为 Solaris 操作系统的一部分捆绑在一起。</block>
  <block id="d260d279fa7f0a31d71a8f96e9ccd479" category="paragraph">磁盘组（ `dg`</block>
  <block id="0e1a8332dbe708b4c23b804db0c72122" category="paragraph">` dev/vx/dsk/DG/lvol`</block>
  <block id="939de9f3e24bbf06bc8c530772dda223" category="paragraph">` /dev/vx/dmp/15t0d2`</block>
  <block id="0b7e67b6cdcf0432b624d53588d520fb" category="paragraph">SVM</block>
  <block id="778ae0c9798491bbad2f181e4d614ff5" category="paragraph">` /dev/md/fs1_SdDg/dsk/vol0 fs1_SdDg` 是磁盘组， vol0 是逻辑卷名称</block>
  <block id="344b5de7d198c12297e16f269ae8cd7d" category="paragraph">` /dev/rdsk/c4t60A98000686F65 36526B3027776533502`</block>
  <block id="e6dcbe2a82bdc1660652a8d403121606" category="admonition">如果在未配置 DataFabric Manager 的情况下选择 DFM 作为 RBAC 方法，则会显示一条警告消息，指出在未启用 Protection Manager 集成的情况下选择 RBAC 方法作为 DFM 。</block>
  <block id="84af3149b65dbeeb6e3e7eaf0aa478e2" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器和文件系统的组合）。选项包括 `原生` 和 `none` 对于 Solaris SPARC ，选项包括 `原生` ， `veritas` 和 `none`</block>
  <block id="6f48e2667406fbfa5a1f5ef728157015" category="admonition">只有在传输协议为 FCP 且主机操作系统为 Solaris_x86 时，才会提示此配置 SMVI 的步骤。</block>
  <block id="f1e4ba8c96e1d995e0f0c3fab7ccda2e" category="list-text">选择 SAN 存储堆栈（ MPIO 解决方案，卷管理器，文件系统的组合）。选项包括 `原生` 和 `none` 。对于 Solaris SPARC ，选项包括 `原生` ， `veritas` 和 `none`</block>
  <block id="5a5e70b2b069f9693cb273335a2fbe43" category="list-text">` -contact-ssl-dfm_port_`</block>
  <block id="26582434ffb61af19da6ceca06f4dcd8" category="paragraph">有关为您的主机和所使用的存储系统建议配置的详细信息，请参见 Solaris Host Utilities 文档。</block>
  <block id="8ef0501c44e88228f6fdb2e59866115c" category="summary">要将新节点添加到主机集群，请按照适用于 Solaris 的 Veritas Cluster Server 安装指南中的说明进行操作。配置低延迟传输 \ （ LLT\ ）和全局原子广播 \ （ GAB\ ）后，您必须完成一些额外步骤。要确保主机集群设置正确，您应在使用任何 SnapDrive for UNIX 命令之前使用 SnapDrive config check cluster 选项。</block>
  <block id="b339b5027b05a5f4faec8c5c72c91af8" category="doc">将节点添加到主机集群</block>
  <block id="276505466740fea88f662d46a0876efb" category="paragraph">要将新节点添加到主机集群，请按照适用于 Solaris_ 的 _Veritas 集群服务器安装指南中的说明进行操作。配置低延迟传输（ LLT ）和全局原子广播（ GAB ）后，您必须完成一些额外步骤。要确保主机集群设置正确，您应在使用任何 SnapDrive for UNIX 命令之前使用 SnapDrive config check cluster` 选项。</block>
  <block id="9fb05206020480c3f160362ca1d19c35" category="list-text">使用以下命令映射主机集群中所有共享磁盘组的所有 LUN ：</block>
  <block id="b88a465a0583438099e56d3ef2570ddf" category="paragraph">` * SnapDrive 存储连接 *`</block>
  <block id="bbb3913a833508086e393ebb8198afa8" category="list-text">在新节点上启动集群卷管理器（ Cluster Volume Manager ， CVM ）。</block>
  <block id="a3c516830bd2c161d3809dce2fce58aa" category="paragraph">有关说明，请参见 _Veritas Cluster Server Installation Guide for Solaris_ 。</block>
  <block id="7985c6c45c654b5c084caf573455d610" category="paragraph">共享磁盘组和文件系统可以自动显示在新节点上。</block>
  <block id="1326d1703640783ebd54fec458416969" category="summary">如果您的配置需要 Solaris Host Utilities ，则必须安装它们并确保系统设置正确。</block>
  <block id="ad13fbfcd593d66a0a805929eb221e19" category="doc">安装 Solaris Host Utilities</block>
  <block id="3e07f1e362e7128607f77ddd1e3c6ec6" category="paragraph">您应使用 Solaris Host Utilities 附带的文档。其中包含有关卷管理器，多路径以及在安装 SnapDrive for UNIX 之前必须设置的其他功能的信息。</block>
  <block id="c36abe249501029bafbd3f871d7f3475" category="list-text">在主机上安装 Veritas 堆栈之前，请先安装 NTAPasl 库。</block>
  <block id="3e4582c29b4d05f5c1d324e19ddb7bc9" category="admonition">如果您在安装 Veritas 堆栈时未安装 NTAPasl 库，则应安装 NTAPasl 库并执行 `vxinstall` 命令以使 LUN 和磁盘组联机。</block>
  <block id="39a92d1cef2b6841c3c1931b03d1cd3a" category="inline-link">《 Solaris Host Utilities 6.1 安装和设置指南》</block>
  <block id="77cfa9ed88e20d1f0dcbc6751d2c2ae9" category="paragraph"><block ref="77cfa9ed88e20d1f0dcbc6751d2c2ae9" category="inline-link-rx"></block></block>
  <block id="854b0778910fc26ab8909591a82fa5fe" category="paragraph">` * SnapDrive snap connect -snapname fspec_set [_fspec_set..._] -snapname _lor_snap_name_ "-igroup _ig_name_ [_ig_name..._]] （ -AutoExpand] （ -autumename] ）【 ｛ -reserve | -noreserve ｝ 】（仅限 readsparate* ）`</block>
  <block id="21e362efbc2e0c9d5ac7142c163f4761" category="paragraph">` * ｛ -dg _ -fs _ -hostvol ｝ _src_file_spec_ _dest_file_spec] （ ｛ -destdg _ -destvg ｝ _dgname_] （ ｛ -destlv _ -desthv ｝ lvname） *`</block>
  <block id="44e9aff39e699efbdf28ac6877abcf0e" category="paragraph">以下命令行包含 ` -AutoExpand` 选项，因为它会将磁盘组连接到两个文件系统。它使用默认名称作为目标名称（即，从源名称创建目标名称）：</block>
  <block id="42a57b29cc3d0dc7bee45f97d2fe68a6" category="paragraph">以下命令行包含 -autorename 选项，因为它会将一个磁盘组连接到两个文件系统和两个 LUN ：</block>
  <block id="d4e4d7b23b728ed6dcf6c6f83425ed76" category="paragraph">以下示例将连接到文件系统 Snapshot 副本，即在 Veritas 堆栈上创建的磁盘组：</block>
  <block id="7d8290d202a21df6ab42ba955dbf3290" category="paragraph">以下命令指定一个同时包含文件系统 ` /mnt/fs1 和磁盘组 dg1 的 Snapshot 副本： SnapDrive snap create -fs /mnt/fs1 -dg dg1 -snapname fs1_dg1`</block>
  <block id="ae890d74b08ee5dd69adbc8c74ec2fe9" category="summary">在系统上安装 SnapDrive for UNIX 之前，您必须准备主机。在主机准备过程中，您必须安装 Solaris Host Utilities 。</block>
  <block id="cf465f5620661384524417a225aa9336" category="summary">如果存在自定义的 LD_library_path 以及 snapcreate-check-nonpersistent-nfs 设置为 off ，则 SnapDrive for UNIX 命令将失败。</block>
  <block id="0d951c5d22b97ae660a4c112ec6f0179" category="paragraph">在 wrapper 脚本中设置 env 变量，以确保此变量仅对 SnapDrive 二进制文件可见。</block>
  <block id="289d4a224c51f2aeb418b081093d4d1e" category="list-text">Solaris Host Utilities</block>
  <block id="45d1eebc90b8bf0644df951f07bf73e9" category="list-text">如果协议为 iSCSI ，则仅使用 Solaris iSCSI Host Utility 即可满足要求</block>
  <block id="9ac357cade3391d14a94b4f37322c402" category="paragraph">Solaris x86</block>
  <block id="ebd906766de13bce813468fc99a93b4b" category="paragraph">UFS</block>
  <block id="924ff83ff1e671bacfb07ff12b845703" category="paragraph">Svm</block>
  <block id="1acdaaa19b8cb41ef27b68027366afcf" category="paragraph">MPxIO</block>
  <block id="62a52eb157ffa4a30cd3bcd2bb8d29d5" category="paragraph">Solaris SPARC</block>
  <block id="9da95752c84731076ebaf4aa3bc384d9" category="list-text">已安装适用于 Solaris 的主机操作系统和相应修补程序。</block>
  <block id="d0e3651bbfb4a67d61eaba518f5b2bdf" category="list-text">适用于 Solaris 的卷管理器为 VxVM 和 Solaris Volume Manager （ SVM ）。</block>
  <block id="7841769cb4ec112e62fb01c2c09b7a43" category="paragraph">您必须单独安装 VxVM ； SVM 随 Solaris 操作系统提供。</block>
  <block id="f3d1ac6f098aca08550565b48c887fa6" category="list-text">Host Utilities 安装在 Solaris 中</block>
  <block id="86783373b601fde38e333e2e5a682032" category="list-text">禁止节点在主机集群环境中使用共享磁盘组或文件系统。</block>
  <block id="1a14a4708ab148d206964e5cf17a338c" category="list-text">如果 SnapDrive snap create` 命令突然中止，则存储系统上的卷会存储一个不完整的 ` .stoc.xml` 文件。因此，存储系统创建的所有计划 Snapshot 副本都将具有一个不完整的 .stoc.xml 文件副本。要使 SnapDrive snap list` 命令成功运行，请完成以下步骤：</block>
  <block id="5913c83dbb9b4546193b0584eadbd3fd" category="paragraph">使用格式 SnapDrive type_name operation_name &lt;&lt; keyword/option&gt; &lt;switches&gt;&gt;` ；例如，如果要从主机文件系统 ` /mnt/dir` 创建名为 ` snap_hr_` 的 Snapshot 副本，则应输入以下命令行：</block>
  <block id="1f42303b710b1e6d312ce184cf5ca694" category="paragraph">` * SnapDrive snap create -fs/mnt/dir -snapnamesnap_hr*` 。</block>
  <block id="2e0aa6adf04915c6307ffed5d08f5b6c" category="paragraph">` -hostvol dg1/hv1 dg1/hv2`</block>
  <block id="27e3a6e9341a86bd5af1b6067fdbfab2" category="paragraph">` -fs /fs1 /fs2`</block>
  <block id="7926d577a621fb6f9be18de3e6ff8315" category="paragraph">` -hostvol dg1/HV1 -fs /fs2`</block>
  <block id="dfb2ffa115925bfbb4fc0cee985c5b2b" category="paragraph">要创建文件系统，请使用以下格式： ` -fs file_spec. "-fstype _type_] （ -ffsopts _options_） "-hostvol _file_spec_] （ -dg _dg_name_）` 要创建逻辑卷或主机卷，请使用以下格式： ` _dg （ -hostvol _file_spec_` ``</block>
  <block id="5aca4134725a6c1cb9d78e06e7c8c4ea" category="paragraph">如果指定 SnapDrive for UNIX 创建文件系统，则必须指定 SnapDrive for UNIX 在主机 LVM 中支持的类型。这些类型包括 `VxFS` 或 `UFS` 。</block>
  <block id="881283586b91abe08e1ce2fff4a2d900" category="paragraph">示例：此示例将通配符与 snap show 命令和 snap delete 命令结合使用： snap show myfiler ： /vol/vol2 ： mysnap*</block>
  <block id="4a7136fbf63b9df1a4cbefd70a2faac9" category="paragraph">通配符限制：不能在 Snapshot 副本名称中间输入通配符。例如，以下命令行会生成一条错误消息，因为通配符位于 Snapshot 副本名称的中间： Banana ：`` /vol/vol1 ： my* snap`</block>
  <block id="1830d73eb502a5b7b193c199e5002827" category="paragraph">LUN 的名称。此名称不包括 LUN 所在的存储系统和卷。以下是 LUN 名称的示例： ` lun_`</block>
  <block id="7dd3b24ef946547b72fe288f8bf7a979" category="paragraph">` lun_name_` （长或短格式）</block>
  <block id="f4fea3906f5bf61ec757e0746975cbba" category="paragraph">您提供的 ` -fs _file_spec_` 和 ` -hostvol file_specs` 用于标识要连接到新主机的 LVM 文件系统，磁盘组和主机卷。</block>
  <block id="c95a8eb711140360b93375af2ff33b5e" category="paragraph">可选：使用 ` -nt操作` 选项将存储连接到新位置，而无需在主机文件系统表中创建条目。默认情况下， storage connect 命令会创建永久性挂载。这意味着，在 Solaris 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。</block>
  <block id="7732ef713685908319ffaa80c5320389" category="paragraph">` _ - 设备类型 _`</block>
  <block id="197da351357b6cc0c3b6f2aa1b97dbe5" category="paragraph">指定 SnapDrive for UNIX 操作要使用的设备类型。这可以是将 LUN ，磁盘组和文件系统的范围指定为集群范围的主机的 " `s共享` " ，也可以是 `d将 LUN ，磁盘组和文件系统的范围指定为本地的 " 已创建` " 。</block>
  <block id="520f020ca0e245d96d9d05611e39f767" category="list-text">` _-mntopt_` 参数是使用 mount 命令 ` -o` 标志指定的文件系统 ` 类型` 选项。请勿在 ` -mntopts` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="6c0fd8445864832fba7ada6285e51f60" category="admonition">如果为存储和快照操作传递任何无效的 ` -mntopts` 选项，则 SnapDrive for UNIX 不会验证这些无效的挂载选项。</block>
  <block id="07781d84f681f44124cadfddedc75c0e" category="list-text">` _user_name_` 是首次设置 SVM 时为 SVM 指定的用户名。默认用户为 vsadmin 。filername 是 SVM 名称。</block>
  <block id="4f26f0e0cf8fb0ddaba276b232915d0d" category="paragraph">在 Solaris SFRAC 4.1 主机集群环境中，必须为主机集群中的所有节点配置 `rsh` 或 `ssh access-without 密码提示符 -for-root` 。</block>
  <block id="eccfe5db2606da90a65da4e37a087c65" category="paragraph">在 FC 或 iSCSI 环境中使用 Data ONTAP 时，应使用 FilerView 将 `snap reserve` 选项重置为 0% 。</block>
  <block id="723b67f4e875e95558d28022cb2e28c5" category="paragraph">通过 SnapDrive for UNIX ，您可以在存储系统上自动配置存储，以便在 Veritas Storage Foundation for Oracle Real Application Clusters （ SFRAC ）环境中管理本地节点和集群范围的共享文件系统。SnapDrive for UNIX 提供了一些存储功能，可用于管理整个存储层次结构，例如主机端应用程序可见文件，卷管理器和存储系统端逻辑单元号（ LUN ）。</block>
  <block id="d6a2c1f3b405f6609b2a23e091f39f46" category="paragraph">以下示例显示了如何使用 -force 选项拆分克隆：</block>
  <block id="4c091a238bb1b1e11082631c736b9e5b" category="paragraph">以下示例显示了如何使用 ` _-noprop` 选项直接启动克隆，这意味着没有确认消息：</block>
  <block id="c0e72e0bf552cb2a7d0e40df9b8de802" category="summary">要在 Solaris 主机上安装 SnapDrive ，必须下载并解压缩 NTAPsnapdrive_sun_x86_64 ， 5.2.tar.Z 或 NTAPsnapdrive_sun_sparc_5.2.tar.Z 软件包。软件包取决于您使用的是 x86 上的 Solaris 还是 SPARC 平台。</block>
  <block id="461ff78307f5f90f7f824e9a1f9eadb3" category="doc">下载并解压缩软件包</block>
  <block id="d46444f881dcf4621e031fdeee58655d" category="list-text">根据您使用的是 x86 上的 Solaris 还是 SPARC 上的 Solaris ，从 NetApp 支持站点下载 NTAPsnapdrive_sun_x86_5.2.tar.Z 或 NTAPsnapdrive_sun_sparc_5.2.tar.Z 软件包。</block>
  <block id="d0840cd638345347b1d6db8594555f00" category="list-text">访问将压缩文件下载到的目录。</block>
  <block id="705623e6a8c30c6e09a2a3e6adb644e5" category="paragraph">例如，要访问 /tmp 目录，请输入以下命令：</block>
  <block id="5909ce170c190d70a8101b1c439f8eef" category="paragraph">` * # cd /tmp*`</block>
  <block id="614ad695a1140c77291e02dd6c1dc4f9" category="list-text">要对 x86 上的 Solaris 软件包进行解压缩，请输入以下命令：</block>
  <block id="aa0d1614dba486448f900194deafb8c1" category="paragraph">` * # 解压缩 NTAPsnapdrive_sun_x86_64 5.2.tar.Z*`</block>
  <block id="ff9cb4199b769eb6ddd8849e0b2fa2d3" category="paragraph">对于 SPARC 上的 Solaris ，输入以下命令：</block>
  <block id="88dfa3aaaa7a726e4b5df515751f9731" category="paragraph">` * NTAPsnapdrive_sun_sparc_5.2.tar.Z*`</block>
  <block id="5dc30d475eeddd8cf66d6b0b1188c0d6" category="list-text">要为 x86 上的 Solaris 提取文件，请输入以下命令：</block>
  <block id="8344669df51ec823d8ff12454298258a" category="paragraph">` * # tar -xvf NTAPsnapdrive_sun_x86_64 5.2.tar*`</block>
  <block id="9896fd5d1a90799339f4bc5e93f4432e" category="paragraph">` * tar -xvf NTAPsnapdrive_sun_sparc_5.2.tar*``</block>
  <block id="8f4a443d0b1e0dbe9365b93968c2410a" category="paragraph">如果已启用 ` -DeviceType` Shared 选项，则无法使用此选项，因为 ` -igroup` 选项仅对本地资源有效，而对共享资源无效。有关指定 igroup 的详细信息，请参见 SnapDrive for UNIX 手册页。</block>
  <block id="97d6452294758c308122b19d5cadff26" category="summary">您必须修改 /etc/vRTSvcs/conf/config/main.cf 文件，以禁止节点使用共享资源。有关 main.cf 文件的详细信息，请参见《适用于 Solaris 的 Veritas 集群服务器安装指南》。</block>
  <block id="51dc5904b6201fd3f376f5d6b2d648d1" category="doc">禁止节点或集群使用共享资源</block>
  <block id="4ebf64debcd16c258d31c6fa40a2d195" category="paragraph">您必须修改 ` /etc/vRTSvcs/conf/config/main.cf` 文件，以禁止节点使用共享资源。有关 main.cf 文件的详细信息，请参见《 Veritas Cluster Server _Installation Guide for Solaris_ 》。</block>
  <block id="46b238c806a1eb672db1230a55fcc9f7" category="paragraph">要禁止节点使用共享资源，请使用以下语法：</block>
  <block id="1b914bc1c843c105bf7b30c968ccfc07" category="paragraph">` * SnapDrive storage disconnect -fs _file_spec_ -lun _long_lun_name_ [_lun_name..._] [-DeviceType shared]*`</block>
  <block id="73183c2b28b009e4746c578a334172d2" category="paragraph">此示例显示了存储系统面板上没有权限文件时您会收到的消息类型，并且 `snapdrive.conf` 文件中的变量 ` _all-access-if-rbac unspecified _` 设置为 off 。</block>
  <block id="7ca852b2b91c57973022a0c2b01a7614" category="paragraph">在 Linux 主机上运行的 SnapDrive for UNIX 返回错误消息 ` "`HBA assistant not found` "` 。</block>
  <block id="26085e200943014c1ed95663c2a4cdd6" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._] （ -dg _ -fs _ -hostvol ｝ _file_spec_ （ _file_spec..._） ] （ -full] ）（ -DeviceType ｛ shared _ dedicated ｝ ）） ] （ -fstype 类型）【 -vmtype 类型类型 * 】（ -split` 类型）</block>
  <block id="14bd1d0be9dac54e949ca2790e5e56eb" category="list-text">如果指定 RDM LUN （` -lun` ），则必须输入长 RDM LUN 名称。您不能在与其他存储实体（` -vg` ， ` -dg` ， ` -fs` ， ` -lvol` 或 ` -hostvol` options ）相同的命令行上使用 ` -lun` 选项指定 RDM LUN 。</block>
  <block id="cc0f4fb70126a929aef5d15fe0f0d436" category="paragraph">`` _filername..._ 定义，如果所有存储系统名称都具有相同的用户登录名或密码，则可以在一个命令行中输入多个存储系统名称。必须至少输入一个存储系统的名称。</block>
  <block id="38c7197d64694932c72fdc8cb25cf658" category="summary">在使用 Solaris 10 Update 10 或更高版本的存储系统上，如果没有 -full 选项，则用于删除和断开磁盘组连接的 SnapDrive for UNIX 命令将失败。delete and disconnect 命令失败，因为主机卷未完全断开连接或删除。</block>
  <block id="dc430e5bbaf995846784a00291d908f8" category="doc">断开磁盘组的存储连接失败</block>
  <block id="23e012da53ffed04607c4a7e2359ee43" category="paragraph">在使用 Solaris 10 Update 10 或更高版本的存储系统上，如果没有 ` -full` 选项，则用于删除和断开磁盘组的 SnapDrive for UNIX 命令将失败。delete and disconnect 命令失败，因为主机卷未完全断开连接或删除。</block>
  <block id="2c73c4a45aa0817cfd1175873fa05796" category="paragraph">运行 ` -full` 命令以断开所有文件系统和关联主机卷的连接。</block>
  <block id="1ed0f4cf0a102d99e6056b90d4b9f7c3" category="list-text">对于快照连接，您必须在父卷上具有 `s .D.snapshot.UnrestrictedClone` 功能。</block>
  <block id="69c0c221f0193c207111059d881b2da1" category="list-text">对于快照断开连接，您必须在 FlexClone 卷上具有 `s .dontsnapshot.DestroyUnrestrictedClone` 功能。</block>
  <block id="4c39b4f496fbb69e1e0e3f561a4e358c" category="list-text">对于快照连接，您必须在父卷上具有 `s …… .snapshot.Clone` 功能。</block>
  <block id="7f176d937277aabea7daa605f6d4368a" category="list-text">对于快照断开连接，您必须在父卷上具有 `s …… .snapshot.Clone` 功能。</block>
  <block id="9d2dd03053df476f63e56bcaa63fc5ab" category="paragraph">要在快照连接操作期间拆分 FlexClone 卷，请在父卷上使用 `s D Storage.Write` 访问功能。</block>
  <block id="7750166eab9a3d88f425e716352c0d96" category="paragraph">要在快照断开期间对拆分的 FlexClone 卷执行存储操作，对于拆分的 FlexClone 卷，您必须对拆分的卷克隆具有 `s .Storage.Delete` 功能。</block>
  <block id="8f8b7da5f0eee607bdc4a48839dc45da" category="summary">SnapDrive for UNIX 会为 Solaris 操作系统安装可执行文件。</block>
  <block id="d3a1c6a61a8e84fb18f8c8514233b167" category="paragraph">这些可执行文件安装在以下位置：</block>
  <block id="e22d413952eb04e1e52c0fcfb07e1c32" category="list-text">` /opt/NTAPsnapdrive/bin/SnapDrive`</block>
  <block id="c21dcb30341611d681d9c7781480f34c" category="list-text">` /opt/NTAPsnapdrive/bin/snapdrived`</block>
  <block id="8dd0ca08d2a32588c6bd45078f3fb384" category="summary">在 Solaris 上使用 SFRAC 时，从节点上基于卷的快照还原 \ （ vbsr ）操作失败。</block>
  <block id="8a9d30a113e9d5378ca4cc5e68a959eb" category="doc">从节点中基于卷的快照还原操作失败</block>
  <block id="c998b52ef720fe96144ae2c73c485722" category="paragraph">在 Solaris 上使用 SFRAC 时，从节点上基于卷的快照还原（ vbsr ）操作失败。</block>
  <block id="bd76c975270d30e460563e9e9e2f1075" category="paragraph">SnapDrive for UNIX 显示以下错误消息。</block>
  <block id="36db1be09c5bdcdc017235d9060aa6e2" category="paragraph">在使用 ` -vbsr` 选项运行 `snap restore` 命令时，您必须确保在从节点上使用 ` -force` 以及 ` -noprop` 选项。</block>
  <block id="f361b4ce146f5badc32f8b1177f1d120" category="summary">SnapDrive for UNIX 可为 LUN 等原始实体或可直接在 LUN 上创建的文件系统启用存储操作，并在不使用主机系统 VxVM 的情况下执行存储操作。</block>
  <block id="fac36eb9c43b91cfbcbc398ca64aee7e" category="paragraph">SnapDrive for UNIX 存储命令用于管理 LUN 等原始实体，而无需激活 Vxp.SnapDrive for UNIX ，您可以在不激活 VxVM 的情况下创建，删除，连接和断开 LUN 及其包含的文件系统。</block>
  <block id="a0d4ec4b4ca8aa886d616ca87c747a1c" category="paragraph">如果在 `snapdrive.conf` 文件中将 ` autosupport-enabled_` 选项设置为 `on` ，则 AutoSupport 消息会记录在存储系统的 EMS 日志视图中。默认情况下，在 `snapdrive.conf` 文件中，此选项设置为 ` _on_` 。SnapDrive for UNIX 会将 AutoSupport 消息发送到存储系统，而这些消息会记录在事件管理系统（ EMS ）中。</block>
  <block id="ae2464ce12f03dfe409496e3bf442b02" category="paragraph">` * SnapDrive 克隆拆分停止符（ -lun ） _lun_name_ [_long_lun_name..._] _[ ｛ -dg _ -vg _ -fs _ hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]] _ （ -job _&lt;jobid&gt;_） *`</block>
  <block id="e2b166a3f8888482343d747a6fad2d48" category="list-text">SnapDrive 配置准备 LUN -count 数（ -DeviceType Shared ）`</block>
  <block id="310c6b563b9c02932517b8a31b59ad66" category="paragraph">` -count` 是要为主机准备的新 LUN 的数量。在使用 SFRAC 的 Solaris 平台上支持 ` 设备类型` 共享选项。</block>
  <block id="aa5a4edf90d550021729609610cb9a06" category="paragraph">` 设备类型` 是用于 SnapDrive for UNIX 操作的设备类型。如果指定为 ` -DeviceType shared` ，则 SnapDrive config prepare lun` 命令将在主机集群中的所有节点上运行。</block>
  <block id="9a9975fe290e21620be4e760b6e61526" category="admonition">在 SFRAC 环境中，此命令会在主机集群中的所有节点上运行。</block>
  <block id="cdc4c01b865f2d8100730975d7f96004" category="paragraph">在 Solaris 上，如果需要，此命令会将没有条目的每个潜在新 LUN 的条目添加到文件 ` /kernel/drv/sd.conf` 中。它还会为存储系统映射到的每个 SCSI 目标生成一个条目。在 Solaris 8 上，您必须在添加 `s .d.conf` 条目后重新启动主机。此命令会在需要重新启动时显示警告。</block>
  <block id="68e707ef9cbf047890647c39d0342995" category="paragraph">` # bEGIN ： lput-managed Persistent Bindings 。`</block>
  <block id="1910f9710f8c462e9a1657aca0642e4a" category="list-text">对于可创建的 LUN 数量， Solaris 主机具有操作系统限制。</block>
  <block id="4b92a6199a1222707ca29cfd17c3d1dd" category="list-text">通过在 `snapdrive.conf` 文件中设置配置变量 ` _rbac 方法 ="dfm"&gt;` ，将 SnapDrive for UNIX 配置为使用 Operations Manager 控制台基于角色的访问控制（ RBAC ）。</block>
  <block id="2444aba6b3718d9a2703e7856a9857ae" category="admonition">用户凭据会进行加密并保存在现有的 ` .sdupw` 文件中。早期文件的默认位置为 ` /opt/ONTAPsnapdrive/.sdupw` 。</block>
  <block id="493ca7ac682e42992df8bf0afa050314" category="inline-xref-macro">安装 SnapDrive for UNIX 的子操作系统准备工作</block>
  <block id="af38781d6f5f8843d3faeddd2cf1bd3b" category="paragraph"><block ref="af38781d6f5f8843d3faeddd2cf1bd3b" category="inline-xref-macro-rx"></block></block>
  <block id="d3e64ecbfbb706ca50a1bcae22958644" category="list-text">使用 ` -growto` 选项增加实体大小，以便新的总大小 ` size_` 是在 size 参数中指定的字节数。</block>
  <block id="2063849717d32dd19e534b77cabac517" category="paragraph">=</block>
  <block id="47edd85088be18b2babc53d675bacf28" category="paragraph">` -fsttype_`</block>
  <block id="ed79b4e0d77ee6a3d270785728e58e6c" category="paragraph">SnapDrive storage create ｛ -lvol _ -hostvol ｝ _file_spec_ ｛ -dg _ -vg ｝ dg_name ｝ ｛ -dgsize _ -vgsize ｝ _size_-filervol _long_filer_path_ ｛ shared _ dedicated ｝ ] ｛ ｛ -noreserve _ -reserve ｝ ] ｛ -fstype _type _v_path_ ｝`</block>
  <block id="5df46663c7757ce9db4c3b6e95809451" category="paragraph">SnapDrive storage create -fs _file_spec_ -nolvm （ -fsopts options ） "-mntopts options] （ -noperassis] ） ｛ -lun _long_lun_name_ _ - -filervol _long_filer_path_ ｝ -lunsize _size_ （ -igroup _vm_name _ ）（ _ig_name ..._edicated _ ）` _ ｛ -type_ ） ｝ _edeverve</block>
  <block id="6056292665340dd095888718717c6d60" category="paragraph">SnapDrive storage create _host_lvm_fspec_ -filervol _long_filer_path_ -dgsize _size_ "-igroup _ig_name_ [_ig_name ..._]] [ ｛ -reserve _ -noreserve ｝ ] （ -DeviceType ｛ shared _ dedicated ｝ ）`</block>
  <block id="c591054ea1147cc799206f433363505b" category="paragraph">SnapDrive storage connect -fs _file_spec-nolvm_ -lun _lun_name_ "-igroup _ig_name_ [_ig_name ..._]] （ -noperassis] ）（ -mntopts 选项）（ -DeviceType ｛ shared | dedicated ｝ ）））） ]-fstype _type_] （ -vmtype _type_`</block>
  <block id="0223654217d09a391440dfdf1edac0cc" category="paragraph">SnapDrive 存储连接 -fs _file_spec_ -hostvol _file_spec_ -lun _lun_name_ [_lun_name ..._] [-igroup _ig_name_ [_ig_name ..._]]]-noperassis] [-mntopts options] [-DeviceType ｛ shared | dedicated ｝ ]]_fstype _type_type_`</block>
  <block id="1c95448620671198582e7aa905b530cf" category="paragraph">SnapDrive 存储连接 -lun _long_lun_name_ _lun_name ..._]-DeviceType ｛ shared | dedicated ｝ ]-vmtype _type_]`</block>
  <block id="c4fff6042264f3ba2663be632ccb60f6" category="paragraph">SnapDrive 存储连接 -fs _file_spec_ ｛ -hostvol _ -lvol ｝ _file_spec_ -lun _long_lun_name_ [_lun_name..._] [-DeviceType ｛ shared _ dedicated ｝ ] [-noperassis] [-mntopts options] [-fstype _type_] [-vmtype type_]`</block>
  <block id="eb5414010d48fbdba64cb58ea0bf0e1c" category="paragraph">SnapDrive storage disconnect -lun _long_lun_name_ [_lun_name..._] [-DeviceType ｛ shared | dedicated ｝ ][-vmtype _type_]`</block>
  <block id="6b676e17fbd37d43ce5486577d8a072f" category="paragraph">SnapDrive 存储断开连接 ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ [_file_spec__]] ｛ -vg _ -dg _ -fs _ lvol _ -hostvol ｝ _file_spec_ … ] …… ] 【 -full】 【 -DeviceType ｛ shared | dedicated ｝ 】【 -fstype _type_】 【 -vmtype _type_] 】`</block>
  <block id="2be18080ba6b623d0e41c8de9937cabb" category="paragraph">SnapDrive storage ｛ show | list ｝ ｛ -all | device ｝ ｛ -DeviceType ｛ shared | dedicated ｝ ] ｛ -capabilities ｝`</block>
  <block id="b049835620363945ab0815c4dae4e130" category="paragraph">SnapDrive storage show [-verbose ] ｛ -filer _filername_ __filername..._] | -filervol _volname_ [_volname..._] ｝ ｛ -DeviceType ｛ shared ： dedicated ｝ ] ｛ -capabilities ｝`</block>
  <block id="d27dab42d157eb582bcbec870ee8041d" category="paragraph">SnapDrive 存储 ｛ show | list ｝ ｛ -filer _filer_name_ _filer_name ..._] ； -filervol _long_filer_path_ [_filer_path ..._] ｝ ｛ -verbose ｝ ｛ -DeviceType ｛ shared | dedicated ｝ ] ｛ -capabilities ｝ 【 -quiet 】`</block>
  <block id="849bc5f8b129251aa722a0206f0a7766" category="paragraph">SnapDrive storage delete （ -lun ） _long_lun_name_ （ _lun_name ） ..._] （ -DeviceType ｛ shared | dedicated ｝ ） ] （ -fstype _type_] ）（ -vmtype _type_]`</block>
  <block id="1a061ee8a2a048191854599c82a0e874" category="paragraph">SnapDrive 存储删除项（ -vg _ -dg _ -fs _ -lvol _ -hostvol] _file_spec_ [_file_spec_..._] ）（ ｛ -vg _ -dg _ -fs _ lvol _ -hostvol ｝ _file_spec_ [_file_..._]...] 【 -full】 【 -DeviceType ｛ shared | dedicated ｝ 】【 -fstype _type_】 【 -vmtype _type_] 】`</block>
  <block id="d3cd1ee088ef862a8d4f8067ab73f973" category="list-text">验证子操作系统的 `snapdrive.conf` 文件中的配置变量 ` default-transport_` 变量是否设置为 ` fcp_` 。</block>
  <block id="613d87d80c564170a64436ac1db91cf9" category="list-text">确保在 `snapdrive.conf` 文件中使用了 RDM LUN 支持的配置变量。RDM LUN 支持使用 ` contact-viadmin-port_` ， ` use-https-to_viadmin_` ， ` _vif-password-file 和 virtual-operation-timeoutsecs=600_` 等变量。</block>
  <block id="96c921c6cdd453211ce01a7d5765b079" category="paragraph">SnapDrive snap ｛ show | list ｝ ｛ -verbose ｝ ｛ -vg | -dg | -fs | -lvol | -hostvol ｝ _file_spec_ [_file_spec..._] ｛ -fstype type] ｛ -vmtype type]`</block>
  <block id="0866f509f27e1522bdbe8f75944ad29a" category="paragraph">SnapDrive snap ｛ show-list ｝ ｛ -verbose ｝ ｛ -lun | -vg | -dg | -fs | -lvol | -hostvol] _file_spec_ [_file_spec..._]`</block>
  <block id="f27e57fd343abeb2dc50090b2e910873" category="paragraph">SnapDrive snap connect -lun _s_lun_name d_lun_name_ [-lun] _s_lun_named_lun_name_ ...] -snapname _long_snap_name_-DeviceType ｛ shared | dedicated ｝ ] （ -split ）【 -clone ｛ lunclone _ optimal _ unrestricted ｝ 】（ -prefixfvprefixstr] （ -verbose ）`</block>
  <block id="bea8945628000ef49ab03655c2a90259" category="paragraph">SnapDrive snap connect _fspec_set_ [_fspec_set..._] -snapname _long_snap_name_[-DeviceType ｛ shared _ dedicated ｝ ] -AutoExpand] （ -autosename] ）（ -noperassidge] ）（ ｛ -reserve | -noreserve ｝ ） ] （ -readonly" （仅限））（ -opedit-clone ））（ -fixv ）` -fixrefixts 选项</block>
  <block id="b92dc7a2d22a9a0add19583d434b7440" category="paragraph">SnapDrive snap restore （ 快照还原） "-lun | -dg | -vg | -hostvol | -lvol | -fs | -file] _file_spec_ （ file_spec... ） [ ｛ -lun | -dg _ -vg _ -hostvol _ -lvol _ -fs _ -file ｝ _file_spec_ [_file_spec_ ...] …… ] -snapname _snap_name_ [-force [-noprompt]] [-mntopts options][ ｛ -reserve | -noreserve ｝ ] 【 -DeviceType ｛ shared | dedicated ｝ 】【 -vbsr 【 preview | execute]]`</block>
  <block id="559434a3857e73e265a8ea7865401f07" category="paragraph">SnapDrive snap disconnect -lun _long_lun_name_ [_lun_name..._] （ -DeviceType ｛ shared | dedicated ｝ ） ] （ -fstype 类型）（ -vmtype 类型）（ -vmtype 类型）（ -split ）`</block>
  <block id="17e58ac7aab27d07856125df2b73d36e" category="paragraph">SnapDrive snap disconnect ｛ -dg| -vg | -hostvol | -lvol | -fs ｝ _file_spec_ [file_spec...] [ ｛ -DG _ -vg _ -hostvol _ -lvol _ -fs ｝ _file_spec_ [file_spec...] …… ] 【 -full】 【 -fstype type】 【 -vmtype 类型】【 -ssplit 】【 -DeviceType ｛ shared | dedicated ｝ 】`</block>
  <block id="f7e4296200a32cd9fb7ba75966654de0" category="paragraph">SnapDrive snap delete [-snapname] _lor_snap_name_ [_snap_name..._][-verbose ] [-force [-noprompt]]`</block>
  <block id="f51555b51926e2973de2b5ffc7c31373" category="summary">SnapDrive for UNIX 提供了存储配置和 Snapshot 管理选项，用于在 SFRAC 环境中管理主机集群范围的共享磁盘组和节点本地磁盘组以及文件系统。</block>
  <block id="bc2d16936d3b96e8f27e3a966c8fbf72" category="doc">在存储系统上设置 SFRAC I/O 隔离环境</block>
  <block id="d05ffd254124c4273d2370b9d45c98c5" category="list-text">手动设置 `rsh` 或 `ssh` 以对所有主机集群节点上的 root 用户使用 access-without password-prop 。</block>
  <block id="b064bf6de8c48a82fc29d77e0656ad99" category="paragraph">有关设置说明，请参见 _Veritas Cluster Server Installation Guide for Solaris_ 。</block>
  <block id="07f5caca5361c0f0a8048e133ede361b" category="list-text">在主机集群中的所有节点上安装 SnapDrive for UNIX 。</block>
  <block id="c2e3cc6ba8acf6c2ec0a9fab1aed2436" category="paragraph">如果在不同节点上安装了不同版本的 SnapDrive for UNIX ，则 SnapDrive for UNIX 操作将失败。</block>
  <block id="0633506910bccf0d10da80dd2d64efe9" category="list-text">检查存储系统之间的 FC 连接。</block>
  <block id="7ad8d00f410f8043dfc1862cdba1bea7" category="paragraph">要了解主机的硬件要求，请参见 SFRAC _Release Notes_。</block>
  <block id="25d16b053c05e4cd84a54d7c9812349c" category="admonition">所有节点上的 ` /opt/NTAPsnapdrive/SnapDrive.conf` 文件必须将 `default-transport` 配置变量设置为 fcp 。</block>
  <block id="f6cdad2be18d11ee7ed577fc4892ff7c" category="list-text">为 ` _secure communication-amongst cluster-nodes_` 配置变量设置一个值，以确保已为集群中的所有节点配置 root 用户的 `rsh` 或 `ssh` access-without password-Prompt 。</block>
  <block id="a8638822841de57723d7c85edc4ad191" category="paragraph">此值是必需的，因为如果从主机集群中的任何节点（主节点或非主节点）启动 SnapDrive for UNIX 命令，则 SnapDrive for UNIX 将在主机集群中的其他节点上执行操作。</block>
  <block id="0b24bee79997269773a58b28b95fe37c" category="list-text">在主机集群中的每个节点上执行以下命令，以检查主机集群节点上的设备发现情况：</block>
  <block id="86636ecab0cab024efbcd9ef066efa47" category="paragraph">` * SnapDrive storage create -lun _long_lun_name_ [_lun_name..._] -lunsize 大小 [ ｛ _-reserve__ _ _ _ -noreserv_ ｝ ] （ _igroup ig_name _ _ig_name ..._]*`</block>
  <block id="974a6ccacf2cdedc2ed790435e818fe3" category="list-text">如果您使用的是 SAN 环境，请确保在 Solaris 矩阵堆栈中提供的 `snapdrive.conf` 文件中指定适当的可接受值。然后，重新启动守护进程。</block>
  <block id="080ed12a124e9a4fb73365d5ebdcf092" category="summary">您可以从主机集群中的任何节点连接 Snapshot 副本。连接到 Snapshot 副本时，请遵循相关准则。</block>
  <block id="309d7f1ce031bf628388e39093db1bef" category="doc">在主机集群环境中连接 Snapshot 副本的准则</block>
  <block id="b23fe49a94087996903f1dbe95b0681e" category="list-text">可以从主机集群中的任何节点执行 SnapDrive snapshot connect` 命令。如果使用 ` -DeviceType shared` 选项从主机集群中的任何非主节点启动 SnapDrive snap connect` 命令，则该命令将发送到主节点并执行。要做到这一点，请确保所有主机集群节点上都允许使用 `rsh` 或 `ssh` access-without 密码提示符。</block>
  <block id="e3e28b2ce0c968ecce46f56752a09933" category="list-text">在此操作中指定的多个文件系统和磁盘组应具有相同的设备类型范围；也就是说，所有文件系统和磁盘组都应共享，或者所有文件系统和磁盘组都应专用。</block>
  <block id="c62395c5b66ee28b22e920235678a122" category="list-text">不支持对原始 LUN 上的 NFS 或存储实体使用 SnapDrive snap connect` 命令。</block>
  <block id="35380cda090b392b167a5a5d85c46a70" category="list-text">在 SnapDrive snap connect` 命令中， ` -DeviceType` dedicated 选项支持 ` -igroup` 选项，而不支持 ` -DeviceType` shared 选项。</block>
  <block id="e9b3ad84ed4605277925307ed0d4164d" category="list-text">SnapDrive for UNIX 会在主节点上执行 SnapDrive snap connect` 命令。在创建共享存储实体之前，它会在主节点上创建并映射 LUN ，然后映射所有非主节点上的 LUN 。还会为主机集群中的所有节点创建和管理 igroup 。如果在此过程中出现任何错误消息，则 Snapshot 连接操作将失败。</block>
  <block id="e852bf437713f2816d409c10aa2ec2e3" category="list-text">可以使用 SnapDrive snap connect` 命令连接以下存储实体：</block>
  <block id="0d936670d35d5e3554cbee847e56b4a0" category="list-text">主机集群中已处于共享或专用模式的共享文件系统或磁盘组。</block>
  <block id="8e70f2f7602566af9705fe0fd3b39c04" category="list-text">主机集群中单个节点的专用文件系统或磁盘组，即使主机集群中的文件系统或磁盘组已处于共享模式也是如此。</block>
  <block id="fef0356c328d1d5f4c4431c16561fe31" category="list-text">在主机集群以外的节点上创建的文件系统或磁盘组的 Snapshot 副本。</block>
  <block id="cef35f325babb3d38e512125184c293f" category="list-text">如果没有针对磁盘组的 ` -destdg` 选项和针对文件系统的 ` -auturename` 选项，则非主节点中已存在的专用文件系统或磁盘组无法在主机集群的共享模式下重新连接。</block>
  <block id="a458aebd7c92cac682e20675d566c023" category="paragraph">也就是说，如果主机集群中的一个非主节点中已存在专用模式的文件系统，则必须使用 ` -destdg` 和 ` -auturename` 选项指定 SnapDrive snap connect` 命令，或者在命令中明确指定目标文件系统。</block>
  <block id="a943854cb07d0eeb8c9c8d4ef6413cd3" category="paragraph">在 Solaris 主机上，此命令会扫描 ` /kernel/drv/sd.conf` 以确定哪些未使用的条目适合 LUN 。</block>
  <block id="5c783d671c10df55b2278747ba2fefc9" category="paragraph">要在存储系统上将 SnapDrive for UNIX 与 NFS 挂载的目录结合使用，必须确保将存储系统目录正确导出到主机。如果主机具有多个 Internet 协议（ IP ）接口以及存储系统的数据和管理接口，则必须确保将目录正确导出到数据和管理接口。SnapDrive for UNIX 会发出警告，除非所有此类接口都具有读取或写入权限，或者如果使用带有 ` -readonly` 选项的 SnapDrive snap connect` 命令，则至少具有只读权限。如果 SnapDrive snap restore` 和 SnapDrive snap connect` 命令均无权访问目录，则这些接口将失败。</block>
  <block id="4d73741a6764305748df50561c84d7c8" category="list-text">要为快照连接操作启用空间预留，您可以通过在涉及 NFS 实体的命令中使用 ` -reserve _` 参数来为卷启用空间预留。对于 NFS 实体，如果未在命令中指定 ` -reserve_` 或 ` -noreserver_` 参数，则 SnapDrive for UNIX 将使用 Snapshot 副本中提供的空间预留。</block>
  <block id="83b10ce9e6efbddede33336353f7ef16" category="summary">在主机集群环境中创建存储时，应遵循特定准则。</block>
  <block id="0f1d3890138d0eade8cf15018148c367" category="doc">在主机集群环境中执行存储创建操作的准则</block>
  <block id="5d54e86a312332f7415ada399ef4d1ea" category="list-text">您可以从主机集群中的任何节点执行 SnapDrive storage create` 命令。</block>
  <block id="78c359f72b111279f98695accfaed67d" category="list-text">要使存储创建操作成功，两者均不应为 true ：</block>
  <block id="d85f114fe77dc78d0917554637423fdd" category="list-text">存储实体不应位于主机集群中的任何节点上。</block>
  <block id="a5dee2fb4b51c4a0591fbd80c978dc70" category="list-text">LUN 不应映射到主机集群中的任何节点。</block>
  <block id="50cb1911efc3147d40c8b210f88f5652" category="list-text">您可以使用 ` 设备类型` 专用或 ` 设备类型共享` 选项在特定节点上创建存储实体。如果您要创建的存储实体处于专用模式，则可以省略 ` 设备类型` 选项，因为默认值为 `d已设置` 。</block>
  <block id="b7713953a3b7f765216349e2b0a918b7" category="list-text">在使用 Veritas 卷管理器和 Veritas 文件系统（ VxFS ）的磁盘组上，支持在集群范围内创建文件系统的主机存储。此操作不支持原始 LUN ； ` -nolvm` 选项也不支持。</block>
  <block id="651a0298f52a77b7c16219f6f68dcb34" category="list-text">存储创建操作不支持 ` -igroup` 选项。</block>
  <block id="bdb2f40bcaeee6e000635adc9ab2190e" category="list-text">如果发生以下情况之一，则存储创建操作将失败：</block>
  <block id="51efe479f576e020762e3cc934dc9603" category="list-text">创建存储实体期间是否出现任何错误消息。SnapDrive for UNIX 从主机集群中的主节点执行存储创建操作。在创建共享存储实体之前， SnapDrive for UNIX 会创建 LUN ，将 LUN 映射到主节点，然后将 LUN 映射到所有非主节点。SnapDrive for UNIX 在内部为所有节点创建和管理 igroup 。</block>
  <block id="f294298322d1e89ac0d3c526123f1852" category="list-text">如果在启动主机集群卷管理器（ CVM ）之前主机集群中的某个节点关闭并重新启动，则应在该节点上发现 LUN 使用的共享磁盘组。默认情况下，如果 FC 端口地址未更改，则会显示这些 LUN ；否则，您必须使用 SnapDrive storage connect` 命令映射这些 LUN 。</block>
  <block id="f0e9b9fb12582f126e19db6b03cc57b5" category="summary">如果 LUN 是在存储系统上使用 lun create 命令或 System Manager 创建的，则 SnapDrive storage connect 命令无法连接到该 LUN 。</block>
  <block id="00311e4227b6c3fe8fcaa8418fcb1b1c" category="doc">存储连接操作无法连接到使用 lun create 命令在存储系统上创建的 LUN</block>
  <block id="ab1fb6064aabcd2b6d0cc421a0cfe5ec" category="paragraph">如果 LUN 是在存储系统上使用 `lun create` 命令或 System Manager 创建的，则 SnapDrive storage connect` 命令无法连接到该 LUN 。</block>
  <block id="15571a50af36f58fb66416d22a996f63" category="paragraph">出现以下错误消息的原因是， LUN 未格式化， Solaris 无法识别它，而 LUN 已被发现并映射到主机。</block>
  <block id="e8c8156f2f5ef92eb66c89908850c641" category="paragraph">请勿手动创建 LUN 。使用带有 ` -lun` 选项的 lun storage create` 命令创建 SnapDrive 。如果在执行 SnapDrive storage connect` 命令后必须使用现有 LUN ，请完成以下步骤。</block>
  <block id="a0c5243b7a634de4fd8132bbbc2e9fe0" category="list-text">手动格式化 LUN 。</block>
  <block id="9f0ecefa440ce3b744da30f9b5e17e0c" category="list-text">使用原生卷管理器和操作系统命令在其中创建文件系统。</block>
  <block id="567efca0266b96a7cb9a23d9b7fc0e9c" category="paragraph">创建文件系统后，您可以对此 LUN 使用 SnapDrive for UNIX 操作。</block>
  <block id="f4cacc346468d88fef64daa83399fafa" category="summary">在 Solaris 上使用 SFRAC 5.0 时， snap restore 和 snap connect 命令无法挂载文件系统。</block>
  <block id="568d8e8a0e0f01769e16fc5c8db2c053" category="doc">snap restore 命令无法挂载文件系统</block>
  <block id="45c8440d34d736e5874cbac225375c42" category="paragraph">在 Solaris 上使用 SFRAC 5.0 时， `snap restore` 和 `snap connect` 命令无法挂载文件系统。</block>
  <block id="09969d15a682315f73418f32524289ce" category="paragraph">创建 Snapshot 副本之前，用户必须在要对其执行问题描述 the SnapDrive snap create` 命令的集群节点上执行以下命令：</block>
  <block id="5976960c47a55ce8b79beb1875768a84" category="paragraph">` /opt/vrts/bin/fsclusstadm setprimary mount_point`</block>
  <block id="13321774c01ac753cf915b7ccf643056" category="summary">通过 SnapDrive for UNIX ，您可以管理 VxVM （ Veritas 卷管理器）和原始实体。SnapDrive for UNIX 还提供了一些命令，可帮助您在创建存储实体时配置和管理存储。</block>
  <block id="80bf3d0cdda0f24eeac3c51c85db19b3" category="doc">管理 VxVM 和原始实体</block>
  <block id="f6930cf5c9014f7cd48a15c2b70eae64" category="paragraph">通过适用于 UNIX 的 SnapDrive ，您可以管理 VxVM （ Veritas 卷管理器）和原始实体。SnapDrive for UNIX 还提供了一些命令，可帮助您在创建存储实体时配置和管理存储。</block>
  <block id="2f70c2b6d1faac20f541e5363357a63b" category="paragraph">例如， Solaris 套件包含 solaris 信息实用程序。</block>
  <block id="b2c9e962e2f0c395dbaec0684307ed57" category="paragraph">` _Snapshot copy_name_` （长格式或短格式）</block>
  <block id="2d0c8ca78d89d93abd4ed61f62d0b93a" category="summary">要从 Solaris 系统卸载 SnapDrive for UNIX ，必须使用 uninstall 命令。</block>
  <block id="cd4979961f5e79bfca74729725fd2655" category="doc">从 Solaris 主机卸载 SnapDrive for UNIX</block>
  <block id="6d9dabb33a7c8718fc94c1fbab2f563c" category="paragraph">要从 Solaris 系统卸载 SnapDrive for UNIX ，必须使用 `uninstall` 命令。</block>
  <block id="7dd25805ac29fe63442fe9a35afab50c" category="paragraph">在稀疏根区域中卸载 SnapDrive for UNIX 时，卸载过程不会删除 ` /usr/bin` 和 ` /usr/sbin` 中 SnapDrive for UNIX 的符号链接，因为这些符号链接在稀疏根区域中挂载为只读文件系统。您必须从全局区域中删除这些符号链接。在删除符号链接之前，请确保没有其他稀疏根分区正在使用 SnapDrive for UNIX 。</block>
  <block id="49f9a36136fdb4025b54e51663714f73" category="paragraph">`rm /usr/sbin/SnapDrive`</block>
  <block id="d26bae8d511efb29d93e5d95ba9ad80a" category="paragraph">`rm /usr/sbin/snapdrived`</block>
  <block id="01e02176572cba9216e211985f73a92a" category="paragraph">`rm /usr/bin/SnapDrive`</block>
  <block id="37100c5b9052312751add0fd59391603" category="list-text">使用以下命令删除软件：</block>
  <block id="6ce50a3927f7fdb5bb0aab646ad45b60" category="paragraph">` * 卸载 *`</block>
  <block id="0b1adefecf75fa4bf57029342c8f3de5" category="list-text">命令询问您是否确实要删除此连接套件时，请选择问题解答 y （或 yes ）。</block>
  <block id="b1e0cc836292819d2514fdacdcee152c" category="paragraph">如果您问题解答 n （或 no ），则此命令不会卸载连接套件。</block>
  <block id="1862a641112ba1cf7ef28b739b16da91" category="paragraph">要避免获取确认查询，请使用 ` -f` 选项输入 ` 。 /uninstall` 命令，以防止卸载脚本在交互模式下运行。</block>
  <block id="b52a7145d0f295c1390e25e052ec2476" category="admonition">要确保停止所有 SnapDrive for UNIX 服务，请使用 SnapDrive for UNIX 卸载脚本；请勿使用 `pkgrm` 等操作系统工具。</block>
  <block id="e18654795b82149fcbefdcf2eaf5f7e0" category="paragraph">SnapDrive 主机断开连接 ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_[_file_spec_ ...] ｛ -vg _ -dg _ -fs _ -lvol _ -hostvol ｝ _file_spec_ [_file_spec_ ...]...] 【 -full】 【 -fstype _type_】 【 -vmtype _type_】`</block>
  <block id="3123c1b9c3074bbeb9d7558e2584083b" category="list-text">`sdu-daemon-certificate-path=/opt/NTAPsnapdrive/SnapDrive.pem`</block>
  <block id="ddf6cc5ab20f0a35ff539a1367914bfa" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun ） _lun_name_ [_lon_lun_name..._] _ （ ｛ -dg _ -vg _ -fs _ hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]] ） _ （ -snapname _lon_lun_name_] ｛ -volsnap_snap_snap_name_]_lunclone`</block>
  <block id="7df3265b2b6b6ac8af9554eb36fe6dd5" category="doc">创建 VxVM 实体并自动设置 LUN</block>
  <block id="b7e3c2a3ee68b50570362c67a0ea3c08" category="list-text">使用 `host_lvm_fspechost_lvm_fSpec` 参数，您可以指定是要创建文件系统，逻辑卷还是磁盘组。此参数具有三种常规格式。使用的格式取决于要创建的实体。</block>
  <block id="c614f568b3dbac5ecbaad6b6b1eea71b" category="paragraph">` -dg_dg_name_`</block>
  <block id="d0bf7d29aedb4f7af5b115631bb85b16" category="paragraph">` * SnapDrive storage create _host_vxvm_fspec_ -filervol _lor_filer_path_ -dgsize "-igroup _ig_name_ [_ig_name ..._]] [ ｛ -reserve _ -noreserver]*`</block>
  <block id="55948c1ad60e096aa39320b38f54ee2f" category="paragraph">此示例将创建 Solaris 文件类型为 VxFS 的文件系统访问。它会在存储系统访问存储器上设置 LUN ，并创建一个 1 GB 磁盘组。</block>
  <block id="d270bc18d1728a08738c221952d3c0d9" category="summary">如果使用 SnapDrive for UNIX 使用 VxVM 创建逻辑卷或文件系统，则 SnapDrive for UNIX 会自动创建所需的磁盘组。SnapDrive for UNIX 会根据主机卷管理器支持的类型创建文件系统。对于 Solaris ，它包括 VxFS 和 UFS 。</block>
  <block id="2347cc42a4dcbdbe4f815107cd39e87c" category="doc">为 VxVM 实体创建存储</block>
  <block id="17871734c28e002904a35cb5d384274b" category="list-text">使用带有 ` -all` 选项的 SnapDrive storage show 命令` 来获取有关设备的信息。</block>
  <block id="f6b15d917118b4046e9a3d81d94f2c04" category="paragraph">`0001-218`</block>
  <block id="d76dc20d65a67ad1f9b2452fe526ffc2" category="paragraph">`device /dev/mapper — SCSI 查询失败。LUN 无响应。请检查存储系统上的 LUN 状态，并根据需要使 LUN 联机。`</block>
  <block id="4b97f010b5c3665dd0aa7583ffdef619" category="paragraph">如果在 SLES10 SP2 中设备上的 SCSI 查询失败，则会发生此问题。lvm2-2.02.17-7.27.8 和 ` filter_` 设置在 SLES10 SP2 的 `lvm.conf` 文件中分配为 ` =[A]/dev/mapper/.\*" ， "a"&gt;/dev/cciss/.*" ， "r/.*/"]` 。</block>
  <block id="90a6ba430a1c97a9153c034be4e11f80" category="paragraph">在 `lvm.conf` 文件中，将 ` filter_` 设置为 `["r\|/dev/.\*/by-path/.*\|", "r\|/dev/.\*/by-id/.*\|", "r\|/dev/cciss/.\*\|", "a/.*/"]` 。</block>
  <block id="9ca324fab654fe137ab720d73063f146" category="paragraph">`无法获取 HBA 助手 solarisfcp 的 HBA 类型`</block>
  <block id="4ea5a770abd5529ba77169fe915fd647" category="paragraph">0002-268</block>
  <block id="6a73967d8aa714e69b76e68e014c4fdf" category="paragraph">` -dg 和 -v 不能组合使用`</block>
  <block id="1de302306c0110753e75ab5015d067e0" category="paragraph">` lvol 和 -hostvo 不能组合使用`</block>
  <block id="5243737603b45f4990b44220987ed533" category="paragraph">操作：解决发生故障的 iSCSI 或 FC 服务。配置了 LUN 的存储系统已关闭或正在重新启动。</block>
  <block id="c33b69059a88d916ddef266b9cf1c657" category="paragraph">操作：等待 LUN 启动。为 ` usehttps- to -filer_` 配置变量设置的值可能不受支持。</block>
  <block id="55a82239682f20789eb7dd0b0c11d9f8" category="paragraph">操作：使用以下适用于主机卷名称的格式重新执行命令： `vgname/hostvolname`</block>
  <block id="87f8866bbd0c510ed229b6e5004d5aab" category="paragraph">`LUN 名称错误`` ：：`` &lt;/vol/vol1/SCE_lun2a&gt; - 无法识别格式`</block>
  <block id="6d590a0524b866f97027bdd17c34c8db" category="paragraph">如果磁盘组名称已在使用中或与其他实体冲突，则会发生此错误。操作：</block>
  <block id="4f8b848673e9d69305356b6c21e68279" category="paragraph">执行以下任一操作：</block>
  <block id="25643b1da8477f6edc4a446ff6a81a46" category="paragraph">`0001-422`</block>
  <block id="7f31082c070442d096868f0428363a69" category="paragraph">`LVM 初始化 LUN 失败： c2t500A09818667B9DAD0 VxVM vxdisksetup 错误 V-5-2-5241 无法标记为无法获取磁盘几何结构。`</block>
  <block id="7a236b6a6e159589f0945bd0cd577b4e" category="paragraph">操作：确保已安装适用于 Solaris 可扩展处理器架构（ SPARC ）的最新修补程序 146019-02 。</block>
  <block id="de292f815f50984cffe974e125fe3f53" category="paragraph">`您必须在命令行上指定所有主机卷和 / 或所有文件系统，或者提供 -AutoExpand 选项。`</block>
  <block id="03c7bc116a4b3bc3126a43a776dac280" category="paragraph">`以下名称在命令行中缺失，但在 Snapshot &lt;snap2_5VG_SINGLELUN _remote&gt; 中找到： Host Volumes ： &lt;dg3/vol2&gt; File Systems ： &lt;/mnt/qa/dg3/vol2&gt;`</block>
  <block id="6ba7c40caecb471d66c779315ba9e0ae" category="paragraph">操作：执行单独的 SnapDrive snap connect` 命令，以使新的目标磁盘组名称（属于 `snap connect` 命令的一部分）与同一个 SnapDrive snap connect` 命令中已属于其他磁盘组单元的名称不同。</block>
  <block id="81b27d8c8af7b99d05031d1a0604ab52" category="paragraph">操作：使用带有 `all` 选项的 SnapDrive storage show` 命令查看主机上的实体列表。</block>
  <block id="d4fa3c5775fa466134333460922aa75c" category="paragraph">SnapDrive for UNIX 使用根存储系统（存储器）卷上的 `sdhostname.prbac` 或 `sdgenic.prbac` 文件作为其伪访问控制机制。</block>
  <block id="28cbc3f560014eafbc392bae659ea0d9" category="list-text">修改存储系统中的 `sd-hostname.prbac` 或 `sdgeneric.prbac` 文件，以包括以下必需权限（可以是一个或多个）：</block>
  <block id="6d1d22dbeb7b811e8b5a580168ddf3d2" category="paragraph">如果您尝试创建 Snapshot 副本，而对文件规范执行并行输入 / 输出操作，并且将 ` _snapcreate-cg-timeout_` 的值设置为紧急，则会发生此错误。</block>
  <block id="1940a537460c742aeaa8adc2a82c8998" category="paragraph">Solaris ： /etc/vfstab</block>
  <block id="06a2d8f039f708d7c5e3360b0dd5f9b4" category="paragraph">`0001- 796` 和 `0001- 767`</block>
  <block id="70002e4c7445dc93e693a000e2dccf80" category="paragraph">与 -vbsr 结合使用时，适用于 UNIX 快照的 SnapDrive 3.0 会发生这种情况。手动检查创建的任何较新的 LUN 是否不再使用，然后继续执行 ` -force` 选项。</block>
  <block id="1f8fc1500f3ba2a8d65991e6aa1b0b97" category="paragraph">` * 网络 int modify _-vserver vserver_name LIF_name-firewall -policy_mgmt_*`</block>
  <block id="9fa9535d08052c86c648012f8b249be2" category="paragraph">` * SnapDrive 配置准备 -_count count_value_*`</block>
  <block id="1d678dfddcd7c6e5843ce305a521a73f" category="paragraph">` -l egrep -i fail_` 并确保在 `multipath.conf` 文件中将 ` _flush_on_last_del_` 设置为 "yes" 。</block>
  <block id="87b07036e1657d1227a941f819f983a1" category="summary">SnapDrive for UNIX 存储命令通过创建 VxVM 对象来配置 VxVM 实体。</block>
  <block id="f18e39ce6dcd52b764ca3e57c2ed04cc" category="doc">VxVM 环境中的 SnapDrive for UNIX 配置</block>
  <block id="67077d2ec00aa718f8fb026cc2bf35af" category="paragraph">如果您请求用于 UNIX 存储的 SnapDrive 操作来配置 VxVM 实体，例如包含主机卷或文件系统的磁盘组，则 SnapDrive storage` 命令可与 VxVM 配合使用，以创建使用该存储的 VxVM 对象和文件系统。</block>
  <block id="3d8565d6c869690639793115ae1bd776" category="list-text">主机 VxVM 将存储系统中的 LUN 组合成磁盘或卷组。</block>
  <block id="f126ffcbe29b38f7bf5e150083705435" category="list-text">SnapDrive for UNIX 与主机 VxVM 集成在一起，以确定为 Snapshot 副本请求的每个磁盘组，主机卷和文件系统由哪些 NetApp LUN 构成。</block>
  <block id="c84fa45fc939b65aeeef65495fa335b7" category="summary">以下是在主机集群环境中使用 SnapDrive storage disconnect 命令的准则。</block>
  <block id="0441c6196121687720765fb53108e6c4" category="doc">在主机集群环境中使用 disconnect 命令的准则</block>
  <block id="a1a8ce92288dd0371234ab491fc63e51" category="paragraph">以下是在主机集群环境中使用 SnapDrive storage disconnect` 命令的准则：</block>
  <block id="d9e48fb74abd1cbf72a3621239c558c7" category="list-text">可以从主机集群中的任何节点执行 SnapDrive storage disconnect` 命令。</block>
  <block id="bb7ee2df935b8c82538d5b02332b2440" category="list-text">要成功执行存储断开连接操作，以下任一项均应为 true ：</block>
  <block id="71419d33a2db31c2a4e7ab4ff8cb67c1" category="list-text">存储实体应在主机集群中的所有节点之间共享。</block>
  <block id="054d27c1b7539199a7b85adf55b66385" category="list-text">LUN 应映射到主机集群中的所有节点。</block>
  <block id="249be42a785003411537d414e1f9893f" category="list-text">您可以使用 ` -DeviceType dedicated` 选项或在命令中完全省略 ` -DeviceType` 选项将存储实体与特定节点断开连接，因为默认值为 dedicated 。</block>
  <block id="1dba781c7e804bbb56df533e5f42933a" category="list-text">如果共享存储实体或 LUN 已使用 `d指定` 选项断开连接，或者专用存储实体或 LUN 已使用 `s共享` 选项断开连接，则 SnapDrive storage disconnect` 命令将显示错误。</block>
  <block id="2c611cb59ddb246c567341c2ac2a6829" category="list-text">SnapDrive for UNIX 会在主节点上执行 SnapDrive storage disconnect` 命令。它会销毁存储实体，断开所有非主节点上的 LUN ，然后断开 LUN 与主机集群中主节点的连接。如果在此过程中出现任何错误消息，则存储断开操作将失败。</block>
  <block id="a9aecdd5168db760c2a6752ae38e3fea" category="paragraph">[-DeviceType ｛ shared | dedicated ｝ ]</block>
  <block id="d1e5f26b1c5e6dc9deff12c7195fb369" category="paragraph">准备子系统以在 Solaris x86 子操作系统上创建 RDM LUN 。</block>
  <block id="5ae861bc939d2b4820dcca8226ab33c3" category="admonition">只有在没有主机实用程序的情况下使用 FCP 协议的情况下，才能在 Solaris x86 主机上使用这些命令。</block>
  <block id="6137be8d0d5ab3c146fe6943f92c24a4" category="paragraph">` * SnapDrive 配置检查 cluster*`</block>
  <block id="33d4b4da67f4c9d554ae1e18a1014a2d" category="paragraph">在 Solaris 主机上的 SFRAC 集群环境中检查以下内容：</block>
  <block id="a7658d21db0a3a96d9e114a48583f2bf" category="list-text">适用于 UNIX 的 SnapDrive 版本</block>
  <block id="be7d3028023fd2cc27271091b91d6154" category="list-text">组成员资格服务 / 原子广播（ GAB ）配置</block>
  <block id="5c3046a685c580aff08834444a96187c" category="list-text">集群状态</block>
  <block id="4225f69301dcfaea3ce8fa50461f19da" category="list-text">Host Cluster Volume Manager （ CVM ）状态</block>
  <block id="15a34c242720a11064bd86a0252df1aa" category="list-text">使用 rsh 或 ssh 在主机集群节点内进行安全通信</block>
  <block id="4e96e2e7467b59a7b28153c5ec870863" category="list-text">在 `snapdrive.conf` 文件中设置以下配置变量值的差异：</block>
  <block id="b1d303badc76c008704a229ed4a84859" category="list-text">`` default-transport= fcp_</block>
  <block id="6c22e1f56558239b5862bb190cda6067" category="list-text">multipathing-type=DMP</block>
  <block id="de0b073843798bcb152bc8342e10c297" category="paragraph">` * SnapDrive 克隆拆分估计值（ -lun ） _lun_name_ 【 lon_lun_name_...】 | [ ｛ -DG _ -vg _ -fs _ -hostvol _ -lvol ｝ _file_spec_ [_file_spec..._]] | [-snapname _lon_snap_name_] ｛ -volclonerone|-lunclone ｝ ] （ -v _ verbose ） ] （ -dump _ -dump _ -dumpall]* ）`</block>
  <block id="650178966fff60ba6a41de058d56e9f0" category="summary">重新启动主机系统后，使用 iSCSI 的 Solaris Volume Manager （ SVM\ ）创建的存储区域网络文件规范不会自动挂载，主机也不会启动。</block>
  <block id="ba6ce40fea85c1f1ae631aaaf8c72e82" category="doc">不会自动挂载使用 iSCSI 的 Solaris Volume Manager 创建的存储区域网络文件规范</block>
  <block id="9ba65187af2a577e36d4f0da34ffceb7" category="paragraph">重新启动主机系统后，使用 iSCSI 的 Solaris Volume Manager （ SVM ）创建的存储区域网络文件规范不会自动挂载，并且主机不会启动。</block>
  <block id="b1a77d3fa677d2e3d411b12e1536f60d" category="paragraph">如果主机启动，则可以使用上述步骤挂载文件规范。</block>
  <block id="425ab82eef7ef251b2f76c4afa318ab7" category="list-text">输入元集</block>
  <block id="f4d9f6126e16db1d95b5916b26766050" category="paragraph">` *-s dgname -t*`</block>
  <block id="86e83accefaf86e88acbeb4b1c77c789" category="paragraph">用于手动更改磁盘集所有权的命令。</block>
  <block id="7b8440d2bb931ecf6755445891e3c1e6" category="admonition">确保已定义 metadb 。</block>
  <block id="7708808947114625f49417ad8abfe2e6" category="list-text">输入</block>
  <block id="48b17b500a3a848a78c2fbcc04f5311b" category="paragraph">` * 挂载 -A*`</block>
  <block id="66453f74a311dcf1204413c195b2b40c" category="paragraph">用于挂载文件规范的命令。</block>
  <block id="30ac06e559085222122877687ebc7a16" category="paragraph">以下是 SnapDrive snap rename` 命令的示例。由于已存在名为 new snapshot copy 的 Snapshot 副本，因此第一个命令行包含 ` -force` 选项。在第二个示例中，两个 Snapshot 副本名称都使用较长的名称形式，但它们都将解析为同一个存储系统卷。</block>
  <block id="45198f3e4a681999faaef3adff1c231f" category="paragraph">` * SnapDrive snap create -fs /mnt/test -snapname _snapshotName_ -f -noprompts*`</block>
  <block id="cb3ac8374557ebdf48b17e374c29a6a6" category="summary">只有 Solaris 主机上的 Veritas SFRAC 才能对主机集群系统执行 SnapDrive 操作。</block>
  <block id="8abc086f9708ca8d7d2627ad39127973" category="doc">适用于 UNIX 的 SnapDrive 的主机集群环境</block>
  <block id="615d05534bdcd588512de72199c46dff" category="summary">通过主机集群模式 UNIX 系统上的 SnapDrive for UNIX ，您可以在主机集群范围的共享存储上创建存储并执行 Snapshot 操作。</block>
  <block id="f326dc35ae0ca67e91f0839a6372a265" category="doc">主机集群模式 UNIX 系统支持的操作</block>
  <block id="226f1a7c6d1836423dab165949c51991" category="paragraph">通过主机集群模式 UNIX 系统上的 SnapDrive for UNIX ，您可以在主机集群范围的共享存储上创建存储并执行 Snapshot 操作。</block>
  <block id="94b485862e9cd7770d64b72579eb2816" category="paragraph">快照操作在包含磁盘组，文件系统和 LUN 的存储系统上执行。您可以执行 Snapshot 操作，例如创建，重命名，还原，连接，断开连接， 显示和删除。</block>
  <block id="ff6c6b443156b1c3cd362e5e4c6a757c" category="admonition">只有 Solaris 主机上的 Veritas SFRAC 才能对主机集群系统执行操作。</block>
  <block id="185cf3a5553679a897e72b9cb6e839a6" category="list-text">将 ` _space-reservations enabled_m` 配置变量值设置为 ` _on_` 。</block>
  <block id="387f676023807ba2cc1b2b2ac285d497" category="paragraph">参数将覆盖 -space-reservations enabled 变量中提及的值。</block>
  <block id="7d6c5ca597a62b976a5e4cea8d5e2e54" category="paragraph">您可以使用 -reserve 和 -noreserve 和以下命令来启用或禁用 LUN 预留：</block>
  <block id="b97b0b97ad90779297cfd230be2c6b7e" category="paragraph">默认情况下， SnapDrive for UNIX 会为全新或新的存储创建操作启用空间预留。对于快照还原和快照连接操作，如果命令行未指定 ` _-reserve_` 或 ` _-noreserver_` 参数，或者配置文件中的值未被注释，则会使用 Snapshot 副本中的空间预留。</block>
  <block id="0ee543edc91a7bbcc98e7833709e48e4" category="paragraph">以下示例是从名为 ` _sun197-90_` 的主机发送的消息：</block>
  <block id="cea6b57743b495da2a3961612aca1165" category="paragraph">当 `lun create` 操作失败时， SnapDrive for UNIX 会向存储系统发送以下 AutoSupport 消息：</block>
  <block id="6e28a9f4b125a659e5cd8db14183e6fe" category="summary">介绍如何在 Solaris 平台上安装，配置和使用适用于 UNIX 的 SnapDrive 。</block>
  <block id="f108deeef5cb2dd2e09153ef7cf5a9e4" category="doc">《适用于 Solaris 的安装和管理指南》</block>
  <block id="6d9ab24a220a820c52717141fe90a328" category="paragraph">本指南介绍如何在 Solaris 平台上安装，配置和使用适用于 UNIX 的 SnapDrive 5.3.2 。</block>
  <block id="5e2c9d274a9b662dcc0a26dd71fb913a" category="paragraph">LUN （ -lun ` file_spec_` ）</block>
  <block id="3bde8941bdd12184b5b5f3692a7c726c" category="paragraph">磁盘组（ -dg ` file_spec_` ）或卷组（ -vg ` _file_spec_` ）</block>
  <block id="ec088689bb9fa9fb515296a4187dc68d" category="paragraph">文件系统（ -fs ` file_spec_` ）</block>
  <block id="26468562bb79547dbedec6a26f276207" category="paragraph">` 设备类型~`</block>
  <block id="b58a95baeb44a1dc97ba1801b774f3d0" category="paragraph">可选：指定用于 SnapDrive for UNIX 操作的设备类型。这可以是将 LUN ，磁盘组和文件系统的范围指定为集群范围的主机的 " `s共享` " ，也可以是 `d将 LUN ，磁盘组和文件系统的范围指定为本地的 " 已创建` " 。</block>
  <block id="291d1d33ee5a674ab4accad71e5716fb" category="paragraph">如果指定了 ` -DeviceType dedicated` 选项，则 SnapDrive 2.1 for UNIX 当前支持的 SnapDrive snap disconnect` 命令的所有选项将一如既往地发挥作用。</block>
  <block id="6a559d03f12c05aaebd7c0db98551280" category="paragraph">如果从主机集群中的任何非主节点使用 ` -DeviceType` shared 选项启动 SnapDrive snap disconnect` 命令，则该命令将发送到主节点并执行。为此，您必须确保为主机集群中的所有节点配置 root 用户的 `rsh` 或 `ssh` access without password Prompt 。</block>
  <block id="e3c2bd2d4c4cbaad1e5c92626506b42f" category="paragraph">` * 输入 *`</block>
  <block id="32927a0ad2404c4c20215ee63e3c8fe5" category="paragraph">iSCSI （硬件）</block>
  <block id="e8b692731f97ca459d39fae020cd4a66" category="paragraph">iSCSI （软件）</block>
  <block id="4c87b9adab0fdbc25828eac2f5f0fb85" category="list-text">对于 SFRAC 环境，运行 SnapDrive config check cluster` 命令。</block>
  <block id="6d812ea05f5e544cb2ac44e8397703bb" category="paragraph">此密码文件的条目错误。使用 SnapDrive config delete` 命令删除此存储系统的登录条目。然后使用 ` _sn SnapDrive config setuser_name_` 命令重新输入登录信息。</block>
  <block id="3a79164fcc5395d87b8a3510e20fcb4d" category="paragraph">此密码文件没有此存储系统的条目。对需要运行 SnapDrive for SnapDrive 的每个存储系统运行 ` _UNIX config setusername filername_` 命令。然后重试此操作。</block>
  <block id="8b0b7b40c38f111c77eccb88d7588d62" category="paragraph">在禁用自动主机准备的情况下，您应使用 SnapDrive config prepare lun` 命令来准备主机以配置 LUN ，或者手动执行准备步骤。</block>
  <block id="c9eca7a39376a4a6d65d2f23dc18ad74" category="paragraph">要创建受限的 FlexClone ，您需要在 `snapdrive.conf` file 中设置选项 `san-clone-method =optimal` 或提供 ` -clone optimal` ，然后才能连接文件规范。此示例显示了要连接驻留在 LUN 主目录中的文件规范 ` /mnt/fs1` 的结果：` /vol/vol1/lun1`</block>
  <block id="06cc3d707e8f43b745121cc958c9927e" category="image-alt">SDU RBAC Process 01 Solaris</block>
  <block id="d6bc5d5b9dd4b765516c17a63b6a764b" category="summary">要从主机集群中删除新节点，请按照适用于 Solaris 的 Veritas Cluster Server 安装指南中的说明进行操作。配置 LLT 和 GAB 后，必须使用 SnapDrive storage disconnect 命令取消映射主机集群中所有共享存储实体的所有 LUN 。</block>
  <block id="fa97db8ee23fa403a3fc39537b9bc30e" category="doc">从主机集群中删除节点</block>
  <block id="e066fb49336a553241e0b9f5641a4a4d" category="paragraph">要从主机集群中删除新节点，请按照适用于 Solaris 的 _Veritas 集群服务器安装指南中的说明进行操作。配置 LLT 和 GAB 后，必须使用 SnapDrive storage disconnect` 命令取消映射主机集群中所有共享存储实体的所有 LUN 。</block>
  <block id="281817150f5e389351ad52c156bb6999" category="summary">当某个集群模式存储系统关闭时，用于在 Solaris 主机上创建，连接，删除或断开 LUN 的 SnapDrive for UNIX 命令需要几分钟才能完成。</block>
  <block id="d96e32eb98596cee66b78f2db16503f6" category="doc">当存储集群处于故障转移模式时，某些命令会延迟</block>
  <block id="8a8b40a05d2c3568aac9882f102c7877" category="paragraph">此类命令包括 SnapDrive storage create` ， SnapDrive storage connect` ， SnapDrive storage delete` ， SnapDrive storage disconnect` ， SnapDrive snap connect` ， SnapDrive snap disconnect` ，有时还包括 SnapDrive snap restore` 。</block>
  <block id="8c53bb39c89228770befa65314e5bd35" category="paragraph">只有当 SnapDrive for UNIX 需要还原已删除或断开连接的 SnapDrive 时，此问题才会影响 LUN 快照还原` 。</block>
  <block id="b3dd7dfcedd2c640d09e7a576468b401" category="list-text">可以从集群中的任何节点执行 SnapDrive storage resize` 命令。</block>
  <block id="9db027287aae555847a1258336813290" category="list-text">SnapDrive storage resize` 命令不支持 ` -DeviceType` 选项。</block>
  <block id="d333352176d8c6da319f4b85a2613b9d" category="paragraph">SnapDrive 存储连接 -fs _file_spec_ -lun _lon_lun_name_ LUN_name...] [-DeviceType shared] （ -mntets 选项）`</block>
  <block id="ced5f52d870011961d9fc6ee78ed5479" category="summary">您必须了解在主机集群环境中使用 snapdrive storage delete 命令的一些准则。</block>
  <block id="da0176e9ef9b375cdb14982c077058f7" category="doc">在主机集群环境中删除存储的准则</block>
  <block id="14ea3a3453355672002e63a335040294" category="paragraph">您必须了解在主机集群环境中使用 SnapDrive storage delete` 命令的一些准则。</block>
  <block id="c201f65f22aca1286b6f58f444815c57" category="list-text">如果您从主机集群中的任何非主节点使用 ` -DeviceType` shared 选项启动 SnapDrive storage delete` 命令，则该命令将发送到主节点并执行。要做到这一点，您必须确保所有主机集群节点上都允许使用 rsh 或 ssh `access-without password-Prompt` 。</block>
  <block id="f2b92dce74b1c0458963baf9308f1b28" category="list-text">可以从主机集群中的任何节点执行 SnapDrive storage delete` 命令。</block>
  <block id="4564915aa19353064d0a2f25d26e6503" category="list-text">要成功执行存储删除操作，两者都不应为 false ：</block>
  <block id="d7bb1962423ed6e612200fa2cf605add" category="list-text">必须共享存储实体。</block>
  <block id="8f098a9353076912165ac3863ad4c7f9" category="list-text">您可以通过使用 ` -DeviceType dedicated` 选项或在命令行语法中省略 ` -DeviceType` 选项来删除特定节点上的存储实体，因为默认值为 dedicated 。</block>
  <block id="57c9478c58c8197ac7356627a90c0d63" category="list-text">如果使用 ` 设备类型专用` 选项删除共享存储实体或 LUN ，或者使用共享选项删除专用存储实体或 LUN ，则 SnapDrive storage delete` 命令将显示一条错误消息。</block>
  <block id="19dd4443ed77fbd230ff4c1ecd2a705a" category="list-text">如果发生以下情况之一，存储删除操作将失败：</block>
  <block id="2ff2c832b467773bde5b8ba8993239ba" category="list-text">删除存储实体期间发生任何错误。</block>
  <block id="dff668d1d19867dcf4a800a171b5d661" category="paragraph">SnapDrive for UNIX 将删除存储实体，断开 LUN 与所有非主节点的连接，然后断开 LUN 与主机集群中主节点的连接并将其删除。</block>
  <block id="42185b9e7a711b81f21067b65a9bba84" category="list-text">如果主机集群中的节点在执行 SnapDrive storage delete` 命令之前关闭并重新启动，</block>
  <block id="56d81ffb50c4850379bc35ea0770da3e" category="paragraph">发生这种情况的原因是， LUN 仍映射到非现有节点。要避免这种情况，请使用 ` -force` 选项。</block>
  <block id="3b824d4dc1c50b57e153621d5cec1ab0" category="summary">您可以还原包含单个存储实体的 Snapshot 副本。</block>
  <block id="50f3e8c22bef0db31fcdd2c8e4dd5008" category="doc">还原存储系统或存储系统 HA 对上的单个存储实体</block>
  <block id="c7846d15c770d36b8b90bdd50d191c9c" category="paragraph">您可以还原包含驻留在存储系统或存储系统 HA 对上的单个存储实体的 Snapshot 副本。目标存储系统上的卷名称必须与源存储系统上的卷名称匹配。</block>
  <block id="ce745364e5286802d1a9bc6408589083" category="paragraph">与 SnapDrive storage ` ｛ show | list ｝` 命令结合使用，可显示主机已知的所有设备和 LVM 实体。</block>
  <block id="36a142e65a75298bb90f2a7217220a66" category="paragraph">-`apabilities`</block>
  <block id="f3296565c13c9c509262790f9dbca338" category="paragraph">与 storage ` ｛ show | list ｝` 命令结合使用，可显示主机已知的所有设备。</block>
  <block id="a9e9382baf648dc7775915ddc12b1586" category="paragraph">指定用于 SnapDrive for UNIX 操作的设备类型。以下是此选项的值：</block>
  <block id="c38ee4bed333dea6fd3e906c79d6f417" category="list-text">`shared` - 将 LUN ，磁盘组和文件系统的范围指定为主机集群。</block>
  <block id="cde973425d40341b27bf5c8d8812f2c8" category="list-text">已 `d的` 指定 LUN ，磁盘组和文件系统的范围为 local 。这是默认值。</block>
  <block id="fb5c1d8bfbe3725f5d3b7b6958d05dfe" category="paragraph">如果未在 SnapDrive for UNIX 命令中指定支持此选项的 ` -DeviceType` 选项，则相当于指定 ` -DeviceType dedicated` 。</block>
  <block id="46f7ee1d5784a4623ff3d5681897aa58" category="paragraph">要用于 SnapDrive for UNIX 操作的文件系统类型。文件系统类型必须为 SnapDrive for UNIX 操作系统支持的类型。可以为此变量设置的当前值为</block>
  <block id="ba10357590522fd448e16c1a1525c2ba" category="paragraph">您提供的 ` -mntopts` 参数是一个文件系统类型选项，使用 `mount` command `` "` - o` " 标志指定。请勿在 ` -mntopts` 参数中包含 ` "` - o` "` 标志。例如，序列 ` -mntopts _tmplog_` 会将字符串 ` -o _tmplog_` 传递到挂载命令行，并在新命令行中插入文本 ` "`tmplog` "` 。</block>
  <block id="aa3659e928fa87c6614ee4775c07495b" category="paragraph">使用此选项直接在 LUN 上连接或创建文件系统的所有命令都不接受主机集群或共享资源使用此选项。只有本地资源才允许使用此选项。如果已启用 ` -DeviceType` shared 选项，则无法使用此选项，因为 ` -nolvm` 选项仅对本地资源有效，而对共享资源无效。</block>
  <block id="18719af1bf76faa0d3bd8438ae67e888" category="paragraph">创建 Snapshot 副本时，为无相关写入的 ` file_spec_` 实体创建 Snapshot 副本。由于这些实体没有依赖写入，因此 SnapDrive for UNIX 会为各个存储实体创建崩溃状态一致的 Snapshot 副本，但不会采取措施使这些实体彼此保持一致。</block>
  <block id="8b470c93ec1c65ffe4fa8a9799058519" category="paragraph">卷管理器必须是 SnapDrive for UNIX 支持您的操作系统的类型。可以为此变量设置的当前值为 VxVM 。</block>
  <block id="5b06c08efce95254c2679af2ab8cda31" category="summary">您可以使用 SnapDrive 命令创建，还原和管理 VxVM ，原始设备和 NFS 实体的 Snapshot 副本。</block>
  <block id="376081be375b96affab4d9a98fd1df82" category="doc">如何管理 VxVM ，原始设备和 NFS 实体的 Snapshot 副本</block>
  <block id="76c8b3c1a9ff10101123e66b038bd770" category="admonition">主机集群系统不支持 NFS 实体。</block>
  <block id="f007a82a0481377d99207a3134c33d13" category="summary">在运行任何 SnapDrive for UNIX 命令之前，您必须了解 Web 服务和守护进程以及如何使用它们。所有 SnapDrive for UNIX 命令均使用守护进程服务运行。在 Solaris 主机上使用 SnapDrive for UNIX 之前，必须启动守护进程，以便 SnapDrive for UNIX 能够与其他 NetApp 和非 NetApp 产品无缝安全地集成。</block>
  <block id="c34b322fae8b50e292fd5fa54d7f0a75" category="paragraph">例如，在 Solaris 主机上， LUN 必须受 DMP 控制。换言之， LUN 必须具有对应的 ` /dev/vx/dmp` 设备。</block>
  <block id="db38604c65065ade353f43fb514edf7f" category="paragraph">` * SnapDrive storage disconnect -lun _long_lun_name_ [_lun_name..._]*`</block>
  <block id="02fadcc6b1784421d060f81ac1cb85c8" category="paragraph">完成 VMotion 后，您必须使用 SnapDrive storage connect` 命令连接 RDM LUN 。以下语法：</block>
  <block id="7849a4c2fcedddf005c493805e432b5e" category="paragraph">` * SnapDrive storage connect -lun _lon_name_ [_lun_name ..._]*`</block>
  <block id="d843d49e896bff42a20dbe9b4bbf9cac" category="summary">某些环境支持使用 SnapDrive for UNIX 创建 Snapshot 副本，但某些环境则不支持。请参见准则了解更多信息。</block>
  <block id="46acc0fe93b3de6c6d1a865a4e4efbbd" category="doc">在主机集群环境中创建 Snapshot 副本的准则</block>
  <block id="951e49f7bb28878616a25999de926e8e" category="list-text">SnapDrive for UNIX 可以为与 Veritas SFRAC 4.1 环境中的主机集群配对节点共享的磁盘组和文件系统创建 Snapshot 副本。</block>
  <block id="da43ecc79438eb667bfd1d7be7ed42e2" category="list-text">可以从主机集群中的任何节点调用 Snapshot 创建操作。</block>
  <block id="4a29838830e0f8d22935c91838002c72" category="list-text">在此操作中指定的多个文件系统和磁盘组应具有相同的作用域：也就是说，所有文件系统和磁盘组都应共享，或者所有文件系统和磁盘组都应专用。</block>
  <block id="3e3a0222fc5d2de3c091982cd5c0a025" category="list-text">不支持集群范围共享模式下的 NFS 文件系统，但支持主机集群节点中专用模式下的 NFS 文件系统。</block>
  <block id="7e86acf622e22a05f4b15df8a031c6b8" category="list-text">原始 LUN 不支持文件系统。</block>
  <block id="c14c53a9cef659e331998f1db404d33a" category="summary">在安装 SnapDrive for UNIX 之前，必须安装 Solaris Host Utilities 。</block>
  <block id="1fc64f0f310857ebca79246782aed2cd" category="list-text">要安装 Solaris Host Utilities ，请参见 Solaris Host Utilities 文档，以确保系统设置正确。</block>
  <block id="64bbee9d0cc54bc8983fa9b7eb5a10f3" category="paragraph">其中包含有关在安装 SnapDrive for UNIX 之前必须设置的卷管理器，多路径以及其他功能的信息。</block>
  <block id="debab70f312e2d40c70e1ec6ed602b6d" category="paragraph">要拆分 FlexClone 卷，还需要使用 `snap connect` 命令指定 ` 拆分` CLI 选项。要断开连接，应使用 disconnect 命令提供 ` -split` 选项，以 `disconnect` 拆分的 FlexClone 卷。此处有效的是启动 ` 拆分` 操作的阻止和非阻止模式。</block>
  <block id="0ad71ef65a691a74bca8e9a50553b324" category="paragraph">此问题的临时解决策是还原到 Snapshot 副本的原始名称，并确保在 `snapdrive.conf` 文件中将 ` bypass-SnapDrive-clone-generated_check_` 设置为 `on` 。</block>
  <block id="10e9795b1a331ceefc90b4f1347e3c8f" category="paragraph">` * SnapDrive 配置 delete _appliation_name_ [_appliation_name_]*`</block>
  <block id="d8aab1c709dc974c846de3af425cae4a" category="summary">SnapDrive for UNIX 不会显示存储创建操作支持的文件系统类型。</block>
  <block id="c5ca6d4349c9fdb0d5683ec0aea1749d" category="doc">SnapDrive for UNIX 不会显示存储创建操作支持的文件系统类型</block>
  <block id="51dfd0ab2f2aeee03462d8efe3d6a3d6" category="paragraph">如果满足以下条件， SnapDrive 存储创建操作将无法使用 ` -fstype` 选项和 iSCSI 传输通过原始 LUN （无任何卷管理器组件的 LUN ）创建 UFS 文件系统：</block>
  <block id="eb2ad941f2ff6444cc0493a929783b75" category="list-text">UFS 文件系统存在</block>
  <block id="c1a74caf4a6f07b9bda05f65b02d6df0" category="list-text">未安装 VxVM 组件（ VxVM ， VxFS 和 DMP ）</block>
  <block id="456a266f99d4cf65614bab0ee84891ab" category="list-text">已加载适用于 Emulex 的 HBA 驱动程序</block>
  <block id="dd7e726a00a5338c54fa3004b7e8c086" category="paragraph">如果操作失败，将显示以下错误消息。</block>
  <block id="a3fe010003e1b2bbd62c0d1a5cfb1aec" category="paragraph">使用 `modunload` 命令卸载主机上的 Emulex 驱动程序（ lpfc ）。</block>
  <block id="70e080ef28a23712b422ede398a8f901" category="paragraph">在此示例中，文件规范跨越两个存储系统卷 vol1 和 vol2 。unix_host 的管理员（ root ）不对这两个卷都具有 `s D Storage.Write` 访问权限。因此， SnapDrive for UNIX 会为每个卷显示一条错误消息。要继续创建存储，管理员（ root ）必须要求 Operations Manager 控制台管理员对这两个卷授予 `s .D 存储写入` 访问权限。</block>
  <block id="5f3a3a58e3009709eee4ce5266a88e6e" category="paragraph">如果在 ` -vbsr` 中未提供任何参数，则默认输出为预览选项的输出。使用 ` -verbose` 选项，可以详细输出用户可能会覆盖的所有必需检查。未提供 -verbose 选项时的默认输出将显示失败的检查的结果。</block>
  <block id="4495c4b6f2963263893fc9d970314d1b" category="paragraph">` -DeviceType Shared` 在 ` -vbsr` 中提供专用 选项支持。这样，可以通过基于卷的 SnapRestore 支持主机集群范围的共享主机文件规范。这与支持单个文件快照还原相同。</block>
  <block id="3741a8717b33e85e013a865ab52ff156" category="paragraph">` * SnapDrive snap disconnect ｛ -dg _ -fs ｝ _file_spec_ [_file_spec..._] ｛ -dg _ -fs ｝ _file_spec_ [_file_spec..._]...] _long_snap_name_ [-full] [-DeviceType shared] [-fstype _type_] [-vmtype _type_] [-split]*`</block>
  <block id="7aa5c2a18efa28f06ba5ffe56527017f" category="paragraph">SnapDrive lun fixpaths` 命令会尝试修复至少没有一个活动优化路径的 LUN 的路径。` lun_name_` 是 LUN 的名称。如果未指定 LUN ，则会对至少没有一个活动优化路径的所有 LUN 执行此操作。</block>
  <block id="c6e400ed74dd45f10f4e0a7b8bf92f4c" category="paragraph">您可以从 ` /opt/NTAPsnapdrive/setup/config_wizard` 运行配置向导</block>
  <block id="89b0a77a54f1e2eec432ef27576c469c" category="list-text">将 ｛ Global ， dfm.Database.Write ｝ 功能分配给 SD-admin</block>
  <block id="dfc07905b71eabcdc7e7fcccec0b858c" category="paragraph">LUN （` -lun _file_sfe_c` ）</block>
  <block id="f4f54e6b230c7df44881cf8e2dab4795" category="paragraph">可选：确定是否要覆盖现有 Snapshot 副本。如果没有此选项，则如果您提供现有 Snapshot 副本的名称，此操作将暂停。提供此选项并指定现有 Snapshot 副本的名称时，系统会提示您确认是否要覆盖此 Snapshot 副本。要防止 SnapDrive for UNIX 显示提示符，请同时包含 ` -noprop` 选项。（如果要使用 ` -noprop` 选项，则必须始终包含 ` -force` 选项。） 如果您尝试还原自上次 Snapshot 副本以来配置发生更改的磁盘组，则必须在命令提示符处包含 -force 选项。例如，如果在创建 Snapshot 副本后更改了数据在磁盘上条带化的方式，则需要包含 -force 选项。如果没有 ` -force` 选项，此操作将失败。此选项会要求您确认要继续此操作，除非您在其中包含 ` -noprop` 选项。</block>
  <block id="a0833665ef1df7982b86cfb5bd122c14" category="paragraph">如果指定了 ` -DeviceType` dedicated 选项，则 SnapDrive 2.1 for UNIX 当前支持的所有 SnapDrive restore connect` 命令选项将一如既往地发挥作用。</block>
  <block id="31dd33cece7934977ce8bc47940c547e" category="paragraph">如果从主机集群中的任何非主节点使用 ` -DeviceType shared` 选项启动 SnapDrive restore connect` 命令，则该命令将发送到主节点并执行。为此，您必须确保为主机集群中的所有节点配置 root 用户的 `rsh` 或 `ssh` access-without 密码提示符。</block>
  <block id="ce5f3638b372dab2340f473dbe644a9c" category="paragraph">mntopts</block>
  <block id="d7f466de08f76a032fdbe3fa8ada6aea" category="admonition">在使用 Veritas 的 Solaris 上， `snap connect` 操作需要适用于 `vximport` 的 Storage Foundation Enterprise 许可证。</block>
  <block id="d84c53c38649a04ed4eb9d88d0b1ef28" category="paragraph">如果省略此名称，则 snap connect 命令将使用您为 ` src_fspec_` 提供的值。</block>
  <block id="a2ef1079252fc31dd6bca3e8d5aee47b" category="paragraph">如果未指定连接目标磁盘组中的实体所需的名称，则 `snap connect 命令` 将从源磁盘组中获取此名称。如果不能使用该名称，则操作将失败，除非您在命令提示符处包含 ` -autorename` 。</block>
  <block id="f4a206a9c9a07b65c2e5923b7822d973" category="list-text">在 Solaris 主机上连接 Snapshot 副本时， SnapDrive for UNIX 会挂载文件系统，然后在主机的文件系统表中为构成文件系统的 LUN 放置一个条目。</block>
  <block id="d394f380a50699b7abd7740942c6e72b" category="paragraph">如果在命令提示符处包括 ` -autosename` 选项，则表示 ` -AutoExpand` 选项，即使不包括该选项也是如此。</block>
  <block id="d0444bd6761b8e9d2b1189262b5a1c02" category="paragraph">如果指定了 ` -DeviceType` dedicated 选项，则 SnapDrive 2.1 for UNIX 当前支持的 SnapDrive snap connect 命令的所有选项将一如既往地发挥作用。</block>
  <block id="ac3cbc6b6488bb90af429ec90673eed8" category="paragraph">如果从主机集群中的任何非主节点使用 ` -DeviceType shared` 选项启动 SnapDrive snap connect` 命令，则该命令将发送到主节点并执行。为此，您必须确保为主机集群中的所有节点配置 root 用户的 `rsh` 或 `ssh` access-without 密码提示符。</block>
  <block id="5671ffc7373a137e6ec2274018a31825" category="list-text">`` _mntopts_ ` 参数是使用 mount 命令 ` -o` 标志指定的文件系统` 类型 选项。请勿在 ` _-mntopts_` 参数中包含 ` -o` 标志。例如，序列 -mntopts tmplog 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="ab9f0f24830419c11b238fb1bb0ee56c" category="paragraph">对于 Solaris ， SnapDrive for UNIX 可接受： `VxFS` 或 `UFS` 。</block>
  <block id="cecd13676fa4b294ceee5b8dc289302b" category="paragraph">` -mntopts` 参数是使用 `mount` command ` -o` 标志指定的文件系统 ` 类型` 选项。请勿在 ` -mntopts` 参数中包含 ` -o` 标志。例如，序列 ` -mntopts tmplog` 会将字符串 ` -o tmplog` 传递到 `mount` 命令，并在新命令行中插入文本 tmplog 。</block>
  <block id="8d2cba6dca6f8366a2553f65a591437c" category="list-text">使用 ` -noper` 创建文件系统，而不向主机上的文件系统挂载表文件添加条目。默认情况下， SnapDrive storage create` 命令会创建永久性挂载。在 Solaris 主机上创建 LVM 存储实体时， SnapDrive for UNIX 会自动创建存储，挂载文件系统，然后在主机文件系统表中为文件系统放置一个条目。</block>
  <block id="6f3619729dea034c19edcf32220b913c" category="paragraph">` -DeviceType` 选项指定用于 SnapDrive for UNIX 操作的设备类型。此类型可以是 "Shared" （共享），即将 LUN ，磁盘组和文件系统的范围指定为集群范围的主机，也可以是 "dedicated " （专用），即将 LUN ，磁盘组和文件系统的范围指定为 "local" （本地）。</block>
  <block id="e4905dc816196d89b3dba55ab27ad8f8" category="paragraph">尽管存储创建过程是从主机集群主节点启动的，但必须在每个主机集群节点上执行 LUN 发现和 LUN 的主机准备工作。因此，您应确保所有主机集群节点上都允许 SnapDrive for UNIX 使用 rsh 或 ssh access-without 密码提示符。</block>
  <block id="f22da4af310caa43b8f753ab5b42a496" category="paragraph">您可以使用 SFRAC 管理命令查找当前集群主节点。` -DeviceType` 选项指定用于 SnapDrive for UNIX 操作的设备类型。如果未在 SnapDrive for UNIX 命令中指定支持此选项的 ` -DeviceType` 选项，则相当于指定 ` -DeviceType dedicated` 。</block>
  <block id="d17bac2b2e864118d4b71918f070b830" category="list-text">在 FC 和 iSCSI 配置中，存储系统上的 `set snap reserve` 对于每个卷均设置为 0% 。</block>
  <block id="54c575d6c52dfbea385590d9ca5e53e5" category="list-text">SnapDrive 配置准备 LUN -count 计数为 &lt;-DeviceType ｛ shared| dedicated ｝ ]`</block>
  <block id="ba9ba8fba0bb4b83c778c064fead5b32" category="summary">断开 NFS 实体的 Snapshot 副本连接时， SnapDrive for UNIX 会卸载文件系统，删除文件系统中的挂载条目，删除挂载点等。</block>
  <block id="0c4937bcdd71d0c7cb48f60dccd636fc" category="doc">在主机集群环境中断开 Snapshot 副本连接的准则</block>
  <block id="4225bf5a34c031517976c8f3b724ce7a" category="list-text">可以从主机集群中的任何节点执行 SnapDrive snap disconnect` 命令。</block>
  <block id="e303353a486013dfd5c4ebba1a8c1421" category="list-text">要成功执行 Snapshot 断开连接操作，以下任一项均应为 true ：</block>
  <block id="1c53997e164088dac698fa89854f1897" category="list-text">您可以使用 ` -DeviceType dedicated` 或 `shared` 选项断开存储实体与特定节点的连接。如果要断开处于专用模式的存储实体的连接，则可以在命令行语法中省略 ` 设备类型` 选项，因为默认值为专用。</block>
  <block id="16798b5558c1b30f327f71e96c428efc" category="list-text">如果共享存储实体或 LUN 与 `d指定` 的选项断开连接，或者专用存储实体或 LUN 与共享选项断开连接，则 SnapDrive snap disconnect` 命令将显示错误。</block>
  <block id="4e77e77273bada3cd61d7da8d1c3ea68" category="list-text">SnapDrive for UNIX 会在主节点上执行 SnapDrive snap disconnect` 命令。它会销毁存储实体，断开所有非主节点上的 LUN ，然后断开 LUN 与主机集群中主节点的连接。如果遇到任何错误， Snapshot 断开操作将失败。</block>
  <block id="be44e5d7a3ca43a2ba9eb0746b3d9fc1" category="doc">创建 VxVM 实体并指定 LUN</block>
  <block id="6cfaaac84bde205161227d0dd8e39ad8" category="paragraph">在 Solaris 主机上，此示例将在三个 LUN 上创建文件系统访问集，并明确命名卷组及其下的主机卷。每个 LUN 均为 10 GB ：</block>
  <block id="a13ccc250a27a68c3be031424e31b362" category="paragraph">` # SnapDrive lun storage create -fs /mnt/Acctfs -hostvol Acctfsdg/Acctfshv -lun Acctfiler ： /vol/vol1/luna lunb lunc -lunsize 10g`</block>
  <block id="02b15dab2fb8002c3f1ddcbac68138c7" category="list-text">` /opt/NTAPsnapdrive/docs/SnapDrive.1`</block>
  <block id="ed0245000b15e21a1b7b03002c37144d" category="list-text">` /opt/NTAPsnapdrive/docs/snapdrived.1`</block>
  <block id="046c64cce9fa8360ec59859678b330e5" category="list-text">` /opt/NTAPsnapdrive/docs/SnapDrive.1.html`</block>
  <block id="8d13c67b5f6b107c8a1a3a770938f14b" category="list-text">` /opt/NTAPsnapdrive/docs/snapdrive.1.html`</block>
  <block id="75a93158d453d385ee30fe7c6abe6169" category="list-text">` /opt/NTAPsnapdrive/docs/solaris info.1`</block>
  <block id="8a028c80892c583ffd919ca49cde2bb7" category="list-text">` /opt/NTAPsnapdrive/docs/Brocade_info.1`</block>
  <block id="d39c0b301168dc7e2199a18dabb1ee64" category="list-text">` /opt/NTAPsnapdrive/docs/McData info.1`</block>
  <block id="cb2cade09627abdd6fb8e840a07a2aa7" category="list-text">` /opt/NTAPsnapdrive/docs/cisco_info.1`</block>
  <block id="8b0b48f8c38601328be877a8ab780905" category="list-text">` /opt/NTAPsnapdrive/docs/filer_info.1`</block>
  <block id="2c57a91d1ea82edab849b01b4b969bc0" category="list-text">` /opt/NTAPsnapdrive/docs/SnapDrive.dc.1`</block>
  <block id="09fb8a8b64122f949931002bc73f414a" category="paragraph">如果在稀疏根区域中安装 SnapDrive for UNIX ，则它不会在 ` /usr/share/man/` 中添加手册页，因为 ` usr/share/man/` 会挂载为只读文件系统。要在稀疏根区域中提取手册页，请运行 `pkgtrans NTAPsnapdrive.pkg /tmp` 命令。运行命令后，手册页将解压缩到 ` /tmp/NTAPsnapdrive/root/opt/NTAPsnapdrive/docs` 。</block>
  <block id="e9a8105572fde0ee93eda8de2ccb5929" category="paragraph">` * SnapDrive storage create -fs _file_spec_ -nolvm （ -fstype 类型）【 -fsopts options】 【 -mntets options】 【 -filervol _long_filer_path_ -lunsize _size_ 【 -igroup _ig_name ...]_[ ｛ -esreserve ｝ _noresreserve _ves_`</block>
  <block id="50dc9be84cdc73f188912f3e721f03ff" category="paragraph">` * SnapDrive storage connect-fs _file_spec_ -hostvol _file_spec_ -lun _lun_name_ [_lun_name..._] [-igroup _ig_name_ [_ig_name..._]] [-noperistre] [-mntopts _options_] [-fstype _type_]_vm_type_]`</block>
  <block id="cbffd8f32e3e4de7d5c46e1fbbf9093f" category="paragraph">如果 Solaris 主机上超过此限制，则会显示类似以下内容的错误消息：</block>
  <block id="cd414b21752a38901fd064863444026c" category="paragraph">`0001-001 管理员错误：无法打开设备 /dev/rdsk/c1t1d26s2`</block>
  <block id="200c80c8471bc1a5463bead04dea5640" category="paragraph">如果 SnapDrive for UNIX 管理员指定了 -` -igroup` CLI 选项，或者您使用手动创建的启动程序组，则 `igroup` 名称不一定需要主机名。由于上述所有原因， SnapDrive for UNIX 无法可靠地检测 LUN 的本地或远程绑定。因此， SnapDrive for UNIX 会在基于卷的 SnapRestore 中显示完整的 LUN 启动程序组和启动程序信息。</block>
  <block id="c477ad70257ce16e3b72e2a9db961cab" category="list-text">`snap reserve` 选项设置为 `0`</block>
  <block id="7ade3a011e0f8a5c619173e9a32e96ba" category="paragraph">如果缺少此文件， SnapDrive for UNIX 将检查 `snapdrive.conf` 文件中的配置变量 ` 全部访问 -if-rbac 未指定 _` 。如果将变量设置为 on （默认值），则允许主机完全访问该存储系统上的所有这些操作。如果将变量设置为 `off` ，则 SnapDrive for UNIX 将拒绝主机对该存储系统执行由访问控制管理的任何操作。</block>
  <block id="30d2ae1062c19c66ec28f95195c38d96" category="summary">您必须先准备子系统，然后才能在系统上安装 SnapDrive for UNIX 。在准备子系统时，您必须安装 Solaris Host Utilities 。</block>
  <block id="48fde94396e50379208d4c39fc3daefa" category="paragraph"><block ref="48fde94396e50379208d4c39fc3daefa" category="inline-xref-macro-rx"></block></block>
  <block id="c0f687ac281ef3f7d6e9faf4642a0ecb" category="paragraph">`sdu-daemon-certificate-path=/opt/NTAPsnapdrive/SnapDrive.pem` 在 `snapdrive.conf` 文件中指定的路径。</block>
  <block id="b5d781c18e4781a34b39224fba56cfab" category="paragraph">对于每个 RDM 条目，整个 RDM 映射条目均为 ` 映射的原始 LUN_` 。</block>
  <block id="e089fb1b15640401a3269b1d37db2b06" category="list-text">更改为目录 `cd /vmfs/volumes/Data` store path 。</block>
  <block id="8e261f4af3d51ebd5173814450790f05" category="list-text">删除所有嵌入了 SMVI 字符串的 `vmdk` 文件。或者，您也可以使用 LUN 名称来标识 vmdk 文件。</block>
  <block id="92c3dfe6639233e7fecd75d0aeccbea9" category="paragraph">如果您的 `vmdk` 文件名称为 ` _rdm1_` ，请仅删除 ` _rhel4u8-141-232_smvi_vol_esx3u5_rdm1-rdmp.vmvmvmdk` 和 ` rhel4u8-141-232_smvi_vol_esx3u5_mvmvm_ 文件。`</block>
  <block id="29fc43b7cc63264bccf434992df1d66d" category="paragraph">删除 ` _vlnx5U4-197-23_smvi_10.72.197.93_C4koV4XzK2HT_22-rdmp.vmdk_` 和 ` _vlnx5U4-197-23_SMVI_10.72.197.93_C4koV4XzK2HT_22.kmnv_v4.5k_v_v_v4.93_v4.5cv_v_v4.5cv_v_v4.5cv_v4.93-v4.cv4.5cv_v_v4.9_v4.cv4.cv4.93_v4.cv4.cv4.cv_`</block>
  <block id="6892f9f9e2c91b784e835e2e2a6ce09f" category="paragraph">以下示例显示了如何从 vmx 文件中删除 vmdk 文件条目。</block>
  <block id="8a8be6a946b00e51e4f24e7992eba1fb" category="section-title">对 Solaris 的限制</block>
  <block id="903a0cecfbeba4060e9ce866b2f2ebdf" category="list-text">不支持标签大于 1 TB 的存储管理计划（ Storage Management Initiative ， SMI ）的 LUN 。</block>
  <block id="d453ff9d0743a9bb2255b1fc72baa4dd" category="list-text">不支持同一磁盘组中的可扩展固件接口（ EFI ）和 SMI LUN 。</block>
  <block id="b9748e148a627bd324d588be9ed27b98" category="summary">通过对子操作系统的 SnapDrive for UNIX 支持，您可以创建存储并管理 LUN ，文件系统，逻辑卷和磁盘组的 Snapshot 副本。要配置 RDM LUN ，您需要在 SnapDrive.conf 文件中指定光纤通道 \ （ FC\ ）协议。</block>
  <block id="ada1b38b63f10071e4314c96c94adb05" category="doc">支持子操作系统</block>
  <block id="36a2d2bd93afa2fbdf1ee510405f2e64" category="paragraph">通过对子操作系统的 SnapDrive for UNIX 支持，您可以创建存储并管理 LUN ，文件系统，逻辑卷和磁盘组的 Snapshot 副本。要配置 RDM LUN ，您需要在 SnapDrive.conf 文件中指定光纤通道（ FC ）协议。</block>
  <block id="4a3b12817c97250fa5340e705412f5ed" category="list-text">创建包含 LUN ， RDM LUN ，文件系统，逻辑卷和磁盘组的存储。</block>
  <block id="7d83b5250a5821203bff753058a9c909" category="paragraph">创建存储后，您可以增加或减少存储容量，将存储连接到主机或断开连接，以及显示有关存储的配置信息。</block>
  <block id="ef7fdb6680a56d0d4154924a8f7af152" category="paragraph">Snapshot 副本可以包含文件系统，逻辑卷，磁盘组， LUN ， RDM LUN ， 和 NFS 目录树。创建 Snapshot 副本后，您可以重命名，还原或删除此 Snapshot 副本。您也可以将 Snapshot 副本连接到同一主机或不同主机上的其他位置。连接 Snapshot 副本后，您可以查看和修改内容，也可以断开连接。您还可以显示有关 Snapshot 副本的信息。</block>
  <block id="b262bf1ed738f3d3a87a2c2772bada36" category="summary">还原 Snapshot 副本时，请遵循相关准则。</block>
  <block id="4743885d741bd68463ca8d956058c2bc" category="doc">在主机集群环境中还原 Snapshot 副本的准则</block>
  <block id="d082f2db6ca93b03e58807a71b070ae3" category="list-text">可以从主机集群中的任何节点执行 SnapDrive snapshot restore` 命令。</block>
  <block id="354f861dee2ae8277ba81d7a5a896175" category="list-text">如果文件系统或磁盘组处于活动状态，则必须在主机集群中的所有节点之间共享这些文件系统或磁盘组。</block>
  <block id="40090b90a596c7aa8a41d4045fbe7fa6" category="list-text">如果任何 LUN 映射到主机集群以外的节点，则对共享文件系统或磁盘组执行 Snapshot 还原操作将失败。确保所有共享 LUN 均未映射到主机集群以外的节点。</block>
  <block id="2491981fd8058fe4a550dbfecf94833e" category="list-text">Snapshot 创建操作可以在专用文件系统或磁盘组上执行，但要在共享模式下还原 Snapshot 副本，您必须确保文件系统或磁盘组不会在主机集群中的任何节点上处于专用模式。否则， SnapDrive for UNIX 将出现错误。</block>
  <block id="de03b33d59b0a7038f8067a831cc93cf" category="list-text">如果主机集群中不存在文件系统或磁盘组，则 SnapDrive for UNIX 将从 Snapshot 副本创建 LUN ，并将其映射到主机集群中的所有节点，然后激活磁盘组和文件系统。将 LUN 映射到主机集群中的所有节点后， Veritas 集群卷管理器将刷新主机集群中所有节点之间的 LUN 信息。如果在刷新集群节点中 CVM 实例的 LUN 信息之前尝试激活磁盘组，则 Snapshot 还原操作可能会失败。要刷新 CVM ，必须重新发出 SnapDrive snap restore` 命令。</block>
  <block id="6c5f43379e61b0774725ff8aef1475fe" category="list-text">只有在满足以下条件时，才能在主机集群以外的节点上创建 Snapshot 副本并在集群中进行还原和共享：</block>
  <block id="d0fdead8f09c6787f739d7cfbe796e2d" category="list-text">文件系统或磁盘组在主机集群中的任何节点上均不处于专用模式。</block>
  <block id="118e619bf1b0e84f81497d62a5ff2019" category="list-text">LUN 对主机集群以外的节点不可见。</block>
  <block id="e3d3970b7f33705de9c63ccd0c9a90aa" category="list-text">您不能通过一次 Snapshot 还原操作在共享系统和专用系统上还原 Snapshot 副本。</block>
  <block id="4137c7f6ece11dae6c2eaf5d7d74aaa3" category="list-text">如果在发出 SnapDrive snap restore` 命令时使用了 ` -DeviceType` dedicated 选项，或者在共享磁盘组或文件系统上未指定 ` -DeviceType` 选项，则 SnapDrive for UNIX 会提醒您连接到多个节点的 LUN 已还原。</block>
  <block id="39bfd49dba94a5aaba24dcd0d15cd6f5" category="list-text">如果在创建 Snapshot 副本和还原 Snapshot 副本之间更改了磁盘组配置，则 SnapDrive for UNIX 会提醒您配置已更改。</block>
  <block id="ff72ff01398d068a8cd2ecc8fef6f77c" category="summary">SnapDrive for UNIX 支持存储配置和 Snapshot 管理选项来管理主机集群范围的存储。主机集群范围的共享存储包括 Solaris 主机上 SFRAC 环境中的磁盘组和文件系统。允许从主机集群中的任何节点执行所有操作。</block>
  <block id="cb90f5582967c376b20065319bcb96cb" category="doc">SnapDrive for UNIX 如何在主机集群模式 UNIX 系统上运行</block>
  <block id="b61bc7c6769a5548daba3a7bd7f3b627" category="paragraph">您可以从主节点在 Solaris 主机上运行 SnapDrive for UNIX 操作。在主机集群设置中，必须在主机集群的主节点上本地执行这些命令。为此，您必须确保必须为主机集群中的所有节点配置 root 用户的 `rsh` 或 `ssh access-without 密码提示符` 。</block>
  <block id="412db36805d9f81e1517c06fbff70fc8" category="admonition">如果在 SFRAC 环境中使用 SnapDrive for UNIX ，则所有用户的默认登录 Shell 应为 `bash` 。</block>
  <block id="f5b80877891164a8466ea52624d7a133" category="list-text">在 Linux 和 Solaris x86 子操作系统中支持光纤通道 RDM LUN</block>
  <block id="5bc643d04970cb62b82f271b5c5c9142" category="list-text">支持在 Solaris x86 架构中对原始 LUN 和原始文件系统执行 SnapDrive 命令</block>
  <block id="b481c92e1821f4174175218caebd7bae" category="list-text">您必须将 `snapdrive.conf` 文件中的 ` snapmirror-dest-multily-filervolums-enabled_` 变量设置为 "`on` " 。</block>
  <block id="ddf8db3765c096799615a96fcc727681" category="paragraph">磁盘组（` -dg _file_spec_` ）或卷组（` - vg _file_specs` ）</block>
  <block id="c409436dff17b8646718a95c3df44dc8" category="paragraph">支持的可配置项及其默认设置可能因主机操作系统和不同版本的 SnapDrive for UNIX 而异。例如，在 Solaris 上，默认路径为 ` /var/log/...`</block>
  <block id="671af64c61750f770d31d79a262723db" category="list-text">`on` 指定 SnapDrive for UNIX 在存储系统上不存在访问控制权限文件时启用所有访问权限。默认值为 on 。</block>
  <block id="dd192c562938f6a0f0e7b0c6f86eb2c5" category="paragraph">默认值取决于主机操作系统。示例中显示的路径是 Solaris 主机的默认路径。</block>
  <block id="e698c895625ddcc89f5700e6daa8ee8c" category="paragraph">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。Solaris 主机需要进行此准备。</block>
  <block id="d90955083d37330b63c93b9ca40d07f7" category="paragraph">如果主机集群中任何节点上的 SnapDrive for UNIX 操作超过您设置的值或默认值 600 秒（如果未设置值），则此操作将超时，并显示以下消息：</block>
  <block id="82ce15a15f6d94d0318ae0a3c85f5026" category="paragraph">`从节点 SFRA-57 上的远程执行命令超时。可能的原因是，该系统的超时值太小。您可以增加 SnapDrive.conf 文件中的集群连接超时时间。请手动执行必要的清理。此外，请检查是否可以将操作限制为可执行的较小作业，以便减少所需时间。`</block>
  <block id="1e00f47476f8f944a4201fddbcbf27be" category="paragraph">`default-transport=fcp`</block>
  <block id="3b970c4863be99a2a449ac221b0a3362" category="paragraph">指定 SnapDrive for UNIX 在创建存储时用作传输类型的协议（如果需要做出决定）。可接受的值为 iSCSI 或 FCP 。</block>
  <block id="f95770405a2c17c6b0b6e7d26299e2bd" category="admonition">如果 SnapDrive for UNIX 操作涉及共享磁盘组和文件系统，则必须为主机集群中所有节点上的 default-transport 变量指定 FCP 。否则，存储创建将失败。</block>
  <block id="352784089e3180371bfceff827ff4b94" category="admonition">此变量仅适用于需要主机准备才能为需要准备的 Solaris 主机创建 LUN 的系统。此变量仅用于包含 LUN 的配置。</block>
  <block id="534850a08725277489fa86b450b37bb5" category="paragraph">如果在 Snapshot 连接操作期间将此值设置为 `on` 或 `sync` ，并在 Snapshot 断开操作期间将其设置为 off ，则 SnapDrive for UNIX 不会删除 Snapshot 副本中的原始卷或 LUN 。</block>
  <block id="55e70c7bf9b7b7a188ac99d7903134e6" category="paragraph">`fsttype=VxFS for Solaris （ x86 ）， fsttype=UFS`</block>
  <block id="225109e5fa6537aefc2bde99226d0a06" category="paragraph">在 Solaris 上，默认值取决于主机运行的架构。可以是 `VxFS` 或 `UFS` 。</block>
  <block id="4ba2a1993b0f7b0f701bf52f809f7603" category="paragraph">对于 Solaris 10 更新版本 1 ，您可以设置 mpxio 值以使用 Solaris MPxIO 启用多路径。</block>
  <block id="351e4498317471ff6ef0a5a37600b45d" category="paragraph">要使用 MPxIO 启用多路径，必须在 ` _/kernel/drv/SCSI_vhci.conf` 文件中添加以下行：</block>
  <block id="93e2470f05a7427b7e61ade33a2fd0d0" category="paragraph">接下来，您应按照以下步骤执行重新配置启动以激活更改：</block>
  <block id="0432c2ec0182d53eafbdd31a8d8b528c" category="list-text">以 root 用户身份登录到控制台。</block>
  <block id="cc95d29fb0955179ca84379b6be78841" category="list-text">在 shell 提示符处，输入以下命令：</block>
  <block id="1ca14afc747f203cd3f71aa17da5bf11" category="paragraph">` * # shutdown -y -i0*`</block>
  <block id="b68d0e01ae99c7fe53189e10a875c476" category="list-text">在 OK 提示符处，输入以下命令：</block>
  <block id="c1868e9f7030f7194d31a121bb9b8f6d" category="paragraph">` * 确定 &gt; boot -r*`</block>
  <block id="b6e8058ffb4da0e1c0f024f7daf21c96" category="paragraph">如果 SnapDrive for UNIX 操作涉及共享磁盘组和文件系统，请将此变量设置为以下任一值：</block>
  <block id="9d4dcb0076d400ee3f9ddfa2811859be" category="list-text">如果不希望使用多路径，请将此值设置为 `none` 。</block>
  <block id="bcefd80af070379e96f1c6a1353ef263" category="list-text">如果要在具有多个多路径解决方案的系统上显式使用 VxDMP ，请将此值设置为 `DMP` 。</block>
  <block id="80c44851457b9c77d1b09caff5542a0e" category="admonition">确保在主机集群中的所有节点上将 ` multipathing-type_` 变量设置为相同的值。</block>
  <block id="ff2cabc74ce22b648eac529f0bfceb64" category="paragraph">默认值可能因操作系统而异。此路径是 Solaris 主机的默认路径。</block>
  <block id="c5865149b9d3c29b1f1b3c02c0e052ae" category="paragraph">`passwordfile="/opt/NTAPsnapdrive/.pwfile"`</block>
  <block id="fa1b9e1391b882f9c8a6ba64dc92a58f" category="paragraph">Solaris 的默认路径为 ` /opt/NTAPsnapdrive/.pwfile`</block>
  <block id="6de9a2e6824eb87e6b56add6b874c4af" category="paragraph">Linux 的默认路径为 ` /opt/NetApp/SnapDrive/.pwfile`</block>
  <block id="f928274d498a2207d07635dae7d18ba2" category="admonition">此变量仅适用于需要在创建 LUN 之前进行主机准备的系统。此变量仅用于包含 LUN 的配置。Solaris 主机需要进行此准备。</block>
  <block id="fd4a0ae99c53e97245285dc782975fb1" category="paragraph">默认值取决于主机操作系统。</block>
  <block id="0bb503f48c1e3fc2a72aea921542fb29" category="paragraph">将此变量设置为 on ，以启用 Snapshot 创建操作以创建有关 qtree 的 Snapshot 副本信息。默认值为 `off` （禁用）。</block>
  <block id="8c5f39fcbc6f6484a9fd976ffe5c6711" category="paragraph">如果 LUN 仍为 snapped 且位于 qtree 上，则 SnapDrive for UNIX 始终会尝试在 qtree 的根目录下写入 snapinfo 。如果将此变量设置为 on ，则 SnapDrive for UNIX 将在无法写入此数据时失败 Snapshot 创建操作。如果要使用 qtree SnapMirror 复制 Snapshot 副本，则只应将此变量设置为 `on` 。</block>
  <block id="f356e2af599ebd030f469fc1f5977d01" category="paragraph">将此变量设置为 on 可在成功执行 Snapshot 还原操作后删除所有回滚 Snapshot 副本。将其设置为 `off` 可禁用此功能。默认值为 `off` （已启用）。</block>
  <block id="e4431ee486308e583915e5aff04bd6d8" category="paragraph">将此值设置为 on 以创建回滚 Snapshot 副本，或者将 off 以禁用此功能。默认值为 `on` 。</block>
  <block id="61c836f38466782944546915b26a7073" category="paragraph">将此变量设置为 `on` ，以启用 SnapDrive snap restore` 命令来检查 SnapMirror 目标卷。如果设置为 `off` ，则 SnapDrive snap restore` 命令无法检查目标卷。默认值为 on 。</block>
  <block id="a7006ba1764f41238f2649697e69c32f" category="paragraph">将此变量设置为 on 以启用跟踪日志文件，或者将其设置为 `off` 以禁用。默认值为 `on` 。启用此文件不会影响性能。</block>
  <block id="7fbc37afbdb8a4e09466158445ef26dd" category="paragraph">此示例中显示的路径是 Solaris 主机的默认路径。</block>
  <block id="71c6ccc55035eb9b1404aecbae702428" category="paragraph">指定 SnapDrive for UNIX 应保存的旧跟踪日志文件数。达到此限制后， SnapDrive for UNIX 将在创建新文件时丢弃最旧的文件。此变量与 ` _tracelog-max-size_` 变量配合使用。默认情况下， ` trace-logmax-size=0_` 会在每个文件中保存一个命令，而 ` trace-log-save=100_` 会保留最后 100 个日志文件。</block>
  <block id="c4d98c480187efe9b3f352edf5e7275e" category="paragraph">指定是否希望 SnapDrive for UNIX 使用 SSL 加密（ HTTPS ）与 Operations Manager 进行通信。默认值为 on 。</block>
  <block id="cc6927ec0f24a579e851861566e951e1" category="paragraph">`use-efi-label = off`</block>
  <block id="6cf08a4f551dfe3a5a39fa5884719c3a" category="paragraph">指定是否要 SnapDrive 创建类型为 ` _solaris -efi_` 的 LUN 。</block>
  <block id="ddafb634bfdcb68e182ba649cd5eaf8e" category="paragraph">仅当此标签设置为 on ， ` lun-type_` of ` solaris efi_` 已创建，否则会创建 ` lun-type_` of ` solaris` 。 ``</block>
  <block id="a8371a6f96510d8e71b59a353838581a" category="paragraph">使用 Veritas 时，要创建 1 TB 以上的 LUN ，需要使用 ` lun-type_` 的 ` _solaris -efi_` 。</block>
  <block id="5057a9ad06b66778f351faa520c4f8c1" category="admonition">在采用 Emulex 主机总线适配器（ HBA ）配置的 Solaris 10 Update 10 中，如果 LUN 的 EFI 标签大于 1 TB ，则需要安装 Solaris 可扩展处理器架构（ SPARC ）修补程序 146019-02 （ SPARC ）或 146020 （ x86 ）。</block>
  <block id="d68ef220c56d5f4dc16b66be5755053f" category="paragraph">Solaris 的默认路径为 ` /opt/NTAPsnapdrive/.vifpw`</block>
  <block id="5ff354a65547c9fe8553096bcb294f85" category="paragraph">`适用于 Solaris （ SPARC ） vmtype=VxVM`</block>
  <block id="ee1836e748f7f57dccae9c5ce1af5e57" category="paragraph">`适用于 Solaris （ x86 ） vmtype=SVM`</block>
  <block id="72affb411f3bfc5a52bf5d1f91780daa" category="list-text">Solaris ： `VxVM`</block>
  <block id="f92c65a8eb26ffec525a25ab627d13c6" category="list-text">`off` —禁用 vbsr 选项并启用 SFSR 选项。默认值为 off 。</block>
  <block id="f15b3cad1331f1ed914fb8b1b423e8a1" category="summary">在 Solaris 主机上，直接在 LUN 上创建 UFS 文件系统失败。</block>
  <block id="93166340123e2dba83485ef0f15cd58d" category="doc">直接在 LUN 上创建文件系统失败</block>
  <block id="b95c094d2b021dee2352bf99bcb58037" category="paragraph">如果在同一个 Solaris 主机上同时安装了 UFS 和 Veritas 堆栈，并将 default-transport 配置变量设置为 ` iSCSI_` ，则 SnapDrive for UNIX 不会选择 UFS 作为直接在 LUN 上创建文件系统的默认文件系统。操作失败，并显示以下错误消息：</block>
  <block id="4796c86b9235b29fd866685afb8ff340" category="paragraph">使用 ` UFS` 值 `-fstype` 命令直接在 LUN 上创建 UFS 文件系统。</block>
  <block id="7e2c0012d03eca997958afc30893ea48" category="summary">要在 Solaris 主机上安装 SnapDrive for UNIX ，您必须确认已以 root 用户身份登录。如果您远程执行此文件，并且系统配置不允许以 root 用户身份登录，则可以使用 su 命令成为 root 用户。安装文件是一个标准 Solaris.pkg 文件。</block>
  <block id="5954148c08c9806b02087d7ff39a6810" category="doc">在 Solaris 主机上安装 SnapDrive for UNIX</block>
  <block id="406be28d746cfd895d60def6e7d58d68" category="paragraph">要在 Solaris 主机上安装 SnapDrive for UNIX ，您必须确认已以 root 用户身份登录。如果您要远程执行此文件，并且系统配置不允许以 root 用户身份登录，则可以使用 `su` 命令成为 root 用户。安装文件是一个标准 Solaris.pkg 文件。</block>
  <block id="4b003778aa5211f3e3e45a8d318211a8" category="paragraph">请确保不要删除安装 SnapDrive for UNIX 的目录。如果删除目录，则启动和停止守护进程可能会出现问题。在安装适用于 UNIX 的 SnapDrive 之前，您还应安装 Solaris Host Utilities 。</block>
  <block id="e62590a6d4117754c6efc4acac824b83" category="paragraph">在稀疏根区域中， SnapDrive for UNIX 安装只能部分成功，因为某些文件系统在稀疏根区域中具有只读访问权限。为了避免这种情况，您可以在全局区域中创建一些符号链接，以便这些链接可供稀疏根区域使用。</block>
  <block id="a5d8457b9d109e2f84488fbef293e84c" category="paragraph">`ln -s /opt/NTAPsnapdrive/bin/SnapDrive /usr/bin/SnapDrive`</block>
  <block id="5a05d928cfc84d63de8ba1b32fae4050" category="paragraph">`ln -s /opt/NTAPsnapdrive/bin/SnapDrive /usr/sbin/SnapDrive`</block>
  <block id="ec1d7cec8ca8b38fe0eff1758ef13185" category="paragraph">`ln -s /opt/NTAPsnapdrive/bin/snapdrived /usr/sbin/snapdrived`</block>
  <block id="5c23e4c263fe6593443c664573658872" category="list-text">转到 Solaris 主机上存放从 NetApp 支持站点下载的软件的目录。</block>
  <block id="9ba6bc498e31d0e8433667d68fe13692" category="list-text">输入以下命令以安装 SnapDrive for UNIX ：</block>
  <block id="15c1aef1b2eca7dc69329b28b221d793" category="paragraph">` * 。 /install*`</block>
  <block id="cf51ff1f3aac4a32fd96b1c884d4326e" category="paragraph">此脚本可毫无问题地安装 SnapDrive for UNIX 软件。它会将安装信息写入日志文件。</block>
  <block id="e57ca9ec23abda3565ae82c63456de81" category="list-text">存储系统的登录信息。</block>
  <block id="5490dbd5b2667a593a432d65bc4a9958" category="list-text">AutoSupport 设置（ AutoSupport 是一项可选功能，但建议您启用它）。</block>
  <block id="2632aea73ce12aeba9661d97b5101391" category="list-text">`devfsadm -CV`</block>
  <block id="a55e33a4286bbe209ea8cfd0fb1e8791" category="list-text">如果使用 snap connect 命令指定 `autorename` 选项，则主机卷和文件系统始终会重命名。只有当磁盘组已位于主机上时，才会对其进行重命名。</block>
  <block id="90299f5bf82ed7c3b1eccbd3eea8c8b8" category="paragraph">` * SnapDrive storage disconnect ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec..._] （ ｛ -dg _ -fs _ -hostvol ｝ _file_spec_ [_file_spec...] ..._] [-full] [-fstype _type_] [-vmtype _type_]*`</block>
  <block id="8903e429004445bffc8b3d282f63aa42" category="paragraph">在对 `storage create` 操作使用 SnapDrive storage create 命令时，应遵循特定准则。</block>
  <block id="860ad9eee9ebb9fc2b99d46da59517ca" category="list-text">如果同时安装了 UFS 和 Veritas 堆栈，则应使用值 `UFS` with the ` -fstype` 选项直接在 LUN 上创建 UFS 文件系统。</block>
  <block id="d19b13c4ceb898f36a4e39fadc232599" category="paragraph">挂载 FlexVol 卷时，会在 ` /` /etc/exports file` 中添加一个条目。在 NFS 环境中， SnapDrive for UNIX 失败，并生成错误消息。</block>
  <block id="3ff5a7aa4afb6735b72f7d065d3068bd" category="list-text">将 `nfs.export.auto-update` 选项 `设置为 on` ，以便自动更新 /etc/exports 文件。</block>
  <block id="d7e4ad4d8b29cac7b954e35f5f26008d" category="summary">在 Solaris 10 主机上，如果文件系统在重新启动后无法挂载，则操作系统和集群将无法启动。</block>
  <block id="3260f10fa7efb6a3d37108b0b8604852" category="doc">重新启动主机后，操作系统和集群服务无法启动</block>
  <block id="f945828b887c2b3f4c02b3b4605e0360" category="paragraph">重新启动 Solaris 10 主机后，如果服务 `svc ： /system/filesystems/local` 无法挂载以下任何文件系统，则相关操作系统或集群服务不会启动。</block>
  <block id="8d73b0d5f7eda070b62932c1b82d740e" category="list-text">本地文件系统</block>
  <block id="6d28dc6034ebf5da150b6a095d89910d" category="list-text">共享文件系统</block>
  <block id="2ee3bf331c1bfb97e255ef9e60d17312" category="admonition">上述文件系统必须由适用于 UNIX 的 SnapDrive 创建。</block>
  <block id="73d29c114aefa12c2e141417b5db4fa0" category="list-text">使用以下命令查找重新启动后无法启动的服务：</block>
  <block id="99b7a10ff258ffb6376ee7e0b077f124" category="paragraph">`svcs -vx /network/inetd`</block>
  <block id="c26fe677a830587ef1c141567a86c86a" category="paragraph">* 示例： *</block>
  <block id="ccec5ee868ad413b9fb613c84330ef90" category="list-text">如果 `s服务 / 系统 / 文件系统 / 本地： default` 失败，请使用以下命令查找无法挂载的永久性文件系统：</block>
  <block id="40e5bbd732827229bc434e4680b53e16" category="paragraph">`tail /var/svt/log/system-filesysteme-local ： default.log`</block>
  <block id="e869816ddcdea66e7edbf7ea7a68aec8" category="list-text">对重新启动主机后无法挂载的文件系统的 ` /etc/vfstab` 中的条目进行注释。</block>
  <block id="be4cd342fd16ca69ef4748039c80e9a0" category="list-text">执行以下命令，重新启动操作系统服务： `svc ： /system/filesystey/local ： default` ：</block>
  <block id="47dd1a2982083dd27eaeb44e24e64f4e" category="list-text">`svcadm disable`</block>
  <block id="e1a4afb15e6fa778b588003dfada9053" category="paragraph">`svc ： /system/filesystems/local ： default`</block>
  <block id="9f682a0135bc5051b98c82107c9c3900" category="list-text">`svcadm enable`</block>
  <block id="3b6a71568a52a51695e506ff16797108" category="paragraph">操作系统和集群服务将启动。</block>
  <block id="4e562aff317488f079cbdef2d1c0f747" category="list-text">对于无法挂载的本地文件系统，请完成以下步骤：</block>
  <block id="ccd6fb21874f86cbde9643903a2389b7" category="list-text">手动挂载文件系统。</block>
  <block id="9943abf5b1948e5ac7026ae40a6a53d8" category="list-text">取消注释 ` /etc/vfstab` 条目。</block>
  <block id="e4cdf3168d307f2e78be72ec7c821264" category="list-text">对于集群服务，请完成以下步骤：</block>
  <block id="a2aaa6f6a3f10d64c04ec6b76dd73c8d" category="list-text">使用 `cfsmount` 命令检查共享文件系统是否已正确挂载。</block>
  <block id="b01bd65eabb528bdb425903aff411421" category="list-text">在该文件系统的所有集群节点上取消注释 ` /etc/vfstab` 条目。</block>
  <block id="5958114ec5dd4dd1a4e28944a7d9581c" category="list-text">如果在完成上述步骤后本地或集群文件系统仍无法挂载，请联系 NetApp 技术支持。</block>
  <block id="a862897fffd736b3118277a812871149" category="summary">在主机集群环境中使用 SnapDrive storage connect 命令之前，必须遵循一些准则。</block>
  <block id="db68f6ab13091e2e67e3e97974319d07" category="doc">主机集群环境中的存储连接准则</block>
  <block id="920d03794520c05526a52da662050668" category="paragraph">在主机集群环境中使用 SnapDrive storage connect` 命令之前，必须遵循一些准则。</block>
  <block id="0100713f98a7db89be6ac2d4c3e25454" category="list-text">如果向使用共享磁盘组或文件系统的主机集群配置添加了新节点，请使用 SnapDrive storage connect -DeviceType shared` 命令。您可以从主机集群中的任何节点执行 SnapDrive 存储连接操作。</block>
  <block id="6a9816b517a3364e1ee919b81353b31c" category="list-text">要成功执行存储连接操作，不应发生以下情况：</block>
  <block id="aa79939cfe3e452ba83357fa9668282f" category="list-text">您可以使用 ` -DeviceType dedicated` 选项或在命令行语法中省略 ` -DeviceType` 选项来连接到特定节点上的存储实体，因为默认值为 dedicated 。</block>
  <block id="52d7df914add5119fb4e4aae9fd2307f" category="list-text">在使用 Veritas 卷管理器和 Veritas 文件系统（ VxFS ）的磁盘组上，可以在主机集群范围内连接文件系统。此操作不支持对原始 LUN 执行；也就是说，不支持 ` -nolvm` 选项。</block>
  <block id="42e401669a038375dd4c6f9185a1a244" category="list-text">SnapDrive storage connect` 命令不支持 ` -igroup` 选项。</block>
  <block id="e4e1b1202e56ebc8337b8f4b9ffd91ec" category="list-text">如果满足以下任一条件，则存储连接操作将失败：</block>
  <block id="cdbed91926f09a8af40506095285fcf0" category="list-text">在连接存储实体的过程中发生任何错误。SnapDrive for UNIX 从主机集群中的主节点执行此操作。在创建共享存储实体之前，它会创建 LUN ，将 LUN 映射到主节点，然后将 LUN 映射到所有非主节点。SnapDrive for UNIX 在内部为所有节点创建和管理 igroup 。</block>
  <block id="1dfb1dba409dee84a4df242eaa076b7a" category="list-text">如果在启动集群卷管理器（ CVM ）之前主机集群中的某个节点关闭并重新启动，则应在此节点上发现 LUN 使用的共享磁盘组。默认情况下，如果 FC 端口地址未更改，则 LUN 可见；否则，必须使用 SnapDrive storage connect` 命令映射 LUN 。</block>
  <block id="7db6986668dc8047eb59ae4f30e03184" category="list-text">只有当存储实体不在任何主机集群节点上时，您才能对使用专用存储实体数据创建并随后断开连接的 LUN 上的存储实体执行共享存储连接操作。</block>
  <block id="7c9dd25323a7389b1c6b46c6204b3345" category="list-text">只有当当前节点不是主机集群的一部分或存储实体不在主机集群上时，您才能对具有共享存储实体元数据的 LUN 上的存储实体执行专用存储连接操作。</block>
  <block id="9b64f99779b82d3a9d491539d0a4945f" category="paragraph">` * SnapDrive snap connect _fspec_set_ [_fspec_set..._] -snapname _long_snap_name_ [-DeviceType shared] [-spared]*`</block>
  <block id="82fc15854229440d63b76181197a20d6" category="paragraph">在此语法中， ` fspec_set_` 为： ` ｛ -dg _ -fs ｝ _src_file_spec_ [_dest_file_spec_ ] （ -destdg _dgname_ ）`</block>
  <block id="d3c935f3561e06333a0c72b52eb2f13a" category="paragraph">以下示例将连接到一个 Snapshot 副本，该副本包含发起主机集群上的共享存储实体。此操作从非集群主节点执行，但此命令会发送到主节点并执行：</block>
  <block id="b2099c61647556c0c01410d6e1adef24" category="paragraph">以下示例将连接到一个 Snapshot 副本，该副本包含非发起主机集群上的共享存储实体。此操作从非集群主节点执行，但此命令会发送到主节点并执行：</block>
  <block id="46406058f8fda8c255a7cb413d49a338" category="summary">SnapDrive for UNIX 必须确保子系统已准备好与存储系统进行通信。</block>
  <block id="91d85563de77f9160372a07b2c18f006" category="doc">验证子系统是否已准备就绪</block>
  <block id="3ea50490eade9383ee22436d04d4dc98" category="paragraph">确保适用于 VMware vSphere 的 NetApp Virtual Storage Console 的备份和恢复功能已安装在 Windows 系统中并已注册到 vCenter 中。</block>
  <block id="d426f1f95d4ef0d092264fbd5fcfa965" category="paragraph">只有 RDM FC LUN 才需要 NetApp Virtual Storage Console 配置。</block>
  <block id="6683e2a7b42cfcbce81793b9bc4a57fa" category="paragraph">` * SnapDrive 配置集 -viadmin 用户 viadmin_name*`</block>
  <block id="1399bbe8b4bfcd6e31ac0d33923053ee" category="paragraph">命令完成后，您可以运行 SnapDrive storage show -all` 命令来确认子系统是否可以与存储系统进行通信。</block>
  <block id="d8a9f952a98500beff5801aa3e650c49" category="paragraph">` * SnapDrive storage create -fs _file_spec_ -nolvm "-fstype _type_] （ -vmtype 类型） "-fsopts _options_] （ -mntopts _options_） "-lun _long_lun_name_ -lunsize _size_name_ [_ig_name..._noresreserve]` -reserve ｝</block>
  <block id="6f4e4d9fbe846fd8bf7decf7dcffbd63" category="inline-link">NetApp 文档</block>
  <block id="8e234660a6241c6841e6ebafbb398279" category="paragraph"><block ref="8e234660a6241c6841e6ebafbb398279" category="inline-link-rx"></block></block>
  <block id="8cf04a9734132302f96da8e113e80ce5" category="sidebar">主页</block>
  <block id="7d0ee6fed10d3d4e5c9ee496729ab519" category="sidebar">发行说明</block>
  <block id="f7727332f5cda9b558cd03675b9eaba1" category="sidebar">安装和设置适用于集群模式 Data ONTAP 的 Linux</block>
  <block id="5050902e1a0319f5bdaa2f25d3c353ce" category="sidebar">适用于在 7- 模式下运行的 Data ONTAP 的 Linux 安装和设置</block>
  <block id="f8627092c31ff43a006814ef7cf773a5" category="sidebar">适用于 Linux 的管理</block>
  <block id="42bd37a4c5629f76f268e0de7f45570f" category="sidebar">适用于 Solaris 的安装和管理</block>
  <block id="80dd8a6d27a4c1b305d26c223c52a9a7" category="sidebar">适用于 IBM AIX 的安装和管理</block>
  <block id="45f4423b7c470ea0d04be6d812ad5996" category="paragraph">要成功执行SnapDrive for UNIX操作、您必须设置Storage Virtual Machine (SVM、以前称为Vserver)。</block>
  <block id="00930ba81ea27b6c62845d08e0500327" category="paragraph"><block ref="7affedb2caa000166a46aed3d9bd1a06" prefix="" category="inline-code"></block></block>
  <block id="1483ad74a09b4a3124c82e285d93ae63" category="admonition"><block ref="992dacfc30bbe144d7e60d29d7bbd430" prefix="" category="inline-code"></block> 是SVM的名称、必须将其映射到管理LIF IP地址。</block>
  <block id="2a7e0c5b8e814e03c21799cbb69f2d18" category="paragraph"><block ref="2a7e0c5b8e814e03c21799cbb69f2d18" category="inline-link-rx"></block></block>
</blocks>